var Wk=Object.create;var Pu=Object.defineProperty;var jk=Object.getOwnPropertyDescriptor;var Xk=Object.getOwnPropertyNames;var Yk=Object.getPrototypeOf,Vk=Object.prototype.hasOwnProperty;var Li=(r,t)=>()=>(r&&(t=r(r=0)),t);var Vi=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Du=(r,t)=>{for(var e in t)Pu(r,e,{get:t[e],enumerable:!0})},Uk=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Xk(t))!Vk.call(r,s)&&s!==e&&Pu(r,s,{get:()=>t[s],enumerable:!(i=jk(t,s))||i.enumerable});return r};var De=(r,t,e)=>(e=r!=null?Wk(Yk(r)):{},Uk(t||!r||!r.__esModule?Pu(e,"default",{value:r,enumerable:!0}):e,r));var Pr,Ll=Li(()=>{Pr={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0}});var Et,dn=Li(()=>{Ll();Et={log(...r){this.enabled&&(r.push(Date.now()),Pr.logger.log("[ActionCable]",...r))}}});var Oo,Ml,No,Rl,Ad=Li(()=>{dn();Oo=()=>new Date().getTime(),Ml=r=>(Oo()-r)/1e3,No=class{constructor(t){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=t,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=Oo(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),Et.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=Oo(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),Et.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordMessage(){this.pingedAt=Oo()}recordConnect(){this.reconnectAttempts=0,delete this.disconnectedAt,Et.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=Oo(),Et.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:t,reconnectionBackoffRate:e}=this.constructor,i=Math.pow(1+e,Math.min(this.reconnectAttempts,10)),n=(this.reconnectAttempts===0?1:e)*Math.random();return t*1e3*i*(1+n)}reconnectIfStale(){this.connectionIsStale()&&(Et.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${Ml(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?Et.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${Ml(this.disconnectedAt)} s`):(Et.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return Ml(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&Ml(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(Et.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};No.staleThreshold=6;No.reconnectionBackoffRate=.15;Rl=No});var Po,kd=Li(()=>{Po={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var Do,Sd,sC,$b,Fo,Il,Cd=Li(()=>{Ll();Ad();kd();dn();({message_types:Do,protocols:Sd}=Po),sC=Sd.slice(0,Sd.length-1),$b=[].indexOf,Fo=class{constructor(t){this.open=this.open.bind(this),this.consumer=t,this.subscriptions=this.consumer.subscriptions,this.monitor=new Rl(this),this.disconnected=!0}send(t){return this.isOpen()?(this.webSocket.send(JSON.stringify(t)),!0):!1}open(){if(this.isActive())return Et.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let t=[...Sd,...this.consumer.subprotocols||[]];return Et.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${t}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new Pr.WebSocket(this.consumer.url,t),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:t}={allowReconnect:!0}){if(t||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(Et.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(t){Et.log("Failed to reopen WebSocket",t)}finally{Et.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return $b.call(sC,this.getProtocol())>=0}isState(...t){return $b.call(t,this.getState())>=0}getState(){if(this.webSocket){for(let t in Pr.WebSocket)if(Pr.WebSocket[t]===this.webSocket.readyState)return t.toLowerCase()}return null}installEventHandlers(){for(let t in this.events){let e=this.events[t].bind(this);this.webSocket[`on${t}`]=e}}uninstallEventHandlers(){for(let t in this.events)this.webSocket[`on${t}`]=function(){}}};Fo.reopenDelay=500;Fo.prototype.events={message(r){if(!this.isProtocolSupported())return;let{identifier:t,message:e,reason:i,reconnect:s,type:n}=JSON.parse(r.data);switch(this.monitor.recordMessage(),n){case Do.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case Do.disconnect:return Et.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:s});case Do.ping:return null;case Do.confirmation:return this.subscriptions.confirmSubscription(t),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(t,"connected",{reconnected:!0})):this.subscriptions.notify(t,"connected",{reconnected:!1});case Do.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",e)}},open(){if(Et.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return Et.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(r){if(Et.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){Et.log("WebSocket onerror event")}};Il=Fo});var nC,ms,Ed=Li(()=>{nC=function(r,t){if(t!=null)for(let e in t){let i=t[e];r[e]=i}return r},ms=class{constructor(t,e={},i){this.consumer=t,this.identifier=JSON.stringify(e),nC(this,i)}perform(t,e={}){return e.action=t,this.send(e)}send(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var Td,ql,Ld=Li(()=>{dn();Td=class{constructor(t){this.subscriptions=t,this.pendingSubscriptions=[]}guarantee(t){this.pendingSubscriptions.indexOf(t)==-1?(Et.log(`SubscriptionGuarantor guaranteeing ${t.identifier}`),this.pendingSubscriptions.push(t)):Et.log(`SubscriptionGuarantor already guaranteeing ${t.identifier}`),this.startGuaranteeing()}forget(t){Et.log(`SubscriptionGuarantor forgetting ${t.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(e=>e!==t)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(t=>{Et.log(`SubscriptionGuarantor resubscribing ${t.identifier}`),this.subscriptions.subscribe(t)})},500)}},ql=Td});var bs,Md=Li(()=>{Ed();Ld();dn();bs=class{constructor(t){this.consumer=t,this.guarantor=new ql(this),this.subscriptions=[]}create(t,e){let i=t,s=typeof i=="object"?i:{channel:i},n=new ms(this.consumer,s,e);return this.add(n)}add(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.subscribe(t),t}remove(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t}reject(t){return this.findAll(t).map(e=>(this.forget(e),this.notify(e,"rejected"),e))}forget(t){return this.guarantor.forget(t),this.subscriptions=this.subscriptions.filter(e=>e!==t),t}findAll(t){return this.subscriptions.filter(e=>e.identifier===t)}reload(){return this.subscriptions.map(t=>this.subscribe(t))}notifyAll(t,...e){return this.subscriptions.map(i=>this.notify(i,t,...e))}notify(t,e,...i){let s;return typeof t=="string"?s=this.findAll(t):s=[t],s.map(n=>typeof n[e]=="function"?n[e](...i):void 0)}subscribe(t){this.sendCommand(t,"subscribe")&&this.guarantor.guarantee(t)}confirmSubscription(t){Et.log(`Subscription confirmed ${t}`),this.findAll(t).map(e=>this.guarantor.forget(e))}sendCommand(t,e){let{identifier:i}=t;return this.consumer.send({command:e,identifier:i})}}});function Rd(r){if(typeof r=="function"&&(r=r()),r&&!/^wss?:/i.test(r)){let t=document.createElement("a");return t.href=r,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href}else return r}var fn,Kb=Li(()=>{Cd();Md();fn=class{constructor(t){this._url=t,this.subscriptions=new bs(this),this.connection=new Il(this),this.subprotocols=[]}get url(){return Rd(this._url)}send(t){return this.connection.send(t)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(t){this.subprotocols=[...this.subprotocols,t]}}});var Jb={};Du(Jb,{Connection:()=>Il,ConnectionMonitor:()=>Rl,Consumer:()=>fn,INTERNAL:()=>Po,Subscription:()=>ms,SubscriptionGuarantor:()=>ql,Subscriptions:()=>bs,adapters:()=>Pr,createConsumer:()=>oC,createWebSocketURL:()=>Rd,getConfig:()=>Zb,logger:()=>Et});function oC(r=Zb("url")||Po.default_mount_path){return new fn(r)}function Zb(r){let t=document.head.querySelector(`meta[name='action-cable-${r}']`);if(t)return t.getAttribute("content")}var Qb=Li(()=>{Cd();Ad();Kb();kd();Ed();Md();Ld();Ll();dn()});var Sv=Vi((Xl,uf)=>{(function(r,t){typeof Xl=="object"&&typeof uf=="object"?uf.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Xl=="object"?Xl.Pickr=t():r.Pickr=t()})(self,()=>(()=>{"use strict";var r={d:(N,E)=>{for(var I in E)r.o(E,I)&&!r.o(N,I)&&Object.defineProperty(N,I,{enumerable:!0,get:E[I]})},o:(N,E)=>Object.prototype.hasOwnProperty.call(N,E),r:N=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})}},t={};r.d(t,{default:()=>z});var e={};function i(N,E,I,S,R={}){E instanceof HTMLCollection||E instanceof NodeList?E=Array.from(E):Array.isArray(E)||(E=[E]),Array.isArray(I)||(I=[I]);for(let L of E)for(let q of I)L[N](q,S,{capture:!1,...R});return Array.prototype.slice.call(arguments,1)}r.r(e),r.d(e,{adjustableInputNumbers:()=>h,createElementFromString:()=>o,createFromTemplate:()=>a,eventPath:()=>l,off:()=>n,on:()=>s,resolveElement:()=>c});let s=i.bind(null,"addEventListener"),n=i.bind(null,"removeEventListener");function o(N){let E=document.createElement("div");return E.innerHTML=N.trim(),E.firstElementChild}function a(N){let E=(S,R)=>{let L=S.getAttribute(R);return S.removeAttribute(R),L},I=(S,R={})=>{let L=E(S,":obj"),q=E(S,":ref"),T=L?R[L]={}:R;q&&(R[q]=S);for(let k of Array.from(S.children)){let D=E(k,":arr"),X=I(k,D?{}:T);D&&(T[D]||(T[D]=[])).push(Object.keys(X).length?X:k)}return R};return I(o(N))}function l(N){let E=N.path||N.composedPath&&N.composedPath();if(E)return E;let I=N.target.parentElement;for(E=[N.target,I];I=I.parentElement;)E.push(I);return E.push(document,window),E}function c(N){return N instanceof Element?N:typeof N=="string"?N.split(/>>/g).reduce((E,I,S,R)=>(E=E.querySelector(I),S<R.length-1?E.shadowRoot:E),document):null}function h(N,E=I=>I){function I(S){let R=[.001,.01,.1][Number(S.shiftKey||2*S.ctrlKey)]*(S.deltaY<0?1:-1),L=0,q=N.selectionStart;N.value=N.value.replace(/[\d.]+/g,(T,k)=>k<=q&&k+T.length>=q?(q=k,E(Number(T),R,L)):(L++,T)),N.focus(),N.setSelectionRange(q,q),S.preventDefault(),N.dispatchEvent(new Event("input"))}s(N,"focus",()=>s(window,"wheel",I,{passive:!1})),s(N,"blur",()=>n(window,"wheel",I))}let{min:u,max:d,floor:f,round:g}=Math;function p(N,E,I){E/=100,I/=100;let S=f(N=N/360*6),R=N-S,L=I*(1-E),q=I*(1-R*E),T=I*(1-(1-R)*E),k=S%6;return[255*[I,q,L,L,T,I][k],255*[T,I,I,q,L,L][k],255*[L,L,T,I,I,q][k]]}function b(N,E,I){let S=(2-(E/=100))*(I/=100)/2;return S!==0&&(E=S===1?0:S<.5?E*I/(2*S):E*I/(2-2*S)),[N,100*E,100*S]}function m(N,E,I){let S=u(N/=255,E/=255,I/=255),R=d(N,E,I),L=R-S,q,T;if(L===0)q=T=0;else{T=L/R;let k=((R-N)/6+L/2)/L,D=((R-E)/6+L/2)/L,X=((R-I)/6+L/2)/L;N===R?q=X-D:E===R?q=1/3+k-X:I===R&&(q=2/3+D-k),q<0?q+=1:q>1&&(q-=1)}return[360*q,100*T,100*R]}function x(N,E,I,S){return E/=100,I/=100,[...m(255*(1-u(1,(N/=100)*(1-(S/=100))+S)),255*(1-u(1,E*(1-S)+S)),255*(1-u(1,I*(1-S)+S)))]}function v(N,E,I){E/=100;let S=2*(E*=(I/=100)<.5?I:1-I)/(I+E)*100,R=100*(I+E);return[N,isNaN(S)?0:S,R]}function w(N){return m(...N.match(/.{2}/g).map(E=>parseInt(E,16)))}function y(N){N=N.match(/^[a-zA-Z]+$/)?function(R){if(R.toLowerCase()==="black")return"#000";let L=document.createElement("canvas").getContext("2d");return L.fillStyle=R,L.fillStyle==="#000"?null:L.fillStyle}(N):N;let E={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},I=R=>R.map(L=>/^(|\d+)\.\d+|\d+$/.test(L)?Number(L):void 0),S;t:for(let R in E)if(S=E[R].exec(N))switch(R){case"cmyk":{let[,L,q,T,k]=I(S);if(L>100||q>100||T>100||k>100)break t;return{values:x(L,q,T,k),type:R}}case"rgba":{let[,L,,q,,T,,,k]=I(S);if(L=S[2]==="%"?L/100*255:L,q=S[4]==="%"?q/100*255:q,T=S[6]==="%"?T/100*255:T,k=S[9]==="%"?k/100:k,L>255||q>255||T>255||k<0||k>1)break t;return{values:[...m(L,q,T),k],a:k,type:R}}case"hexa":{let[,L]=S;L.length!==4&&L.length!==3||(L=L.split("").map(k=>k+k).join(""));let q=L.substring(0,6),T=L.substring(6);return T=T?parseInt(T,16)/255:void 0,{values:[...w(q),T],a:T,type:R}}case"hsla":{let[,L,q,T,,k]=I(S);if(k=S[6]==="%"?k/100:k,L>360||q>100||T>100||k<0||k>1)break t;return{values:[...v(L,q,T),k],a:k,type:R}}case"hsva":{let[,L,q,T,,k]=I(S);if(k=S[6]==="%"?k/100:k,L>360||q>100||T>100||k<0||k>1)break t;return{values:[L,q,T,k],a:k,type:R}}}return{values:null,type:null}}function A(N=0,E=0,I=0,S=1){let R=(q,T)=>(k=-1)=>T(~k?q.map(D=>Number(D.toFixed(k))):q),L={h:N,s:E,v:I,a:S,toHSVA(){let q=[L.h,L.s,L.v,L.a];return q.toString=R(q,T=>`hsva(${T[0]}, ${T[1]}%, ${T[2]}%, ${L.a})`),q},toHSLA(){let q=[...b(L.h,L.s,L.v),L.a];return q.toString=R(q,T=>`hsla(${T[0]}, ${T[1]}%, ${T[2]}%, ${L.a})`),q},toRGBA(){let q=[...p(L.h,L.s,L.v),L.a];return q.toString=R(q,T=>`rgba(${T[0]}, ${T[1]}, ${T[2]}, ${L.a})`),q},toCMYK(){let q=function(T,k,D){let X=p(T,k,D),H=X[0]/255,G=X[1]/255,W=X[2]/255,Y=u(1-H,1-G,1-W);return[100*(Y===1?0:(1-H-Y)/(1-Y)),100*(Y===1?0:(1-G-Y)/(1-Y)),100*(Y===1?0:(1-W-Y)/(1-Y)),100*Y]}(L.h,L.s,L.v);return q.toString=R(q,T=>`cmyk(${T[0]}%, ${T[1]}%, ${T[2]}%, ${T[3]}%)`),q},toHEXA(){let q=function(k,D,X){return p(k,D,X).map(H=>g(H).toString(16).padStart(2,"0"))}(L.h,L.s,L.v),T=L.a>=1?"":Number((255*L.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return T&&q.push(T),q.toString=()=>`#${q.join("").toUpperCase()}`,q},clone:()=>A(L.h,L.s,L.v,L.a)};return L}let C=N=>Math.max(Math.min(N,1),0);function M(N){let E={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},N),_keyboard(L){let{options:q}=E,{type:T,key:k}=L;if(document.activeElement===q.wrapper){let{lock:D}=E.options,X=k==="ArrowUp",H=k==="ArrowRight",G=k==="ArrowDown",W=k==="ArrowLeft";if(T==="keydown"&&(X||H||G||W)){let Y=0,$=0;D==="v"?Y=X||H?1:-1:D==="h"?Y=X||H?-1:1:($=X?-1:G?1:0,Y=W?-1:H?1:0),E.update(C(E.cache.x+.01*Y),C(E.cache.y+.01*$)),L.preventDefault()}else k.startsWith("Arrow")&&(E.options.onstop(),L.preventDefault())}},_tapstart(L){s(document,["mouseup","touchend","touchcancel"],E._tapstop),s(document,["mousemove","touchmove"],E._tapmove),L.cancelable&&L.preventDefault(),E._tapmove(L)},_tapmove(L){let{options:q,cache:T}=E,{lock:k,element:D,wrapper:X}=q,H=X.getBoundingClientRect(),G=0,W=0;if(L){let rt=L&&L.touches&&L.touches[0];G=L?(rt||L).clientX:0,W=L?(rt||L).clientY:0,G<H.left?G=H.left:G>H.left+H.width&&(G=H.left+H.width),W<H.top?W=H.top:W>H.top+H.height&&(W=H.top+H.height),G-=H.left,W-=H.top}else T&&(G=T.x*H.width,W=T.y*H.height);k!=="h"&&(D.style.left=`calc(${G/H.width*100}% - ${D.offsetWidth/2}px)`),k!=="v"&&(D.style.top=`calc(${W/H.height*100}% - ${D.offsetHeight/2}px)`),E.cache={x:G/H.width,y:W/H.height};let Y=C(G/H.width),$=C(W/H.height);switch(k){case"v":return q.onchange(Y);case"h":return q.onchange($);default:return q.onchange(Y,$)}},_tapstop(){E.options.onstop(),n(document,["mouseup","touchend","touchcancel"],E._tapstop),n(document,["mousemove","touchmove"],E._tapmove)},trigger(){E._tapmove()},update(L=0,q=0){let{left:T,top:k,width:D,height:X}=E.options.wrapper.getBoundingClientRect();E.options.lock==="h"&&(q=L),E._tapmove({clientX:T+D*L,clientY:k+X*q})},destroy(){let{options:L,_tapstart:q,_keyboard:T}=E;n(document,["keydown","keyup"],T),n([L.wrapper,L.element],"mousedown",q),n([L.wrapper,L.element],"touchstart",q,{passive:!1})}},{options:I,_tapstart:S,_keyboard:R}=E;return s([I.wrapper,I.element],"mousedown",S),s([I.wrapper,I.element],"touchstart",S,{passive:!1}),s(document,["keydown","keyup"],R),E}function O(N={}){N=Object.assign({onchange:()=>0,className:"",elements:[]},N);let E=s(N.elements,"click",I=>{N.elements.forEach(S=>S.classList[I.target===S?"add":"remove"](N.className)),N.onchange(I),I.stopPropagation()});return{destroy:()=>n(...E)}}let B={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},_=(N,E,I)=>{let S=typeof N!="object"||N instanceof HTMLElement?{reference:N,popper:E,...I}:N;return{update(R=S){let{reference:L,popper:q}=Object.assign(S,R);if(!q||!L)throw new Error("Popper- or reference-element missing.");return((T,k,D)=>{let{container:X,arrow:H,margin:G,padding:W,position:Y,variantFlipOrder:$,positionFlipOrder:rt}={container:document.documentElement.getBoundingClientRect(),...B,...D},{left:nt,top:lt}=k.style;k.style.left="0",k.style.top="0";let ct=T.getBoundingClientRect(),ot=k.getBoundingClientRect(),ht={t:ct.top-ot.height-G,b:ct.bottom+G,r:ct.right+G,l:ct.left-ot.width-G},qt={vs:ct.left,vm:ct.left+ct.width/2-ot.width/2,ve:ct.left+ct.width-ot.width,hs:ct.top,hm:ct.bottom-ct.height/2-ot.height/2,he:ct.bottom-ot.height},[ce,he="middle"]=Y.split("-"),ne=rt[ce],Pe=$[he],{top:oe,left:hs,bottom:us,right:Cr}=X;for(let Ue of ne){let Ae=Ue==="t"||Ue==="b",ue=ht[Ue],[zi,Hi]=Ae?["top","left"]:["left","top"],[Er,Ci]=Ae?[ot.height,ot.width]:[ot.width,ot.height],[Tr,Lr]=Ae?[us,Cr]:[Cr,us],[Mr,mi]=Ae?[oe,hs]:[hs,oe];if(!(ue<Mr||ue+Er+W>Tr))for(let Wi of Pe){let ji=qt[(Ae?"v":"h")+Wi];if(!(ji<mi||ji+Ci+W>Lr)){if(ji-=ot[Hi],ue-=ot[zi],k.style[Hi]=`${ji}px`,k.style[zi]=`${ue}px`,H){let en=Ae?ct.width/2:ct.height/2,qu=2*en<Ci?ct[Hi]+en:ji+Ci/2;ue<ct[zi]&&(ue+=Er),H.style[Hi]=`${qu}px`,H.style[zi]=`${ue}px`}return Ue+Wi}}}return k.style.left=nt,k.style.top=lt,null})(L,q,S)}}};class z{static utils=e;static version="1.9.0";static I18N_DEFAULTS={"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"};static DEFAULT_OPTIONS={appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"};_initializingActive=!0;_recalc=!0;_nanopop=null;_root=null;_color=A();_lastColor=A();_swatchColors=[];_setupAnimationFrame=null;_eventListener={init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]};constructor(E){this.options=E=Object.assign({...z.DEFAULT_OPTIONS},E);let{swatches:I,components:S,theme:R,sliders:L,lockOpacity:q,padding:T}=E;["nano","monolith"].includes(R)&&!L&&(E.sliders="h"),S.interaction||(S.interaction={});let{preview:k,opacity:D,hue:X,palette:H}=S;S.opacity=!q&&D,S.palette=H||k||D||X,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),I&&I.length&&I.forEach($=>this.addSwatch($));let{button:G,app:W}=this._root;this._nanopop=_(G,W,{margin:T}),G.setAttribute("role","button"),G.setAttribute("aria-label",this._t("btn:toggle"));let Y=this;this._setupAnimationFrame=requestAnimationFrame(function $(){if(!W.offsetWidth)return requestAnimationFrame($);Y.setColor(E.default),Y._rePositioningPicker(),E.defaultRepresentation&&(Y._representation=E.defaultRepresentation,Y.setColorRepresentation(Y._representation)),E.showAlways&&Y.show(),Y._initializingActive=!1,Y._emit("init")})}static create=E=>new z(E);_preBuild(){let{options:E}=this;for(let I of["el","container"])E[I]=c(E[I]);this._root=(I=>{let{components:S,useAsButton:R,inline:L,appClass:q,theme:T,lockOpacity:k}=I.options,D=W=>W?"":'style="display:none" hidden',X=W=>I._t(W),H=a(`
      <div :ref="root" class="pickr">

        ${R?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${q||""}" data-theme="${T}" ${L?'style="position: unset"':""} aria-label="${X("ui:dialog")}" role="window">
          <div class="pcr-selection" ${D(S.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${D(S.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${X("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${X("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${D(S.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${X("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${D(S.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${X("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${S.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${D(Object.keys(S.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${D(S.interaction.input)} aria-label="${X("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${k?"HEX":"HEXA"}" type="button" ${D(S.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${k?"RGB":"RGBA"}" type="button" ${D(S.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${k?"HSL":"HSLA"}" type="button" ${D(S.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${k?"HSV":"HSVA"}" type="button" ${D(S.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${D(S.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${X("btn:save")}" type="button" ${D(S.interaction.save)} aria-label="${X("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${X("btn:cancel")}" type="button" ${D(S.interaction.cancel)} aria-label="${X("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${X("btn:clear")}" type="button" ${D(S.interaction.clear)} aria-label="${X("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),G=H.interaction;return G.options.find(W=>!W.hidden&&!W.classList.add("active")),G.type=()=>G.options.find(W=>W.classList.contains("active")),H})(this),E.useAsButton&&(this._root.button=E.el),E.container.appendChild(this._root.root)}_finalBuild(){let E=this.options,I=this._root;if(E.container.removeChild(I.root),E.inline){let S=E.el.parentElement;E.el.nextSibling?S.insertBefore(I.app,E.el.nextSibling):S.appendChild(I.app)}else E.container.appendChild(I.app);E.useAsButton?E.inline&&E.el.remove():E.el.parentNode.replaceChild(I.root,E.el),E.disabled&&this.disable(),E.comparison||(I.button.style.transition="none",E.useAsButton||(I.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){let E=this,I=this.options.components,S=(E.options.sliders||"v").repeat(2),[R,L]=S.match(/^[vh]+$/g)?S:[],q=()=>this._color||(this._color=this._lastColor.clone()),T={palette:M({element:E._root.palette.picker,wrapper:E._root.palette.palette,onstop:()=>E._emit("changestop","slider",E),onchange(k,D){if(!I.palette)return;let X=q(),{_root:H,options:G}=E,{lastColor:W,currentColor:Y}=H.preview;E._recalc&&(X.s=100*k,X.v=100-100*D,X.v<0&&(X.v=0),E._updateOutput("slider"));let $=X.toRGBA().toString(0);this.element.style.background=$,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${X.a}), transparent),
                        linear-gradient(to left, hsla(${X.h}, 100%, 50%, ${X.a}), rgba(255, 255, 255, ${X.a}))
                    `,G.comparison?G.useAsButton||E._lastColor||W.style.setProperty("--pcr-color",$):(H.button.style.setProperty("--pcr-color",$),H.button.classList.remove("clear"));let rt=X.toHEXA().toString();for(let{el:nt,color:lt}of E._swatchColors)nt.classList[rt===lt.toHEXA().toString()?"add":"remove"]("pcr-active");Y.style.setProperty("--pcr-color",$)}}),hue:M({lock:L==="v"?"h":"v",element:E._root.hue.picker,wrapper:E._root.hue.slider,onstop:()=>E._emit("changestop","slider",E),onchange(k){if(!I.hue||!I.palette)return;let D=q();E._recalc&&(D.h=360*k),this.element.style.backgroundColor=`hsl(${D.h}, 100%, 50%)`,T.palette.trigger()}}),opacity:M({lock:R==="v"?"h":"v",element:E._root.opacity.picker,wrapper:E._root.opacity.slider,onstop:()=>E._emit("changestop","slider",E),onchange(k){if(!I.opacity||!I.palette)return;let D=q();E._recalc&&(D.a=Math.round(100*k)/100),this.element.style.background=`rgba(0, 0, 0, ${D.a})`,T.palette.trigger()}}),selectable:O({elements:E._root.interaction.options,className:"active",onchange(k){E._representation=k.target.getAttribute("data-type").toUpperCase(),E._recalc&&E._updateOutput("swatch")}})};this._components=T}_bindEvents(){let{_root:E,options:I}=this,S=[s(E.interaction.clear,"click",()=>this._clearColor()),s([E.interaction.cancel,E.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),s(E.interaction.save,"click",()=>{!this.applyColor()&&!I.showAlways&&this.hide()}),s(E.interaction.result,["keyup","input"],R=>{this.setColor(R.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),R.stopImmediatePropagation()}),s(E.interaction.result,["focus","blur"],R=>{this._recalc=R.type==="blur",this._recalc&&this._updateOutput(null)}),s([E.palette.palette,E.palette.picker,E.hue.slider,E.hue.picker,E.opacity.slider,E.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!I.showAlways){let R=I.closeWithKey;S.push(s(E.button,"click",()=>this.isOpen()?this.hide():this.show()),s(document,"keyup",L=>this.isOpen()&&(L.key===R||L.code===R)&&this.hide()),s(document,["touchstart","mousedown"],L=>{this.isOpen()&&!l(L).some(q=>q===E.app||q===E.button)&&this.hide()},{capture:!0}))}if(I.adjustableNumbers){let R={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};h(E.interaction.result,(L,q,T)=>{let k=R[this.getColorRepresentation().toLowerCase()];if(k){let D=k[T],X=L+(D>=100?1e3*q:q);return X<=0?0:Number((X<D?X:D).toPrecision(3))}return L})}if(I.autoReposition&&!I.inline){let R=null,L=this;S.push(s(window,["scroll","resize"],()=>{L.isOpen()&&(I.closeOnScroll&&L.hide(),R===null?(R=setTimeout(()=>R=null,100),requestAnimationFrame(function q(){L._rePositioningPicker(),R!==null&&requestAnimationFrame(q)})):(clearTimeout(R),R=setTimeout(()=>R=null,100)))},{capture:!0}))}this._eventBindings=S}_rePositioningPicker(){let{options:E}=this;if(!E.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:E.position})){let I=this._root.app,S=I.getBoundingClientRect();I.style.top=(window.innerHeight-S.height)/2+"px",I.style.left=(window.innerWidth-S.width)/2+"px"}}_updateOutput(E){let{_root:I,_color:S,options:R}=this;if(I.interaction.type()){let L=`to${I.interaction.type().getAttribute("data-type")}`;I.interaction.result.value=typeof S[L]=="function"?S[L]().toString(R.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",S,E,this)}_clearColor(E=!1){let{_root:I,options:S}=this;S.useAsButton||I.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),I.button.classList.add("clear"),S.showAlways||this.hide(),this._lastColor=null,this._initializingActive||E||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(E){let{values:I,type:S,a:R}=y(E),{lockOpacity:L}=this.options,q=R!==void 0&&R!==1;return I&&I.length===3&&(I[3]=void 0),{values:!I||L&&q?null:I,type:S}}_t(E){return this.options.i18n[E]||z.I18N_DEFAULTS[E]}_emit(E,...I){this._eventListener[E].forEach(S=>S(...I,this))}on(E,I){return this._eventListener[E].push(I),this}off(E,I){let S=this._eventListener[E]||[],R=S.indexOf(I);return~R&&S.splice(R,1),this}addSwatch(E){let{values:I}=this._parseLocalColor(E);if(I){let{_swatchColors:S,_root:R}=this,L=A(...I),q=o(`<button type="button" style="--pcr-color: ${L.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return R.swatches.appendChild(q),S.push({el:q,color:L}),this._eventBindings.push(s(q,"click",()=>{this.setHSVA(...L.toHSVA(),!0),this._emit("swatchselect",L),this._emit("change",L,"swatch",this)})),!0}return!1}removeSwatch(E){let I=this._swatchColors[E];if(I){let{el:S}=I;return this._root.swatches.removeChild(S),this._swatchColors.splice(E,1),!0}return!1}applyColor(E=!1){let{preview:I,button:S}=this._root,R=this._color.toRGBA().toString(0);return I.lastColor.style.setProperty("--pcr-color",R),this.options.useAsButton||S.style.setProperty("--pcr-color",R),S.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||E||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(E=>n(...E)),Object.keys(this._components).forEach(E=>this._components[E].destroy())}destroyAndRemove(){this.destroy();let{root:E,app:I}=this._root;E.parentElement&&E.parentElement.removeChild(E),I.parentElement.removeChild(I),Object.keys(this).forEach(S=>this[S]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(E=360,I=0,S=0,R=1,L=!1){let q=this._recalc;if(this._recalc=!1,E<0||E>360||I<0||I>100||S<0||S>100||R<0||R>1)return!1;this._color=A(E,I,S,R);let{hue:T,opacity:k,palette:D}=this._components;return T.update(E/360),k.update(R),D.update(I/100,1-S/100),L||this.applyColor(),q&&this._updateOutput(),this._recalc=q,!0}setColor(E,I=!1){if(E===null)return this._clearColor(I),!0;let{values:S,type:R}=this._parseLocalColor(E);if(S){let L=R.toUpperCase(),{options:q}=this._root.interaction,T=q.find(k=>k.getAttribute("data-type")===L);if(T&&!T.hidden)for(let k of q)k.classList[k===T?"add":"remove"]("active");return!!this.setHSVA(...S,I)&&this.setColorRepresentation(L)}return!1}setColorRepresentation(E){return E=E.toUpperCase(),!!this._root.interaction.options.find(I=>I.getAttribute("data-type").startsWith(E)&&!I.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}return t=t.default})())});var K0=Vi((YX,$0)=>{var $e=-1,Ce=1,ie=0;function Jo(r,t,e,i,s){if(r===t)return r?[[ie,r]]:[];if(e!=null){var n=sI(r,t,e);if(n)return n}var o=Rf(r,t),a=r.substring(0,o);r=r.substring(o),t=t.substring(o),o=Pc(r,t);var l=r.substring(r.length-o);r=r.substring(0,r.length-o),t=t.substring(0,t.length-o);var c=K2(r,t);return a&&c.unshift([ie,a]),l&&c.push([ie,l]),If(c,s),i&&Q2(c),c}function K2(r,t){var e;if(!r)return[[Ce,t]];if(!t)return[[$e,r]];var i=r.length>t.length?r:t,s=r.length>t.length?t:r,n=i.indexOf(s);if(n!==-1)return e=[[Ce,i.substring(0,n)],[ie,s],[Ce,i.substring(n+s.length)]],r.length>t.length&&(e[0][0]=e[2][0]=$e),e;if(s.length===1)return[[$e,r],[Ce,t]];var o=J2(r,t);if(o){var a=o[0],l=o[1],c=o[2],h=o[3],u=o[4],d=Jo(a,c),f=Jo(l,h);return d.concat([[ie,u]],f)}return Z2(r,t)}function Z2(r,t){for(var e=r.length,i=t.length,s=Math.ceil((e+i)/2),n=s,o=2*s,a=new Array(o),l=new Array(o),c=0;c<o;c++)a[c]=-1,l[c]=-1;a[n+1]=0,l[n+1]=0;for(var h=e-i,u=h%2!==0,d=0,f=0,g=0,p=0,b=0;b<s;b++){for(var m=-b+d;m<=b-f;m+=2){var x=n+m,v;m===-b||m!==b&&a[x-1]<a[x+1]?v=a[x+1]:v=a[x-1]+1;for(var w=v-m;v<e&&w<i&&r.charAt(v)===t.charAt(w);)v++,w++;if(a[x]=v,v>e)f+=2;else if(w>i)d+=2;else if(u){var y=n+h-m;if(y>=0&&y<o&&l[y]!==-1){var A=e-l[y];if(v>=A)return z0(r,t,v,w)}}}for(var C=-b+g;C<=b-p;C+=2){var y=n+C,A;C===-b||C!==b&&l[y-1]<l[y+1]?A=l[y+1]:A=l[y-1]+1;for(var M=A-C;A<e&&M<i&&r.charAt(e-A-1)===t.charAt(i-M-1);)A++,M++;if(l[y]=A,A>e)p+=2;else if(M>i)g+=2;else if(!u){var x=n+h-C;if(x>=0&&x<o&&a[x]!==-1){var v=a[x],w=n+v-x;if(A=e-A,v>=A)return z0(r,t,v,w)}}}}return[[$e,r],[Ce,t]]}function z0(r,t,e,i){var s=r.substring(0,e),n=t.substring(0,i),o=r.substring(e),a=t.substring(i),l=Jo(s,n),c=Jo(o,a);return l.concat(c)}function Rf(r,t){if(!r||!t||r.charAt(0)!==t.charAt(0))return 0;for(var e=0,i=Math.min(r.length,t.length),s=i,n=0;e<s;)r.substring(n,s)==t.substring(n,s)?(e=s,n=e):i=s,s=Math.floor((i-e)/2+e);return Y0(r.charCodeAt(s-1))&&s--,s}function H0(r,t){var e=r.length,i=t.length;if(e==0||i==0)return 0;e>i?r=r.substring(e-i):e<i&&(t=t.substring(0,e));var s=Math.min(e,i);if(r==t)return s;for(var n=0,o=1;;){var a=r.substring(s-o),l=t.indexOf(a);if(l==-1)return n;o+=l,(l==0||r.substring(s-o)==t.substring(0,o))&&(n=o,o++)}}function Pc(r,t){if(!r||!t||r.slice(-1)!==t.slice(-1))return 0;for(var e=0,i=Math.min(r.length,t.length),s=i,n=0;e<s;)r.substring(r.length-s,r.length-n)==t.substring(t.length-s,t.length-n)?(e=s,n=e):i=s,s=Math.floor((i-e)/2+e);return V0(r.charCodeAt(r.length-s))&&s--,s}function J2(r,t){var e=r.length>t.length?r:t,i=r.length>t.length?t:r;if(e.length<4||i.length*2<e.length)return null;function s(f,g,p){for(var b=f.substring(p,p+Math.floor(f.length/4)),m=-1,x="",v,w,y,A;(m=g.indexOf(b,m+1))!==-1;){var C=Rf(f.substring(p),g.substring(m)),M=Pc(f.substring(0,p),g.substring(0,m));x.length<M+C&&(x=g.substring(m-M,m)+g.substring(m,m+C),v=f.substring(0,p-M),w=f.substring(p+C),y=g.substring(0,m-M),A=g.substring(m+C))}return x.length*2>=f.length?[v,w,y,A,x]:null}var n=s(e,i,Math.ceil(e.length/4)),o=s(e,i,Math.ceil(e.length/2)),a;if(!n&&!o)return null;o?n?a=n[4].length>o[4].length?n:o:a=o:a=n;var l,c,h,u;r.length>t.length?(l=a[0],c=a[1],h=a[2],u=a[3]):(h=a[0],u=a[1],l=a[2],c=a[3]);var d=a[4];return[l,c,h,u,d]}function Q2(r){for(var t=!1,e=[],i=0,s=null,n=0,o=0,a=0,l=0,c=0;n<r.length;)r[n][0]==ie?(e[i++]=n,o=l,a=c,l=0,c=0,s=r[n][1]):(r[n][0]==Ce?l+=r[n][1].length:c+=r[n][1].length,s&&s.length<=Math.max(o,a)&&s.length<=Math.max(l,c)&&(r.splice(e[i-1],0,[$e,s]),r[e[i-1]+1][0]=Ce,i--,i--,n=i>0?e[i-1]:-1,o=0,a=0,l=0,c=0,s=null,t=!0)),n++;for(t&&If(r),iI(r),n=1;n<r.length;){if(r[n-1][0]==$e&&r[n][0]==Ce){var h=r[n-1][1],u=r[n][1],d=H0(h,u),f=H0(u,h);d>=f?(d>=h.length/2||d>=u.length/2)&&(r.splice(n,0,[ie,u.substring(0,d)]),r[n-1][1]=h.substring(0,h.length-d),r[n+1][1]=u.substring(d),n++):(f>=h.length/2||f>=u.length/2)&&(r.splice(n,0,[ie,h.substring(0,f)]),r[n-1][0]=Ce,r[n-1][1]=u.substring(0,u.length-f),r[n+1][0]=$e,r[n+1][1]=h.substring(f),n++),n++}n++}}var W0=/[^a-zA-Z0-9]/,j0=/\s/,X0=/[\r\n]/,tI=/\n\r?\n$/,eI=/^\r?\n\r?\n/;function iI(r){function t(f,g){if(!f||!g)return 6;var p=f.charAt(f.length-1),b=g.charAt(0),m=p.match(W0),x=b.match(W0),v=m&&p.match(j0),w=x&&b.match(j0),y=v&&p.match(X0),A=w&&b.match(X0),C=y&&f.match(tI),M=A&&g.match(eI);return C||M?5:y||A?4:m&&!v&&w?3:v||w?2:m||x?1:0}for(var e=1;e<r.length-1;){if(r[e-1][0]==ie&&r[e+1][0]==ie){var i=r[e-1][1],s=r[e][1],n=r[e+1][1],o=Pc(i,s);if(o){var a=s.substring(s.length-o);i=i.substring(0,i.length-o),s=a+s.substring(0,s.length-o),n=a+n}for(var l=i,c=s,h=n,u=t(i,s)+t(s,n);s.charAt(0)===n.charAt(0);){i+=s.charAt(0),s=s.substring(1)+n.charAt(0),n=n.substring(1);var d=t(i,s)+t(s,n);d>=u&&(u=d,l=i,c=s,h=n)}r[e-1][1]!=l&&(l?r[e-1][1]=l:(r.splice(e-1,1),e--),r[e][1]=c,h?r[e+1][1]=h:(r.splice(e+1,1),e--))}e++}}function If(r,t){r.push([ie,""]);for(var e=0,i=0,s=0,n="",o="",a;e<r.length;){if(e<r.length-1&&!r[e][1]){r.splice(e,1);continue}switch(r[e][0]){case Ce:s++,o+=r[e][1],e++;break;case $e:i++,n+=r[e][1],e++;break;case ie:var l=e-s-i-1;if(t){if(l>=0&&G0(r[l][1])){var c=r[l][1].slice(-1);if(r[l][1]=r[l][1].slice(0,-1),n=c+n,o=c+o,!r[l][1]){r.splice(l,1),e--;var h=l-1;r[h]&&r[h][0]===Ce&&(s++,o=r[h][1]+o,h--),r[h]&&r[h][0]===$e&&(i++,n=r[h][1]+n,h--),l=h}}if(U0(r[e][1])){var c=r[e][1].charAt(0);r[e][1]=r[e][1].slice(1),n+=c,o+=c}}if(e<r.length-1&&!r[e][1]){r.splice(e,1);break}if(n.length>0||o.length>0){n.length>0&&o.length>0&&(a=Rf(o,n),a!==0&&(l>=0?r[l][1]+=o.substring(0,a):(r.splice(0,0,[ie,o.substring(0,a)]),e++),o=o.substring(a),n=n.substring(a)),a=Pc(o,n),a!==0&&(r[e][1]=o.substring(o.length-a)+r[e][1],o=o.substring(0,o.length-a),n=n.substring(0,n.length-a)));var u=s+i;n.length===0&&o.length===0?(r.splice(e-u,u),e=e-u):n.length===0?(r.splice(e-u,u,[Ce,o]),e=e-u+1):o.length===0?(r.splice(e-u,u,[$e,n]),e=e-u+1):(r.splice(e-u,u,[$e,n],[Ce,o]),e=e-u+2)}e!==0&&r[e-1][0]===ie?(r[e-1][1]+=r[e][1],r.splice(e,1)):e++,s=0,i=0,n="",o="";break}}r[r.length-1][1]===""&&r.pop();var d=!1;for(e=1;e<r.length-1;)r[e-1][0]===ie&&r[e+1][0]===ie&&(r[e][1].substring(r[e][1].length-r[e-1][1].length)===r[e-1][1]?(r[e][1]=r[e-1][1]+r[e][1].substring(0,r[e][1].length-r[e-1][1].length),r[e+1][1]=r[e-1][1]+r[e+1][1],r.splice(e-1,1),d=!0):r[e][1].substring(0,r[e+1][1].length)==r[e+1][1]&&(r[e-1][1]+=r[e+1][1],r[e][1]=r[e][1].substring(r[e+1][1].length)+r[e+1][1],r.splice(e+1,1),d=!0)),e++;d&&If(r,t)}function Y0(r){return r>=55296&&r<=56319}function V0(r){return r>=56320&&r<=57343}function U0(r){return V0(r.charCodeAt(0))}function G0(r){return Y0(r.charCodeAt(r.length-1))}function rI(r){for(var t=[],e=0;e<r.length;e++)r[e][1].length>0&&t.push(r[e]);return t}function Mf(r,t,e,i){return G0(r)||U0(i)?null:rI([[ie,r],[$e,t],[Ce,e],[ie,i]])}function sI(r,t,e){var i=typeof e=="number"?{index:e,length:0}:e.oldRange,s=typeof e=="number"?null:e.newRange,n=r.length,o=t.length;if(i.length===0&&(s===null||s.length===0)){var a=i.index,l=r.slice(0,a),c=r.slice(a),h=s?s.index:null;t:{var u=a+o-n;if(h!==null&&h!==u||u<0||u>o)break t;var d=t.slice(0,u),f=t.slice(u);if(f!==c)break t;var g=Math.min(a,u),p=l.slice(0,g),b=d.slice(0,g);if(p!==b)break t;var m=l.slice(g),x=d.slice(g);return Mf(p,m,x,c)}t:{if(h!==null&&h!==a)break t;var v=a,d=t.slice(0,v),f=t.slice(v);if(d!==l)break t;var w=Math.min(n-v,o-v),y=c.slice(c.length-w),A=f.slice(f.length-w);if(y!==A)break t;var m=c.slice(0,c.length-w),x=f.slice(0,f.length-w);return Mf(l,m,x,y)}}if(i.length>0&&s&&s.length===0)t:{var p=r.slice(0,i.index),y=r.slice(i.index+i.length),g=p.length,w=y.length;if(o<g+w)break t;var b=t.slice(0,g),A=t.slice(o-w);if(p!==b||y!==A)break t;var m=r.slice(g,n-w),x=t.slice(g,o-w);return Mf(p,m,x,y)}return null}function Dc(r,t,e,i){return Jo(r,t,e,i,!0)}Dc.INSERT=Ce;Dc.DELETE=$e;Dc.EQUAL=ie;$0.exports=Dc});var Vf=Vi((Qo,Pn)=>{var nI=200,ly="__lodash_hash_undefined__",cy=9007199254740991,_f="[object Arguments]",oI="[object Array]",hy="[object Boolean]",uy="[object Date]",aI="[object Error]",zf="[object Function]",dy="[object GeneratorFunction]",Fc="[object Map]",fy="[object Number]",Hf="[object Object]",Z0="[object Promise]",py="[object RegExp]",Bc="[object Set]",gy="[object String]",my="[object Symbol]",Of="[object WeakMap]",by="[object ArrayBuffer]",_c="[object DataView]",vy="[object Float32Array]",xy="[object Float64Array]",yy="[object Int8Array]",wy="[object Int16Array]",Ay="[object Int32Array]",ky="[object Uint8Array]",Sy="[object Uint8ClampedArray]",Cy="[object Uint16Array]",Ey="[object Uint32Array]",lI=/[\\^$.*+?()[\]{}|]/g,cI=/\w*$/,hI=/^\[object .+?Constructor\]$/,uI=/^(?:0|[1-9]\d*)$/,Nt={};Nt[_f]=Nt[oI]=Nt[by]=Nt[_c]=Nt[hy]=Nt[uy]=Nt[vy]=Nt[xy]=Nt[yy]=Nt[wy]=Nt[Ay]=Nt[Fc]=Nt[fy]=Nt[Hf]=Nt[py]=Nt[Bc]=Nt[gy]=Nt[my]=Nt[ky]=Nt[Sy]=Nt[Cy]=Nt[Ey]=!0;Nt[aI]=Nt[zf]=Nt[Of]=!1;var dI=typeof global=="object"&&global&&global.Object===Object&&global,fI=typeof self=="object"&&self&&self.Object===Object&&self,tr=dI||fI||Function("return this")(),Ty=typeof Qo=="object"&&Qo&&!Qo.nodeType&&Qo,J0=Ty&&typeof Pn=="object"&&Pn&&!Pn.nodeType&&Pn,pI=J0&&J0.exports===Ty;function gI(r,t){return r.set(t[0],t[1]),r}function mI(r,t){return r.add(t),r}function bI(r,t){for(var e=-1,i=r?r.length:0;++e<i&&t(r[e],e,r)!==!1;);return r}function vI(r,t){for(var e=-1,i=t.length,s=r.length;++e<i;)r[s+e]=t[e];return r}function Ly(r,t,e,i){var s=-1,n=r?r.length:0;for(i&&n&&(e=r[++s]);++s<n;)e=t(e,r[s],s,r);return e}function xI(r,t){for(var e=-1,i=Array(r);++e<r;)i[e]=t(e);return i}function yI(r,t){return r?.[t]}function My(r){var t=!1;if(r!=null&&typeof r.toString!="function")try{t=!!(r+"")}catch{}return t}function Q0(r){var t=-1,e=Array(r.size);return r.forEach(function(i,s){e[++t]=[s,i]}),e}function Wf(r,t){return function(e){return r(t(e))}}function ty(r){var t=-1,e=Array(r.size);return r.forEach(function(i){e[++t]=i}),e}var wI=Array.prototype,AI=Function.prototype,zc=Object.prototype,qf=tr["__core-js_shared__"],ey=function(){var r=/[^.]+$/.exec(qf&&qf.keys&&qf.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Ry=AI.toString,Yr=zc.hasOwnProperty,Hc=zc.toString,kI=RegExp("^"+Ry.call(Yr).replace(lI,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),iy=pI?tr.Buffer:void 0,ry=tr.Symbol,sy=tr.Uint8Array,SI=Wf(Object.getPrototypeOf,Object),CI=Object.create,EI=zc.propertyIsEnumerable,TI=wI.splice,ny=Object.getOwnPropertySymbols,LI=iy?iy.isBuffer:void 0,MI=Wf(Object.keys,Object),Nf=Bn(tr,"DataView"),ta=Bn(tr,"Map"),Pf=Bn(tr,"Promise"),Df=Bn(tr,"Set"),Ff=Bn(tr,"WeakMap"),ea=Bn(Object,"create"),RI=ks(Nf),II=ks(ta),qI=ks(Pf),OI=ks(Df),NI=ks(Ff),oy=ry?ry.prototype:void 0,ay=oy?oy.valueOf:void 0;function As(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function PI(){this.__data__=ea?ea(null):{}}function DI(r){return this.has(r)&&delete this.__data__[r]}function FI(r){var t=this.__data__;if(ea){var e=t[r];return e===ly?void 0:e}return Yr.call(t,r)?t[r]:void 0}function BI(r){var t=this.__data__;return ea?t[r]!==void 0:Yr.call(t,r)}function _I(r,t){var e=this.__data__;return e[r]=ea&&t===void 0?ly:t,this}As.prototype.clear=PI;As.prototype.delete=DI;As.prototype.get=FI;As.prototype.has=BI;As.prototype.set=_I;function er(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function zI(){this.__data__=[]}function HI(r){var t=this.__data__,e=Wc(t,r);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():TI.call(t,e,1),!0}function WI(r){var t=this.__data__,e=Wc(t,r);return e<0?void 0:t[e][1]}function jI(r){return Wc(this.__data__,r)>-1}function XI(r,t){var e=this.__data__,i=Wc(e,r);return i<0?e.push([r,t]):e[i][1]=t,this}er.prototype.clear=zI;er.prototype.delete=HI;er.prototype.get=WI;er.prototype.has=jI;er.prototype.set=XI;function Dn(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function YI(){this.__data__={hash:new As,map:new(ta||er),string:new As}}function VI(r){return jc(this,r).delete(r)}function UI(r){return jc(this,r).get(r)}function GI(r){return jc(this,r).has(r)}function $I(r,t){return jc(this,r).set(r,t),this}Dn.prototype.clear=YI;Dn.prototype.delete=VI;Dn.prototype.get=UI;Dn.prototype.has=GI;Dn.prototype.set=$I;function Fn(r){this.__data__=new er(r)}function KI(){this.__data__=new er}function ZI(r){return this.__data__.delete(r)}function JI(r){return this.__data__.get(r)}function QI(r){return this.__data__.has(r)}function tq(r,t){var e=this.__data__;if(e instanceof er){var i=e.__data__;if(!ta||i.length<nI-1)return i.push([r,t]),this;e=this.__data__=new Dn(i)}return e.set(r,t),this}Fn.prototype.clear=KI;Fn.prototype.delete=ZI;Fn.prototype.get=JI;Fn.prototype.has=QI;Fn.prototype.set=tq;function eq(r,t){var e=Xf(r)||Cq(r)?xI(r.length,String):[],i=e.length,s=!!i;for(var n in r)(t||Yr.call(r,n))&&!(s&&(n=="length"||wq(n,i)))&&e.push(n);return e}function Iy(r,t,e){var i=r[t];(!(Yr.call(r,t)&&Py(i,e))||e===void 0&&!(t in r))&&(r[t]=e)}function Wc(r,t){for(var e=r.length;e--;)if(Py(r[e][0],t))return e;return-1}function iq(r,t){return r&&qy(t,Yf(t),r)}function Bf(r,t,e,i,s,n,o){var a;if(i&&(a=n?i(r,s,n,o):i(r)),a!==void 0)return a;if(!Xc(r))return r;var l=Xf(r);if(l){if(a=vq(r),!t)return gq(r,a)}else{var c=ws(r),h=c==zf||c==dy;if(Tq(r))return lq(r,t);if(c==Hf||c==_f||h&&!n){if(My(r))return n?r:{};if(a=xq(h?{}:r),!t)return mq(r,iq(a,r))}else{if(!Nt[c])return n?r:{};a=yq(r,c,Bf,t)}}o||(o=new Fn);var u=o.get(r);if(u)return u;if(o.set(r,a),!l)var d=e?bq(r):Yf(r);return bI(d||r,function(f,g){d&&(g=f,f=r[g]),Iy(a,g,Bf(f,t,e,i,g,r,o))}),a}function rq(r){return Xc(r)?CI(r):{}}function sq(r,t,e){var i=t(r);return Xf(r)?i:vI(i,e(r))}function nq(r){return Hc.call(r)}function oq(r){if(!Xc(r)||kq(r))return!1;var t=Fy(r)||My(r)?kI:hI;return t.test(ks(r))}function aq(r){if(!Ny(r))return MI(r);var t=[];for(var e in Object(r))Yr.call(r,e)&&e!="constructor"&&t.push(e);return t}function lq(r,t){if(t)return r.slice();var e=new r.constructor(r.length);return r.copy(e),e}function jf(r){var t=new r.constructor(r.byteLength);return new sy(t).set(new sy(r)),t}function cq(r,t){var e=t?jf(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}function hq(r,t,e){var i=t?e(Q0(r),!0):Q0(r);return Ly(i,gI,new r.constructor)}function uq(r){var t=new r.constructor(r.source,cI.exec(r));return t.lastIndex=r.lastIndex,t}function dq(r,t,e){var i=t?e(ty(r),!0):ty(r);return Ly(i,mI,new r.constructor)}function fq(r){return ay?Object(ay.call(r)):{}}function pq(r,t){var e=t?jf(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}function gq(r,t){var e=-1,i=r.length;for(t||(t=Array(i));++e<i;)t[e]=r[e];return t}function qy(r,t,e,i){e||(e={});for(var s=-1,n=t.length;++s<n;){var o=t[s],a=i?i(e[o],r[o],o,e,r):void 0;Iy(e,o,a===void 0?r[o]:a)}return e}function mq(r,t){return qy(r,Oy(r),t)}function bq(r){return sq(r,Yf,Oy)}function jc(r,t){var e=r.__data__;return Aq(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Bn(r,t){var e=yI(r,t);return oq(e)?e:void 0}var Oy=ny?Wf(ny,Object):Rq,ws=nq;(Nf&&ws(new Nf(new ArrayBuffer(1)))!=_c||ta&&ws(new ta)!=Fc||Pf&&ws(Pf.resolve())!=Z0||Df&&ws(new Df)!=Bc||Ff&&ws(new Ff)!=Of)&&(ws=function(r){var t=Hc.call(r),e=t==Hf?r.constructor:void 0,i=e?ks(e):void 0;if(i)switch(i){case RI:return _c;case II:return Fc;case qI:return Z0;case OI:return Bc;case NI:return Of}return t});function vq(r){var t=r.length,e=r.constructor(t);return t&&typeof r[0]=="string"&&Yr.call(r,"index")&&(e.index=r.index,e.input=r.input),e}function xq(r){return typeof r.constructor=="function"&&!Ny(r)?rq(SI(r)):{}}function yq(r,t,e,i){var s=r.constructor;switch(t){case by:return jf(r);case hy:case uy:return new s(+r);case _c:return cq(r,i);case vy:case xy:case yy:case wy:case Ay:case ky:case Sy:case Cy:case Ey:return pq(r,i);case Fc:return hq(r,i,e);case fy:case gy:return new s(r);case py:return uq(r);case Bc:return dq(r,i,e);case my:return fq(r)}}function wq(r,t){return t=t??cy,!!t&&(typeof r=="number"||uI.test(r))&&r>-1&&r%1==0&&r<t}function Aq(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function kq(r){return!!ey&&ey in r}function Ny(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||zc;return r===e}function ks(r){if(r!=null){try{return Ry.call(r)}catch{}try{return r+""}catch{}}return""}function Sq(r){return Bf(r,!0,!0)}function Py(r,t){return r===t||r!==r&&t!==t}function Cq(r){return Eq(r)&&Yr.call(r,"callee")&&(!EI.call(r,"callee")||Hc.call(r)==_f)}var Xf=Array.isArray;function Dy(r){return r!=null&&Lq(r.length)&&!Fy(r)}function Eq(r){return Mq(r)&&Dy(r)}var Tq=LI||Iq;function Fy(r){var t=Xc(r)?Hc.call(r):"";return t==zf||t==dy}function Lq(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=cy}function Xc(r){var t=typeof r;return!!r&&(t=="object"||t=="function")}function Mq(r){return!!r&&typeof r=="object"}function Yf(r){return Dy(r)?eq(r):aq(r)}function Rq(){return[]}function Iq(){return!1}Pn.exports=Sq});var sp=Vi((ia,zn)=>{var qq=200,rp="__lodash_hash_undefined__",Jc=1,$y=2,Ky=9007199254740991,Yc="[object Arguments]",Kf="[object Array]",Oq="[object AsyncFunction]",Zy="[object Boolean]",Jy="[object Date]",Qy="[object Error]",tw="[object Function]",Nq="[object GeneratorFunction]",Vc="[object Map]",ew="[object Number]",Pq="[object Null]",_n="[object Object]",By="[object Promise]",Dq="[object Proxy]",iw="[object RegExp]",Uc="[object Set]",rw="[object String]",Fq="[object Symbol]",Bq="[object Undefined]",Zf="[object WeakMap]",sw="[object ArrayBuffer]",Gc="[object DataView]",_q="[object Float32Array]",zq="[object Float64Array]",Hq="[object Int8Array]",Wq="[object Int16Array]",jq="[object Int32Array]",Xq="[object Uint8Array]",Yq="[object Uint8ClampedArray]",Vq="[object Uint16Array]",Uq="[object Uint32Array]",Gq=/[\\^$.*+?()[\]{}|]/g,$q=/^\[object .+?Constructor\]$/,Kq=/^(?:0|[1-9]\d*)$/,Ft={};Ft[_q]=Ft[zq]=Ft[Hq]=Ft[Wq]=Ft[jq]=Ft[Xq]=Ft[Yq]=Ft[Vq]=Ft[Uq]=!0;Ft[Yc]=Ft[Kf]=Ft[sw]=Ft[Zy]=Ft[Gc]=Ft[Jy]=Ft[Qy]=Ft[tw]=Ft[Vc]=Ft[ew]=Ft[_n]=Ft[iw]=Ft[Uc]=Ft[rw]=Ft[Zf]=!1;var nw=typeof global=="object"&&global&&global.Object===Object&&global,Zq=typeof self=="object"&&self&&self.Object===Object&&self,ir=nw||Zq||Function("return this")(),ow=typeof ia=="object"&&ia&&!ia.nodeType&&ia,_y=ow&&typeof zn=="object"&&zn&&!zn.nodeType&&zn,aw=_y&&_y.exports===ow,Uf=aw&&nw.process,zy=function(){try{return Uf&&Uf.binding&&Uf.binding("util")}catch{}}(),Hy=zy&&zy.isTypedArray;function Jq(r,t){for(var e=-1,i=r==null?0:r.length,s=0,n=[];++e<i;){var o=r[e];t(o,e,r)&&(n[s++]=o)}return n}function Qq(r,t){for(var e=-1,i=t.length,s=r.length;++e<i;)r[s+e]=t[e];return r}function tO(r,t){for(var e=-1,i=r==null?0:r.length;++e<i;)if(t(r[e],e,r))return!0;return!1}function eO(r,t){for(var e=-1,i=Array(r);++e<r;)i[e]=t(e);return i}function iO(r){return function(t){return r(t)}}function rO(r,t){return r.has(t)}function sO(r,t){return r?.[t]}function nO(r){var t=-1,e=Array(r.size);return r.forEach(function(i,s){e[++t]=[s,i]}),e}function oO(r,t){return function(e){return r(t(e))}}function aO(r){var t=-1,e=Array(r.size);return r.forEach(function(i){e[++t]=i}),e}var lO=Array.prototype,cO=Function.prototype,Qc=Object.prototype,Gf=ir["__core-js_shared__"],lw=cO.toString,Oi=Qc.hasOwnProperty,Wy=function(){var r=/[^.]+$/.exec(Gf&&Gf.keys&&Gf.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),cw=Qc.toString,hO=RegExp("^"+lw.call(Oi).replace(Gq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jy=aw?ir.Buffer:void 0,$c=ir.Symbol,Xy=ir.Uint8Array,hw=Qc.propertyIsEnumerable,uO=lO.splice,Ss=$c?$c.toStringTag:void 0,Yy=Object.getOwnPropertySymbols,dO=jy?jy.isBuffer:void 0,fO=oO(Object.keys,Object),Jf=Hn(ir,"DataView"),ra=Hn(ir,"Map"),Qf=Hn(ir,"Promise"),tp=Hn(ir,"Set"),ep=Hn(ir,"WeakMap"),sa=Hn(Object,"create"),pO=Ts(Jf),gO=Ts(ra),mO=Ts(Qf),bO=Ts(tp),vO=Ts(ep),Vy=$c?$c.prototype:void 0,$f=Vy?Vy.valueOf:void 0;function Cs(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function xO(){this.__data__=sa?sa(null):{},this.size=0}function yO(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}function wO(r){var t=this.__data__;if(sa){var e=t[r];return e===rp?void 0:e}return Oi.call(t,r)?t[r]:void 0}function AO(r){var t=this.__data__;return sa?t[r]!==void 0:Oi.call(t,r)}function kO(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=sa&&t===void 0?rp:t,this}Cs.prototype.clear=xO;Cs.prototype.delete=yO;Cs.prototype.get=wO;Cs.prototype.has=AO;Cs.prototype.set=kO;function rr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function SO(){this.__data__=[],this.size=0}function CO(r){var t=this.__data__,e=th(t,r);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():uO.call(t,e,1),--this.size,!0}function EO(r){var t=this.__data__,e=th(t,r);return e<0?void 0:t[e][1]}function TO(r){return th(this.__data__,r)>-1}function LO(r,t){var e=this.__data__,i=th(e,r);return i<0?(++this.size,e.push([r,t])):e[i][1]=t,this}rr.prototype.clear=SO;rr.prototype.delete=CO;rr.prototype.get=EO;rr.prototype.has=TO;rr.prototype.set=LO;function Es(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}function MO(){this.size=0,this.__data__={hash:new Cs,map:new(ra||rr),string:new Cs}}function RO(r){var t=eh(this,r).delete(r);return this.size-=t?1:0,t}function IO(r){return eh(this,r).get(r)}function qO(r){return eh(this,r).has(r)}function OO(r,t){var e=eh(this,r),i=e.size;return e.set(r,t),this.size+=e.size==i?0:1,this}Es.prototype.clear=MO;Es.prototype.delete=RO;Es.prototype.get=IO;Es.prototype.has=qO;Es.prototype.set=OO;function Kc(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new Es;++t<e;)this.add(r[t])}function NO(r){return this.__data__.set(r,rp),this}function PO(r){return this.__data__.has(r)}Kc.prototype.add=Kc.prototype.push=NO;Kc.prototype.has=PO;function Ur(r){var t=this.__data__=new rr(r);this.size=t.size}function DO(){this.__data__=new rr,this.size=0}function FO(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}function BO(r){return this.__data__.get(r)}function _O(r){return this.__data__.has(r)}function zO(r,t){var e=this.__data__;if(e instanceof rr){var i=e.__data__;if(!ra||i.length<qq-1)return i.push([r,t]),this.size=++e.size,this;e=this.__data__=new Es(i)}return e.set(r,t),this.size=e.size,this}Ur.prototype.clear=DO;Ur.prototype.delete=FO;Ur.prototype.get=BO;Ur.prototype.has=_O;Ur.prototype.set=zO;function HO(r,t){var e=Zc(r),i=!e&&iN(r),s=!e&&!i&&ip(r),n=!e&&!i&&!s&&bw(r),o=e||i||s||n,a=o?eO(r.length,String):[],l=a.length;for(var c in r)(t||Oi.call(r,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||n&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ZO(c,l)))&&a.push(c);return a}function th(r,t){for(var e=r.length;e--;)if(fw(r[e][0],t))return e;return-1}function WO(r,t,e){var i=t(r);return Zc(r)?i:Qq(i,e(r))}function oa(r){return r==null?r===void 0?Bq:Pq:Ss&&Ss in Object(r)?$O(r):eN(r)}function Uy(r){return na(r)&&oa(r)==Yc}function uw(r,t,e,i,s){return r===t?!0:r==null||t==null||!na(r)&&!na(t)?r!==r&&t!==t:jO(r,t,e,i,uw,s)}function jO(r,t,e,i,s,n){var o=Zc(r),a=Zc(t),l=o?Kf:Vr(r),c=a?Kf:Vr(t);l=l==Yc?_n:l,c=c==Yc?_n:c;var h=l==_n,u=c==_n,d=l==c;if(d&&ip(r)){if(!ip(t))return!1;o=!0,h=!1}if(d&&!h)return n||(n=new Ur),o||bw(r)?dw(r,t,e,i,s,n):UO(r,t,l,e,i,s,n);if(!(e&Jc)){var f=h&&Oi.call(r,"__wrapped__"),g=u&&Oi.call(t,"__wrapped__");if(f||g){var p=f?r.value():r,b=g?t.value():t;return n||(n=new Ur),s(p,b,e,i,n)}}return d?(n||(n=new Ur),GO(r,t,e,i,s,n)):!1}function XO(r){if(!mw(r)||QO(r))return!1;var t=pw(r)?hO:$q;return t.test(Ts(r))}function YO(r){return na(r)&&gw(r.length)&&!!Ft[oa(r)]}function VO(r){if(!tN(r))return fO(r);var t=[];for(var e in Object(r))Oi.call(r,e)&&e!="constructor"&&t.push(e);return t}function dw(r,t,e,i,s,n){var o=e&Jc,a=r.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=n.get(r);if(c&&n.get(t))return c==t;var h=-1,u=!0,d=e&$y?new Kc:void 0;for(n.set(r,t),n.set(t,r);++h<a;){var f=r[h],g=t[h];if(i)var p=o?i(g,f,h,t,r,n):i(f,g,h,r,t,n);if(p!==void 0){if(p)continue;u=!1;break}if(d){if(!tO(t,function(b,m){if(!rO(d,m)&&(f===b||s(f,b,e,i,n)))return d.push(m)})){u=!1;break}}else if(!(f===g||s(f,g,e,i,n))){u=!1;break}}return n.delete(r),n.delete(t),u}function UO(r,t,e,i,s,n,o){switch(e){case Gc:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case sw:return!(r.byteLength!=t.byteLength||!n(new Xy(r),new Xy(t)));case Zy:case Jy:case ew:return fw(+r,+t);case Qy:return r.name==t.name&&r.message==t.message;case iw:case rw:return r==t+"";case Vc:var a=nO;case Uc:var l=i&Jc;if(a||(a=aO),r.size!=t.size&&!l)return!1;var c=o.get(r);if(c)return c==t;i|=$y,o.set(r,t);var h=dw(a(r),a(t),i,s,n,o);return o.delete(r),h;case Fq:if($f)return $f.call(r)==$f.call(t)}return!1}function GO(r,t,e,i,s,n){var o=e&Jc,a=Gy(r),l=a.length,c=Gy(t),h=c.length;if(l!=h&&!o)return!1;for(var u=l;u--;){var d=a[u];if(!(o?d in t:Oi.call(t,d)))return!1}var f=n.get(r);if(f&&n.get(t))return f==t;var g=!0;n.set(r,t),n.set(t,r);for(var p=o;++u<l;){d=a[u];var b=r[d],m=t[d];if(i)var x=o?i(m,b,d,t,r,n):i(b,m,d,r,t,n);if(!(x===void 0?b===m||s(b,m,e,i,n):x)){g=!1;break}p||(p=d=="constructor")}if(g&&!p){var v=r.constructor,w=t.constructor;v!=w&&"constructor"in r&&"constructor"in t&&!(typeof v=="function"&&v instanceof v&&typeof w=="function"&&w instanceof w)&&(g=!1)}return n.delete(r),n.delete(t),g}function Gy(r){return WO(r,nN,KO)}function eh(r,t){var e=r.__data__;return JO(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Hn(r,t){var e=sO(r,t);return XO(e)?e:void 0}function $O(r){var t=Oi.call(r,Ss),e=r[Ss];try{r[Ss]=void 0;var i=!0}catch{}var s=cw.call(r);return i&&(t?r[Ss]=e:delete r[Ss]),s}var KO=Yy?function(r){return r==null?[]:(r=Object(r),Jq(Yy(r),function(t){return hw.call(r,t)}))}:oN,Vr=oa;(Jf&&Vr(new Jf(new ArrayBuffer(1)))!=Gc||ra&&Vr(new ra)!=Vc||Qf&&Vr(Qf.resolve())!=By||tp&&Vr(new tp)!=Uc||ep&&Vr(new ep)!=Zf)&&(Vr=function(r){var t=oa(r),e=t==_n?r.constructor:void 0,i=e?Ts(e):"";if(i)switch(i){case pO:return Gc;case gO:return Vc;case mO:return By;case bO:return Uc;case vO:return Zf}return t});function ZO(r,t){return t=t??Ky,!!t&&(typeof r=="number"||Kq.test(r))&&r>-1&&r%1==0&&r<t}function JO(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function QO(r){return!!Wy&&Wy in r}function tN(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Qc;return r===e}function eN(r){return cw.call(r)}function Ts(r){if(r!=null){try{return lw.call(r)}catch{}try{return r+""}catch{}}return""}function fw(r,t){return r===t||r!==r&&t!==t}var iN=Uy(function(){return arguments}())?Uy:function(r){return na(r)&&Oi.call(r,"callee")&&!hw.call(r,"callee")},Zc=Array.isArray;function rN(r){return r!=null&&gw(r.length)&&!pw(r)}var ip=dO||aN;function sN(r,t){return uw(r,t)}function pw(r){if(!mw(r))return!1;var t=oa(r);return t==tw||t==Nq||t==Oq||t==Dq}function gw(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Ky}function mw(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}function na(r){return r!=null&&typeof r=="object"}var bw=Hy?iO(Hy):YO;function nN(r){return rN(r)?HO(r):VO(r)}function oN(){return[]}function aN(){return!1}zn.exports=sN});var vw=Vi(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});var lN=Vf(),cN=sp(),np;(function(r){function t(n={},o={},a=!1){typeof n!="object"&&(n={}),typeof o!="object"&&(o={});let l=lN(o);a||(l=Object.keys(l).reduce((c,h)=>(l[h]!=null&&(c[h]=l[h]),c),{}));for(let c in n)n[c]!==void 0&&o[c]===void 0&&(l[c]=n[c]);return Object.keys(l).length>0?l:void 0}r.compose=t;function e(n={},o={}){typeof n!="object"&&(n={}),typeof o!="object"&&(o={});let a=Object.keys(n).concat(Object.keys(o)).reduce((l,c)=>(cN(n[c],o[c])||(l[c]=o[c]===void 0?null:o[c]),l),{});return Object.keys(a).length>0?a:void 0}r.diff=e;function i(n={},o={}){n=n||{};let a=Object.keys(o).reduce((l,c)=>(o[c]!==n[c]&&n[c]!==void 0&&(l[c]=o[c]),l),{});return Object.keys(n).reduce((l,c)=>(n[c]!==o[c]&&o[c]===void 0&&(l[c]=null),l),a)}r.invert=i;function s(n,o,a=!1){if(typeof n!="object")return o;if(typeof o!="object")return;if(!a)return o;let l=Object.keys(o).reduce((c,h)=>(n[h]===void 0&&(c[h]=o[h]),c),{});return Object.keys(l).length>0?l:void 0}r.transform=s})(np||(np={}));op.default=np});var cp=Vi(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});var ap;(function(r){function t(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.retain=="object"&&e.retain!==null?1:typeof e.insert=="string"?e.insert.length:1}r.length=t})(ap||(ap={}));lp.default=ap});var yw=Vi(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});var xw=cp(),hp=class{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);let e=this.ops[this.index];if(e){let i=this.offset,s=xw.default.length(e);if(t>=s-i?(t=s-i,this.index+=1,this.offset=0):this.offset+=t,typeof e.delete=="number")return{delete:t};{let n={};return e.attributes&&(n.attributes=e.attributes),typeof e.retain=="number"?n.retain=t:typeof e.retain=="object"&&e.retain!==null?n.retain=e.retain:typeof e.insert=="string"?n.insert=e.insert.substr(i,t):n.insert=e.insert,n}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?xw.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let t=this.ops[this.index];return t?typeof t.delete=="number"?"delete":typeof t.retain=="number"||typeof t.retain=="object"&&t.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let t=this.offset,e=this.index,i=this.next(),s=this.ops.slice(this.index);return this.offset=t,this.index=e,[i].concat(s)}}else return[]}};up.default=hp});var Ke=Vi((nr,rh)=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.AttributeMap=nr.OpIterator=nr.Op=void 0;var ih=K0(),hN=Vf(),dp=sp(),Ls=vw();nr.AttributeMap=Ls.default;var sr=cp();nr.Op=sr.default;var oi=yw();nr.OpIterator=oi.default;var uN="\0",ww=(r,t)=>{if(typeof r!="object"||r===null)throw new Error(`cannot retain a ${typeof r}`);if(typeof t!="object"||t===null)throw new Error(`cannot retain a ${typeof t}`);let e=Object.keys(r)[0];if(!e||e!==Object.keys(t)[0])throw new Error(`embed types not matched: ${e} != ${Object.keys(t)[0]}`);return[e,r[e],t[e]]},or=class r{constructor(t){Array.isArray(t)?this.ops=t:t!=null&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){let e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){let i={};return typeof t=="string"&&t.length===0?this:(i.insert=t,e!=null&&typeof e=="object"&&Object.keys(e).length>0&&(i.attributes=e),this.push(i))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if(typeof t=="number"&&t<=0)return this;let i={retain:t};return e!=null&&typeof e=="object"&&Object.keys(e).length>0&&(i.attributes=e),this.push(i)}push(t){let e=this.ops.length,i=this.ops[e-1];if(t=hN(t),typeof i=="object"){if(typeof t.delete=="number"&&typeof i.delete=="number")return this.ops[e-1]={delete:i.delete+t.delete},this;if(typeof i.delete=="number"&&t.insert!=null&&(e-=1,i=this.ops[e-1],typeof i!="object"))return this.ops.unshift(t),this;if(dp(t.attributes,i.attributes)){if(typeof t.insert=="string"&&typeof i.insert=="string")return this.ops[e-1]={insert:i.insert+t.insert},typeof t.attributes=="object"&&(this.ops[e-1].attributes=t.attributes),this;if(typeof t.retain=="number"&&typeof i.retain=="number")return this.ops[e-1]={retain:i.retain+t.retain},typeof t.attributes=="object"&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){let t=this.ops[this.ops.length-1];return t&&typeof t.retain=="number"&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){let e=[],i=[];return this.forEach(s=>{(t(s)?e:i).push(s)}),[e,i]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce((t,e)=>e.insert?t+sr.default.length(e):e.delete?t-e.delete:t,0)}length(){return this.reduce((t,e)=>t+sr.default.length(e),0)}slice(t=0,e=1/0){let i=[],s=new oi.default(this.ops),n=0;for(;n<e&&s.hasNext();){let o;n<t?o=s.next(t-n):(o=s.next(e-n),i.push(o)),n+=sr.default.length(o)}return new r(i)}compose(t){let e=new oi.default(this.ops),i=new oi.default(t.ops),s=[],n=i.peek();if(n!=null&&typeof n.retain=="number"&&n.attributes==null){let a=n.retain;for(;e.peekType()==="insert"&&e.peekLength()<=a;)a-=e.peekLength(),s.push(e.next());n.retain-a>0&&i.next(n.retain-a)}let o=new r(s);for(;e.hasNext()||i.hasNext();)if(i.peekType()==="insert")o.push(i.next());else if(e.peekType()==="delete")o.push(e.next());else{let a=Math.min(e.peekLength(),i.peekLength()),l=e.next(a),c=i.next(a);if(c.retain){let h={};if(typeof l.retain=="number")h.retain=typeof c.retain=="number"?a:c.retain;else if(typeof c.retain=="number")l.retain==null?h.insert=l.insert:h.retain=l.retain;else{let d=l.retain==null?"insert":"retain",[f,g,p]=ww(l[d],c.retain),b=r.getHandler(f);h[d]={[f]:b.compose(g,p,d==="retain")}}let u=Ls.default.compose(l.attributes,c.attributes,typeof l.retain=="number");if(u&&(h.attributes=u),o.push(h),!i.hasNext()&&dp(o.ops[o.ops.length-1],h)){let d=new r(e.rest());return o.concat(d).chop()}}else typeof c.delete=="number"&&(typeof l.retain=="number"||typeof l.retain=="object"&&l.retain!==null)&&o.push(c)}return o.chop()}concat(t){let e=new r(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new r;let i=[this,t].map(l=>l.map(c=>{if(c.insert!=null)return typeof c.insert=="string"?c.insert:uN;let h=l===t?"on":"with";throw new Error("diff() called "+h+" non-document")}).join("")),s=new r,n=ih(i[0],i[1],e,!0),o=new oi.default(this.ops),a=new oi.default(t.ops);return n.forEach(l=>{let c=l[1].length;for(;c>0;){let h=0;switch(l[0]){case ih.INSERT:h=Math.min(a.peekLength(),c),s.push(a.next(h));break;case ih.DELETE:h=Math.min(c,o.peekLength()),o.next(h),s.delete(h);break;case ih.EQUAL:h=Math.min(o.peekLength(),a.peekLength(),c);let u=o.next(h),d=a.next(h);dp(u.insert,d.insert)?s.retain(h,Ls.default.diff(u.attributes,d.attributes)):s.push(d).delete(h);break}c-=h}}),s.chop()}eachLine(t,e=`
`){let i=new oi.default(this.ops),s=new r,n=0;for(;i.hasNext();){if(i.peekType()!=="insert")return;let o=i.peek(),a=sr.default.length(o)-i.peekLength(),l=typeof o.insert=="string"?o.insert.indexOf(e,a)-a:-1;if(l<0)s.push(i.next());else if(l>0)s.push(i.next(l));else{if(t(s,i.next(1).attributes||{},n)===!1)return;n+=1,s=new r}}s.length()>0&&t(s,{},n)}invert(t){let e=new r;return this.reduce((i,s)=>{if(s.insert)e.delete(sr.default.length(s));else{if(typeof s.retain=="number"&&s.attributes==null)return e.retain(s.retain),i+s.retain;if(s.delete||typeof s.retain=="number"){let n=s.delete||s.retain;return t.slice(i,i+n).forEach(a=>{s.delete?e.push(a):s.retain&&s.attributes&&e.retain(sr.default.length(a),Ls.default.invert(s.attributes,a.attributes))}),i+n}else if(typeof s.retain=="object"&&s.retain!==null){let n=t.slice(i,i+1),o=new oi.default(n.ops).next(),[a,l,c]=ww(s.retain,o.insert),h=r.getHandler(a);return e.retain({[a]:h.invert(l,c)},Ls.default.invert(s.attributes,o.attributes)),i+1}}return i},0),e.chop()}transform(t,e=!1){if(e=!!e,typeof t=="number")return this.transformPosition(t,e);let i=t,s=new oi.default(this.ops),n=new oi.default(i.ops),o=new r;for(;s.hasNext()||n.hasNext();)if(s.peekType()==="insert"&&(e||n.peekType()!=="insert"))o.retain(sr.default.length(s.next()));else if(n.peekType()==="insert")o.push(n.next());else{let a=Math.min(s.peekLength(),n.peekLength()),l=s.next(a),c=n.next(a);if(l.delete)continue;if(c.delete)o.push(c);else{let h=l.retain,u=c.retain,d=typeof u=="object"&&u!==null?u:a;if(typeof h=="object"&&h!==null&&typeof u=="object"&&u!==null){let f=Object.keys(h)[0];if(f===Object.keys(u)[0]){let g=r.getHandler(f);g&&(d={[f]:g.transform(h[f],u[f],e)})}}o.retain(d,Ls.default.transform(l.attributes,c.attributes,e))}}return o.chop()}transformPosition(t,e=!1){e=!!e;let i=new oi.default(this.ops),s=0;for(;i.hasNext()&&s<=t;){let n=i.peekLength(),o=i.peekType();if(i.next(),o==="delete"){t-=Math.min(n,t-s);continue}else o==="insert"&&(s<t||!e)&&(t+=n);s+=n}return t}};or.Op=sr.default;or.OpIterator=oi.default;or.AttributeMap=Ls.default;or.handlers={};nr.default=or;typeof rh=="object"&&(rh.exports=or,rh.exports.default=or)});var Sw=Vi((u8,bp)=>{"use strict";var fN=Object.prototype.hasOwnProperty,Ee="~";function la(){}Object.create&&(la.prototype=Object.create(null),new la().__proto__||(Ee=!1));function pN(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function kw(r,t,e,i,s){if(typeof e!="function")throw new TypeError("The listener must be a function");var n=new pN(e,i||r,s),o=Ee?Ee+t:t;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],n]:r._events[o].push(n):(r._events[o]=n,r._eventsCount++),r}function sh(r,t){--r._eventsCount===0?r._events=new la:delete r._events[t]}function xe(){this._events=new la,this._eventsCount=0}xe.prototype.eventNames=function(){var t=[],e,i;if(this._eventsCount===0)return t;for(i in e=this._events)fN.call(e,i)&&t.push(Ee?i.slice(1):i);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};xe.prototype.listeners=function(t){var e=Ee?Ee+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var s=0,n=i.length,o=new Array(n);s<n;s++)o[s]=i[s].fn;return o};xe.prototype.listenerCount=function(t){var e=Ee?Ee+t:t,i=this._events[e];return i?i.fn?1:i.length:0};xe.prototype.emit=function(t,e,i,s,n,o){var a=Ee?Ee+t:t;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,h,u;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,s),!0;case 5:return l.fn.call(l.context,e,i,s,n),!0;case 6:return l.fn.call(l.context,e,i,s,n,o),!0}for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l.fn.apply(l.context,h)}else{var d=l.length,f;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,i);break;case 4:l[u].fn.call(l[u].context,e,i,s);break;default:if(!h)for(f=1,h=new Array(c-1);f<c;f++)h[f-1]=arguments[f];l[u].fn.apply(l[u].context,h)}}return!0};xe.prototype.on=function(t,e,i){return kw(this,t,e,i,!1)};xe.prototype.once=function(t,e,i){return kw(this,t,e,i,!0)};xe.prototype.removeListener=function(t,e,i,s){var n=Ee?Ee+t:t;if(!this._events[n])return this;if(!e)return sh(this,n),this;var o=this._events[n];if(o.fn)o.fn===e&&(!s||o.once)&&(!i||o.context===i)&&sh(this,n);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==e||s&&!o[a].once||i&&o[a].context!==i)&&l.push(o[a]);l.length?this._events[n]=l.length===1?l[0]:l:sh(this,n)}return this};xe.prototype.removeAllListeners=function(t){var e;return t?(e=Ee?Ee+t:t,this._events[e]&&sh(this,e)):(this._events=new la,this._eventsCount=0),this};xe.prototype.off=xe.prototype.removeListener;xe.prototype.addListener=xe.prototype.on;xe.prefixed=Ee;xe.EventEmitter=xe;typeof bp<"u"&&(bp.exports=xe)});var wd={};Du(wd,{FetchEnctype:()=>Ir,FetchMethod:()=>Ge,FetchRequest:()=>Or,FetchResponse:()=>ln,FrameElement:()=>ri,FrameLoadingStyle:()=>fs,FrameRenderer:()=>hn,PageRenderer:()=>un,PageSnapshot:()=>ii,StreamActions:()=>yd,StreamElement:()=>Sl,StreamSourceElement:()=>Cl,cache:()=>zb,clearCache:()=>Yb,config:()=>ee,connectStreamSource:()=>Io,disconnectStreamSource:()=>qo,fetch:()=>bd,fetchEnctypeFromString:()=>Pb,fetchMethodFromString:()=>El,isSafe:()=>Tl,navigator:()=>Hb,registerAdapter:()=>Wb,renderStreamMessage:()=>Xb,session:()=>jt,setConfirmMethod:()=>Ub,setFormMode:()=>Gb,setProgressBarDelay:()=>Vb,start:()=>xd,visit:()=>jb});(function(r){if(typeof r.requestSubmit=="function")return;r.requestSubmit=function(i){i?(t(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function t(i,s){i instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||e(TypeError,"The specified element is not a submit button"),i.form==s||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}function e(i,s,n){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+s+".",n)}})(HTMLFormElement.prototype);var kb=new WeakMap;function Gk(r){let t=r instanceof Element?r:r instanceof Node?r.parentElement:null,e=t?t.closest("input, button"):null;return e?.type=="submit"?e:null}function $k(r){let t=Gk(r.target);t&&t.form&&kb.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let r=window.Event.prototype;if("SubmitEvent"in window){let t=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in t))r=t;else return}addEventListener("click",$k,!0),Object.defineProperty(r,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return kb.get(this.target)}})})();var fs={eager:"eager",lazy:"lazy"},ri=class r extends HTMLElement{static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new r.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){t=="loading"?this.delegate.loadingStyleChanged():t=="src"?this.delegate.sourceURLChanged():t=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(t){t?this.setAttribute("refresh",t):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return Kk(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function Kk(r){switch(r.toLowerCase()){case"lazy":return fs.lazy;default:return fs.eager}}var Zk={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function Lo(r){if(r.getAttribute("data-turbo-eval")=="false")return r;{let t=document.createElement("script"),e=Mb();return e&&(t.nonce=e),t.textContent=r.textContent,t.async=!1,Jk(t,r),t}}function Jk(r,t){for(let{name:e,value:i}of t.attributes)r.setAttribute(e,i)}function Qk(r){let t=document.createElement("template");return t.innerHTML=r,t.content}function Bt(r,{target:t,cancelable:e,detail:i}={}){let s=new CustomEvent(r,{cancelable:e,bubbles:!0,composed:!0,detail:i});return t&&t.isConnected?t.dispatchEvent(s):document.documentElement.dispatchEvent(s),s}function mb(r){r.preventDefault(),r.stopImmediatePropagation()}function To(){return document.visibilityState==="hidden"?Cb():Sb()}function Sb(){return new Promise(r=>requestAnimationFrame(()=>r()))}function Cb(){return new Promise(r=>setTimeout(()=>r(),0))}function tS(){return Promise.resolve()}function Eb(r=""){return new DOMParser().parseFromString(r,"text/html")}function Tb(r,...t){let e=eS(r,t).replace(/^\n/,"").split(`
`),i=e[0].match(/^\s+/),s=i?i[0].length:0;return e.map(n=>n.slice(s)).join(`
`)}function eS(r,t){return r.reduce((e,i,s)=>{let n=t[s]==null?"":t[s];return e+i+n},"")}function qr(){return Array.from({length:36}).map((r,t)=>t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function pl(r,...t){for(let e of t.map(i=>i?.getAttribute(r)))if(typeof e=="string")return e;return null}function iS(r,...t){return t.some(e=>e&&e.hasAttribute(r))}function gl(...r){for(let t of r)t.localName=="turbo-frame"&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}function ml(...r){for(let t of r)t.localName=="turbo-frame"&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}function rS(r,t=2e3){return new Promise(e=>{let i=()=>{r.removeEventListener("error",i),r.removeEventListener("load",i),e()};r.addEventListener("load",i,{once:!0}),r.addEventListener("error",i,{once:!0}),setTimeout(e,t)})}function Lb(r){switch(r){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function sS(r){return r=="advance"||r=="replace"||r=="restore"}function ps(...r){let t=pl("data-turbo-action",...r);return sS(t)?t:null}function pd(r){return document.querySelector(`meta[name="${r}"]`)}function bl(r){let t=pd(r);return t&&t.content}function Mb(){let r=pd("csp-nonce");if(r){let{nonce:t,content:e}=r;return t==""?e:t}}function nS(r,t){let e=pd(r);return e||(e=document.createElement("meta"),e.setAttribute("name",r),document.head.appendChild(e)),e.setAttribute("content",t),e}function on(r,t){if(r instanceof Element)return r.closest(t)||on(r.assignedSlot||r.getRootNode()?.host,t)}function gd(r){return!!r&&r.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof r.focus=="function"}function Rb(r){return Array.from(r.querySelectorAll("[autofocus]")).find(gd)}async function oS(r,t){let e=t();r(),await Sb();let i=t();return[e,i]}function Ib(r){if(r==="_blank")return!1;if(r){for(let t of document.getElementsByName(r))if(t instanceof HTMLIFrameElement)return!1;return!0}else return!0}function qb(r){return on(r,"a[href]:not([target^=_]):not([download])")}function Ob(r){return le(r.getAttribute("href")||"")}function aS(r,t){let e=null;return(...i)=>{let s=()=>r.apply(this,i);clearTimeout(e),e=setTimeout(s,t)}}var lS={"aria-disabled":{beforeSubmit:r=>{r.setAttribute("aria-disabled","true"),r.addEventListener("click",mb)},afterSubmit:r=>{r.removeAttribute("aria-disabled"),r.removeEventListener("click",mb)}},disabled:{beforeSubmit:r=>r.disabled=!0,afterSubmit:r=>r.disabled=!1}},Fu=class{#t=null;constructor(t){Object.assign(this,t)}get submitter(){return this.#t}set submitter(t){this.#t=lS[t]||t}},cS=new Fu({mode:"on",submitter:"disabled"}),ee={drive:Zk,forms:cS};function le(r){return new URL(r.toString(),document.baseURI)}function gs(r){let t;if(r.hash)return r.hash.slice(1);if(t=r.href.match(/#(.*)$/))return t[1]}function md(r,t){let e=t?.getAttribute("formaction")||r.getAttribute("action")||r.action;return le(e)}function hS(r){return(pS(r).match(/\.[^.]*$/)||[])[0]||""}function uS(r,t){let e=gS(t);return r.href===le(e).href||r.href.startsWith(e)}function Rr(r,t){return uS(r,t)&&!ee.drive.unvisitableExtensions.has(hS(r))}function Bu(r){let t=gs(r);return t!=null?r.href.slice(0,-(t.length+1)):r.href}function dl(r){return Bu(r)}function dS(r,t){return le(r).href==le(t).href}function fS(r){return r.pathname.split("/").slice(1)}function pS(r){return fS(r).slice(-1)[0]}function gS(r){return mS(r.origin+r.pathname)}function mS(r){return r.endsWith("/")?r:r+"/"}var ln=class{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return le(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}},_u=class extends Set{constructor(t){super(),this.maxSize=t}add(t){if(this.size>=this.maxSize){let i=this.values().next().value;this.delete(i)}super.add(t)}},Nb=new _u(20),bS=window.fetch;function bd(r,t={}){let e=new Headers(t.headers||{}),i=qr();return Nb.add(i),e.append("X-Turbo-Request-Id",i),bS(r,{...t,headers:e})}function El(r){switch(r.toLowerCase()){case"get":return Ge.get;case"post":return Ge.post;case"put":return Ge.put;case"patch":return Ge.patch;case"delete":return Ge.delete}}var Ge={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Pb(r){switch(r.toLowerCase()){case Ir.multipart:return Ir.multipart;case Ir.plain:return Ir.plain;default:return Ir.urlEncoded}}var Ir={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},Or=class{abortController=new AbortController;#t=t=>{};constructor(t,e,i,s=new URLSearchParams,n=null,o=Ir.urlEncoded){let[a,l]=bb(le(i),e,s,o);this.delegate=t,this.url=a,this.target=n,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:e.toUpperCase(),headers:{...this.defaultHeaders},body:l,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=o}get method(){return this.fetchOptions.method}set method(t){let e=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,i=El(t)||Ge.get;this.url.search="";let[s,n]=bb(this.url,i,e,this.enctype);this.url=s,this.fetchOptions.body=n,this.fetchOptions.method=i.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(t){this.fetchOptions.headers=t}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(t){this.fetchOptions.body=t}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:t}=this;this.delegate.prepareRequest(this);let e=await this.#e(t);try{this.delegate.requestStarted(this),e.detail.fetchRequest?this.response=e.detail.fetchRequest.response:this.response=bd(this.url.href,t);let i=await this.response;return await this.receive(i)}catch(i){if(i.name!=="AbortError")throw this.#i(i)&&this.delegate.requestErrored(this,i),i}finally{this.delegate.requestFinished(this)}}async receive(t){let e=new ln(t);return Bt("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return Tl(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}async#e(t){let e=new Promise(s=>this.#t=s),i=Bt("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:this.#t},target:this.target});return this.url=i.detail.url,i.defaultPrevented&&await e,i}#i(t){return!Bt("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented}};function Tl(r){return El(r)==Ge.get}function bb(r,t,e,i){let s=Array.from(e).length>0?new URLSearchParams(Db(e)):r.searchParams;return Tl(t)?[vS(r,s),null]:i==Ir.urlEncoded?[r,s]:[r,e]}function Db(r){let t=[];for(let[e,i]of r)i instanceof File||t.push([e,i]);return t}function vS(r,t){let e=new URLSearchParams(Db(t));return r.search=e.toString(),r}var zu=class{started=!1;constructor(t,e){this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=t=>{t.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},Nr=class{static contentType="text/vnd.turbo-stream.html";static wrap(t){return typeof t=="string"?new this(Qk(t)):t}constructor(t){this.fragment=xS(t)}};function xS(r){for(let t of r.querySelectorAll("turbo-stream")){let e=document.importNode(t,!0);for(let i of e.templateElement.content.querySelectorAll("script"))i.replaceWith(Lo(i));t.replaceWith(e)}return r}var yS=100,Hu=class{#t=null;#e=null;get(t){if(this.#e&&this.#e.url===t&&this.#e.expire>Date.now())return this.#e.request}setLater(t,e,i){this.clear(),this.#t=setTimeout(()=>{e.perform(),this.set(t,e,i),this.#t=null},yS)}set(t,e,i){this.#e={url:t,request:e,expire:new Date(new Date().getTime()+i)}}clear(){this.#t&&clearTimeout(this.#t),this.#e=null}},wS=10*1e3,nn=new Hu,sn={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},vl=class r{state=sn.initialized;static confirmMethod(t){return Promise.resolve(confirm(t))}constructor(t,e,i,s=!1){let n=TS(e,i),o=ES(CS(e,i),n),a=AS(e,i),l=LS(e,i);this.delegate=t,this.formElement=e,this.submitter=i,this.fetchRequest=new Or(this,n,o,a,e,l),this.mustRedirect=s}get method(){return this.fetchRequest.method}set method(t){this.fetchRequest.method=t}get action(){return this.fetchRequest.url.toString()}set action(t){this.fetchRequest.url=le(t)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:t,requesting:e}=sn,i=pl("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await(typeof ee.forms.confirm=="function"?ee.forms.confirm:r.confirmMethod)(i,this.formElement,this.submitter))&&this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){let{stopping:t,stopped:e}=sn;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){let e=kS(bl("csrf-param"))||bl("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(Nr.contentType)}requestStarted(t){this.state=sn.waiting,this.submitter&&ee.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),gl(this.formElement),Bt("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){nn.clear(),this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError){this.delegate.formSubmissionFailedWithResponse(this,e);return}if(nn.clear(),this.requestMustRedirect(t)&&SS(e)){let i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=sn.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){this.state=sn.stopped,this.submitter&&ee.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),ml(this.formElement),Bt("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let t=this.submitter;t.value=this.originalSubmitText}}}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||iS("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function AS(r,t){let e=new FormData(r),i=t?.getAttribute("name"),s=t?.getAttribute("value");return i&&e.append(i,s||""),e}function kS(r){if(r!=null){let e=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(r));if(e){let i=e.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function SS(r){return r.statusCode==200&&!r.redirected}function CS(r,t){let e=typeof r.action=="string"?r.action:null;return t?.hasAttribute("formaction")?t.getAttribute("formaction")||"":r.getAttribute("action")||e||""}function ES(r,t){let e=le(r);return Tl(t)&&(e.search=""),e}function TS(r,t){let e=t?.getAttribute("formmethod")||r.getAttribute("method")||"";return El(e.toLowerCase())||Ge.get}function LS(r,t){return Pb(t?.getAttribute("formenctype")||r.enctype)}var cn=class{constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return this.getElementForAnchor(t)!=null}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return Rb(this.element)}get permanentElements(){return Bb(this.element)}getPermanentElementById(t){return Fb(this.element,t)}getPermanentElementMapForSnapshot(t){let e={};for(let i of this.permanentElements){let{id:s}=i,n=t.getPermanentElementById(s);n&&(e[s]=[i,n])}return e}};function Fb(r,t){return r.querySelector(`#${t}[data-turbo-permanent]`)}function Bb(r){return r.querySelectorAll("[id][data-turbo-permanent]")}var Mo=class{started=!1;constructor(t,e){this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=t=>{if(!t.defaultPrevented){let e=t.target instanceof HTMLFormElement?t.target:void 0,i=t.submitter||void 0;e&&MS(e,i)&&RS(e,i)&&this.delegate.willSubmitForm(e,i)&&(t.preventDefault(),t.stopImmediatePropagation(),this.delegate.formSubmitted(e,i))}}};function MS(r,t){return(t?.getAttribute("formmethod")||r.getAttribute("method"))!="dialog"}function RS(r,t){let e=t?.getAttribute("formtarget")||r.getAttribute("target");return Ib(e)}var xl=class{#t=t=>{};#e=t=>{};constructor(t,e){this.delegate=t,this.element=e}scrollToAnchor(t){let e=this.snapshot.getElementForAnchor(t);e?(this.scrollToElement(e),this.focusElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(gs(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){let{isPreview:e,shouldRender:i,willRender:s,newSnapshot:n}=t,o=s;if(i)try{this.renderPromise=new Promise(h=>this.#t=h),this.renderer=t,await this.prepareToRenderSnapshot(t);let a=new Promise(h=>this.#e=h),l={resume:this.#e,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(n,l)||await a,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(n,e,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,this.#t(void 0),delete this.renderPromise}else o&&this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(t){this.element.setAttribute("data-turbo-visit-direction",t)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}},Wu=class extends xl{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new cn(this.element)}},yl=class{constructor(t,e){this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=t=>{this.clickEventIsSignificant(t)?this.clickEvent=t:delete this.clickEvent};linkClicked=t=>{this.clickEvent&&this.clickEventIsSignificant(t)&&this.delegate.shouldInterceptLinkClick(t.target,t.detail.url,t.detail.originalEvent)&&(this.clickEvent.preventDefault(),t.preventDefault(),this.delegate.linkClickIntercepted(t.target,t.detail.url,t.detail.originalEvent)),delete this.clickEvent};willVisit=t=>{delete this.clickEvent};clickEventIsSignificant(t){let e=t.composed?t.target?.parentElement:t.target,i=qb(e)||e;return i instanceof Element&&i.closest("turbo-frame, html")==this.element}},wl=class{started=!1;constructor(t,e){this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=t=>{if(t instanceof MouseEvent&&this.clickEventIsSignificant(t)){let e=t.composedPath&&t.composedPath()[0]||t.target,i=qb(e);if(i&&Ib(i.target)){let s=Ob(i);this.delegate.willFollowLinkToLocation(i,s,t)&&(t.preventDefault(),this.delegate.followedLinkToLocation(i,s))}}};clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}},Al=class{constructor(t,e){this.delegate=t,this.linkInterceptor=new wl(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(t,e){return!1}prefetchAndCacheRequestToLocation(t,e){}willFollowLinkToLocation(t,e,i){return this.delegate.willSubmitFormLinkToLocation(t,e,i)&&(t.hasAttribute("data-turbo-method")||t.hasAttribute("data-turbo-stream"))}followedLinkToLocation(t,e){let i=document.createElement("form"),s="hidden";for(let[u,d]of e.searchParams)i.append(Object.assign(document.createElement("input"),{type:s,name:u,value:d}));let n=Object.assign(e,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",n.href),i.setAttribute("hidden","");let o=t.getAttribute("data-turbo-method");o&&i.setAttribute("method",o);let a=t.getAttribute("data-turbo-frame");a&&i.setAttribute("data-turbo-frame",a);let l=ps(t);l&&i.setAttribute("data-turbo-action",l);let c=t.getAttribute("data-turbo-confirm");c&&i.setAttribute("data-turbo-confirm",c),t.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}},kl=class{static async preservingPermanentElements(t,e,i){let s=new this(t,e);s.enter(),await i(),s.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(let t in this.permanentElementMap){let[e,i]=this.permanentElementMap[t];this.delegate.enteringBardo(e,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(let t in this.permanentElementMap){let[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){let e=IS(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){let e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){this.getPlaceholderById(t.id)?.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find(e=>e.content==t)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function IS(r){let t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",r.id),t}var Ro=class{#t=null;static renderElement(t,e){}constructor(t,e,i,s=!0){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=i,this.willRender=s,this.renderElement=this.constructor.renderElement,this.promise=new Promise((n,o)=>this.resolvingFunctions={resolve:n,reject:o})}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await kl.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){let t=this.connectedSnapshot.firstAutofocusableElement;t&&t.focus()}}enteringBardo(t){this.#t||t.contains(this.currentSnapshot.activeElement)&&(this.#t=this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(this.#t)&&this.#t instanceof HTMLElement&&(this.#t.focus(),this.#t=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},hn=class extends Ro{static renderElement(t,e){let i=document.createRange();i.selectNodeContents(t),i.deleteContents();let s=e,n=s.ownerDocument?.createRange();n&&(n.selectNodeContents(s),t.appendChild(n.extractContents()))}constructor(t,e,i,s,n,o=!0){super(e,i,s,n,o),this.delegate=t}get shouldRender(){return!0}async render(){await To(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await To(),this.focusFirstAutofocusableElement(),await To(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let t=this.currentElement.firstElementChild,e=qS(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=OS(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(t)return t.scrollIntoView({block:e,behavior:i}),!0}return!1}activateScriptElements(){for(let t of this.newScriptElements){let e=Lo(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function qS(r,t){return r=="end"||r=="start"||r=="center"||r=="nearest"?r:t}function OS(r,t){return r=="auto"||r=="smooth"?r:t}var NS=function(){let r=new Set,t={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:d,afterNodeAdded:d,beforeNodeMorphed:d,afterNodeMorphed:d,beforeNodeRemoved:d,afterNodeRemoved:d,beforeAttributeUpdated:d},head:{style:"merge",shouldPreserve:function(S){return S.getAttribute("im-preserve")==="true"},shouldReAppend:function(S){return S.getAttribute("im-re-append")==="true"},shouldRemove:d,afterHeadMorphed:d}};function e(S,R,L={}){S instanceof Document&&(S=S.documentElement),typeof R=="string"&&(R=w(R));let q=y(R),T=g(S,q,L);return i(S,q,T)}function i(S,R,L){if(L.head.block){let q=S.querySelector("head"),T=R.querySelector("head");if(q&&T){let k=u(T,q,L);Promise.all(k).then(function(){i(S,R,Object.assign(L,{head:{block:!1,ignore:!0}}))});return}}if(L.morphStyle==="innerHTML")return o(R,S,L),S.children;if(L.morphStyle==="outerHTML"||L.morphStyle==null){let q=C(R,S,L),T=q?.previousSibling,k=q?.nextSibling,D=n(S,q,L);return q?A(T,D,k):[]}else throw"Do not understand how to morph style "+L.morphStyle}function s(S,R){return R.ignoreActiveValue&&S===document.activeElement&&S!==document.body}function n(S,R,L){if(!(L.ignoreActive&&S===document.activeElement))return R==null?L.callbacks.beforeNodeRemoved(S)===!1?S:(S.remove(),L.callbacks.afterNodeRemoved(S),null):b(S,R)?(L.callbacks.beforeNodeMorphed(S,R)===!1||(S instanceof HTMLHeadElement&&L.head.ignore||(S instanceof HTMLHeadElement&&L.head.style!=="morph"?u(R,S,L):(l(R,S,L),s(S,L)||o(R,S,L))),L.callbacks.afterNodeMorphed(S,R)),S):L.callbacks.beforeNodeRemoved(S)===!1||L.callbacks.beforeNodeAdded(R)===!1?S:(S.parentElement.replaceChild(R,S),L.callbacks.afterNodeAdded(R),L.callbacks.afterNodeRemoved(S),R)}function o(S,R,L){let q=S.firstChild,T=R.firstChild,k;for(;q;){if(k=q,q=k.nextSibling,T==null){if(L.callbacks.beforeNodeAdded(k)===!1)return;R.appendChild(k),L.callbacks.afterNodeAdded(k),z(L,k);continue}if(p(k,T,L)){n(T,k,L),T=T.nextSibling,z(L,k);continue}let D=x(S,R,k,T,L);if(D){T=m(T,D,L),n(D,k,L),z(L,k);continue}let X=v(S,R,k,T,L);if(X){T=m(T,X,L),n(X,k,L),z(L,k);continue}if(L.callbacks.beforeNodeAdded(k)===!1)return;R.insertBefore(k,T),L.callbacks.afterNodeAdded(k),z(L,k)}for(;T!==null;){let D=T;T=T.nextSibling,O(D,L)}}function a(S,R,L,q){return S==="value"&&q.ignoreActiveValue&&R===document.activeElement?!0:q.callbacks.beforeAttributeUpdated(S,R,L)===!1}function l(S,R,L){let q=S.nodeType;if(q===1){let T=S.attributes,k=R.attributes;for(let D of T)a(D.name,R,"update",L)||R.getAttribute(D.name)!==D.value&&R.setAttribute(D.name,D.value);for(let D=k.length-1;0<=D;D--){let X=k[D];a(X.name,R,"remove",L)||S.hasAttribute(X.name)||R.removeAttribute(X.name)}}(q===8||q===3)&&R.nodeValue!==S.nodeValue&&(R.nodeValue=S.nodeValue),s(R,L)||h(S,R,L)}function c(S,R,L,q){if(S[L]!==R[L]){let T=a(L,R,"update",q);T||(R[L]=S[L]),S[L]?T||R.setAttribute(L,S[L]):a(L,R,"remove",q)||R.removeAttribute(L)}}function h(S,R,L){if(S instanceof HTMLInputElement&&R instanceof HTMLInputElement&&S.type!=="file"){let q=S.value,T=R.value;c(S,R,"checked",L),c(S,R,"disabled",L),S.hasAttribute("value")?q!==T&&(a("value",R,"update",L)||(R.setAttribute("value",q),R.value=q)):a("value",R,"remove",L)||(R.value="",R.removeAttribute("value"))}else if(S instanceof HTMLOptionElement)c(S,R,"selected",L);else if(S instanceof HTMLTextAreaElement&&R instanceof HTMLTextAreaElement){let q=S.value,T=R.value;if(a("value",R,"update",L))return;q!==T&&(R.value=q),R.firstChild&&R.firstChild.nodeValue!==q&&(R.firstChild.nodeValue=q)}}function u(S,R,L){let q=[],T=[],k=[],D=[],X=L.head.style,H=new Map;for(let W of S.children)H.set(W.outerHTML,W);for(let W of R.children){let Y=H.has(W.outerHTML),$=L.head.shouldReAppend(W),rt=L.head.shouldPreserve(W);Y||rt?$?T.push(W):(H.delete(W.outerHTML),k.push(W)):X==="append"?$&&(T.push(W),D.push(W)):L.head.shouldRemove(W)!==!1&&T.push(W)}D.push(...H.values());let G=[];for(let W of D){let Y=document.createRange().createContextualFragment(W.outerHTML).firstChild;if(L.callbacks.beforeNodeAdded(Y)!==!1){if(Y.href||Y.src){let $=null,rt=new Promise(function(nt){$=nt});Y.addEventListener("load",function(){$()}),G.push(rt)}R.appendChild(Y),L.callbacks.afterNodeAdded(Y),q.push(Y)}}for(let W of T)L.callbacks.beforeNodeRemoved(W)!==!1&&(R.removeChild(W),L.callbacks.afterNodeRemoved(W));return L.head.afterHeadMorphed(R,{added:q,kept:k,removed:T}),G}function d(){}function f(S){let R={};return Object.assign(R,t),Object.assign(R,S),R.callbacks={},Object.assign(R.callbacks,t.callbacks),Object.assign(R.callbacks,S.callbacks),R.head={},Object.assign(R.head,t.head),Object.assign(R.head,S.head),R}function g(S,R,L){return L=f(L),{target:S,newContent:R,config:L,morphStyle:L.morphStyle,ignoreActive:L.ignoreActive,ignoreActiveValue:L.ignoreActiveValue,idMap:I(S,R),deadIds:new Set,callbacks:L.callbacks,head:L.head}}function p(S,R,L){return S==null||R==null?!1:S.nodeType===R.nodeType&&S.tagName===R.tagName?S.id!==""&&S.id===R.id?!0:N(L,S,R)>0:!1}function b(S,R){return S==null||R==null?!1:S.nodeType===R.nodeType&&S.tagName===R.tagName}function m(S,R,L){for(;S!==R;){let q=S;S=S.nextSibling,O(q,L)}return z(L,R),R.nextSibling}function x(S,R,L,q,T){let k=N(T,L,R),D=null;if(k>0){let X=q,H=0;for(;X!=null;){if(p(L,X,T))return X;if(H+=N(T,X,S),H>k)return null;X=X.nextSibling}}return D}function v(S,R,L,q,T){let k=q,D=L.nextSibling,X=0;for(;k!=null;){if(N(T,k,S)>0)return null;if(b(L,k))return k;if(b(D,k)&&(X++,D=D.nextSibling,X>=2))return null;k=k.nextSibling}return k}function w(S){let R=new DOMParser,L=S.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(L.match(/<\/html>/)||L.match(/<\/head>/)||L.match(/<\/body>/)){let q=R.parseFromString(S,"text/html");if(L.match(/<\/html>/))return q.generatedByIdiomorph=!0,q;{let T=q.firstChild;return T?(T.generatedByIdiomorph=!0,T):null}}else{let T=R.parseFromString("<body><template>"+S+"</template></body>","text/html").body.querySelector("template").content;return T.generatedByIdiomorph=!0,T}}function y(S){if(S==null)return document.createElement("div");if(S.generatedByIdiomorph)return S;if(S instanceof Node){let R=document.createElement("div");return R.append(S),R}else{let R=document.createElement("div");for(let L of[...S])R.append(L);return R}}function A(S,R,L){let q=[],T=[];for(;S!=null;)q.push(S),S=S.previousSibling;for(;q.length>0;){let k=q.pop();T.push(k),R.parentElement.insertBefore(k,R)}for(T.push(R);L!=null;)q.push(L),T.push(L),L=L.nextSibling;for(;q.length>0;)R.parentElement.insertBefore(q.pop(),R.nextSibling);return T}function C(S,R,L){let q;q=S.firstChild;let T=q,k=0;for(;q;){let D=M(q,R,L);D>k&&(T=q,k=D),q=q.nextSibling}return T}function M(S,R,L){return b(S,R)?.5+N(L,S,R):0}function O(S,R){z(R,S),R.callbacks.beforeNodeRemoved(S)!==!1&&(S.remove(),R.callbacks.afterNodeRemoved(S))}function B(S,R){return!S.deadIds.has(R)}function _(S,R,L){return(S.idMap.get(L)||r).has(R)}function z(S,R){let L=S.idMap.get(R)||r;for(let q of L)S.deadIds.add(q)}function N(S,R,L){let q=S.idMap.get(R)||r,T=0;for(let k of q)B(S,k)&&_(S,k,L)&&++T;return T}function E(S,R){let L=S.parentElement,q=S.querySelectorAll("[id]");for(let T of q){let k=T;for(;k!==L&&k!=null;){let D=R.get(k);D==null&&(D=new Set,R.set(k,D)),D.add(T.id),k=k.parentElement}}}function I(S,R){let L=new Map;return E(S,L),E(R,L),L}return{morph:e,defaults:t}}();function vd(r,t,{callbacks:e,...i}={}){NS.morph(r,t,{...i,callbacks:new ju(e)})}function _b(r,t){vd(r,t.children,{morphStyle:"innerHTML"})}var ju=class{#t;constructor({beforeNodeMorphed:t}={}){this.#t=t||(()=>!0)}beforeNodeAdded=t=>!(t.id&&t.hasAttribute("data-turbo-permanent")&&document.getElementById(t.id));beforeNodeMorphed=(t,e)=>{if(t instanceof Element)return!t.hasAttribute("data-turbo-permanent")&&this.#t(t,e)?!Bt("turbo:before-morph-element",{cancelable:!0,target:t,detail:{currentElement:t,newElement:e}}).defaultPrevented:!1};beforeAttributeUpdated=(t,e,i)=>!Bt("turbo:before-morph-attribute",{cancelable:!0,target:e,detail:{attributeName:t,mutationType:i}}).defaultPrevented;beforeNodeRemoved=t=>this.beforeNodeMorphed(t);afterNodeMorphed=(t,e)=>{t instanceof Element&&Bt("turbo:morph-element",{target:t,detail:{currentElement:t,newElement:e}})}},Xu=class extends hn{static renderElement(t,e){Bt("turbo:before-frame-morph",{target:t,detail:{currentElement:t,newElement:e}}),_b(t,e)}async preservingPermanentElements(t){return await t()}},Yu=class r{static animationDuration=300;static get defaultCSS(){return Tb`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${r.animationDuration}ms ease-out,
          opacity ${r.animationDuration/2}ms ${r.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,r.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,r.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let t=document.createElement("style");t.type="text/css",t.textContent=r.defaultCSS;let e=Mb();return e&&(t.nonce=e),t}createProgressElement(){let t=document.createElement("div");return t.className="turbo-progress-bar",t}},Vu=class extends cn{detailsByOuterHTML=this.children.filter(t=>!BS(t)).map(t=>HS(t)).reduce((t,e)=>{let{outerHTML:i}=e,s=i in t?t[i]:{type:PS(e),tracked:DS(e),elements:[]};return{...t,[i]:{...s,elements:[...s.elements,e]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(t=>this.detailsByOuterHTML[t].tracked).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,e){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in e.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==t).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((t,e)=>{let{type:i,tracked:s,elements:n}=this.detailsByOuterHTML[e];return i==null&&!s?[...t,...n]:n.length>1?[...t,...n.slice(1)]:t},[])}getMetaValue(t){let e=this.findMetaElementByName(t);return e?e.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce((e,i)=>{let{elements:[s]}=this.detailsByOuterHTML[i];return zS(s,t)?s:e},void 0|void 0)}};function PS(r){if(FS(r))return"script";if(_S(r))return"stylesheet"}function DS(r){return r.getAttribute("data-turbo-track")=="reload"}function FS(r){return r.localName=="script"}function BS(r){return r.localName=="noscript"}function _S(r){let t=r.localName;return t=="style"||t=="link"&&r.getAttribute("rel")=="stylesheet"}function zS(r,t){return r.localName=="meta"&&r.getAttribute("name")==t}function HS(r){return r.hasAttribute("nonce")&&r.setAttribute("nonce",""),r}var ii=class r extends cn{static fromHTMLString(t=""){return this.fromDocument(Eb(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({documentElement:t,body:e,head:i}){return new this(t,e,new Vu(i))}constructor(t,e,i){super(e),this.documentElement=t,this.headSnapshot=i}clone(){let t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),i=t.querySelectorAll("select");for(let[s,n]of e.entries()){let o=i[s];for(let a of o.selectedOptions)a.selected=!1;for(let a of n.selectedOptions)o.options[a.index].selected=!0}for(let s of t.querySelectorAll('input[type="password"]'))s.value="";return new r(this.documentElement,t,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let t=this.getSetting("root")??"/";return le(t)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}},Uu=class{#t=!1;#e=Promise.resolve();renderChange(t,e){return t&&this.viewTransitionsAvailable&&!this.#t?(this.#t=!0,this.#e=this.#e.then(async()=>{await document.startViewTransition(e).finished})):this.#e=this.#e.then(e),this.#e}get viewTransitionsAvailable(){return document.startViewTransition}},WS={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},fl={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},Ui={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},an={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},jS={advance:"forward",restore:"back",replace:"none"},Gu=class{identifier=qr();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=Ui.initialized;viewTransitioner=new Uu;constructor(t,e,i,s={}){this.delegate=t,this.location=e,this.restorationIdentifier=i||qr();let{action:n,historyChanged:o,referrer:a,snapshot:l,snapshotHTML:c,response:h,visitCachedSnapshot:u,willRender:d,updateHistory:f,shouldCacheSnapshot:g,acceptsStreamResponse:p,direction:b}={...WS,...s};this.action=n,this.historyChanged=o,this.referrer=a,this.snapshot=l,this.snapshotHTML=c,this.response=h,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=u,this.willRender=d,this.updateHistory=f,this.scrolled=!d,this.shouldCacheSnapshot=g,this.acceptsStreamResponse=p,this.direction=b||jS[n]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==Ui.initialized&&(this.recordTimingMetric(fl.visitStart),this.state=Ui.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==Ui.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=Ui.canceled)}complete(){this.state==Ui.started&&(this.recordTimingMetric(fl.visitEnd),this.adapter.visitCompleted(this),this.state=Ui.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==Ui.started&&(this.state=Ui.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let t=this.location.href===this.referrer?.href?"replace":this.action,e=Lb(t);this.history.update(e,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Or(this,Ge.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(fl.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){let{statusCode:e}=t;vb(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(fl.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:t,responseHTML:e}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,vb(t)&&e!=null){let i=ii.fromHTMLString(e);await this.renderPageSnapshot(i,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(ii.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!gs(this.location)||t.hasAnchor(gs(this.location)))&&(this.action=="restore"||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return ii.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let t=this.getCachedSnapshot();if(t){let e=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(t,e),this.adapter.visitRendered(this),e||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(Nr.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){let i=await e.responseHTML,{redirected:s,statusCode:n}=e;i==null?this.recordResponse({statusCode:an.contentTypeMismatch,redirected:s}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:n,responseHTML:i,redirected:s}))}async requestFailedWithResponse(t,e){let i=await e.responseHTML,{redirected:s,statusCode:n}=e;i==null?this.recordResponse({statusCode:an.contentTypeMismatch,redirected:s}):this.recordResponse({statusCode:n,responseHTML:i,redirected:s})}requestErrored(t,e){this.recordResponse({statusCode:an.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){let t=gs(this.location);if(t!=null)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(t=>t&&this.visitCachedSnapshot(t)),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise(e=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>e(),0):requestAnimationFrame(()=>e())}),await t(),delete this.frame}async renderPageSnapshot(t,e){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(t),async()=>{await this.view.renderPage(t,e,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function vb(r){return r>=200&&r<300}var $u=class{progressBar=new Yu;constructor(t){this.session=t}visitProposedToLocation(t,e){Rr(t,this.navigator.rootLocation)?this.navigator.startVisit(t,e?.restorationIdentifier||qr(),e):window.location.href=t.toString()}visitStarted(t){this.location=t.location,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||t.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case an.networkFailure:case an.timeoutFailure:case an.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){}visitCompleted(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(t){this.reload(t)}visitFailed(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(t){}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(t){Bt("turbo:reload",{detail:t}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},Ku=class{selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=t=>{for(let e of this.temporaryElements)e.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...t]}},Zu=class{constructor(t,e){this.session=t,this.element=e,this.linkInterceptor=new yl(this,e),this.formSubmitObserver=new Mo(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,i){return this.#e(t)}linkClickIntercepted(t,e,i){let s=this.#i(t);s&&s.delegate.linkClickIntercepted(t,e,i)}willSubmitForm(t,e){return t.closest("turbo-frame")==null&&this.#t(t,e)&&this.#e(t,e)}formSubmitted(t,e){let i=this.#i(t,e);i&&i.delegate.formSubmitted(t,e)}#t(t,e){let i=md(t,e),s=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),n=le(s?.content??"/");return this.#e(t,e)&&Rr(i,n)}#e(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){let s=this.#i(t,e);return s?s!=t.closest("turbo-frame"):!1}else return!1}#i(t,e){let i=e?.getAttribute("data-turbo-frame")||t.getAttribute("data-turbo-frame");if(i&&i!="_top"){let s=this.element.querySelector(`#${i}:not([disabled])`);if(s instanceof ri)return s}}},Ju=class{location;restorationIdentifier=qr();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(t){this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,i=qr()){t===history.pushState&&++this.currentIndex;let s={turbo:{restorationIdentifier:i,restorationIndex:this.currentIndex}};t.call(history,s,"",e.href),this.location=e,this.restorationIdentifier=i}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){let{restorationIdentifier:e}=this,i=this.restorationData[e];this.restorationData[e]={...i,...t}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=t=>{if(this.shouldHandlePopState()){let{turbo:e}=t.state||{};if(e){this.location=new URL(window.location.href);let{restorationIdentifier:i,restorationIndex:s}=e;this.restorationIdentifier=i;let n=s>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,i,n),this.currentIndex=s}}};onPageLoad=async t=>{await tS(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},Qu=class{started=!1;#t=null;constructor(t,e){this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#e,{once:!0}):this.#e())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#i,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#n,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#s,!0),this.started=!1)}#e=()=>{this.eventTarget.addEventListener("mouseenter",this.#i,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#n,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#s,!0),this.started=!0};#i=t=>{if(bl("turbo-prefetch")==="false")return;let e=t.target;if(e.matches&&e.matches("a[href]:not([target^=_]):not([download])")&&this.#l(e)){let s=e,n=Ob(s);if(this.delegate.canPrefetchRequestToLocation(s,n)){this.#t=s;let o=new Or(this,Ge.get,n,new URLSearchParams,e);nn.setLater(n.toString(),o,this.#r)}}};#n=t=>{t.target===this.#t&&this.#o()};#o=()=>{nn.clear(),this.#t=null};#s=t=>{if(t.target.tagName!=="FORM"&&t.detail.fetchOptions.method==="GET"){let e=nn.get(t.detail.url.toString());e&&(t.detail.fetchRequest=e),nn.clear()}};prepareRequest(t){let e=t.target;t.headers["X-Sec-Purpose"]="prefetch";let i=e.closest("turbo-frame"),s=e.getAttribute("data-turbo-frame")||i?.getAttribute("target")||i?.id;s&&s!=="_top"&&(t.headers["Turbo-Frame"]=s)}requestSucceededWithResponse(){}requestStarted(t){}requestErrored(t){}requestFinished(t){}requestPreventedHandlingResponse(t,e){}requestFailedWithResponse(t,e){}get#r(){return Number(bl("turbo-prefetch-cache-time"))||wS}#l(t){return!(!t.getAttribute("href")||XS(t)||YS(t)||VS(t)||US(t)||$S(t))}},XS=r=>r.origin!==document.location.origin||!["http:","https:"].includes(r.protocol)||r.hasAttribute("target"),YS=r=>r.pathname+r.search===document.location.pathname+document.location.search||r.href.startsWith("#"),VS=r=>{if(r.getAttribute("data-turbo-prefetch")==="false"||r.getAttribute("data-turbo")==="false")return!0;let t=on(r,"[data-turbo-prefetch]");return!!(t&&t.getAttribute("data-turbo-prefetch")==="false")},US=r=>{let t=r.getAttribute("data-turbo-method");return!!(t&&t.toLowerCase()!=="get"||GS(r)||r.hasAttribute("data-turbo-confirm")||r.hasAttribute("data-turbo-stream"))},GS=r=>r.hasAttribute("data-remote")||r.hasAttribute("data-behavior")||r.hasAttribute("data-confirm")||r.hasAttribute("data-method"),$S=r=>Bt("turbo:before-prefetch",{target:r,cancelable:!0}).defaultPrevented,td=class{constructor(t){this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&this.delegate.visitProposedToLocation(t,e)}startVisit(t,e,i={}){this.stop(),this.currentVisit=new Gu(this,le(t),e,{referrer:this.location,...i}),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new vl(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(t){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){let i=await e.responseHTML;if(i){let s=t.isSafe;s||this.view.clearSnapshotCache();let{statusCode:n,redirected:o}=e,l={action:this.#t(t,e),shouldCacheSnapshot:s,response:{statusCode:n,responseHTML:i,redirected:o}};this.proposeVisit(e.location,l)}}}async formSubmissionFailedWithResponse(t,e){let i=await e.responseHTML;if(i){let s=ii.fromHTMLString(i);e.serverError?await this.view.renderError(s,this.currentVisit):await this.view.renderPage(s,!1,!0,this.currentVisit),s.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(t)}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t),delete this.currentVisit}locationWithActionIsSamePage(t,e){let i=gs(t),s=gs(this.view.lastRenderedLocation),n=e==="restore"&&typeof i>"u";return e!=="replace"&&Bu(t)===Bu(this.view.lastRenderedLocation)&&(n||i!=null&&i!==s)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#t(t,e){let{submitter:i,formElement:s}=t;return ps(i,s)||this.#e(e)}#e(t){return t.redirected&&t.location.href===this.location?.href?"replace":"advance"}},ds={initial:0,loading:1,interactive:2,complete:3},ed=class{stage=ds.initial;started=!1;constructor(t){this.delegate=t}start(){this.started||(this.stage==ds.initial&&(this.stage=ds.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:t}=this;t=="interactive"?this.pageIsInteractive():t=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==ds.loading&&(this.stage=ds.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==ds.interactive&&(this.stage=ds.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},id=class{started=!1;constructor(t){this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(t){this.delegate.scrollPositionChanged(t)}},rd=class{render({fragment:t}){kl.preservingPermanentElements(this,KS(t),()=>{ZS(t,()=>{JS(()=>{document.documentElement.appendChild(t)})})})}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}};function KS(r){let t=Bb(document.documentElement),e={};for(let i of t){let{id:s}=i;for(let n of r.querySelectorAll("turbo-stream")){let o=Fb(n.templateElement.content,s);o&&(e[s]=[i,o])}}return e}async function ZS(r,t){let e=`turbo-stream-autofocus-${qr()}`,i=r.querySelectorAll("turbo-stream"),s=QS(i),n=null;if(s&&(s.id?n=s.id:n=e,s.id=n),t(),await To(),(document.activeElement==null||document.activeElement==document.body)&&n){let a=document.getElementById(n);gd(a)&&a.focus(),a&&a.id==e&&a.removeAttribute("id")}}async function JS(r){let[t,e]=await oS(r,()=>document.activeElement),i=t&&t.id;if(i){let s=document.getElementById(i);gd(s)&&s!=e&&s.focus()}}function QS(r){for(let t of r){let e=Rb(t.templateElement.content);if(e)return e}return null}var sd=class{sources=new Set;#t=!1;constructor(t){this.delegate=t}start(){this.#t||(this.#t=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#t&&(this.#t=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}inspectFetchResponse=t=>{let e=tC(t);e&&eC(e)&&(t.preventDefault(),this.receiveMessageResponse(e))};receiveMessageEvent=t=>{this.#t&&typeof t.data=="string"&&this.receiveMessageHTML(t.data)};async receiveMessageResponse(t){let e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(Nr.wrap(t))}};function tC(r){let t=r.detail?.fetchResponse;if(t instanceof ln)return t}function eC(r){return(r.contentType??"").startsWith(Nr.contentType)}var nd=class extends Ro{static renderElement(t,e){let{documentElement:i,body:s}=document;i.replaceChild(e,s)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let t of this.scriptElements){let e=t.parentNode;if(e){let i=Lo(t);e.replaceChild(i,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},un=class extends Ro{static renderElement(t,e){document.body&&e instanceof HTMLBodyElement?document.body.replaceWith(e):document.documentElement.appendChild(e)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#t(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#t(){let{documentElement:t}=this.currentSnapshot,{lang:e}=this.newSnapshot;e?t.setAttribute("lang",e):t.removeAttribute("lang")}async mergeHead(){let t=this.mergeProvisionalElements(),e=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await e,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let t=[];for(let e of this.newHeadStylesheetElements)t.push(rS(e)),document.head.appendChild(e);await Promise.all(t)}copyNewHeadScriptElements(){for(let t of this.newHeadScriptElements)document.head.appendChild(Lo(t))}removeUnusedDynamicStylesheetElements(){for(let t of this.unusedDynamicStylesheetElements)document.head.removeChild(t)}async mergeProvisionalElements(){let t=[...this.newHeadProvisionalElements];for(let e of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(e,t)||document.head.removeChild(e);for(let e of t)document.head.appendChild(e)}isCurrentElementInElementList(t,e){for(let[i,s]of e.entries()){if(t.tagName=="TITLE"){if(s.tagName!="TITLE")continue;if(t.innerHTML==s.innerHTML)return e.splice(i,1),!0}if(s.isEqualNode(t))return e.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(let t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let t of this.newBodyScriptElements){let e=Lo(t);t.replaceWith(e)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(t=>t.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},od=class extends un{static renderElement(t,e){vd(t,e,{callbacks:{beforeNodeMorphed:i=>!xb(i)}});for(let i of t.querySelectorAll("turbo-frame"))xb(i)&&i.reload();Bt("turbo:morph",{detail:{currentElement:t,newElement:e}})}async preservingPermanentElements(t){return await t()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}};function xb(r){return r instanceof ri&&r.src&&r.refresh==="morph"&&!r.closest("[data-turbo-permanent]")}var ad=class{keys=[];snapshots={};constructor(t){this.size=t}has(t){return dl(t)in this.snapshots}get(t){if(this.has(t)){let e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[dl(t)]}write(t,e){this.snapshots[dl(t)]=e}touch(t){let e=dl(t),i=this.keys.indexOf(e);i>-1&&this.keys.splice(i,1),this.keys.unshift(e),this.trim()}trim(){for(let t of this.keys.splice(this.size))delete this.snapshots[t]}},ld=class extends xl{snapshotCache=new ad(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(t){return this.snapshot.prefersViewTransitions&&t.prefersViewTransitions}renderPage(t,e=!1,i=!0,s){let o=this.isPageRefresh(s)&&this.snapshot.shouldMorphPage?od:un,a=new o(this.snapshot,t,e,i);return a.shouldRender?s?.changeHistory():this.forceReloaded=!0,this.render(a)}renderError(t,e){e?.changeHistory();let i=new nd(this.snapshot,t,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:e}=this;await Cb();let i=t.clone();return this.snapshotCache.put(e,i),i}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}isPageRefresh(t){return!t||this.lastRenderedLocation.pathname===t.location.pathname&&t.action==="replace"}shouldPreserveScrollPosition(t){return this.isPageRefresh(t)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return ii.fromElement(this.element)}},cd=class{selector="a[data-turbo-preload]";constructor(t,e){this.delegate=t,this.snapshotCache=e}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#t):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#t)}preloadOnLoadLinksForView(t){for(let e of t.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(e)&&this.preloadURL(e)}async preloadURL(t){let e=new URL(t.href);if(this.snapshotCache.has(e))return;await new Or(this,Ge.get,e,new URLSearchParams,t).perform()}prepareRequest(t){t.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(t,e){try{let i=await e.responseHTML,s=ii.fromHTMLString(i);this.snapshotCache.put(t.url,s)}catch{}}requestStarted(t){}requestErrored(t){}requestFinished(t){}requestPreventedHandlingResponse(t,e){}requestFailedWithResponse(t,e){}#t=()=>{this.preloadOnLoadLinksForView(document.body)}},hd=class{constructor(t){this.session=t}clear(){this.session.clearCache()}resetCacheControl(){this.#t("")}exemptPageFromCache(){this.#t("no-cache")}exemptPageFromPreview(){this.#t("no-preview")}#t(t){nS("turbo-cache-control",t)}},ud=class{navigator=new td(this);history=new Ju(this);view=new ld(this,document.documentElement);adapter=new $u(this);pageObserver=new ed(this);cacheObserver=new Ku;linkPrefetchObserver=new Qu(this,document);linkClickObserver=new wl(this,window);formSubmitObserver=new Mo(this,document);scrollObserver=new id(this);streamObserver=new sd(this);formLinkClickObserver=new Al(this,document.documentElement);frameRedirector=new Zu(this,document.documentElement);streamMessageRenderer=new rd;cache=new hd(this);enabled=!0;started=!1;#t=150;constructor(t){this.recentRequests=t,this.preloader=new cd(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){let i=e.frame?document.getElementById(e.frame):null;if(i instanceof ri){let s=e.action||ps(i);i.delegate.proposeVisitIfNavigatedWithAction(i,s),i.src=t.toString()}else this.navigator.proposeVisit(le(t),e)}refresh(t,e){!(e&&this.recentRequests.has(e))&&!this.navigator.currentVisit&&this.visit(t,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(Nr.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=t}set progressBarDelay(t){ee.drive.progressBarDelay=t}get progressBarDelay(){return ee.drive.progressBarDelay}set drive(t){ee.drive.enabled=t}get drive(){return ee.drive.enabled}set formMode(t){ee.forms.mode=t}get formMode(){return ee.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#t}set pageRefreshDebouncePeriod(t){this.refresh=aS(this.debouncedRefresh.bind(this),t),this.#t=t}shouldPreloadLink(t){let e=t.hasAttribute("data-turbo-method"),i=t.hasAttribute("data-turbo-stream"),s=t.getAttribute("data-turbo-frame"),n=s=="_top"?null:document.getElementById(s)||on(t,"turbo-frame:not([disabled])");if(e||i||n instanceof ri)return!1;{let o=new URL(t.href);return this.elementIsNavigatable(t)&&Rr(o,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(t,e,i){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0,direction:i}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&Rr(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(t,e){return this.elementIsNavigatable(t)&&Rr(e,this.snapshot.rootLocation)}willFollowLinkToLocation(t,e,i){return this.elementIsNavigatable(t)&&Rr(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,i)}followedLinkToLocation(t,e){let i=this.getActionForLink(t),s=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:i,acceptsStreamResponse:s})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){yb(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||(gl(document.documentElement),this.view.markVisitDirection(t.direction)),yb(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){this.view.unmarkVisitDirection(),ml(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){let i=md(t,e);return this.submissionIsNavigatable(t,e)&&Rr(le(i),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){let i=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:s,detail:{render:n}}=i;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!s}viewRenderedSnapshot(t,e,i){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(i)}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,i){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,i).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,i){return Bt("turbo:click",{target:t,detail:{url:e.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return Bt("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return Bt("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return Bt("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return Bt("turbo:before-render",{detail:{newBody:t,...e},cancelable:!0})}notifyApplicationAfterRender(t){return Bt("turbo:render",{detail:{renderMethod:t}})}notifyApplicationAfterPageLoad(t={}){return Bt("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return Bt("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return Bt("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if(ee.forms.mode=="off")return!1;{let i=e?this.elementIsNavigatable(e):!0;return ee.forms.mode=="optin"?i&&t.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){let e=on(t,"[data-turbo]"),i=on(t,"turbo-frame");return ee.drive.enabled||i?e?e.getAttribute("data-turbo")!="false":!0:e?e.getAttribute("data-turbo")=="true":!1}getActionForLink(t){return ps(t)||"advance"}get snapshot(){return this.view.snapshot}};function yb(r){Object.defineProperties(r,iC)}var iC={absoluteURL:{get(){return this.toString()}}},jt=new ud(Nb),{cache:zb,navigator:Hb}=jt;function xd(){jt.start()}function Wb(r){jt.registerAdapter(r)}function jb(r,t){jt.visit(r,t)}function Io(r){jt.connectStreamSource(r)}function qo(r){jt.disconnectStreamSource(r)}function Xb(r){jt.renderStreamMessage(r)}function Yb(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),jt.clearCache()}function Vb(r){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),ee.drive.progressBarDelay=r}function Ub(r){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),ee.forms.confirm=r}function Gb(r){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),ee.forms.mode=r}var rC=Object.freeze({__proto__:null,navigator:Hb,session:jt,cache:zb,PageRenderer:un,PageSnapshot:ii,FrameRenderer:hn,fetch:bd,config:ee,start:xd,registerAdapter:Wb,visit:jb,connectStreamSource:Io,disconnectStreamSource:qo,renderStreamMessage:Xb,clearCache:Yb,setProgressBarDelay:Vb,setConfirmMethod:Ub,setFormMode:Gb}),dd=class extends Error{},fd=class{fetchResponseLoaded=t=>Promise.resolve();#t=null;#e=()=>{};#i=!1;#n=!1;#o=new Set;#s=!1;action=null;constructor(t){this.element=t,this.view=new Wu(this,this.element),this.appearanceObserver=new zu(this,this.element),this.formLinkClickObserver=new Al(this,this.element),this.linkInterceptor=new yl(this,this.element),this.restorationIdentifier=qr(),this.formSubmitObserver=new Mo(this,this.element)}connect(){this.#i||(this.#i=!0,this.loadingStyle==fs.lazy?this.appearanceObserver.start():this.#r(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#i&&(this.#i=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==fs.eager&&this.#r()}sourceURLChanged(){this.#v("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==fs.eager||this.#n)&&this.#r())}sourceURLReloaded(){let{refresh:t,src:e}=this.element;return this.#s=e&&t==="morph",this.element.removeAttribute("complete"),this.element.src=null,this.element.src=e,this.element.loaded}loadingStyleChanged(){this.loadingStyle==fs.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#r())}async#r(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#u(le(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#n=!0)}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{let e=await t.responseHTML;if(e){let i=Eb(e);ii.fromDocument(i).isVisitable?await this.#l(t,i):await this.#f(t)}}finally{this.#s=!1,this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,ps(t)),this.#r()}willSubmitFormLinkToLocation(t){return this.#c(t)}submittedFormLinkToLocation(t,e,i){let s=this.#a(t);s&&i.setAttribute("data-turbo-frame",s.id)}shouldInterceptLinkClick(t,e,i){return this.#c(t)}linkClickIntercepted(t,e){this.#d(t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&this.#c(t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new vl(this,t,e);let{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(t){t.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&t.acceptResponseType(Nr.contentType)}requestStarted(t){gl(this.element)}requestPreventedHandlingResponse(t,e){this.#e()}async requestSucceededWithResponse(t,e){await this.loadResponse(e),this.#e()}async requestFailedWithResponse(t,e){await this.loadResponse(e),this.#e()}requestErrored(t,e){console.error(e),this.#e()}requestFinished(t){ml(this.element)}formSubmissionStarted({formElement:t}){gl(t,this.#a(t))}formSubmissionSucceededWithResponse(t,e){let i=this.#a(t.formElement,t.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,ps(t.submitter,t.formElement,i)),i.delegate.loadResponse(e),t.isSafe||jt.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),jt.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){ml(t,this.#a(t))}allowsImmediateRender({element:t},e){let i=Bt("turbo:before-frame-render",{target:this.element,detail:{newFrame:t,...e},cancelable:!0}),{defaultPrevented:s,detail:{render:n}}=i;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!s}viewRenderedSnapshot(t,e,i){}preloadOnLoadLinksForView(t){jt.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}visitCachedSnapshot=({element:t})=>{let e=t.querySelector("#"+this.element.id);e&&this.previousFrameElement&&e.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#l(t,e){let i=await this.extractForeignFrameElement(e.body),s=this.#s?Xu:hn;if(i){let n=new cn(i),o=new s(this,this.view.snapshot,n,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(o),this.complete=!0,jt.frameRendered(t,this.element),jt.frameLoaded(this.element),await this.fetchResponseLoaded(t)}else this.#p(t)&&this.#g(t)}async#u(t){let e=new Or(this,Ge.get,t,new URLSearchParams,this.element);return this.#t?.cancel(),this.#t=e,new Promise(i=>{this.#e=()=>{this.#e=()=>{},this.#t=null,i()},e.perform()})}#d(t,e,i){let s=this.#a(t,i);s.delegate.proposeVisitIfNavigatedWithAction(s,ps(i,t,s)),this.#y(t,()=>{s.src=e})}proposeVisitIfNavigatedWithAction(t,e=null){if(this.action=e,this.action){let i=ii.fromElement(t).clone(),{visitCachedSnapshot:s}=t.delegate;t.delegate.fetchResponseLoaded=async n=>{if(t.src){let{statusCode:o,redirected:a}=n,l=await n.responseHTML,h={response:{statusCode:o,redirected:a,responseHTML:l},visitCachedSnapshot:s,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:i};this.action&&(h.action=this.action),jt.visit(t.src,h)}}}}changeHistory(){if(this.action){let t=Lb(this.action);jt.history.update(t,le(this.element.src||""),this.restorationIdentifier)}}async#f(t){console.warn(`The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#h(t.response)}#p(t){this.element.setAttribute("complete","");let e=t.response,i=async(n,o)=>{n instanceof Response?this.#h(n):jt.visit(n,o)};return!Bt("turbo:frame-missing",{target:this.element,detail:{response:e,visit:i},cancelable:!0}).defaultPrevented}#g(t){this.view.missing(),this.#m(t)}#m(t){let e=`The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new dd(e)}async#h(t){let e=new ln(t),i=await e.responseHTML,{location:s,redirected:n,statusCode:o}=e;return jt.visit(s,{response:{redirected:n,statusCode:o,responseHTML:i}})}#a(t,e){let i=pl("data-turbo-frame",e,t)||this.element.getAttribute("target");return wb(i)??this.element}async extractForeignFrameElement(t){let e,i=CSS.escape(this.id);try{if(e=Ab(t.querySelector(`turbo-frame#${i}`),this.sourceURL),e)return e;if(e=Ab(t.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(s){return console.error(s),new ri}return null}#b(t,e){let i=md(t,e);return Rr(le(i),this.rootLocation)}#c(t,e){let i=pl("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!this.#b(t,e)||!this.enabled||i=="_top")return!1;if(i){let s=wb(i);if(s)return!s.disabled}return!(!jt.elementIsNavigatable(t)||e&&!jt.elementIsNavigatable(e))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){this.#x("src",()=>{this.element.src=t??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#e()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(t){t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#i}get rootLocation(){let e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return le(e)}#v(t){return this.#o.has(t)}#x(t,e){this.#o.add(t),e(),this.#o.delete(t)}#y(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement}};function wb(r){if(r!=null){let t=document.getElementById(r);if(t instanceof ri)return t}}function Ab(r,t){if(r){let e=r.getAttribute("src");if(e!=null&&t!=null&&dS(e,t))throw new Error(`Matching <turbo-frame id="${r.id}"> element has a source URL which references itself`);if(r.ownerDocument!==document&&(r=document.importNode(r,!0)),r instanceof ri)return r.connectedCallback(),r.disconnectedCallback(),r}}var yd={after(){this.targetElements.forEach(r=>r.parentElement?.insertBefore(this.templateContent,r.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(r=>r.append(this.templateContent))},before(){this.targetElements.forEach(r=>r.parentElement?.insertBefore(this.templateContent,r))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(r=>r.prepend(this.templateContent))},remove(){this.targetElements.forEach(r=>r.remove())},replace(){let r=this.getAttribute("method");this.targetElements.forEach(t=>{r==="morph"?vd(t,this.templateContent):t.replaceWith(this.templateContent)})},update(){let r=this.getAttribute("method");this.targetElements.forEach(t=>{r==="morph"?_b(t,this.templateContent):(t.innerHTML="",t.append(this.templateContent))})},refresh(){jt.refresh(this.baseURI,this.requestId)}},Sl=class r extends HTMLElement{static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let t=this.beforeRenderEvent;this.dispatchEvent(t)&&(await To(),await t.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(t=>t.remove())}get duplicateChildren(){let t=this.targetElements.flatMap(i=>[...i.children]).filter(i=>!!i.id),e=[...this.templateContent?.children||[]].filter(i=>!!i.id).map(i=>i.id);return t.filter(i=>e.includes(i.id))}get performAction(){if(this.action){let t=yd[this.action];if(t)return t;this.#t("unknown action")}this.#t("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#t("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let t=this.ownerDocument.createElement("template");return this.appendChild(t),t}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#t("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#t(t){throw new Error(`${this.description}: ${t}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:r.renderElement}})}get targetElementsById(){let t=this.ownerDocument?.getElementById(this.target);return t!==null?[t]:[]}get targetElementsByQuery(){let t=this.ownerDocument?.querySelectorAll(this.targets);return t.length!==0?Array.prototype.slice.call(t):[]}},Cl=class extends HTMLElement{streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Io(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),qo(this.streamSource))}get src(){return this.getAttribute("src")||""}};ri.delegateConstructor=fd;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",ri);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Sl);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",Cl);(()=>{let r=document.currentScript;if(r&&!r.hasAttribute("data-turbo-suppress-warning"))for(r=r.parentElement;r;){if(r==document.body)return console.warn(Tb`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,r.outerHTML);r=r.parentElement}})();window.Turbo={...rC,StreamActions:yd};xd();var ev;async function aC(){return ev||tv(lC().then(tv))}function tv(r){return ev=r}async function lC(){let{createConsumer:r}=await Promise.resolve().then(()=>(Qb(),Jb));return r()}async function iv(r,t){let{subscriptions:e}=await aC();return e.create(r,t)}function Bo(r){return!r||typeof r!="object"||r instanceof Date||r instanceof RegExp?r:Array.isArray(r)?r.map(Bo):Object.keys(r).reduce(function(t,e){var i=e[0].toLowerCase()+e.slice(1).replace(/([A-Z]+)/g,function(s,n){return"_"+n.toLowerCase()});return t[i]=Bo(r[e]),t},{})}var Id=class extends HTMLElement{static observedAttributes=["channel","signed-stream-name"];async connectedCallback(){Io(this),this.subscription=await iv(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){qo(this),this.subscription&&this.subscription.unsubscribe(),this.subscriptionDisconnected()}attributeChangedCallback(){this.subscription&&(this.disconnectedCallback(),this.connectedCallback())}dispatchMessageEvent(t){let e=new MessageEvent("message",{data:t});return this.dispatchEvent(e)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let t=this.getAttribute("channel"),e=this.getAttribute("signed-stream-name");return{channel:t,signed_stream_name:e,...Bo({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",Id);function rv(r){if(r.target instanceof HTMLFormElement){let{target:t,detail:{fetchOptions:e}}=r;t.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:i}}})=>{let s=dC(e.body)?e.body:new URLSearchParams,n=hC(i,s,t);/get/i.test(n)||(/post/i.test(n)?s.delete("_method"):s.set("_method",n),e.method="post")},{once:!0})}}function hC(r,t,e){let i=uC(r),s=t.get("_method"),n=e.getAttribute("method")||"get";return typeof i=="string"?i:typeof s=="string"?s:n}function uC(r){return r instanceof HTMLButtonElement||r instanceof HTMLInputElement?r.name==="_method"?r.value:r.hasAttribute("formmethod")?r.formMethod:null:null}function dC(r){return r instanceof FormData||r instanceof URLSearchParams}window.Turbo=wd;addEventListener("turbo:before-fetch-request",rv);var qd=class{constructor(t,e,i){this.eventTarget=t,this.eventName=e,this.eventOptions=i,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){let e=fC(t);for(let i of this.bindings){if(e.immediatePropagationStopped)break;i.handleEvent(e)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((t,e)=>{let i=t.index,s=e.index;return i<s?-1:i>s?1:0})}};function fC(r){if("immediatePropagationStopped"in r)return r;{let{stopImmediatePropagation:t}=r;return Object.assign(r,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}var Od=class{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(t=>t.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(t=>t.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((t,e)=>t.concat(Array.from(e.values())),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,e=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),e&&this.clearEventListenersForBinding(t)}handleError(t,e,i={}){this.application.handleError(t,`Error ${e}`,i)}clearEventListenersForBinding(t){let e=this.fetchEventListenerForBinding(t);e.hasBindings()||(e.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){let{eventTarget:e,eventName:i,eventOptions:s}=t,n=this.fetchEventListenerMapForEventTarget(e),o=this.cacheKey(i,s);n.delete(o),n.size==0&&this.eventListenerMaps.delete(e)}fetchEventListenerForBinding(t){let{eventTarget:e,eventName:i,eventOptions:s}=t;return this.fetchEventListener(e,i,s)}fetchEventListener(t,e,i){let s=this.fetchEventListenerMapForEventTarget(t),n=this.cacheKey(e,i),o=s.get(n);return o||(o=this.createEventListener(t,e,i),s.set(n,o)),o}createEventListener(t,e,i){let s=new qd(t,e,i);return this.started&&s.connect(),s}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){let i=[t];return Object.keys(e).sort().forEach(s=>{i.push(`${e[s]?"":"!"}${s}`)}),i.join(":")}},pC={stop({event:r,value:t}){return t&&r.stopPropagation(),!0},prevent({event:r,value:t}){return t&&r.preventDefault(),!0},self({event:r,value:t,element:e}){return t?e===r.target:!0}},gC=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function mC(r){let e=r.trim().match(gC)||[],i=e[2],s=e[3];return s&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${s}`,s=""),{eventTarget:bC(e[4]),eventName:i,eventOptions:e[7]?vC(e[7]):{},identifier:e[5],methodName:e[6],keyFilter:e[1]||s}}function bC(r){if(r=="window")return window;if(r=="document")return document}function vC(r){return r.split(":").reduce((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)}),{})}function xC(r){if(r==window)return"window";if(r==document)return"document"}function ef(r){return r.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())}function Nd(r){return ef(r.replace(/--/g,"-").replace(/__/g,"_"))}function zo(r){return r.charAt(0).toUpperCase()+r.slice(1)}function fv(r){return r.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}function yC(r){return r.match(/[^\s]+/g)||[]}function sv(r){return r!=null}function Pd(r,t){return Object.prototype.hasOwnProperty.call(r,t)}var nv=["meta","ctrl","alt","shift"],Dd=class{constructor(t,e,i,s){this.element=t,this.index=e,this.eventTarget=i.eventTarget||t,this.eventName=i.eventName||wC(t)||Ol("missing event name"),this.eventOptions=i.eventOptions||{},this.identifier=i.identifier||Ol("missing identifier"),this.methodName=i.methodName||Ol("missing method name"),this.keyFilter=i.keyFilter||"",this.schema=s}static forToken(t,e){return new this(t.element,t.index,mC(t.content),e)}toString(){let t=this.keyFilter?`.${this.keyFilter}`:"",e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${e}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(t){if(!this.keyFilter)return!1;let e=this.keyFilter.split("+");if(this.keyFilterDissatisfied(t,e))return!0;let i=e.filter(s=>!nv.includes(s))[0];return i?(Pd(this.keyMappings,i)||Ol(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[i].toLowerCase()!==t.key.toLowerCase()):!1}shouldIgnoreMouseEvent(t){if(!this.keyFilter)return!1;let e=[this.keyFilter];return!!this.keyFilterDissatisfied(t,e)}get params(){let t={},e=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:i,value:s}of Array.from(this.element.attributes)){let n=i.match(e),o=n&&n[1];o&&(t[ef(o)]=AC(s))}return t}get eventTargetName(){return xC(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(t,e){let[i,s,n,o]=nv.map(a=>e.includes(a));return t.metaKey!==i||t.ctrlKey!==s||t.altKey!==n||t.shiftKey!==o}},ov={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:r=>r.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function wC(r){let t=r.tagName.toLowerCase();if(t in ov)return ov[t](r)}function Ol(r){throw new Error(r)}function AC(r){try{return JSON.parse(r)}catch{return r}}var Fd=class{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){let e=this.prepareActionEvent(t);this.willBeInvokedByEvent(t)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){let t=this.controller[this.methodName];if(typeof t=="function")return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){let{element:e}=this.action,{actionDescriptorFilters:i}=this.context.application,{controller:s}=this.context,n=!0;for(let[o,a]of Object.entries(this.eventOptions))if(o in i){let l=i[o];n=n&&l({name:o,value:a,event:t,element:e,controller:s})}else continue;return n}prepareActionEvent(t){return Object.assign(t,{params:this.action.params})}invokeWithEvent(t){let{target:e,currentTarget:i}=t;try{this.method.call(this.controller,t),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:i,action:this.methodName})}catch(s){let{identifier:n,controller:o,element:a,index:l}=this,c={identifier:n,controller:o,element:a,index:l,event:t};this.context.handleError(s,`invoking action "${this.action}"`,c)}}willBeInvokedByEvent(t){let e=t.target;return t instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(t)||t instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(t)?!1:this.element===e?!0:e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Nl=class{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let t=new Set(this.matchElementsInTree());for(let e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(let e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(let e of t)this.processMutation(e)}processMutation(t){t.type=="attributes"?this.processAttributeChange(t.target,t.attributeName):t.type=="childList"&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){this.elements.has(t)?this.delegate.elementAttributeChanged&&this.matchElement(t)?this.delegate.elementAttributeChanged(t,e):this.removeElement(t):this.matchElement(t)&&this.addElement(t)}processRemovedNodes(t){for(let e of Array.from(t)){let i=this.elementFromNode(e);i&&this.processTree(i,this.removeElement)}}processAddedNodes(t){for(let e of Array.from(t)){let i=this.elementFromNode(e);i&&this.elementIsActive(i)&&this.processTree(i,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(let i of this.matchElementsInTree(t))e.call(this,i)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected!=this.element.isConnected?!1:this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}},Pl=class{constructor(t,e,i){this.attributeName=e,this.delegate=i,this.elementObserver=new Nl(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){let e=this.matchElement(t)?[t]:[],i=Array.from(t.querySelectorAll(this.selector));return e.concat(i)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}};function kC(r,t,e){pv(r,t).add(e)}function SC(r,t,e){pv(r,t).delete(e),CC(r,t)}function pv(r,t){let e=r.get(t);return e||(e=new Set,r.set(t,e)),e}function CC(r,t){let e=r.get(t);e!=null&&e.size==0&&r.delete(t)}var Gi=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((e,i)=>e.concat(Array.from(i)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((e,i)=>e+i.size,0)}add(t,e){kC(this.valuesByKey,t,e)}delete(t,e){SC(this.valuesByKey,t,e)}has(t,e){let i=this.valuesByKey.get(t);return i!=null&&i.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some(i=>i.has(t))}getValuesForKey(t){let e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter(([e,i])=>i.has(t)).map(([e,i])=>e)}};var Bd=class{constructor(t,e,i,s){this._selector=e,this.details=s,this.elementObserver=new Nl(t,this),this.delegate=i,this.matchesByElement=new Gi}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(t){this._selector=t,this.refresh()}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){let{selector:e}=this;if(e){let i=t.matches(e);return this.delegate.selectorMatchElement?i&&this.delegate.selectorMatchElement(t,this.details):i}else return!1}matchElementsInTree(t){let{selector:e}=this;if(e){let i=this.matchElement(t)?[t]:[],s=Array.from(t.querySelectorAll(e)).filter(n=>this.matchElement(n));return i.concat(s)}else return[]}elementMatched(t){let{selector:e}=this;e&&this.selectorMatched(t,e)}elementUnmatched(t){let e=this.matchesByElement.getKeysForValue(t);for(let i of e)this.selectorUnmatched(t,i)}elementAttributeChanged(t,e){let{selector:i}=this;if(i){let s=this.matchElement(t),n=this.matchesByElement.has(i,t);s&&!n?this.selectorMatched(t,i):!s&&n&&this.selectorUnmatched(t,i)}}selectorMatched(t,e){this.delegate.selectorMatched(t,e,this.details),this.matchesByElement.add(e,t)}selectorUnmatched(t,e){this.delegate.selectorUnmatched(t,e,this.details),this.matchesByElement.delete(e,t)}},_d=class{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(let e of t)this.processMutation(e)}processMutation(t){let e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){let i=this.delegate.getStringMapKeyForAttribute(t);if(i!=null){this.stringMap.has(t)||this.stringMapKeyAdded(i,t);let s=this.element.getAttribute(t);if(this.stringMap.get(t)!=s&&this.stringMapValueChanged(s,i,e),s==null){let n=this.stringMap.get(t);this.stringMap.delete(t),n&&this.stringMapKeyRemoved(i,t,n)}else this.stringMap.set(t,s)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,i){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,i)}stringMapKeyRemoved(t,e,i){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,i)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(t=>t.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},Dl=class{constructor(t,e,i){this.attributeObserver=new Pl(t,e,this),this.delegate=i,this.tokensByElement=new Gi}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){let[e,i]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(i)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach(e=>this.tokenMatched(e))}tokensUnmatched(t){t.forEach(e=>this.tokenUnmatched(e))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){let e=this.tokensByElement.getValuesForKey(t),i=this.readTokensForElement(t),s=TC(e,i).findIndex(([n,o])=>!LC(n,o));return s==-1?[[],[]]:[e.slice(s),i.slice(s)]}readTokensForElement(t){let e=this.attributeName,i=t.getAttribute(e)||"";return EC(i,t,e)}};function EC(r,t,e){return r.trim().split(/\s+/).filter(i=>i.length).map((i,s)=>({element:t,attributeName:e,content:i,index:s}))}function TC(r,t){let e=Math.max(r.length,t.length);return Array.from({length:e},(i,s)=>[r[s],t[s]])}function LC(r,t){return r&&t&&r.index==t.index&&r.content==t.content}var Fl=class{constructor(t,e,i){this.tokenListObserver=new Dl(t,e,this),this.delegate=i,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){let{element:e}=t,{value:i}=this.fetchParseResultForToken(t);i&&(this.fetchValuesByTokenForElement(e).set(t,i),this.delegate.elementMatchedValue(e,i))}tokenUnmatched(t){let{element:e}=t,{value:i}=this.fetchParseResultForToken(t);i&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,i))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(e){return{error:e}}}},zd=class{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Fl(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){let e=new Fd(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){let e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach(t=>this.delegate.bindingDisconnected(t,!0)),this.bindingsByAction.clear()}parseValueForToken(t){let e=Dd.forToken(t,this.schema);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}},Hd=class{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new _d(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){let i=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,i.writer(this.receiver[t]),i.writer(i.defaultValue))}stringMapValueChanged(t,e,i){let s=this.valueDescriptorNameMap[e];t!==null&&(i===null&&(i=s.writer(s.defaultValue)),this.invokeChangedCallback(e,t,i))}stringMapKeyRemoved(t,e,i){let s=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,s.writer(this.receiver[t]),i):this.invokeChangedCallback(t,s.writer(s.defaultValue),i)}invokeChangedCallbacksForDefaultValues(){for(let{key:t,name:e,defaultValue:i,writer:s}of this.valueDescriptors)i!=null&&!this.controller.data.has(t)&&this.invokeChangedCallback(e,s(i),void 0)}invokeChangedCallback(t,e,i){let s=`${t}Changed`,n=this.receiver[s];if(typeof n=="function"){let o=this.valueDescriptorNameMap[t];try{let a=o.reader(e),l=i;i&&(l=o.reader(i)),n.call(this.receiver,a,l)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${a.message}`),a}}}get valueDescriptors(){let{valueDescriptorMap:t}=this;return Object.keys(t).map(e=>t[e])}get valueDescriptorNameMap(){let t={};return Object.keys(this.valueDescriptorMap).forEach(e=>{let i=this.valueDescriptorMap[e];t[i.name]=i}),t}hasValue(t){let e=this.valueDescriptorNameMap[t],i=`has${zo(e.name)}`;return this.receiver[i]}},Wd=class{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new Gi}start(){this.tokenListObserver||(this.tokenListObserver=new Dl(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var i;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetConnected(t,e)))}disconnectTarget(t,e){var i;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetDisconnected(t,e)))}disconnectAllTargets(){for(let t of this.targetsByName.keys)for(let e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function Ho(r,t){let e=gv(r);return Array.from(e.reduce((i,s)=>(RC(s,t).forEach(n=>i.add(n)),i),new Set))}function MC(r,t){return gv(r).reduce((i,s)=>(i.push(...IC(s,t)),i),[])}function gv(r){let t=[];for(;r;)t.push(r),r=Object.getPrototypeOf(r);return t.reverse()}function RC(r,t){let e=r[t];return Array.isArray(e)?e:[]}function IC(r,t){let e=r[t];return e?Object.keys(e).map(i=>[i,e[i]]):[]}var jd=class{constructor(t,e){this.started=!1,this.context=t,this.delegate=e,this.outletsByName=new Gi,this.outletElementsByName=new Gi,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(t=>{this.setupSelectorObserverForOutlet(t),this.setupAttributeObserverForOutlet(t)}),this.started=!0,this.dependentContexts.forEach(t=>t.refresh()))}refresh(){this.selectorObserverMap.forEach(t=>t.refresh()),this.attributeObserverMap.forEach(t=>t.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(t=>t.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(t=>t.stop()),this.attributeObserverMap.clear())}selectorMatched(t,e,{outletName:i}){let s=this.getOutlet(t,i);s&&this.connectOutlet(s,t,i)}selectorUnmatched(t,e,{outletName:i}){let s=this.getOutletFromMap(t,i);s&&this.disconnectOutlet(s,t,i)}selectorMatchElement(t,{outletName:e}){let i=this.selector(e),s=this.hasOutlet(t,e),n=t.matches(`[${this.schema.controllerAttribute}~=${e}]`);return i?s&&n&&t.matches(i):!1}elementMatchedAttribute(t,e){let i=this.getOutletNameFromOutletAttributeName(e);i&&this.updateSelectorObserverForOutlet(i)}elementAttributeValueChanged(t,e){let i=this.getOutletNameFromOutletAttributeName(e);i&&this.updateSelectorObserverForOutlet(i)}elementUnmatchedAttribute(t,e){let i=this.getOutletNameFromOutletAttributeName(e);i&&this.updateSelectorObserverForOutlet(i)}connectOutlet(t,e,i){var s;this.outletElementsByName.has(i,e)||(this.outletsByName.add(i,t),this.outletElementsByName.add(i,e),(s=this.selectorObserverMap.get(i))===null||s===void 0||s.pause(()=>this.delegate.outletConnected(t,e,i)))}disconnectOutlet(t,e,i){var s;this.outletElementsByName.has(i,e)&&(this.outletsByName.delete(i,t),this.outletElementsByName.delete(i,e),(s=this.selectorObserverMap.get(i))===null||s===void 0||s.pause(()=>this.delegate.outletDisconnected(t,e,i)))}disconnectAllOutlets(){for(let t of this.outletElementsByName.keys)for(let e of this.outletElementsByName.getValuesForKey(t))for(let i of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(i,e,t)}updateSelectorObserverForOutlet(t){let e=this.selectorObserverMap.get(t);e&&(e.selector=this.selector(t))}setupSelectorObserverForOutlet(t){let e=this.selector(t),i=new Bd(document.body,e,this,{outletName:t});this.selectorObserverMap.set(t,i),i.start()}setupAttributeObserverForOutlet(t){let e=this.attributeNameForOutletName(t),i=new Pl(this.scope.element,e,this);this.attributeObserverMap.set(t,i),i.start()}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}attributeNameForOutletName(t){return this.scope.schema.outletAttributeForScope(this.identifier,t)}getOutletNameFromOutletAttributeName(t){return this.outletDefinitions.find(e=>this.attributeNameForOutletName(e)===t)}get outletDependencies(){let t=new Gi;return this.router.modules.forEach(e=>{let i=e.definition.controllerConstructor;Ho(i,"outlets").forEach(n=>t.add(n,e.identifier))}),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let t=this.dependentControllerIdentifiers;return this.router.contexts.filter(e=>t.includes(e.identifier))}hasOutlet(t,e){return!!this.getOutlet(t,e)||!!this.getOutletFromMap(t,e)}getOutlet(t,e){return this.application.getControllerForElementAndIdentifier(t,e)}getOutletFromMap(t,e){return this.outletsByName.getValuesForKey(e).find(i=>i.element===t)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Xd=class{constructor(t,e){this.logDebugActivity=(i,s={})=>{let{identifier:n,controller:o,element:a}=this;s=Object.assign({identifier:n,controller:o,element:a},s),this.application.logDebugActivity(this.identifier,i,s)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new zd(this,this.dispatcher),this.valueObserver=new Hd(this,this.controller),this.targetObserver=new Wd(this,this),this.outletObserver=new jd(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(i){this.handleError(i,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,i={}){let{identifier:s,controller:n,element:o}=this;i=Object.assign({identifier:s,controller:n,element:o},i),this.application.handleError(t,`Error ${e}`,i)}targetConnected(t,e){this.invokeControllerMethod(`${e}TargetConnected`,t)}targetDisconnected(t,e){this.invokeControllerMethod(`${e}TargetDisconnected`,t)}outletConnected(t,e,i){this.invokeControllerMethod(`${Nd(i)}OutletConnected`,t,e)}outletDisconnected(t,e,i){this.invokeControllerMethod(`${Nd(i)}OutletDisconnected`,t,e)}invokeControllerMethod(t,...e){let i=this.controller;typeof i[t]=="function"&&i[t](...e)}};function qC(r){return OC(r,NC(r))}function OC(r,t){let e=BC(r),i=PC(r.prototype,t);return Object.defineProperties(e.prototype,i),e}function NC(r){return Ho(r,"blessings").reduce((e,i)=>{let s=i(r);for(let n in s){let o=e[n]||{};e[n]=Object.assign(o,s[n])}return e},{})}function PC(r,t){return FC(t).reduce((e,i)=>{let s=DC(r,t,i);return s&&Object.assign(e,{[i]:s}),e},{})}function DC(r,t,e){let i=Object.getOwnPropertyDescriptor(r,e);if(!(i&&"value"in i)){let n=Object.getOwnPropertyDescriptor(t,e).value;return i&&(n.get=i.get||n.get,n.set=i.set||n.set),n}}var FC=typeof Object.getOwnPropertySymbols=="function"?r=>[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)]:Object.getOwnPropertyNames,BC=(()=>{function r(e){function i(){return Reflect.construct(e,arguments,new.target)}return i.prototype=Object.create(e.prototype,{constructor:{value:i}}),Reflect.setPrototypeOf(i,e),i}function t(){let i=r(function(){this.a.call(this)});return i.prototype.a=function(){},new i}try{return t(),r}catch{return i=>class extends i{}}})();function _C(r){return{identifier:r.identifier,controllerConstructor:qC(r.controllerConstructor)}}var Yd=class{constructor(t,e){this.application=t,this.definition=_C(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){let e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){let e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new Xd(this,t),this.contextsByScope.set(t,e)),e}},Vd=class{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){let e=this.data.get(this.getDataKey(t))||"";return yC(e)}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}},Ud=class{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){let e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){let i=this.getAttributeNameForKey(t);return this.element.setAttribute(i,e),this.get(t)}has(t){let e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){let e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}else return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${fv(t)}`}},Gd=class{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,i){let s=this.warnedKeysByObject.get(t);s||(s=new Set,this.warnedKeysByObject.set(t,s)),s.has(e)||(s.add(e),this.logger.warn(i,t))}};function $d(r,t){return`[${r}~="${t}"]`}var Kd=class{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,i)=>e||this.findTarget(i)||this.findLegacyTarget(i),void 0)}findAll(...t){return t.reduce((e,i)=>[...e,...this.findAllTargets(i),...this.findAllLegacyTargets(i)],[])}findTarget(t){let e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){let e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){let e=this.schema.targetAttributeForScope(this.identifier);return $d(e,t)}findLegacyTarget(t){let e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){let e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map(i=>this.deprecate(i,t))}getLegacySelectorForTargetName(t){let e=`${this.identifier}.${t}`;return $d(this.schema.targetAttribute,e)}deprecate(t,e){if(t){let{identifier:i}=this,s=this.schema.targetAttribute,n=this.schema.targetAttributeForScope(i);this.guide.warn(t,`target:${e}`,`Please replace ${s}="${i}.${e}" with ${n}="${e}". The ${s} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}},Zd=class{constructor(t,e){this.scope=t,this.controllerElement=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,i)=>e||this.findOutlet(i),void 0)}findAll(...t){return t.reduce((e,i)=>[...e,...this.findAllOutlets(i)],[])}getSelectorForOutletName(t){let e=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(e)}findOutlet(t){let e=this.getSelectorForOutletName(t);if(e)return this.findElement(e,t)}findAllOutlets(t){let e=this.getSelectorForOutletName(t);return e?this.findAllElements(e,t):[]}findElement(t,e){return this.scope.queryElements(t).filter(s=>this.matchesElement(s,t,e))[0]}findAllElements(t,e){return this.scope.queryElements(t).filter(s=>this.matchesElement(s,t,e))}matchesElement(t,e,i){let s=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(e)&&s.split(" ").includes(i)}},Jd=class r{constructor(t,e,i,s){this.targets=new Kd(this),this.classes=new Vd(this),this.data=new Ud(this),this.containsElement=n=>n.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=i,this.guide=new Gd(s),this.outlets=new Zd(this.documentScope,e)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return $d(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new r(this.schema,document.documentElement,this.identifier,this.guide.logger)}},Qd=class{constructor(t,e,i){this.element=t,this.schema=e,this.delegate=i,this.valueListObserver=new Fl(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){let{element:e,content:i}=t;return this.parseValueForElementAndIdentifier(e,i)}parseValueForElementAndIdentifier(t,e){let i=this.fetchScopesByIdentifierForElement(t),s=i.get(e);return s||(s=this.delegate.createScopeForElementAndIdentifier(t,e),i.set(e,s)),s}elementMatchedValue(t,e){let i=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,i),i==1&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){let i=this.scopeReferenceCounts.get(e);i&&(this.scopeReferenceCounts.set(e,i-1),i==1&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}},tf=class{constructor(t){this.application=t,this.scopeObserver=new Qd(this.element,this.schema,this),this.scopesByIdentifier=new Gi,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((t,e)=>t.concat(e.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);let e=new Yd(this.application,t);this.connectModule(e);let i=t.controllerConstructor.afterLoad;i&&i.call(t.controllerConstructor,t.identifier,this.application)}unloadIdentifier(t){let e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){let i=this.modulesByIdentifier.get(e);if(i)return i.contexts.find(s=>s.element==t)}proposeToConnectScopeForElementAndIdentifier(t,e){let i=this.scopeObserver.parseValueForElementAndIdentifier(t,e);i?this.scopeObserver.elementMatchedValue(i.element,i):console.error(`Couldn't find or create scope for identifier: "${e}" and element:`,t)}handleError(t,e,i){this.application.handleError(t,e,i)}createScopeForElementAndIdentifier(t,e){return new Jd(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);let e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);let e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(i=>t.connectContextForScope(i))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(i=>t.disconnectContextForScope(i))}},zC={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:r=>`data-${r}-target`,outletAttributeForScope:(r,t)=>`data-${r}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},av("abcdefghijklmnopqrstuvwxyz".split("").map(r=>[r,r]))),av("0123456789".split("").map(r=>[r,r])))};function av(r){return r.reduce((t,[e,i])=>Object.assign(Object.assign({},t),{[e]:i}),{})}var Bl=class{constructor(t=document.documentElement,e=zC){this.logger=console,this.debug=!1,this.logDebugActivity=(i,s,n={})=>{this.debug&&this.logFormattedMessage(i,s,n)},this.element=t,this.schema=e,this.dispatcher=new Od(this),this.router=new tf(this),this.actionDescriptorFilters=Object.assign({},pC)}static start(t,e){let i=new this(t,e);return i.start(),i}async start(){await HC(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){this.load({identifier:t,controllerConstructor:e})}registerActionOption(t,e){this.actionDescriptorFilters[t]=e}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(s=>{s.controllerConstructor.shouldLoad&&this.router.loadDefinition(s)})}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(s=>this.router.unloadIdentifier(s))}get controllers(){return this.router.contexts.map(t=>t.controller)}getControllerForElementAndIdentifier(t,e){let i=this.router.getContextForElementAndIdentifier(t,e);return i?i.controller:null}handleError(t,e,i){var s;this.logger.error(`%s

%o

%o`,e,t,i),(s=window.onerror)===null||s===void 0||s.call(window,e,"",0,0,t)}logFormattedMessage(t,e,i={}){i=Object.assign({application:this},i),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},i)),this.logger.groupEnd()}};function HC(){return new Promise(r=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>r()):r()})}function WC(r){return Ho(r,"classes").reduce((e,i)=>Object.assign(e,jC(i)),{})}function jC(r){return{[`${r}Class`]:{get(){let{classes:t}=this;if(t.has(r))return t.get(r);{let e=t.getAttributeName(r);throw new Error(`Missing attribute "${e}"`)}}},[`${r}Classes`]:{get(){return this.classes.getAll(r)}},[`has${zo(r)}Class`]:{get(){return this.classes.has(r)}}}}function XC(r){return Ho(r,"outlets").reduce((e,i)=>Object.assign(e,YC(i)),{})}function lv(r,t,e){return r.application.getControllerForElementAndIdentifier(t,e)}function cv(r,t,e){let i=lv(r,t,e);if(i||(r.application.router.proposeToConnectScopeForElementAndIdentifier(t,e),i=lv(r,t,e),i))return i}function YC(r){let t=Nd(r);return{[`${t}Outlet`]:{get(){let e=this.outlets.find(r),i=this.outlets.getSelectorForOutletName(r);if(e){let s=cv(this,e,r);if(s)return s;throw new Error(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${t}Outlets`]:{get(){let e=this.outlets.findAll(r);return e.length>0?e.map(i=>{let s=cv(this,i,r);if(s)return s;console.warn(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`,i)}).filter(i=>i):[]}},[`${t}OutletElement`]:{get(){let e=this.outlets.find(r),i=this.outlets.getSelectorForOutletName(r);if(e)return e;throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(r)}},[`has${zo(t)}Outlet`]:{get(){return this.outlets.has(r)}}}}function VC(r){return Ho(r,"targets").reduce((e,i)=>Object.assign(e,UC(i)),{})}function UC(r){return{[`${r}Target`]:{get(){let t=this.targets.find(r);if(t)return t;throw new Error(`Missing target element "${r}" for "${this.identifier}" controller`)}},[`${r}Targets`]:{get(){return this.targets.findAll(r)}},[`has${zo(r)}Target`]:{get(){return this.targets.has(r)}}}}function GC(r){let t=MC(r,"values"),e={valueDescriptorMap:{get(){return t.reduce((i,s)=>{let n=mv(s,this.identifier),o=this.data.getAttributeNameForKey(n.key);return Object.assign(i,{[o]:n})},{})}}};return t.reduce((i,s)=>Object.assign(i,$C(s)),e)}function $C(r,t){let e=mv(r,t),{key:i,name:s,reader:n,writer:o}=e;return{[s]:{get(){let a=this.data.get(i);return a!==null?n(a):e.defaultValue},set(a){a===void 0?this.data.delete(i):this.data.set(i,o(a))}},[`has${zo(s)}`]:{get(){return this.data.has(i)||e.hasCustomDefaultValue}}}}function mv([r,t],e){return QC({controller:e,token:r,typeDefinition:t})}function _l(r){switch(r){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function _o(r){switch(typeof r){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(r))return"array";if(Object.prototype.toString.call(r)==="[object Object]")return"object"}function KC(r){let{controller:t,token:e,typeObject:i}=r,s=sv(i.type),n=sv(i.default),o=s&&n,a=s&&!n,l=!s&&n,c=_l(i.type),h=_o(r.typeObject.default);if(a)return c;if(l)return h;if(c!==h){let u=t?`${t}.${e}`:e;throw new Error(`The specified default value for the Stimulus Value "${u}" must match the defined type "${c}". The provided default value of "${i.default}" is of type "${h}".`)}if(o)return c}function ZC(r){let{controller:t,token:e,typeDefinition:i}=r,n=KC({controller:t,token:e,typeObject:i}),o=_o(i),a=_l(i),l=n||o||a;if(l)return l;let c=t?`${t}.${i}`:e;throw new Error(`Unknown value type "${c}" for "${e}" value`)}function JC(r){let t=_l(r);if(t)return hv[t];let e=Pd(r,"default"),i=Pd(r,"type"),s=r;if(e)return s.default;if(i){let{type:n}=s,o=_l(n);if(o)return hv[o]}return r}function QC(r){let{token:t,typeDefinition:e}=r,i=`${fv(t)}-value`,s=ZC(r);return{type:s,key:i,name:ef(i),get defaultValue(){return JC(e)},get hasCustomDefaultValue(){return _o(e)!==void 0},reader:tE[s],writer:uv[s]||uv.default}}var hv={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},tE={array(r){let t=JSON.parse(r);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${r}" of type "${_o(t)}"`);return t},boolean(r){return!(r=="0"||String(r).toLowerCase()=="false")},number(r){return Number(r.replace(/_/g,""))},object(r){let t=JSON.parse(r);if(t===null||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${r}" of type "${_o(t)}"`);return t},string(r){return r}},uv={default:eE,array:dv,object:dv};function dv(r){return JSON.stringify(r)}function eE(r){return`${r}`}var J=class{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:i={},prefix:s=this.identifier,bubbles:n=!0,cancelable:o=!0}={}){let a=s?`${s}:${t}`:t,l=new CustomEvent(a,{detail:i,bubbles:n,cancelable:o});return e.dispatchEvent(l),l}};J.blessings=[WC,VC,GC,XC];J.targets=[];J.outlets=[];J.values={};var xv={exports:{}};(function(r,t){(function(e){r.exports=e()})(function(e){var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function s(m,x){var v=m[0],w=m[1],y=m[2],A=m[3];v+=(w&y|~w&A)+x[0]-680876936|0,v=(v<<7|v>>>25)+w|0,A+=(v&w|~v&y)+x[1]-389564586|0,A=(A<<12|A>>>20)+v|0,y+=(A&v|~A&w)+x[2]+606105819|0,y=(y<<17|y>>>15)+A|0,w+=(y&A|~y&v)+x[3]-1044525330|0,w=(w<<22|w>>>10)+y|0,v+=(w&y|~w&A)+x[4]-176418897|0,v=(v<<7|v>>>25)+w|0,A+=(v&w|~v&y)+x[5]+1200080426|0,A=(A<<12|A>>>20)+v|0,y+=(A&v|~A&w)+x[6]-1473231341|0,y=(y<<17|y>>>15)+A|0,w+=(y&A|~y&v)+x[7]-45705983|0,w=(w<<22|w>>>10)+y|0,v+=(w&y|~w&A)+x[8]+1770035416|0,v=(v<<7|v>>>25)+w|0,A+=(v&w|~v&y)+x[9]-1958414417|0,A=(A<<12|A>>>20)+v|0,y+=(A&v|~A&w)+x[10]-42063|0,y=(y<<17|y>>>15)+A|0,w+=(y&A|~y&v)+x[11]-1990404162|0,w=(w<<22|w>>>10)+y|0,v+=(w&y|~w&A)+x[12]+1804603682|0,v=(v<<7|v>>>25)+w|0,A+=(v&w|~v&y)+x[13]-40341101|0,A=(A<<12|A>>>20)+v|0,y+=(A&v|~A&w)+x[14]-1502002290|0,y=(y<<17|y>>>15)+A|0,w+=(y&A|~y&v)+x[15]+1236535329|0,w=(w<<22|w>>>10)+y|0,v+=(w&A|y&~A)+x[1]-165796510|0,v=(v<<5|v>>>27)+w|0,A+=(v&y|w&~y)+x[6]-1069501632|0,A=(A<<9|A>>>23)+v|0,y+=(A&w|v&~w)+x[11]+643717713|0,y=(y<<14|y>>>18)+A|0,w+=(y&v|A&~v)+x[0]-373897302|0,w=(w<<20|w>>>12)+y|0,v+=(w&A|y&~A)+x[5]-701558691|0,v=(v<<5|v>>>27)+w|0,A+=(v&y|w&~y)+x[10]+38016083|0,A=(A<<9|A>>>23)+v|0,y+=(A&w|v&~w)+x[15]-660478335|0,y=(y<<14|y>>>18)+A|0,w+=(y&v|A&~v)+x[4]-405537848|0,w=(w<<20|w>>>12)+y|0,v+=(w&A|y&~A)+x[9]+568446438|0,v=(v<<5|v>>>27)+w|0,A+=(v&y|w&~y)+x[14]-1019803690|0,A=(A<<9|A>>>23)+v|0,y+=(A&w|v&~w)+x[3]-187363961|0,y=(y<<14|y>>>18)+A|0,w+=(y&v|A&~v)+x[8]+1163531501|0,w=(w<<20|w>>>12)+y|0,v+=(w&A|y&~A)+x[13]-1444681467|0,v=(v<<5|v>>>27)+w|0,A+=(v&y|w&~y)+x[2]-51403784|0,A=(A<<9|A>>>23)+v|0,y+=(A&w|v&~w)+x[7]+1735328473|0,y=(y<<14|y>>>18)+A|0,w+=(y&v|A&~v)+x[12]-1926607734|0,w=(w<<20|w>>>12)+y|0,v+=(w^y^A)+x[5]-378558|0,v=(v<<4|v>>>28)+w|0,A+=(v^w^y)+x[8]-2022574463|0,A=(A<<11|A>>>21)+v|0,y+=(A^v^w)+x[11]+1839030562|0,y=(y<<16|y>>>16)+A|0,w+=(y^A^v)+x[14]-35309556|0,w=(w<<23|w>>>9)+y|0,v+=(w^y^A)+x[1]-1530992060|0,v=(v<<4|v>>>28)+w|0,A+=(v^w^y)+x[4]+1272893353|0,A=(A<<11|A>>>21)+v|0,y+=(A^v^w)+x[7]-155497632|0,y=(y<<16|y>>>16)+A|0,w+=(y^A^v)+x[10]-1094730640|0,w=(w<<23|w>>>9)+y|0,v+=(w^y^A)+x[13]+681279174|0,v=(v<<4|v>>>28)+w|0,A+=(v^w^y)+x[0]-358537222|0,A=(A<<11|A>>>21)+v|0,y+=(A^v^w)+x[3]-722521979|0,y=(y<<16|y>>>16)+A|0,w+=(y^A^v)+x[6]+76029189|0,w=(w<<23|w>>>9)+y|0,v+=(w^y^A)+x[9]-640364487|0,v=(v<<4|v>>>28)+w|0,A+=(v^w^y)+x[12]-421815835|0,A=(A<<11|A>>>21)+v|0,y+=(A^v^w)+x[15]+530742520|0,y=(y<<16|y>>>16)+A|0,w+=(y^A^v)+x[2]-995338651|0,w=(w<<23|w>>>9)+y|0,v+=(y^(w|~A))+x[0]-198630844|0,v=(v<<6|v>>>26)+w|0,A+=(w^(v|~y))+x[7]+1126891415|0,A=(A<<10|A>>>22)+v|0,y+=(v^(A|~w))+x[14]-1416354905|0,y=(y<<15|y>>>17)+A|0,w+=(A^(y|~v))+x[5]-57434055|0,w=(w<<21|w>>>11)+y|0,v+=(y^(w|~A))+x[12]+1700485571|0,v=(v<<6|v>>>26)+w|0,A+=(w^(v|~y))+x[3]-1894986606|0,A=(A<<10|A>>>22)+v|0,y+=(v^(A|~w))+x[10]-1051523|0,y=(y<<15|y>>>17)+A|0,w+=(A^(y|~v))+x[1]-2054922799|0,w=(w<<21|w>>>11)+y|0,v+=(y^(w|~A))+x[8]+1873313359|0,v=(v<<6|v>>>26)+w|0,A+=(w^(v|~y))+x[15]-30611744|0,A=(A<<10|A>>>22)+v|0,y+=(v^(A|~w))+x[6]-1560198380|0,y=(y<<15|y>>>17)+A|0,w+=(A^(y|~v))+x[13]+1309151649|0,w=(w<<21|w>>>11)+y|0,v+=(y^(w|~A))+x[4]-145523070|0,v=(v<<6|v>>>26)+w|0,A+=(w^(v|~y))+x[11]-1120210379|0,A=(A<<10|A>>>22)+v|0,y+=(v^(A|~w))+x[2]+718787259|0,y=(y<<15|y>>>17)+A|0,w+=(A^(y|~v))+x[9]-343485551|0,w=(w<<21|w>>>11)+y|0,m[0]=v+m[0]|0,m[1]=w+m[1]|0,m[2]=y+m[2]|0,m[3]=A+m[3]|0}function n(m){var x=[],v;for(v=0;v<64;v+=4)x[v>>2]=m.charCodeAt(v)+(m.charCodeAt(v+1)<<8)+(m.charCodeAt(v+2)<<16)+(m.charCodeAt(v+3)<<24);return x}function o(m){var x=[],v;for(v=0;v<64;v+=4)x[v>>2]=m[v]+(m[v+1]<<8)+(m[v+2]<<16)+(m[v+3]<<24);return x}function a(m){var x=m.length,v=[1732584193,-271733879,-1732584194,271733878],w,y,A,C,M,O;for(w=64;w<=x;w+=64)s(v,n(m.substring(w-64,w)));for(m=m.substring(w-64),y=m.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<y;w+=1)A[w>>2]|=m.charCodeAt(w)<<(w%4<<3);if(A[w>>2]|=128<<(w%4<<3),w>55)for(s(v,A),w=0;w<16;w+=1)A[w]=0;return C=x*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),M=parseInt(C[2],16),O=parseInt(C[1],16)||0,A[14]=M,A[15]=O,s(v,A),v}function l(m){var x=m.length,v=[1732584193,-271733879,-1732584194,271733878],w,y,A,C,M,O;for(w=64;w<=x;w+=64)s(v,o(m.subarray(w-64,w)));for(m=w-64<x?m.subarray(w-64):new Uint8Array(0),y=m.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<y;w+=1)A[w>>2]|=m[w]<<(w%4<<3);if(A[w>>2]|=128<<(w%4<<3),w>55)for(s(v,A),w=0;w<16;w+=1)A[w]=0;return C=x*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),M=parseInt(C[2],16),O=parseInt(C[1],16)||0,A[14]=M,A[15]=O,s(v,A),v}function c(m){var x="",v;for(v=0;v<4;v+=1)x+=i[m>>v*8+4&15]+i[m>>v*8&15];return x}function h(m){var x;for(x=0;x<m.length;x+=1)m[x]=c(m[x]);return m.join("")}h(a("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function m(x,v){return x=x|0||0,x<0?Math.max(x+v,0):Math.min(x,v)}ArrayBuffer.prototype.slice=function(x,v){var w=this.byteLength,y=m(x,w),A=w,C,M,O,B;return v!==e&&(A=m(v,w)),y>A?new ArrayBuffer(0):(C=A-y,M=new ArrayBuffer(C),O=new Uint8Array(M),B=new Uint8Array(this,y,C),O.set(B),M)}}();function u(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function d(m,x){var v=m.length,w=new ArrayBuffer(v),y=new Uint8Array(w),A;for(A=0;A<v;A+=1)y[A]=m.charCodeAt(A);return x?y:w}function f(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function g(m,x,v){var w=new Uint8Array(m.byteLength+x.byteLength);return w.set(new Uint8Array(m)),w.set(new Uint8Array(x),m.byteLength),v?w:w.buffer}function p(m){var x=[],v=m.length,w;for(w=0;w<v-1;w+=2)x.push(parseInt(m.substr(w,2),16));return String.fromCharCode.apply(String,x)}function b(){this.reset()}return b.prototype.append=function(m){return this.appendBinary(u(m)),this},b.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var x=this._buff.length,v;for(v=64;v<=x;v+=64)s(this._hash,n(this._buff.substring(v-64,v)));return this._buff=this._buff.substring(v-64),this},b.prototype.end=function(m){var x=this._buff,v=x.length,w,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A;for(w=0;w<v;w+=1)y[w>>2]|=x.charCodeAt(w)<<(w%4<<3);return this._finish(y,v),A=h(this._hash),m&&(A=p(A)),this.reset(),A},b.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},b.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},b.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},b.prototype._finish=function(m,x){var v=x,w,y,A;if(m[v>>2]|=128<<(v%4<<3),v>55)for(s(this._hash,m),v=0;v<16;v+=1)m[v]=0;w=this._length*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),y=parseInt(w[2],16),A=parseInt(w[1],16)||0,m[14]=y,m[15]=A,s(this._hash,m)},b.hash=function(m,x){return b.hashBinary(u(m),x)},b.hashBinary=function(m,x){var v=a(m),w=h(v);return x?p(w):w},b.ArrayBuffer=function(){this.reset()},b.ArrayBuffer.prototype.append=function(m){var x=g(this._buff.buffer,m,!0),v=x.length,w;for(this._length+=m.byteLength,w=64;w<=v;w+=64)s(this._hash,o(x.subarray(w-64,w)));return this._buff=w-64<v?new Uint8Array(x.buffer.slice(w-64)):new Uint8Array(0),this},b.ArrayBuffer.prototype.end=function(m){var x=this._buff,v=x.length,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y,A;for(y=0;y<v;y+=1)w[y>>2]|=x[y]<<(y%4<<3);return this._finish(w,v),A=h(this._hash),m&&(A=p(A)),this.reset(),A},b.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.ArrayBuffer.prototype.getState=function(){var m=b.prototype.getState.call(this);return m.buff=f(m.buff),m},b.ArrayBuffer.prototype.setState=function(m){return m.buff=d(m.buff,!0),b.prototype.setState.call(this,m)},b.ArrayBuffer.prototype.destroy=b.prototype.destroy,b.ArrayBuffer.prototype._finish=b.prototype._finish,b.ArrayBuffer.hash=function(m,x){var v=l(new Uint8Array(m)),w=h(v);return x?p(w):w},b})})(xv);var iE=xv.exports,rE=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,sf=class r{static create(t,e){new r(t).create(e)}constructor(t){this.file=t,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create(t){this.callback=t,this.md5Buffer=new iE.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",e=>this.fileReaderDidLoad(e)),this.fileReader.addEventListener("error",e=>this.fileReaderDidError(e)),this.readNextChunk()}fileReaderDidLoad(t){if(this.md5Buffer.append(t.target.result),!this.readNextChunk()){let e=this.md5Buffer.end(!0),i=btoa(e);this.callback(null,i)}}fileReaderDidError(t){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){let t=this.chunkIndex*this.chunkSize,e=Math.min(t+this.chunkSize,this.file.size),i=rE.call(this.file,t,e);return this.fileReader.readAsArrayBuffer(i),this.chunkIndex++,!0}else return!1}};function sE(r){let t=yv(document.head,`meta[name="${r}"]`);if(t)return t.getAttribute("content")}function nE(r,t){typeof r=="string"&&(t=r,r=document);let e=r.querySelectorAll(t);return Av(e)}function yv(r,t){return typeof r=="string"&&(t=r,r=document),r.querySelector(t)}function wv(r,t,e={}){let{disabled:i}=r,{bubbles:s,cancelable:n,detail:o}=e,a=document.createEvent("Event");a.initEvent(t,s||!0,n||!0),a.detail=o||{};try{r.disabled=!1,r.dispatchEvent(a)}finally{r.disabled=i}return a}function Av(r){return Array.isArray(r)?r:Array.from?Array.from(r):[].slice.call(r)}var nf=class{constructor(t,e,i,s={}){this.file=t,this.attributes={filename:t.name,content_type:t.type||"application/octet-stream",byte_size:t.size,checksum:e},this.xhr=new XMLHttpRequest,this.xhr.open("POST",i,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(s).forEach(o=>{this.xhr.setRequestHeader(o,s[o])});let n=sE("csrf-token");n!=null&&this.xhr.setRequestHeader("X-CSRF-Token",n),this.xhr.addEventListener("load",o=>this.requestDidLoad(o)),this.xhr.addEventListener("error",o=>this.requestDidError(o))}get status(){return this.xhr.status}get response(){let{responseType:t,response:e}=this.xhr;return t=="json"?e:JSON.parse(e)}create(t){this.callback=t,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(t){if(this.status>=200&&this.status<300){let{response:e}=this,{direct_upload:i}=e;delete e.direct_upload,this.attributes=e,this.directUploadData=i,this.callback(null,this.toJSON())}else this.requestDidError(t)}requestDidError(t){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){let t={};for(let e in this.attributes)t[e]=this.attributes[e];return t}},of=class{constructor(t){this.blob=t,this.file=t.file;let{url:e,headers:i}=t.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",e,!0),this.xhr.responseType="text";for(let s in i)this.xhr.setRequestHeader(s,i[s]);this.xhr.addEventListener("load",s=>this.requestDidLoad(s)),this.xhr.addEventListener("error",s=>this.requestDidError(s))}create(t){this.callback=t,this.xhr.send(this.file.slice())}requestDidLoad(t){let{status:e,response:i}=this.xhr;e>=200&&e<300?this.callback(null,i):this.requestDidError(t)}requestDidError(t){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}},oE=0,Wo=class{constructor(t,e,i,s={}){this.id=++oE,this.file=t,this.url=e,this.delegate=i,this.customHeaders=s}create(t){sf.create(this.file,(e,i)=>{if(e){t(e);return}let s=new nf(this.file,i,this.url,this.customHeaders);bv(this.delegate,"directUploadWillCreateBlobWithXHR",s.xhr),s.create(n=>{if(n)t(n);else{let o=new of(s);bv(this.delegate,"directUploadWillStoreFileWithXHR",o.xhr),o.create(a=>{a?t(a):t(null,s.toJSON())})}})})}};function bv(r,t,...e){if(r&&typeof r[t]=="function")return r[t](...e)}var af=class{constructor(t,e){this.input=t,this.file=e,this.directUpload=new Wo(this.file,this.url,this),this.dispatch("initialize")}start(t){let e=document.createElement("input");e.type="hidden",e.name=this.input.name,this.input.insertAdjacentElement("beforebegin",e),this.dispatch("start"),this.directUpload.create((i,s)=>{i?(e.parentNode.removeChild(e),this.dispatchError(i)):e.value=s.signed_id,this.dispatch("end"),t(i)})}uploadRequestDidProgress(t){let e=t.loaded/t.total*100;e&&this.dispatch("progress",{progress:e})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(t,e={}){return e.file=this.file,e.id=this.directUpload.id,wv(this.input,`direct-upload:${t}`,{detail:e})}dispatchError(t){this.dispatch("error",{error:t}).defaultPrevented||alert(t)}directUploadWillCreateBlobWithXHR(t){this.dispatch("before-blob-request",{xhr:t})}directUploadWillStoreFileWithXHR(t){this.dispatch("before-storage-request",{xhr:t}),t.upload.addEventListener("progress",e=>this.uploadRequestDidProgress(e))}},aE="input[type=file][data-direct-upload-url]:not([disabled])",lf=class{constructor(t){this.form=t,this.inputs=nE(t,aE).filter(e=>e.files.length)}start(t){let e=this.createDirectUploadControllers(),i=()=>{let s=e.shift();s?s.start(n=>{n?(t(n),this.dispatch("end")):i()}):(t(),this.dispatch("end"))};this.dispatch("start"),i()}createDirectUploadControllers(){let t=[];return this.inputs.forEach(e=>{Av(e.files).forEach(i=>{let s=new af(e,i);t.push(s)})}),t}dispatch(t,e={}){return wv(this.form,`direct-uploads:${t}`,{detail:e})}},rf="data-direct-uploads-processing",cf=new WeakMap,vv=!1;function hf(){vv||(vv=!0,document.addEventListener("click",lE,!0),document.addEventListener("submit",cE,!0),document.addEventListener("ajax:before",hE))}function lE(r){let t=r.target.closest("button, input");t&&t.type==="submit"&&t.form&&cf.set(t.form,t)}function cE(r){kv(r)}function hE(r){r.target.tagName=="FORM"&&kv(r)}function kv(r){let t=r.target;if(t.hasAttribute(rf)){r.preventDefault();return}let e=new lf(t),{inputs:i}=e;i.length&&(r.preventDefault(),t.setAttribute(rf,""),i.forEach(dE),e.start(s=>{t.removeAttribute(rf),s?i.forEach(fE):uE(t)}))}function uE(r){let t=cf.get(r)||yv(r,"input[type=submit], button[type=submit]");if(t){let{disabled:e}=t;t.disabled=!1,t.focus(),t.click(),t.disabled=e}else t=document.createElement("input"),t.type="submit",t.style.display="none",r.appendChild(t),t.click(),r.removeChild(t);cf.delete(r)}function dE(r){r.disabled=!0}function fE(r){r.disabled=!1}function pE(){window.ActiveStorage&&hf()}setTimeout(pE,1);var mt=Bl.start();mt.debug=!1;window.Stimulus=mt;hf();var zl=class extends J{static targets=["content","icon"];connect(){this.element.dataset.openDefault==="true"&&this.open()}toggle(){this.isOpen()?this.close():this.open()}open(){this.contentTarget.classList.remove("hidden"),this.iconTarget.classList.add("rotate-180")}close(){this.contentTarget.classList.add("hidden"),this.iconTarget.classList.remove("rotate-180")}isOpen(){return!this.contentTarget.classList.contains("hidden")}};var Hl=class extends J{static values={delay:{type:Number,default:300}};initialize(){this.submit=this.debounce(this.submit.bind(this),this.delayValue)}submit(){if(this.element.reportValidity()){let r=this.element.closest("form");if(r){let t=document.createElement("input");t.type="submit",t.style.display="none",r.appendChild(t),t.click(),t.remove()}}}debounce(r,t){let e;return function(...s){let n=()=>{clearTimeout(e),r(...s)};clearTimeout(e),e=setTimeout(n,t)}}};var Wl=class extends J{static targets=["pulseColor"];connect(){this.update(),this.togglePulseColor()}togglePulseColor(){let t=this.element.querySelector('input[type="checkbox"][name*="[animate_pulse]"]').checked;this.pulseColorTarget.style.display=t?"block":"none"}update(r){r&&r.preventDefault();let e=this.element.querySelector('[name*="[action_type]"]').value==="external_link";this.element.querySelectorAll("[data-external-field]").forEach(i=>{i.style.display=e?"block":"none"})}};var jl=class extends J{connect(){this.element.dataset.previewMode&&this.element.addEventListener("click",this.handleClick.bind(this))}handleClick(r){r.preventDefault();let t=this.element.dataset.actionType,e=this.element.dataset.url,i=this.element.dataset.target;if(t==="next_step"){let s=document.querySelector('button[data-action="preview#next"]');s&&s.click()}else t==="external_link"&&e&&window.open(e,i||"_self")}};var Cv=De(Sv(),1),df=class extends J{initialize(){this.onSave=this.onSave.bind(this)}connect(){this.picker=Cv.default.create({el:this.buttonTarget,theme:this.themeValue,default:this.inputTarget.value,swatches:this.swatches,components:this.componentOptions}),this.picker.on("save",this.onSave)}disconnect(){this.picker.destroy()}onSave(t){this.inputTarget.value=null,t&&(this.inputTarget.value=t.toHEXA().toString()),this.picker.hide()}get componentOptions(){return{preview:!0,hue:!0,interaction:{input:!0,clear:!0,save:!0}}}get swatches(){return["#A0AEC0","#F56565","#ED8936","#ECC94B","#48BB78","#38B2AC","#4299E1","#667EEA","#9F7AEA","#ED64A6"]}};df.targets=["button","input"],df.values={theme:{type:String,default:"classic"}};var Ev=df;var Yl=class extends Ev{connect(){super.connect()}onSave(r){super.onSave(r),this.inputTarget.dispatchEvent(new Event("change",{bubbles:!0}))}};var ff={};(function r(t,e,i,s){var n=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!t.OffscreenCanvas)return!1;var T=new OffscreenCanvas(1,1),k=T.getContext("2d");k.fillRect(0,0,1,1);var D=T.transferToImageBitmap();try{k.createPattern(D,"no-repeat")}catch{return!1}return!0}();function l(){}function c(T){var k=e.exports.Promise,D=k!==void 0?k:t.Promise;return typeof D=="function"?new D(T):(T(l,l),null)}var h=function(T,k){return{transform:function(D){if(T)return D;if(k.has(D))return k.get(D);var X=new OffscreenCanvas(D.width,D.height),H=X.getContext("2d");return H.drawImage(D,0,0),k.set(D,X),X},clear:function(){k.clear()}}}(a,new Map),u=function(){var T=Math.floor(16.666666666666668),k,D,X={},H=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(k=function(G){var W=Math.random();return X[W]=requestAnimationFrame(function Y($){H===$||H+T-1<$?(H=$,delete X[W],G()):X[W]=requestAnimationFrame(Y)}),W},D=function(G){X[G]&&cancelAnimationFrame(X[G])}):(k=function(G){return setTimeout(G,T)},D=function(G){return clearTimeout(G)}),{frame:k,cancel:D}}(),d=function(){var T,k,D={};function X(H){function G(W,Y){H.postMessage({options:W||{},callback:Y})}H.init=function(Y){var $=Y.transferControlToOffscreen();H.postMessage({canvas:$},[$])},H.fire=function(Y,$,rt){if(k)return G(Y,null),k;var nt=Math.random().toString(36).slice(2);return k=c(function(lt){function ct(ot){ot.data.callback===nt&&(delete D[nt],H.removeEventListener("message",ct),k=null,h.clear(),rt(),lt())}H.addEventListener("message",ct),G(Y,nt),D[nt]=ct.bind(null,{data:{callback:nt}})}),k},H.reset=function(){H.postMessage({reset:!0});for(var Y in D)D[Y](),delete D[Y]}}return function(){if(T)return T;if(!i&&n){var H=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{T=new Worker(URL.createObjectURL(new Blob([H])))}catch(G){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("\u{1F38A} Could not load worker",G),null}X(T)}return T}}(),f={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function g(T,k){return k?k(T):T}function p(T){return T!=null}function b(T,k,D){return g(T&&p(T[k])?T[k]:f[k],D)}function m(T){return T<0?0:Math.floor(T)}function x(T,k){return Math.floor(Math.random()*(k-T))+T}function v(T){return parseInt(T,16)}function w(T){return T.map(y)}function y(T){var k=String(T).replace(/[^0-9a-f]/gi,"");return k.length<6&&(k=k[0]+k[0]+k[1]+k[1]+k[2]+k[2]),{r:v(k.substring(0,2)),g:v(k.substring(2,4)),b:v(k.substring(4,6))}}function A(T){var k=b(T,"origin",Object);return k.x=b(k,"x",Number),k.y=b(k,"y",Number),k}function C(T){T.width=document.documentElement.clientWidth,T.height=document.documentElement.clientHeight}function M(T){var k=T.getBoundingClientRect();T.width=k.width,T.height=k.height}function O(T){var k=document.createElement("canvas");return k.style.position="fixed",k.style.top="0px",k.style.left="0px",k.style.pointerEvents="none",k.style.zIndex=T,k}function B(T,k,D,X,H,G,W,Y,$){T.save(),T.translate(k,D),T.rotate(G),T.scale(X,H),T.arc(0,0,1,W,Y,$),T.restore()}function _(T){var k=T.angle*(Math.PI/180),D=T.spread*(Math.PI/180);return{x:T.x,y:T.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:T.startVelocity*.5+Math.random()*T.startVelocity,angle2D:-k+(.5*D-Math.random()*D),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:T.color,shape:T.shape,tick:0,totalTicks:T.ticks,decay:T.decay,drift:T.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:T.gravity*3,ovalScalar:.6,scalar:T.scalar,flat:T.flat}}function z(T,k){k.x+=Math.cos(k.angle2D)*k.velocity+k.drift,k.y+=Math.sin(k.angle2D)*k.velocity+k.gravity,k.velocity*=k.decay,k.flat?(k.wobble=0,k.wobbleX=k.x+10*k.scalar,k.wobbleY=k.y+10*k.scalar,k.tiltSin=0,k.tiltCos=0,k.random=1):(k.wobble+=k.wobbleSpeed,k.wobbleX=k.x+10*k.scalar*Math.cos(k.wobble),k.wobbleY=k.y+10*k.scalar*Math.sin(k.wobble),k.tiltAngle+=.1,k.tiltSin=Math.sin(k.tiltAngle),k.tiltCos=Math.cos(k.tiltAngle),k.random=Math.random()+2);var D=k.tick++/k.totalTicks,X=k.x+k.random*k.tiltCos,H=k.y+k.random*k.tiltSin,G=k.wobbleX+k.random*k.tiltCos,W=k.wobbleY+k.random*k.tiltSin;if(T.fillStyle="rgba("+k.color.r+", "+k.color.g+", "+k.color.b+", "+(1-D)+")",T.beginPath(),o&&k.shape.type==="path"&&typeof k.shape.path=="string"&&Array.isArray(k.shape.matrix))T.fill(R(k.shape.path,k.shape.matrix,k.x,k.y,Math.abs(G-X)*.1,Math.abs(W-H)*.1,Math.PI/10*k.wobble));else if(k.shape.type==="bitmap"){var Y=Math.PI/10*k.wobble,$=Math.abs(G-X)*.1,rt=Math.abs(W-H)*.1,nt=k.shape.bitmap.width*k.scalar,lt=k.shape.bitmap.height*k.scalar,ct=new DOMMatrix([Math.cos(Y)*$,Math.sin(Y)*$,-Math.sin(Y)*rt,Math.cos(Y)*rt,k.x,k.y]);ct.multiplySelf(new DOMMatrix(k.shape.matrix));var ot=T.createPattern(h.transform(k.shape.bitmap),"no-repeat");ot.setTransform(ct),T.globalAlpha=1-D,T.fillStyle=ot,T.fillRect(k.x-nt/2,k.y-lt/2,nt,lt),T.globalAlpha=1}else if(k.shape==="circle")T.ellipse?T.ellipse(k.x,k.y,Math.abs(G-X)*k.ovalScalar,Math.abs(W-H)*k.ovalScalar,Math.PI/10*k.wobble,0,2*Math.PI):B(T,k.x,k.y,Math.abs(G-X)*k.ovalScalar,Math.abs(W-H)*k.ovalScalar,Math.PI/10*k.wobble,0,2*Math.PI);else if(k.shape==="star")for(var ht=Math.PI/2*3,qt=4*k.scalar,ce=8*k.scalar,he=k.x,ne=k.y,Pe=5,oe=Math.PI/Pe;Pe--;)he=k.x+Math.cos(ht)*ce,ne=k.y+Math.sin(ht)*ce,T.lineTo(he,ne),ht+=oe,he=k.x+Math.cos(ht)*qt,ne=k.y+Math.sin(ht)*qt,T.lineTo(he,ne),ht+=oe;else T.moveTo(Math.floor(k.x),Math.floor(k.y)),T.lineTo(Math.floor(k.wobbleX),Math.floor(H)),T.lineTo(Math.floor(G),Math.floor(W)),T.lineTo(Math.floor(X),Math.floor(k.wobbleY));return T.closePath(),T.fill(),k.tick<k.totalTicks}function N(T,k,D,X,H){var G=k.slice(),W=T.getContext("2d"),Y,$,rt=c(function(nt){function lt(){Y=$=null,W.clearRect(0,0,X.width,X.height),h.clear(),H(),nt()}function ct(){i&&!(X.width===s.width&&X.height===s.height)&&(X.width=T.width=s.width,X.height=T.height=s.height),!X.width&&!X.height&&(D(T),X.width=T.width,X.height=T.height),W.clearRect(0,0,X.width,X.height),G=G.filter(function(ot){return z(W,ot)}),G.length?Y=u.frame(ct):lt()}Y=u.frame(ct),$=lt});return{addFettis:function(nt){return G=G.concat(nt),rt},canvas:T,promise:rt,reset:function(){Y&&u.cancel(Y),$&&$()}}}function E(T,k){var D=!T,X=!!b(k||{},"resize"),H=!1,G=b(k,"disableForReducedMotion",Boolean),W=n&&!!b(k||{},"useWorker"),Y=W?d():null,$=D?C:M,rt=T&&Y?!!T.__confetti_initialized:!1,nt=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,lt;function ct(ht,qt,ce){for(var he=b(ht,"particleCount",m),ne=b(ht,"angle",Number),Pe=b(ht,"spread",Number),oe=b(ht,"startVelocity",Number),hs=b(ht,"decay",Number),us=b(ht,"gravity",Number),Cr=b(ht,"drift",Number),Ue=b(ht,"colors",w),Ae=b(ht,"ticks",Number),ue=b(ht,"shapes"),zi=b(ht,"scalar"),Hi=!!b(ht,"flat"),Er=A(ht),Ci=he,Tr=[],Lr=T.width*Er.x,Mr=T.height*Er.y;Ci--;)Tr.push(_({x:Lr,y:Mr,angle:ne,spread:Pe,startVelocity:oe,color:Ue[Ci%Ue.length],shape:ue[x(0,ue.length)],ticks:Ae,decay:hs,gravity:us,drift:Cr,scalar:zi,flat:Hi}));return lt?lt.addFettis(Tr):(lt=N(T,Tr,$,qt,ce),lt.promise)}function ot(ht){var qt=G||b(ht,"disableForReducedMotion",Boolean),ce=b(ht,"zIndex",Number);if(qt&&nt)return c(function(oe){oe()});D&&lt?T=lt.canvas:D&&!T&&(T=O(ce),document.body.appendChild(T)),X&&!rt&&$(T);var he={width:T.width,height:T.height};Y&&!rt&&Y.init(T),rt=!0,Y&&(T.__confetti_initialized=!0);function ne(){if(Y){var oe={getBoundingClientRect:function(){if(!D)return T.getBoundingClientRect()}};$(oe),Y.postMessage({resize:{width:oe.width,height:oe.height}});return}he.width=he.height=null}function Pe(){lt=null,X&&(H=!1,t.removeEventListener("resize",ne)),D&&T&&(document.body.contains(T)&&document.body.removeChild(T),T=null,rt=!1)}return X&&!H&&(H=!0,t.addEventListener("resize",ne,!1)),Y?Y.fire(ht,he,Pe):ct(ht,he,Pe)}return ot.reset=function(){Y&&Y.reset(),lt&&lt.reset()},ot}var I;function S(){return I||(I=E(null,{useWorker:!0,resize:!0})),I}function R(T,k,D,X,H,G,W){var Y=new Path2D(T),$=new Path2D;$.addPath(Y,new DOMMatrix(k));var rt=new Path2D;return rt.addPath($,new DOMMatrix([Math.cos(W)*H,Math.sin(W)*H,-Math.sin(W)*G,Math.cos(W)*G,D,X])),rt}function L(T){if(!o)throw new Error("path confetti are not supported in this browser");var k,D;typeof T=="string"?k=T:(k=T.path,D=T.matrix);var X=new Path2D(k),H=document.createElement("canvas"),G=H.getContext("2d");if(!D){for(var W=1e3,Y=W,$=W,rt=0,nt=0,lt,ct,ot=0;ot<W;ot+=2)for(var ht=0;ht<W;ht+=2)G.isPointInPath(X,ot,ht,"nonzero")&&(Y=Math.min(Y,ot),$=Math.min($,ht),rt=Math.max(rt,ot),nt=Math.max(nt,ht));lt=rt-Y,ct=nt-$;var qt=10,ce=Math.min(qt/lt,qt/ct);D=[ce,0,0,ce,-Math.round(lt/2+Y)*ce,-Math.round(ct/2+$)*ce]}return{type:"path",path:k,matrix:D}}function q(T){var k,D=1,X="#000000",H='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof T=="string"?k=T:(k=T.text,D="scalar"in T?T.scalar:D,H="fontFamily"in T?T.fontFamily:H,X="color"in T?T.color:X);var G=10*D,W=""+G+"px "+H,Y=new OffscreenCanvas(G,G),$=Y.getContext("2d");$.font=W;var rt=$.measureText(k),nt=Math.ceil(rt.actualBoundingBoxRight+rt.actualBoundingBoxLeft),lt=Math.ceil(rt.actualBoundingBoxAscent+rt.actualBoundingBoxDescent),ct=2,ot=rt.actualBoundingBoxLeft+ct,ht=rt.actualBoundingBoxAscent+ct;nt+=ct+ct,lt+=ct+ct,Y=new OffscreenCanvas(nt,lt),$=Y.getContext("2d"),$.font=W,$.fillStyle=X,$.fillText(k,ot,ht);var qt=1/D;return{type:"bitmap",bitmap:Y.transferToImageBitmap(),matrix:[qt,0,0,qt,-nt*qt/2,-lt*qt/2]}}e.exports=function(){return S().apply(this,arguments)},e.exports.reset=function(){S().reset()},e.exports.create=E,e.exports.shapeFromPath=L,e.exports.shapeFromText=q})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ff,!1);var pf=ff.exports,p5=ff.exports.create;var Vl=class extends J{connect(){window.location.search.includes("confetti=true")&&(this.shootConfetti(),window.history.replaceState({},"",window.location.pathname))}shootConfetti(){let t=Date.now()+3e3,e=["#FE0000","#FDB800","#00B200"];(function i(){pf({particleCount:3,angle:60,spread:55,origin:{x:0,y:.65},colors:e}),pf({particleCount:3,angle:120,spread:55,origin:{x:1,y:.65},colors:e}),Date.now()<t&&requestAnimationFrame(i)})()}};var Ul=class extends J{static targets=["timer"];static values={minutes:Number};connect(){this.startCountdown()}disconnect(){this.interval&&clearInterval(this.interval)}startCountdown(){let r=this.minutesValue*60;this.updateDisplay(r),this.interval=setInterval(()=>{if(r--,r<0){clearInterval(this.interval);return}this.updateDisplay(r)},1e3)}updateDisplay(r){let t=Math.floor(r/60),e=r%60,i=`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}`;this.timerTarget.textContent=i}};var Gl=class extends J{dragStart(r){let t=r.target.dataset.moduleType;t&&(r.dataTransfer.setData("moduleType",t),r.target.classList.add("opacity-50"))}connect(){console.log("Drag controller connected"),this.initializeDragAndDrop()}initializeDragAndDrop(){this.element.addEventListener("dragover",this.handleDragOver.bind(this)),this.element.addEventListener("dragleave",this.handleDragLeave.bind(this)),this.element.addEventListener("drop",this.handleDrop.bind(this))}handleDragOver(r){r.preventDefault(),this.element.classList.add("bg-orange-50","border-orange-300")}handleDragLeave(r){this.element.classList.remove("bg-orange-50","border-orange-300")}async handleDrop(r){r.preventDefault(),this.element.classList.remove("bg-orange-50","border-orange-300");let t=r.dataTransfer.getData("moduleType");if(!t)return;let e=this.element.dataset.stepId;if(e)try{let i=document.querySelector("[data-quiz-id]").dataset.quizId,s=await fetch(`/quiz_builder/${i}/steps/${e}/quiz_modules`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector("[name='csrf-token']").content,Accept:"text/vnd.turbo-stream.html"},body:JSON.stringify({quiz_module:{module_type:t}})});if(!s.ok)throw new Error("Failed to create module");let n=await s.text();Turbo.renderStreamMessage(n)}catch(i){console.error("Error creating module:",i)}}};var $l=class extends J{static targets=["picker","input","button","tabs","content"];connect(){this.hideHandler=this.hide.bind(this),document.addEventListener("click",this.hideHandler);let r=this.tabsTarget.firstElementChild;r&&this.switchCategory({target:r})}disconnect(){document.removeEventListener("click",this.hideHandler)}toggle(r){r.stopPropagation(),this.pickerTarget.classList.toggle("hidden")}select(r){r.preventDefault();let t=r.target.dataset.emoji;this.inputTarget.value=t,this.buttonTarget.textContent=t,this.pickerTarget.classList.add("hidden"),this.inputTarget.dispatchEvent(new Event("change",{bubbles:!0})),this.element.closest("form").requestSubmit()}switchCategory(r){let t=r.target.dataset.category;this.tabsTarget.querySelectorAll("button").forEach(e=>{e.classList.toggle("bg-orange-100",e.dataset.category===t)}),this.contentTarget.querySelectorAll("[data-category]").forEach(e=>{e.classList.toggle("hidden",e.dataset.category!==t)})}hide(r){this.element.contains(r.target)||this.pickerTarget.classList.add("hidden")}clear(r){r.preventDefault(),this.inputTarget.value="",this.buttonTarget.textContent="\u{1F600}",this.inputTarget.dispatchEvent(new Event("change",{bubbles:!0})),this.element.closest("form").requestSubmit()}};var Kl=class extends J{static targets=["container","template","field"];connect(){this.checkEmptyState()}addField(r){r.preventDefault();let t=this.templateTarget.content.cloneNode(!0),e=t.querySelector('[data-form-fields-target="field"]');e&&(e.dataset.openDefault="true"),this.containerTarget.appendChild(t),this.submitForm(),this.checkEmptyState()}removeField(r){r.preventDefault();let t=r.currentTarget.closest('[data-form-fields-target="field"]');t&&(t.remove(),this.submitForm(),this.checkEmptyState())}updateFieldOptions(r){let t=r.currentTarget,i=t.closest('[data-form-fields-target="field"]').querySelector(".options-container");t.value==="select"?i.classList.remove("hidden"):i.classList.add("hidden"),this.submitForm()}checkEmptyState(){let r=this.element.querySelector(".empty-fields-message");r&&r.classList.toggle("hidden",this.fieldTargets.length>0)}submitForm(){let r=this.element.closest("form");if(r){let e=document.activeElement.id;clearTimeout(this.submitTimeout),this.submitTimeout=setTimeout(()=>{let i=new FormData(r);fetch(r.action,{method:"PATCH",headers:{Accept:"text/vnd.turbo-stream.html","X-CSRF-Token":document.querySelector("[name='csrf-token']").content},body:i}).then(s=>s.text()).then(s=>{Turbo.renderStreamMessage(s),setTimeout(()=>{if(e){let n=document.getElementById(e);n&&n.focus()}},10)}).catch(s=>{console.error("Error:",s)})},500)}}};var Zl=class extends J{static targets=["field","consent","buttonText","spinner","error"];static values={quizId:Number,stepId:Number,moduleId:Number,previewMode:Boolean};connect(){this.isSubmitting=!1,this.hasConsentTarget&&this.consentTarget.addEventListener("change",this.updateConsentStyle.bind(this))}updateConsentStyle(){let r=this.consentTarget.closest(".border");this.consentTarget.checked?(r.classList.remove("border-gray-200"),r.classList.add("border-orange-300","bg-orange-50")):(r.classList.remove("border-orange-300","bg-orange-50"),r.classList.add("border-gray-200"))}submit(){if(this.isSubmitting||!this.validateForm())return;if(this.buttonTextTarget.classList.add("hidden"),this.spinnerTarget.classList.remove("hidden"),this.isSubmitting=!0,this.errorTarget.classList.add("hidden"),this.previewModeValue){setTimeout(()=>{this.buttonTextTarget.classList.remove("hidden"),this.spinnerTarget.classList.add("hidden"),this.isSubmitting=!1,this.proceedToNextStep()},1e3);return}let t={};this.fieldTargets.forEach(e=>{let i=e.dataset.fieldName;t[i]=e.value}),fetch(`/quiz/${this.quizIdValue}/leads`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector("[name='csrf-token']").content},body:JSON.stringify({form_data:t})}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");this.proceedToNextStep()}).catch(e=>{console.error("Error submitting form:",e),this.errorTarget.classList.remove("hidden")}).finally(()=>{this.buttonTextTarget.classList.remove("hidden"),this.spinnerTarget.classList.add("hidden"),this.isSubmitting=!1})}proceedToNextStep(){let r=document.querySelector('[data-action="preview#next"]');r&&r.click()}validateForm(){let r=!0;return this.fieldTargets.forEach(t=>{t.hasAttribute("required")&&!t.value.trim()?(r=!1,this.highlightInvalidField(t)):this.clearInvalidHighlight(t),t.type==="email"&&t.value&&!this.isValidEmail(t.value)&&(r=!1,this.highlightInvalidField(t))}),this.hasConsentTarget&&this.consentTarget.hasAttribute("required")&&!this.consentTarget.checked?(r=!1,this.highlightInvalidConsentField()):this.clearInvalidHighlightConsent(),r}highlightInvalidField(r){r.classList.add("border-red-500","bg-red-50"),r.classList.add("shake-animation"),setTimeout(()=>{r.classList.remove("shake-animation")},500)}highlightInvalidConsentField(){let r=this.consentTarget.closest(".border");r.classList.remove("border-gray-200","bg-gray-50"),r.classList.add("border-red-500","bg-red-50"),r.classList.add("shake-animation"),setTimeout(()=>{r.classList.remove("shake-animation")},500)}clearInvalidHighlightConsent(){this.consentTarget.closest(".border").classList.remove("border-red-500","bg-red-50","shake-animation")}clearInvalidHighlight(r){r.classList.remove("border-red-500","bg-red-50")}isValidEmail(r){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)}};var Jl=class extends J{connect(){this.element.textContent="Hello World!"}};var Ql=class extends J{static targets=["input","preview","progress","removeButton"];connect(){console.log("Image upload controller connected")}triggerFileInput(r){this.inputTarget.click()}handleUpload(r){let t=r.target.files[0];if(!t)return;this.showProgress(),new Wo(t,this.inputTarget.dataset.directUploadUrl,this).create((i,s)=>{if(i){console.error("Upload error:",i),this.hideProgress();return}if(this.hasPreviewTarget){let o=document.createElement("div");o.className="w-12 h-12 border border-gray-200 rounded-md overflow-hidden";let a=document.createElement("img");a.src=URL.createObjectURL(t),a.className="w-full h-full object-contain",o.appendChild(a),this.previewTarget.innerHTML="",this.previewTarget.appendChild(o),this.previewTarget.classList.remove("hidden")}let n=this.element.querySelector('input[type="hidden"][name="'+this.inputTarget.name.replace("uploaded_image","blob_id")+'"]');n||(n=document.createElement("input"),n.type="hidden",n.name=this.inputTarget.name.replace("uploaded_image","blob_id"),this.element.appendChild(n)),n.value=s.id,this.hasRemoveButtonTarget&&this.removeButtonTarget.classList.remove("hidden"),this.hideProgress(),this.submitForm()})}setUploadedImage(r){let t=this.element.querySelector('input[type="hidden"][name="'+this.inputTarget.name+'"]');t||(t=document.createElement("input"),t.type="hidden",t.name=this.inputTarget.name,this.element.appendChild(t)),t.value=r}remove(r){r.preventDefault(),this.inputTarget.value="",this.hasPreviewTarget&&(this.previewTarget.innerHTML="",this.previewTarget.classList.add("hidden"));let t=this.element.querySelector('input[type="hidden"][name*="blob_id"]');t&&(t.value=""),this.hasRemoveButtonTarget&&this.removeButtonTarget.classList.add("hidden"),this.submitForm()}submitForm(){let r=this.element.closest("form");if(!r)return;let t=new FormData(r);fetch(r.action,{method:"PATCH",headers:{Accept:"text/vnd.turbo-stream.html","X-CSRF-Token":document.querySelector("[name='csrf-token']").content},body:t}).then(e=>e.text()).then(e=>{Turbo.renderStreamMessage(e)}).catch(e=>{console.error("Error:",e)})}showProgress(){this.hasProgressTarget&&(this.progressTarget.classList.remove("hidden"),this.progressTarget.textContent="Uploading: 0%")}hideProgress(){this.hasProgressTarget&&this.progressTarget.classList.add("hidden")}directUploadWillStoreFileWithXHR(r){r.upload.addEventListener("progress",t=>{let e=t.loaded/t.total*100;this.hasProgressTarget&&(this.progressTarget.textContent=`Uploading: ${Math.round(e)}%`)})}};var tc=class extends J{static targets=["editor","toggleButton"];static values={id:String,editing:Boolean};connect(){this.editingValue&&this.showEditor()}toggleEdit(r){r.preventDefault(),this.editingValue=!this.editingValue,this.editingValue?this.showEditor():this.hideEditor()}showEditor(){this.editorTarget.classList.remove("hidden"),this.toggleButtonTarget.querySelector("svg").classList.add("rotate-180")}hideEditor(){this.editorTarget.classList.add("hidden"),this.toggleButtonTarget.querySelector("svg").classList.remove("rotate-180")}};var ec=class extends J{static targets=["module"];connect(){console.log("ModulesSortableController conectado")}initializeSortable(){this.moduleTargets.forEach(r=>{r.setAttribute("draggable",!0),r.addEventListener("dragstart",this.dragStart.bind(this)),r.addEventListener("dragend",this.dragEnd.bind(this)),r.addEventListener("dragover",this.dragOver.bind(this)),r.addEventListener("drop",this.drop.bind(this))})}dragStart(r){if(r.target.hasAttribute("data-module-type"))r.dataTransfer.setData("moduleType",r.target.dataset.moduleType),r.dataTransfer.setData("isNewModule","true");else{let e=r.target.closest('[data-modules-sortable-target="module"]');if(!e)return;r.dataTransfer.setData("isNewModule","false"),r.dataTransfer.setData("moduleId",e.dataset.moduleId),r.dataTransfer.setData("stepId",e.dataset.stepId),e.classList.add("opacity-50")}r.dataTransfer.effectAllowed="move"}dragEnd(r){this.moduleTargets.forEach(t=>{t.classList.remove("opacity-50","border-orange-400","border-t-2")})}dragOver(r){r.preventDefault();let t=r.target.closest('[data-modules-sortable-target="module"]');t&&(r.dataTransfer.dropEffect="move",t.classList.add("border-orange-400","border-t-2"))}async drop(r){r.preventDefault();let t=r.target.closest('[data-modules-sortable-target="module"]');if(!t)return;let e=r.dataTransfer.getData("isNewModule")==="true",i=document.querySelector("[data-quiz-id]").dataset.quizId,s=t.dataset.stepId,n=this.getModuleIndex(t);try{if(e){let h=r.dataTransfer.getData("moduleType");if(!h)return;let u=await fetch(`/quiz_builder/${i}/steps/${s}/quiz_modules`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/vnd.turbo-stream.html","X-CSRF-Token":document.querySelector("[name='csrf-token']").content},body:JSON.stringify({quiz_module:{module_type:h,position:n}})});if(!u.ok)throw new Error("Failed to create module");let d=await u.text();Turbo.renderStreamMessage(d);return}let o=r.dataTransfer.getData("moduleId"),a=r.dataTransfer.getData("stepId");if(!o||!a||o===t.dataset.moduleId)return;let l=await fetch(`/quiz_builder/${i}/steps/${a}/quiz_modules/${o}/reposition`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"text/vnd.turbo-stream.html","X-CSRF-Token":document.querySelector('[name="csrf-token"]').content},body:JSON.stringify({position:n})});if(!l.ok)throw new Error("Failed to reposition");let c=await l.text();Turbo.renderStreamMessage(c)}catch(o){console.error("Error:",o)}}getModuleIndex(r){return Array.from(r.parentNode.children).indexOf(r)}};var ic=class extends J{static targets=["userMenu"];connect(){this.isOpen=!1,document.addEventListener("click",this.outsideClick.bind(this))}disconnect(){document.removeEventListener("click",this.outsideClick.bind(this))}toggleUserMenu(r){r.stopPropagation(),this.isOpen=!this.isOpen,this.updateMenuVisibility()}outsideClick(r){this.element.contains(r.target)||(this.isOpen=!1,this.updateMenuVisibility())}updateMenuVisibility(){this.isOpen?this.userMenuTarget.classList.remove("hidden"):this.userMenuTarget.classList.add("hidden")}};var rc=class extends J{static targets=["emojiMode","uploadMode","urlMode","emojiButton","uploadButton","urlButton","urlError"];connect(){let r=this.element;r.querySelector('[name*="[emoji]"]').value?this.setMode({currentTarget:r.querySelector('[data-mode="emoji"]')}):r.querySelector('[name*="[uploaded_image]"]').value?this.setMode({currentTarget:r.querySelector('[data-mode="upload"]')}):r.querySelector('[name*="[img]"]').value&&this.setMode({currentTarget:r.querySelector('[data-mode="url"]')})}setMode(r){let t=r.currentTarget.dataset.mode;switch(this.emojiModeTarget.classList.add("hidden"),this.uploadModeTarget.classList.add("hidden"),this.urlModeTarget.classList.add("hidden"),this.emojiButtonTarget.classList.remove("border-orange-500"),this.uploadButtonTarget.classList.remove("border-orange-500"),this.urlButtonTarget.classList.remove("border-orange-500"),this.emojiButtonTarget.classList.add("border-transparent"),this.uploadButtonTarget.classList.add("border-transparent"),this.urlButtonTarget.classList.add("border-transparent"),t){case"emoji":this.emojiModeTarget.classList.remove("hidden"),this.emojiButtonTarget.classList.remove("border-transparent"),this.emojiButtonTarget.classList.add("border-orange-500");break;case"upload":this.uploadModeTarget.classList.remove("hidden"),this.uploadButtonTarget.classList.remove("border-transparent"),this.uploadButtonTarget.classList.add("border-orange-500");break;case"url":this.urlModeTarget.classList.remove("hidden"),this.urlButtonTarget.classList.remove("border-transparent"),this.urlButtonTarget.classList.add("border-orange-500");break}this.clearOtherModes(t)}clearOtherModes(r){if(r!=="emoji"){let t=this.element.querySelector('[name*="[emoji]"]');t&&(t.value="")}if(r!=="upload"){let t=this.element.querySelector('[name*="[uploaded_image]"]');t&&(t.value="")}if(r!=="url"){let t=this.element.querySelector('[name*="[img]"]');t&&(t.value=""),this.urlErrorTarget.classList.add("hidden")}}validateUrl(r){let t=r.target.value;if(!t){this.urlErrorTarget.classList.add("hidden");return}let e=new Image;e.onload=()=>{this.urlErrorTarget.classList.add("hidden");let i=this.element.closest("form");i&&i.requestSubmit()},e.onerror=()=>{this.urlErrorTarget.classList.remove("hidden"),r.target.value=""},e.src=t}};var sc=class extends J{static targets=["button","text","icon","overlay"];submit(r){r.preventDefault();let t=r.currentTarget,e=t.closest("form");if(console.log(e),console.log("teste de form"),!e||t.disabled||!confirm("This operation may take several seconds. Do you want to continue?"))return;t.disabled=!0,t.classList.add("opacity-50");let i=e.querySelector('[data-page-overlay-target="text"]'),s=e.querySelector('[data-page-overlay-target="icon"]');i&&(i.textContent="Duplicating..."),s&&s.classList.add("animate-spin"),this.overlayTarget.classList.remove("hidden"),e.submit()}};var nc=class extends J{static targets=["step","progress","currentStep","navigation","submit","loadingIntro","quizContent","background"];static values={currentStep:Number,totalSteps:Number,useTransitions:Boolean,transitionDuration:{type:String,default:"0.5"},loadingDuration:Number,loadingActive:Boolean};isFirstDisplay=!0;connect(){this.defaultQuizBackground=this.backgroundTarget.style.backgroundColor,this.element.querySelector("form")?.reset(),console.log("Preview controller connected and form reset"),this.hasLoadingIntroTarget&&this.loadingActiveValue?this.showLoadingIntro():this.initializeQuiz()}showLoadingIntro(){this.loadingIntroTarget.style.display="flex",this.quizContentTarget.style.opacity="0",setTimeout(()=>{this.loadingIntroTarget.style.opacity="0",this.loadingIntroTarget.style.transition="opacity 0.5s ease-out",this.quizContentTarget.style.opacity="1",this.quizContentTarget.style.transition="opacity 0.5s ease-out",setTimeout(()=>{this.loadingIntroTarget.style.display="none",this.initializeQuiz()},500)},this.loadingDurationValue*1e3)}initializeQuiz(){this.showCurrentStep(),this.updateProgress(),this.setupAutoNavigation()}setupAutoNavigation(){this.stepTargets.forEach(r=>{r.querySelectorAll('input[type="radio"]').forEach(e=>{e.addEventListener("change",i=>{let s=this.findModuleContainer(e);if(!s)return;let n=r.querySelectorAll(".quiz-module").length===1,o=!s.nextElementSibling||!s.nextElementSibling.classList.contains("quiz-module");(n||o)&&this.next()})})})}findModuleContainer(r){let t=r;for(;t;){if(t.classList.contains("quiz-module"))return t;t=t.parentElement}return null}next(){this.currentStepValue<this.totalStepsValue-1&&(this.currentStepValue++,this.showCurrentStep(),this.updateProgress())}previous(){this.currentStepValue>0&&(this.currentStepValue--,this.showCurrentStep(),this.updateProgress(),this.stepTargets[this.currentStepValue].querySelectorAll('input[type="radio"]').forEach(t=>{t.checked=!1}))}async showCurrentStep(){let r=this.useTransitionsValue&&!this.isFirstDisplay,t=parseFloat(this.transitionDurationValue);window.scrollTo({top:0,behavior:"smooth"});let e=this.stepTargets[this.currentStepValue],i=e.dataset.stepBackground;r?(e.style.transition=`opacity ${t}s ease-out`,e.style.opacity="0",await new Promise(n=>setTimeout(n,t*1e3)),this.backgroundTarget.style.transition=`background-color ${t}s ease-out`,this.backgroundTarget.style.backgroundColor=i||this.defaultQuizBackground,this.stepTargets.forEach((n,o)=>{n.classList.toggle("hidden",o!==this.currentStepValue)}),e.style.opacity="1",setTimeout(()=>{this.backgroundTarget.style.transition=""},t*1e3)):(this.backgroundTarget.style.transition="",this.backgroundTarget.style.backgroundColor=i||this.defaultQuizBackground,this.stepTargets.forEach((n,o)=>{n.classList.toggle("hidden",o!==this.currentStepValue)})),this.currentStepTargets.forEach(n=>{n.textContent=this.currentStepValue+1});let s=()=>{let n=e.querySelectorAll('input[type="radio"]'),o=e.querySelectorAll('input[type="checkbox"]'),a=e.querySelectorAll(".quiz-module").length;return n.length>0&&o.length===0&&a===1};if(this.hasNavigationTarget&&!this.navigationTarget.classList.contains("hidden")&&this.navigationTarget.classList.toggle("hidden",s()),this.hasSubmitTarget){let n=this.currentStepValue===this.totalStepsValue-1;if(this.submitTarget.classList.toggle("hidden",!n),n&&this.hasNavigationTarget){let o=this.navigationTarget.querySelector('[data-action="preview#next"]');o&&o.classList.add("hidden")}else if(this.hasNavigationTarget){let o=this.navigationTarget.querySelector('[data-action="preview#next"]');o&&o.classList.remove("hidden")}}this.isFirstDisplay=!1,this.dispatch("stepChange",{detail:{step:this.currentStepValue+1}})}get quizBackground(){return this.backgroundTarget.style.backgroundColor}updateProgress(){let r=(this.currentStepValue+1)/this.totalStepsValue*100;this.progressTargets.forEach(t=>{t.style.width=`${r}%`})}};var oc=class extends J{static targets=["toggle","monthlyPrices","yearlyPrices"];toggle(){this.toggleTarget.classList.toggle("translate-x-5"),this.monthlyPricesTarget.classList.toggle("hidden"),this.yearlyPricesTarget.classList.toggle("hidden")}};var ac=class extends J{static targets=["bar","percentage"];static values={duration:Number,redirectType:String,redirectUrl:String,previewMode:Boolean};connect(){this.hasRedirected=!1,this.observer=new IntersectionObserver(r=>{r.forEach(t=>{t.isIntersecting&&!this.isAnimating&&this.setupProgressBar()})},{threshold:.1}),this.observer.observe(this.element)}setupProgressBar(){this.reset(),this.isAnimating=!0,this.hasRedirected=!1,this.barTarget.style.transition=`width ${this.durationValue}s linear`,this.barTarget.style.width="0%",setTimeout(()=>{this.startProgress()},50),this.barTarget.addEventListener("transitionend",()=>{!this.previewModeValue&&!this.hasRedirected&&this.handleRedirect(),this.isAnimating=!1}),this.startTime=Date.now(),this.updatePercentage()}startProgress(){this.isAnimating&&(this.barTarget.style.width="100%")}updatePercentage(){if(!this.startTime||!this.isAnimating)return;let r=Date.now()-this.startTime,t=this.durationValue*1e3,e=Math.min(r/t*100,100);this.percentageTarget.textContent=Math.round(e),e<100&&this.isAnimating&&requestAnimationFrame(()=>this.updatePercentage())}reset(){this.isAnimating=!1,this.barTarget.style.transition="none",this.barTarget.style.width="0%",this.percentageTarget.textContent="0",this.startTime=null}handleRedirect(){if(!this.hasRedirected)if(this.redirectTypeValue==="next_step"){let r=document.querySelector('[data-action="preview#next"]');r&&(this.hasRedirected=!0,r.click())}else this.redirectTypeValue==="external_url"&&this.redirectUrlValue&&(this.hasRedirected=!0,window.location.href=this.redirectUrlValue)}disconnect(){this.observer?.disconnect(),this.reset(),this.hasRedirected=!1}};var lc=class extends J{static targets=["redirectType","urlField"];toggleRedirectUrl(){let r=this.redirectTypeTarget.value==="external_url";this.urlFieldTarget.classList.toggle("hidden",!r)}};var mE=typeof global=="object"&&global&&global.Object===Object&&global,cc=mE;var bE=typeof self=="object"&&self&&self.Object===Object&&self,vE=cc||bE||Function("return this")(),$t=vE;var xE=$t.Symbol,si=xE;var Tv=Object.prototype,yE=Tv.hasOwnProperty,wE=Tv.toString,jo=si?si.toStringTag:void 0;function AE(r){var t=yE.call(r,jo),e=r[jo];try{r[jo]=void 0;var i=!0}catch{}var s=wE.call(r);return i&&(t?r[jo]=e:delete r[jo]),s}var Lv=AE;var kE=Object.prototype,SE=kE.toString;function CE(r){return SE.call(r)}var Mv=CE;var EE="[object Null]",TE="[object Undefined]",Rv=si?si.toStringTag:void 0;function LE(r){return r==null?r===void 0?TE:EE:Rv&&Rv in Object(r)?Lv(r):Mv(r)}var bi=LE;function ME(r){return r!=null&&typeof r=="object"}var de=ME;var RE=Array.isArray,ni=RE;function IE(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var me=IE;function qE(r){return r}var hc=qE;var OE="[object AsyncFunction]",NE="[object Function]",PE="[object GeneratorFunction]",DE="[object Proxy]";function FE(r){if(!me(r))return!1;var t=bi(r);return t==NE||t==PE||t==OE||t==DE}var pn=FE;var BE=$t["__core-js_shared__"],uc=BE;var Iv=function(){var r=/[^.]+$/.exec(uc&&uc.keys&&uc.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function _E(r){return!!Iv&&Iv in r}var qv=_E;var zE=Function.prototype,HE=zE.toString;function WE(r){if(r!=null){try{return HE.call(r)}catch{}try{return r+""}catch{}}return""}var $i=WE;var jE=/[\\^$.*+?()[\]{}|]/g,XE=/^\[object .+?Constructor\]$/,YE=Function.prototype,VE=Object.prototype,UE=YE.toString,GE=VE.hasOwnProperty,$E=RegExp("^"+UE.call(GE).replace(jE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KE(r){if(!me(r)||qv(r))return!1;var t=pn(r)?$E:XE;return t.test($i(r))}var Ov=KE;function ZE(r,t){return r?.[t]}var Nv=ZE;function JE(r,t){var e=Nv(r,t);return Ov(e)?e:void 0}var Fe=JE;var QE=Fe($t,"WeakMap"),dc=QE;var Pv=Object.create,tT=function(){function r(){}return function(t){if(!me(t))return{};if(Pv)return Pv(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}(),Dv=tT;function eT(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}var Fv=eT;function iT(r,t){var e=-1,i=r.length;for(t||(t=Array(i));++e<i;)t[e]=r[e];return t}var fc=iT;var rT=800,sT=16,nT=Date.now;function oT(r){var t=0,e=0;return function(){var i=nT(),s=sT-(i-e);if(e=i,s>0){if(++t>=rT)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}var Bv=oT;function aT(r){return function(){return r}}var _v=aT;var lT=function(){try{var r=Fe(Object,"defineProperty");return r({},"",{}),r}catch{}}(),gn=lT;var cT=gn?function(r,t){return gn(r,"toString",{configurable:!0,enumerable:!1,value:_v(t),writable:!0})}:hc,zv=cT;var hT=Bv(zv),Hv=hT;function uT(r,t){for(var e=-1,i=r==null?0:r.length;++e<i&&t(r[e],e,r)!==!1;);return r}var Wv=uT;var dT=9007199254740991,fT=/^(?:0|[1-9]\d*)$/;function pT(r,t){var e=typeof r;return t=t??dT,!!t&&(e=="number"||e!="symbol"&&fT.test(r))&&r>-1&&r%1==0&&r<t}var pc=pT;function gT(r,t,e){t=="__proto__"&&gn?gn(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}var mn=gT;function mT(r,t){return r===t||r!==r&&t!==t}var Mi=mT;var bT=Object.prototype,vT=bT.hasOwnProperty;function xT(r,t,e){var i=r[t];(!(vT.call(r,t)&&Mi(i,e))||e===void 0&&!(t in r))&&mn(r,t,e)}var gc=xT;function yT(r,t,e,i){var s=!e;e||(e={});for(var n=-1,o=t.length;++n<o;){var a=t[n],l=i?i(e[a],r[a],a,e,r):void 0;l===void 0&&(l=r[a]),s?mn(e,a,l):gc(e,a,l)}return e}var Ri=yT;var jv=Math.max;function wT(r,t,e){return t=jv(t===void 0?r.length-1:t,0),function(){for(var i=arguments,s=-1,n=jv(i.length-t,0),o=Array(n);++s<n;)o[s]=i[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=i[s];return a[t]=e(o),Fv(r,this,a)}}var Xv=wT;function AT(r,t){return Hv(Xv(r,t,hc),r+"")}var Yv=AT;var kT=9007199254740991;function ST(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=kT}var mc=ST;function CT(r){return r!=null&&mc(r.length)&&!pn(r)}var Dr=CT;function ET(r,t,e){if(!me(e))return!1;var i=typeof t;return(i=="number"?Dr(e)&&pc(t,e.length):i=="string"&&t in e)?Mi(e[t],r):!1}var Vv=ET;function TT(r){return Yv(function(t,e){var i=-1,s=e.length,n=s>1?e[s-1]:void 0,o=s>2?e[2]:void 0;for(n=r.length>3&&typeof n=="function"?(s--,n):void 0,o&&Vv(e[0],e[1],o)&&(n=s<3?void 0:n,s=1),t=Object(t);++i<s;){var a=e[i];a&&r(t,a,i,n)}return t})}var Uv=TT;var LT=Object.prototype;function MT(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||LT;return r===e}var bn=MT;function RT(r,t){for(var e=-1,i=Array(r);++e<r;)i[e]=t(e);return i}var Gv=RT;var IT="[object Arguments]";function qT(r){return de(r)&&bi(r)==IT}var gf=qT;var $v=Object.prototype,OT=$v.hasOwnProperty,NT=$v.propertyIsEnumerable,PT=gf(function(){return arguments}())?gf:function(r){return de(r)&&OT.call(r,"callee")&&!NT.call(r,"callee")},Xo=PT;function DT(){return!1}var Kv=DT;var Qv=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Zv=Qv&&typeof module=="object"&&module&&!module.nodeType&&module,FT=Zv&&Zv.exports===Qv,Jv=FT?$t.Buffer:void 0,BT=Jv?Jv.isBuffer:void 0,_T=BT||Kv,Ki=_T;var zT="[object Arguments]",HT="[object Array]",WT="[object Boolean]",jT="[object Date]",XT="[object Error]",YT="[object Function]",VT="[object Map]",UT="[object Number]",GT="[object Object]",$T="[object RegExp]",KT="[object Set]",ZT="[object String]",JT="[object WeakMap]",QT="[object ArrayBuffer]",tL="[object DataView]",eL="[object Float32Array]",iL="[object Float64Array]",rL="[object Int8Array]",sL="[object Int16Array]",nL="[object Int32Array]",oL="[object Uint8Array]",aL="[object Uint8ClampedArray]",lL="[object Uint16Array]",cL="[object Uint32Array]",Dt={};Dt[eL]=Dt[iL]=Dt[rL]=Dt[sL]=Dt[nL]=Dt[oL]=Dt[aL]=Dt[lL]=Dt[cL]=!0;Dt[zT]=Dt[HT]=Dt[QT]=Dt[WT]=Dt[tL]=Dt[jT]=Dt[XT]=Dt[YT]=Dt[VT]=Dt[UT]=Dt[GT]=Dt[$T]=Dt[KT]=Dt[ZT]=Dt[JT]=!1;function hL(r){return de(r)&&mc(r.length)&&!!Dt[bi(r)]}var tx=hL;function uL(r){return function(t){return r(t)}}var vn=uL;var ex=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Yo=ex&&typeof module=="object"&&module&&!module.nodeType&&module,dL=Yo&&Yo.exports===ex,mf=dL&&cc.process,fL=function(){try{var r=Yo&&Yo.require&&Yo.require("util").types;return r||mf&&mf.binding&&mf.binding("util")}catch{}}(),Zi=fL;var ix=Zi&&Zi.isTypedArray,pL=ix?vn(ix):tx,xn=pL;var gL=Object.prototype,mL=gL.hasOwnProperty;function bL(r,t){var e=ni(r),i=!e&&Xo(r),s=!e&&!i&&Ki(r),n=!e&&!i&&!s&&xn(r),o=e||i||s||n,a=o?Gv(r.length,String):[],l=a.length;for(var c in r)(t||mL.call(r,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||n&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||pc(c,l)))&&a.push(c);return a}var bc=bL;function vL(r,t){return function(e){return r(t(e))}}var vc=vL;var xL=vc(Object.keys,Object),rx=xL;var yL=Object.prototype,wL=yL.hasOwnProperty;function AL(r){if(!bn(r))return rx(r);var t=[];for(var e in Object(r))wL.call(r,e)&&e!="constructor"&&t.push(e);return t}var sx=AL;function kL(r){return Dr(r)?bc(r):sx(r)}var yn=kL;function SL(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var nx=SL;var CL=Object.prototype,EL=CL.hasOwnProperty;function TL(r){if(!me(r))return nx(r);var t=bn(r),e=[];for(var i in r)i=="constructor"&&(t||!EL.call(r,i))||e.push(i);return e}var ox=TL;function LL(r){return Dr(r)?bc(r,!0):ox(r)}var Ii=LL;var ML=Fe(Object,"create"),Ji=ML;function RL(){this.__data__=Ji?Ji(null):{},this.size=0}var ax=RL;function IL(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var lx=IL;var qL="__lodash_hash_undefined__",OL=Object.prototype,NL=OL.hasOwnProperty;function PL(r){var t=this.__data__;if(Ji){var e=t[r];return e===qL?void 0:e}return NL.call(t,r)?t[r]:void 0}var cx=PL;var DL=Object.prototype,FL=DL.hasOwnProperty;function BL(r){var t=this.__data__;return Ji?t[r]!==void 0:FL.call(t,r)}var hx=BL;var _L="__lodash_hash_undefined__";function zL(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=Ji&&t===void 0?_L:t,this}var ux=zL;function wn(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}wn.prototype.clear=ax;wn.prototype.delete=lx;wn.prototype.get=cx;wn.prototype.has=hx;wn.prototype.set=ux;var bf=wn;function HL(){this.__data__=[],this.size=0}var dx=HL;function WL(r,t){for(var e=r.length;e--;)if(Mi(r[e][0],t))return e;return-1}var Fr=WL;var jL=Array.prototype,XL=jL.splice;function YL(r){var t=this.__data__,e=Fr(t,r);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():XL.call(t,e,1),--this.size,!0}var fx=YL;function VL(r){var t=this.__data__,e=Fr(t,r);return e<0?void 0:t[e][1]}var px=VL;function UL(r){return Fr(this.__data__,r)>-1}var gx=UL;function GL(r,t){var e=this.__data__,i=Fr(e,r);return i<0?(++this.size,e.push([r,t])):e[i][1]=t,this}var mx=GL;function An(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}An.prototype.clear=dx;An.prototype.delete=fx;An.prototype.get=px;An.prototype.has=gx;An.prototype.set=mx;var Br=An;var $L=Fe($t,"Map"),_r=$L;function KL(){this.size=0,this.__data__={hash:new bf,map:new(_r||Br),string:new bf}}var bx=KL;function ZL(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}var vx=ZL;function JL(r,t){var e=r.__data__;return vx(t)?e[typeof t=="string"?"string":"hash"]:e.map}var zr=JL;function QL(r){var t=zr(this,r).delete(r);return this.size-=t?1:0,t}var xx=QL;function tM(r){return zr(this,r).get(r)}var yx=tM;function eM(r){return zr(this,r).has(r)}var wx=eM;function iM(r,t){var e=zr(this,r),i=e.size;return e.set(r,t),this.size+=e.size==i?0:1,this}var Ax=iM;function kn(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}kn.prototype.clear=bx;kn.prototype.delete=xx;kn.prototype.get=yx;kn.prototype.has=wx;kn.prototype.set=Ax;var xc=kn;function rM(r,t){for(var e=-1,i=t.length,s=r.length;++e<i;)r[s+e]=t[e];return r}var yc=rM;var sM=vc(Object.getPrototypeOf,Object),Sn=sM;var nM="[object Object]",oM=Function.prototype,aM=Object.prototype,kx=oM.toString,lM=aM.hasOwnProperty,cM=kx.call(Object);function hM(r){if(!de(r)||bi(r)!=nM)return!1;var t=Sn(r);if(t===null)return!0;var e=lM.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&kx.call(e)==cM}var Sx=hM;function uM(){this.__data__=new Br,this.size=0}var Cx=uM;function dM(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}var Ex=dM;function fM(r){return this.__data__.get(r)}var Tx=fM;function pM(r){return this.__data__.has(r)}var Lx=pM;var gM=200;function mM(r,t){var e=this.__data__;if(e instanceof Br){var i=e.__data__;if(!_r||i.length<gM-1)return i.push([r,t]),this.size=++e.size,this;e=this.__data__=new xc(i)}return e.set(r,t),this.size=e.size,this}var Mx=mM;function Cn(r){var t=this.__data__=new Br(r);this.size=t.size}Cn.prototype.clear=Cx;Cn.prototype.delete=Ex;Cn.prototype.get=Tx;Cn.prototype.has=Lx;Cn.prototype.set=Mx;var Hr=Cn;function bM(r,t){return r&&Ri(t,yn(t),r)}var Rx=bM;function vM(r,t){return r&&Ri(t,Ii(t),r)}var Ix=vM;var Px=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qx=Px&&typeof module=="object"&&module&&!module.nodeType&&module,xM=qx&&qx.exports===Px,Ox=xM?$t.Buffer:void 0,Nx=Ox?Ox.allocUnsafe:void 0;function yM(r,t){if(t)return r.slice();var e=r.length,i=Nx?Nx(e):new r.constructor(e);return r.copy(i),i}var wc=yM;function wM(r,t){for(var e=-1,i=r==null?0:r.length,s=0,n=[];++e<i;){var o=r[e];t(o,e,r)&&(n[s++]=o)}return n}var Dx=wM;function AM(){return[]}var Ac=AM;var kM=Object.prototype,SM=kM.propertyIsEnumerable,Fx=Object.getOwnPropertySymbols,CM=Fx?function(r){return r==null?[]:(r=Object(r),Dx(Fx(r),function(t){return SM.call(r,t)}))}:Ac,En=CM;function EM(r,t){return Ri(r,En(r),t)}var Bx=EM;var TM=Object.getOwnPropertySymbols,LM=TM?function(r){for(var t=[];r;)yc(t,En(r)),r=Sn(r);return t}:Ac,kc=LM;function MM(r,t){return Ri(r,kc(r),t)}var _x=MM;function RM(r,t,e){var i=t(r);return ni(r)?i:yc(i,e(r))}var Sc=RM;function IM(r){return Sc(r,yn,En)}var Vo=IM;function qM(r){return Sc(r,Ii,kc)}var zx=qM;var OM=Fe($t,"DataView"),Cc=OM;var NM=Fe($t,"Promise"),Ec=NM;var PM=Fe($t,"Set"),Tc=PM;var Hx="[object Map]",DM="[object Object]",Wx="[object Promise]",jx="[object Set]",Xx="[object WeakMap]",Yx="[object DataView]",FM=$i(Cc),BM=$i(_r),_M=$i(Ec),zM=$i(Tc),HM=$i(dc),vs=bi;(Cc&&vs(new Cc(new ArrayBuffer(1)))!=Yx||_r&&vs(new _r)!=Hx||Ec&&vs(Ec.resolve())!=Wx||Tc&&vs(new Tc)!=jx||dc&&vs(new dc)!=Xx)&&(vs=function(r){var t=bi(r),e=t==DM?r.constructor:void 0,i=e?$i(e):"";if(i)switch(i){case FM:return Yx;case BM:return Hx;case _M:return Wx;case zM:return jx;case HM:return Xx}return t});var Qi=vs;var WM=Object.prototype,jM=WM.hasOwnProperty;function XM(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&jM.call(r,"index")&&(e.index=r.index,e.input=r.input),e}var Vx=XM;var YM=$t.Uint8Array,Tn=YM;function VM(r){var t=new r.constructor(r.byteLength);return new Tn(t).set(new Tn(r)),t}var Ln=VM;function UM(r,t){var e=t?Ln(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}var Ux=UM;var GM=/\w*$/;function $M(r){var t=new r.constructor(r.source,GM.exec(r));return t.lastIndex=r.lastIndex,t}var Gx=$M;var $x=si?si.prototype:void 0,Kx=$x?$x.valueOf:void 0;function KM(r){return Kx?Object(Kx.call(r)):{}}var Zx=KM;function ZM(r,t){var e=t?Ln(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}var Lc=ZM;var JM="[object Boolean]",QM="[object Date]",tR="[object Map]",eR="[object Number]",iR="[object RegExp]",rR="[object Set]",sR="[object String]",nR="[object Symbol]",oR="[object ArrayBuffer]",aR="[object DataView]",lR="[object Float32Array]",cR="[object Float64Array]",hR="[object Int8Array]",uR="[object Int16Array]",dR="[object Int32Array]",fR="[object Uint8Array]",pR="[object Uint8ClampedArray]",gR="[object Uint16Array]",mR="[object Uint32Array]";function bR(r,t,e){var i=r.constructor;switch(t){case oR:return Ln(r);case JM:case QM:return new i(+r);case aR:return Ux(r,e);case lR:case cR:case hR:case uR:case dR:case fR:case pR:case gR:case mR:return Lc(r,e);case tR:return new i;case eR:case sR:return new i(r);case iR:return Gx(r);case rR:return new i;case nR:return Zx(r)}}var Jx=bR;function vR(r){return typeof r.constructor=="function"&&!bn(r)?Dv(Sn(r)):{}}var Mc=vR;var xR="[object Map]";function yR(r){return de(r)&&Qi(r)==xR}var Qx=yR;var t0=Zi&&Zi.isMap,wR=t0?vn(t0):Qx,e0=wR;var AR="[object Set]";function kR(r){return de(r)&&Qi(r)==AR}var i0=kR;var r0=Zi&&Zi.isSet,SR=r0?vn(r0):i0,s0=SR;var CR=1,ER=2,TR=4,n0="[object Arguments]",LR="[object Array]",MR="[object Boolean]",RR="[object Date]",IR="[object Error]",o0="[object Function]",qR="[object GeneratorFunction]",OR="[object Map]",NR="[object Number]",a0="[object Object]",PR="[object RegExp]",DR="[object Set]",FR="[object String]",BR="[object Symbol]",_R="[object WeakMap]",zR="[object ArrayBuffer]",HR="[object DataView]",WR="[object Float32Array]",jR="[object Float64Array]",XR="[object Int8Array]",YR="[object Int16Array]",VR="[object Int32Array]",UR="[object Uint8Array]",GR="[object Uint8ClampedArray]",$R="[object Uint16Array]",KR="[object Uint32Array]",Ot={};Ot[n0]=Ot[LR]=Ot[zR]=Ot[HR]=Ot[MR]=Ot[RR]=Ot[WR]=Ot[jR]=Ot[XR]=Ot[YR]=Ot[VR]=Ot[OR]=Ot[NR]=Ot[a0]=Ot[PR]=Ot[DR]=Ot[FR]=Ot[BR]=Ot[UR]=Ot[GR]=Ot[$R]=Ot[KR]=!0;Ot[IR]=Ot[o0]=Ot[_R]=!1;function Rc(r,t,e,i,s,n){var o,a=t&CR,l=t&ER,c=t&TR;if(e&&(o=s?e(r,i,s,n):e(r)),o!==void 0)return o;if(!me(r))return r;var h=ni(r);if(h){if(o=Vx(r),!a)return fc(r,o)}else{var u=Qi(r),d=u==o0||u==qR;if(Ki(r))return wc(r,a);if(u==a0||u==n0||d&&!s){if(o=l||d?{}:Mc(r),!a)return l?_x(r,Ix(o,r)):Bx(r,Rx(o,r))}else{if(!Ot[u])return s?r:{};o=Jx(r,u,a)}}n||(n=new Hr);var f=n.get(r);if(f)return f;n.set(r,o),s0(r)?r.forEach(function(b){o.add(Rc(b,t,e,b,r,n))}):e0(r)&&r.forEach(function(b,m){o.set(m,Rc(b,t,e,m,r,n))});var g=c?l?zx:Vo:l?Ii:yn,p=h?void 0:g(r);return Wv(p||r,function(b,m){p&&(m=b,b=r[m]),gc(o,m,Rc(b,t,e,m,r,n))}),o}var l0=Rc;var ZR=1,JR=4;function QR(r){return l0(r,ZR|JR)}var qi=QR;var t2="__lodash_hash_undefined__";function e2(r){return this.__data__.set(r,t2),this}var c0=e2;function i2(r){return this.__data__.has(r)}var h0=i2;function Ic(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new xc;++t<e;)this.add(r[t])}Ic.prototype.add=Ic.prototype.push=c0;Ic.prototype.has=h0;var u0=Ic;function r2(r,t){for(var e=-1,i=r==null?0:r.length;++e<i;)if(t(r[e],e,r))return!0;return!1}var d0=r2;function s2(r,t){return r.has(t)}var f0=s2;var n2=1,o2=2;function a2(r,t,e,i,s,n){var o=e&n2,a=r.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=n.get(r),h=n.get(t);if(c&&h)return c==t&&h==r;var u=-1,d=!0,f=e&o2?new u0:void 0;for(n.set(r,t),n.set(t,r);++u<a;){var g=r[u],p=t[u];if(i)var b=o?i(p,g,u,t,r,n):i(g,p,u,r,t,n);if(b!==void 0){if(b)continue;d=!1;break}if(f){if(!d0(t,function(m,x){if(!f0(f,x)&&(g===m||s(g,m,e,i,n)))return f.push(x)})){d=!1;break}}else if(!(g===p||s(g,p,e,i,n))){d=!1;break}}return n.delete(r),n.delete(t),d}var qc=a2;function l2(r){var t=-1,e=Array(r.size);return r.forEach(function(i,s){e[++t]=[s,i]}),e}var p0=l2;function c2(r){var t=-1,e=Array(r.size);return r.forEach(function(i){e[++t]=i}),e}var g0=c2;var h2=1,u2=2,d2="[object Boolean]",f2="[object Date]",p2="[object Error]",g2="[object Map]",m2="[object Number]",b2="[object RegExp]",v2="[object Set]",x2="[object String]",y2="[object Symbol]",w2="[object ArrayBuffer]",A2="[object DataView]",m0=si?si.prototype:void 0,vf=m0?m0.valueOf:void 0;function k2(r,t,e,i,s,n,o){switch(e){case A2:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case w2:return!(r.byteLength!=t.byteLength||!n(new Tn(r),new Tn(t)));case d2:case f2:case m2:return Mi(+r,+t);case p2:return r.name==t.name&&r.message==t.message;case b2:case x2:return r==t+"";case g2:var a=p0;case v2:var l=i&h2;if(a||(a=g0),r.size!=t.size&&!l)return!1;var c=o.get(r);if(c)return c==t;i|=u2,o.set(r,t);var h=qc(a(r),a(t),i,s,n,o);return o.delete(r),h;case y2:if(vf)return vf.call(r)==vf.call(t)}return!1}var b0=k2;var S2=1,C2=Object.prototype,E2=C2.hasOwnProperty;function T2(r,t,e,i,s,n){var o=e&S2,a=Vo(r),l=a.length,c=Vo(t),h=c.length;if(l!=h&&!o)return!1;for(var u=l;u--;){var d=a[u];if(!(o?d in t:E2.call(t,d)))return!1}var f=n.get(r),g=n.get(t);if(f&&g)return f==t&&g==r;var p=!0;n.set(r,t),n.set(t,r);for(var b=o;++u<l;){d=a[u];var m=r[d],x=t[d];if(i)var v=o?i(x,m,d,t,r,n):i(m,x,d,r,t,n);if(!(v===void 0?m===x||s(m,x,e,i,n):v)){p=!1;break}b||(b=d=="constructor")}if(p&&!b){var w=r.constructor,y=t.constructor;w!=y&&"constructor"in r&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof y=="function"&&y instanceof y)&&(p=!1)}return n.delete(r),n.delete(t),p}var v0=T2;var L2=1,x0="[object Arguments]",y0="[object Array]",Oc="[object Object]",M2=Object.prototype,w0=M2.hasOwnProperty;function R2(r,t,e,i,s,n){var o=ni(r),a=ni(t),l=o?y0:Qi(r),c=a?y0:Qi(t);l=l==x0?Oc:l,c=c==x0?Oc:c;var h=l==Oc,u=c==Oc,d=l==c;if(d&&Ki(r)){if(!Ki(t))return!1;o=!0,h=!1}if(d&&!h)return n||(n=new Hr),o||xn(r)?qc(r,t,e,i,s,n):b0(r,t,l,e,i,s,n);if(!(e&L2)){var f=h&&w0.call(r,"__wrapped__"),g=u&&w0.call(t,"__wrapped__");if(f||g){var p=f?r.value():r,b=g?t.value():t;return n||(n=new Hr),s(p,b,e,i,n)}}return d?(n||(n=new Hr),v0(r,t,e,i,s,n)):!1}var A0=R2;function k0(r,t,e,i,s){return r===t?!0:r==null||t==null||!de(r)&&!de(t)?r!==r&&t!==t:A0(r,t,e,i,k0,s)}var S0=k0;function I2(r){return function(t,e,i){for(var s=-1,n=Object(t),o=i(t),a=o.length;a--;){var l=o[r?a:++s];if(e(n[l],l,n)===!1)break}return t}}var C0=I2;var q2=C0(),E0=q2;function O2(r,t,e){(e!==void 0&&!Mi(r[t],e)||e===void 0&&!(t in r))&&mn(r,t,e)}var Uo=O2;function N2(r){return de(r)&&Dr(r)}var T0=N2;function P2(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}var Go=P2;function D2(r){return Ri(r,Ii(r))}var L0=D2;function F2(r,t,e,i,s,n,o){var a=Go(r,e),l=Go(t,e),c=o.get(l);if(c){Uo(r,e,c);return}var h=n?n(a,l,e+"",r,t,o):void 0,u=h===void 0;if(u){var d=ni(l),f=!d&&Ki(l),g=!d&&!f&&xn(l);h=l,d||f||g?ni(a)?h=a:T0(a)?h=fc(a):f?(u=!1,h=wc(l,!0)):g?(u=!1,h=Lc(l,!0)):h=[]:Sx(l)||Xo(l)?(h=a,Xo(a)?h=L0(a):(!me(a)||pn(a))&&(h=Mc(l))):u=!1}u&&(o.set(l,h),s(h,l,i,n,o),o.delete(l)),Uo(r,e,h)}var M0=F2;function R0(r,t,e,i,s){r!==t&&E0(t,function(n,o){if(s||(s=new Hr),me(n))M0(r,t,o,e,R0,i,s);else{var a=i?i(Go(r,o),n,o+"",r,t,s):void 0;a===void 0&&(a=n),Uo(r,o,a)}},Ii)}var I0=R0;function B2(r,t){return S0(r,t)}var xs=B2;var _2=Uv(function(r,t,e){I0(r,t,e)}),Be=_2;var Zo={};Du(Zo,{Attributor:()=>Se,AttributorStore:()=>$o,BlockBlot:()=>ys,ClassAttributor:()=>Kt,ContainerBlot:()=>On,EmbedBlot:()=>_t,InlineBlot:()=>Nc,LeafBlot:()=>Zt,ParentBlot:()=>_e,Registry:()=>Xr,Scope:()=>Z,ScrollBlot:()=>Ko,StyleAttributor:()=>ze,TextBlot:()=>Nn});var Z=(r=>(r[r.TYPE=3]="TYPE",r[r.LEVEL=12]="LEVEL",r[r.ATTRIBUTE=13]="ATTRIBUTE",r[r.BLOT=14]="BLOT",r[r.INLINE=7]="INLINE",r[r.BLOCK=11]="BLOCK",r[r.BLOCK_BLOT=10]="BLOCK_BLOT",r[r.INLINE_BLOT=6]="INLINE_BLOT",r[r.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",r[r.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",r[r.ANY=15]="ANY",r))(Z||{}),Se=class{constructor(t,e,i={}){this.attrName=t,this.keyName=e;let s=Z.TYPE&Z.ATTRIBUTE;this.scope=i.scope!=null?i.scope&Z.LEVEL|s:Z.ATTRIBUTE,i.whitelist!=null&&(this.whitelist=i.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){let e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}},jr=class extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}},N0=class yf{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let i=null;try{i=t.parentNode}catch{return null}return this.find(i,e)}return null}create(t,e,i){let s=this.query(e);if(s==null)throw new jr(`Unable to create ${e} blot`);let n=s,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:n.create(i),a=new n(t,o,i);return yf.blots.set(a.domNode,a),a}find(t,e=!1){return yf.find(t,e)}query(t,e=Z.ANY){let i;return typeof t=="string"?i=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?i=this.types.text:typeof t=="number"?t&Z.LEVEL&Z.BLOCK?i=this.types.block:t&Z.LEVEL&Z.INLINE&&(i=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(s=>(i=this.classes[s],!!i)),i=i||this.tags[t.tagName]),i==null?null:"scope"in i&&e&Z.LEVEL&i.scope&&e&Z.TYPE&i.scope?i:null}register(...t){return t.map(e=>{let i="blotName"in e,s="attrName"in e;if(!i&&!s)throw new jr("Invalid definition");if(i&&e.blotName==="abstract")throw new jr("Cannot register abstract class");let n=i?e.blotName:s?e.attrName:void 0;return this.types[n]=e,s?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):i&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(o=>o.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(o=>{(this.tags[o]==null||e.className==null)&&(this.tags[o]=e)}))),e})}};N0.blots=new WeakMap;var Xr=N0;function q0(r,t){return(r.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}var wf=class extends Se{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){q0(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){let e=(q0(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}},Kt=wf;function xf(r){let t=r.split("-"),e=t.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("");return t[0]+e}var Af=class extends Se{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[xf(this.keyName)]=e,!0):!1}remove(t){t.style[xf(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){let e=t.style[xf(this.keyName)];return this.canAdd(t,e)?e:""}},ze=Af,kf=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};let t=Xr.find(this.domNode);if(t==null)return;let e=Se.keys(this.domNode),i=Kt.keys(this.domNode),s=ze.keys(this.domNode);e.concat(i).concat(s).forEach(n=>{let o=t.scroll.query(n,Z.ATTRIBUTE);o instanceof Se&&(this.attributes[o.attrName]=o)})}copy(t){Object.keys(this.attributes).forEach(e=>{let i=this.attributes[e].value(this.domNode);t.format(e,i)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}},$o=kf,P0=class{constructor(t,e){this.scroll=t,this.domNode=e,Xr.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new jr("Blot definition missing tagName");let e,i;return Array.isArray(this.tagName)?(typeof t=="string"?(i=t.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):typeof t=="number"&&(i=t),typeof i=="number"?e=document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?e=document.createElement(i):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){let t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),Xr.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,i,s){let n=this.isolate(t,e);if(this.scroll.query(i,Z.BLOT)!=null&&s)n.wrap(i,s);else if(this.scroll.query(i,Z.ATTRIBUTE)!=null){let o=this.scroll.create(this.statics.scope);n.wrap(o),o.format(i,s)}}insertAt(t,e,i){let s=i==null?this.scroll.create("text",e):this.scroll.create(e,i),n=this.split(t);this.parent.insertBefore(s,n||void 0)}isolate(t,e){let i=this.split(t);if(i==null)throw new Error("Attempt to isolate at end");return i.split(e),i}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){let i=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){let i=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(i,this.next||void 0),typeof i.appendChild!="function")throw new jr(`Cannot wrap ${t}`);return i.appendChild(this),i}};P0.blotName="abstract";var D0=P0,F0=class extends D0{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};F0.scope=Z.INLINE_BLOT;var z2=F0,Zt=z2,Sf=class{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){let e=t.slice(1);this.append(...e)}}at(t){let e=this.iterator(),i=e();for(;i&&t>0;)t-=1,i=e();return i}contains(t){let e=this.iterator(),i=e();for(;i;){if(i===t)return!0;i=e()}return!1}indexOf(t){let e=this.iterator(),i=e(),s=0;for(;i;){if(i===t)return s;s+=1,i=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,i=this.head;for(;i!=null;){if(i===t)return e;e+=i.length(),i=i.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{let e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){let i=this.iterator(),s=i();for(;s;){let n=s.length();if(t<n||e&&t===n&&(s.next==null||s.next.length()!==0))return[s,t];t-=n,s=i()}return[null,0]}forEach(t){let e=this.iterator(),i=e();for(;i;)t(i),i=e()}forEachAt(t,e,i){if(e<=0)return;let[s,n]=this.find(t),o=t-n,a=this.iterator(s),l=a();for(;l&&o<t+e;){let c=l.length();t>o?i(l,t-o,Math.min(e,o+c-t)):i(l,0,Math.min(c,t+e-o)),o+=c,l=a()}}map(t){return this.reduce((e,i)=>(e.push(t(i)),e),[])}reduce(t,e){let i=this.iterator(),s=i();for(;s;)e=t(e,s),s=i();return e}};function O0(r,t){let e=t.find(r);if(e)return e;try{return t.create(r)}catch{let i=t.create(Z.INLINE);return Array.from(r.childNodes).forEach(s=>{i.domNode.appendChild(s)}),r.parentNode&&r.parentNode.replaceChild(i.domNode,r),i.attach(),i}}var B0=class Wr extends D0{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,Wr.uiClass&&this.uiNode.classList.add(Wr.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Sf,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{let e=O0(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof jr)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(i,s,n)=>{i.deleteAt(s,n)})}descendant(t,e=0){let[i,s]=this.children.find(e);return t.blotName==null&&t(i)||t.blotName!=null&&i instanceof t?[i,s]:i instanceof Wr?i.descendant(t,s):[null,-1]}descendants(t,e=0,i=Number.MAX_VALUE){let s=[],n=i;return this.children.forEachAt(e,i,(o,a,l)=>{(t.blotName==null&&t(o)||t.blotName!=null&&o instanceof t)&&s.push(o),o instanceof Wr&&(s=s.concat(o.descendants(t,a,n))),n-=l}),s}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(i=>e instanceof i)||(e.statics.scope===Z.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof Wr?e.unwrap():e.remove())})}formatAt(t,e,i,s){this.children.forEachAt(t,e,(n,o,a)=>{n.formatAt(o,a,i,s)})}insertAt(t,e,i){let[s,n]=this.children.find(t);if(s)s.insertAt(n,e,i);else{let o=i==null?this.scroll.create("text",e):this.scroll.create(e,i);this.appendChild(o)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let i=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(i=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==i)&&this.domNode.insertBefore(t.domNode,i),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(i=>{t.insertBefore(i,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){let[i,s]=this.children.find(t,e),n=[[this,t]];return i instanceof Wr?n.concat(i.path(s,e)):(i!=null&&n.push([i,s]),n)}removeChild(t){this.children.remove(t)}replaceWith(t,e){let i=typeof t=="string"?this.scroll.create(t,e):t;return i instanceof Wr&&this.moveChildren(i),super.replaceWith(i)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}let i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(t,this.length(),(s,n,o)=>{let a=s.split(n,e);a!=null&&i.appendChild(a)}),i}splitAfter(t){let e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){let i=[],s=[];t.forEach(n=>{n.target===this.domNode&&n.type==="childList"&&(i.push(...n.addedNodes),s.push(...n.removedNodes))}),s.forEach(n=>{if(n.parentNode!=null&&n.tagName!=="IFRAME"&&document.body.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let o=this.scroll.find(n);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),i.filter(n=>n.parentNode===this.domNode&&n!==this.uiNode).sort((n,o)=>n===o?0:n.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(n=>{let o=null;n.nextSibling!=null&&(o=this.scroll.find(n.nextSibling));let a=O0(n,this.scroll);(a.next!==o||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};B0.uiClass="";var H2=B0,_e=H2;function W2(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(let e in r)if(r[e]!==t[e])return!1;return!0}var Mn=class Rn extends _e{static create(t){return super.create(t)}static formats(t,e){let i=e.query(Rn.blotName);if(!(i!=null&&t.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new $o(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(i=>{i instanceof Rn||(i=i.wrap(Rn.blotName,!0)),this.attributes.copy(i)}),this.unwrap();else{let i=this.scroll.query(t,Z.INLINE);if(i==null)return;i instanceof Se?this.attributes.attribute(i,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){let t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,s){this.formats()[i]!=null||this.scroll.query(i,Z.ATTRIBUTE)?this.isolate(t,e).format(i,s):super.formatAt(t,e,i,s)}optimize(t){super.optimize(t);let e=this.formats();if(Object.keys(e).length===0)return this.unwrap();let i=this.next;i instanceof Rn&&i.prev===this&&W2(e,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(t,e){let i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}wrap(t,e){let i=super.wrap(t,e);return i instanceof Rn&&this.attributes.move(i),i}};Mn.allowedChildren=[Mn,Zt],Mn.blotName="inline",Mn.scope=Z.INLINE_BLOT,Mn.tagName="SPAN";var j2=Mn,Nc=j2,In=class Cf extends _e{static create(t){return super.create(t)}static formats(t,e){let i=e.query(Cf.blotName);if(!(i!=null&&t.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new $o(this.domNode)}format(t,e){let i=this.scroll.query(t,Z.BLOCK);i!=null&&(i instanceof Se?this.attributes.attribute(i,e):t===this.statics.blotName&&!e?this.replaceWith(Cf.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){let t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,s){this.scroll.query(i,Z.BLOCK)!=null?this.format(i,s):super.formatAt(t,e,i,s)}insertAt(t,e,i){if(i==null||this.scroll.query(e,Z.INLINE)!=null)super.insertAt(t,e,i);else{let s=this.split(t);if(s!=null){let n=this.scroll.create(e,i);s.parent.insertBefore(n,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){let i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}};In.blotName="block",In.scope=Z.BLOCK_BLOT,In.tagName="P",In.allowedChildren=[Nc,In,Zt];var X2=In,ys=X2,Ef=class extends _e{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,i,s){super.formatAt(t,e,i,s),this.enforceAllowedChildren()}insertAt(t,e,i){super.insertAt(t,e,i),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Ef.blotName="container",Ef.scope=Z.BLOCK_BLOT;var Y2=Ef,On=Y2,Tf=class extends Zt{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,i,s){t===0&&e===this.length()?this.format(i,s):super.formatAt(t,e,i,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}},_t=Tf,V2={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},U2=100,qn=class extends _e{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(i=>{this.update(i)}),this.observer.observe(this.domNode,V2),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){let i=this.registry.find(t,e);return i?i.scroll===this?i:e?this.find(i.scroll.domNode.parentNode,!0):null:null}query(t,e=Z.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(i=>{i.remove()}):super.deleteAt(t,e)}formatAt(t,e,i,s){this.update(),super.formatAt(t,e,i,s)}insertAt(t,e,i){this.update(),super.insertAt(t,e,i)}optimize(t=[],e={}){super.optimize(e);let i=e.mutationsMap||new WeakMap,s=Array.from(this.observer.takeRecords());for(;s.length>0;)t.push(s.pop());let n=(l,c=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(i.has(l.domNode)||i.set(l.domNode,[]),c&&n(l.parent))},o=l=>{i.has(l.domNode)&&(l instanceof _e&&l.children.forEach(o),i.delete(l.domNode),l.optimize(e))},a=t;for(let l=0;a.length>0;l+=1){if(l>=U2)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(c=>{let h=this.find(c.target,!0);h!=null&&(h.domNode===c.target&&(c.type==="childList"?(n(this.find(c.previousSibling,!1)),Array.from(c.addedNodes).forEach(u=>{let d=this.find(u,!1);n(d,!1),d instanceof _e&&d.children.forEach(f=>{n(f,!1)})})):c.type==="attributes"&&n(h.prev)),n(h))}),this.children.forEach(o),a=Array.from(this.observer.takeRecords()),s=a.slice();s.length>0;)t.push(s.pop())}}update(t,e={}){t=t||this.observer.takeRecords();let i=new WeakMap;t.map(s=>{let n=this.find(s.target,!0);return n==null?null:i.has(n.domNode)?(i.get(n.domNode).push(s),null):(i.set(n.domNode,[s]),n)}).forEach(s=>{s!=null&&s!==this&&i.has(s.domNode)&&s.update(i.get(s.domNode)||[],e)}),e.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),e),this.optimize(t,e)}};qn.blotName="scroll",qn.defaultChild=ys,qn.allowedChildren=[ys,On],qn.scope=Z.BLOCK_BLOT,qn.tagName="DIV";var G2=qn,Ko=G2,Lf=class _0 extends Zt{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,i){i==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,i)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof _0&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}let i=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(t,e){t.some(i=>i.type==="characterData"&&i.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Lf.blotName="text",Lf.scope=Z.INLINE_BLOT;var $2=Lf,Nn=$2;var $r=De(Ke(),1);var zt=De(Ke(),1);var pp=De(Ke(),1);var aa=class extends _t{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}};aa.blotName="break";aa.tagName="BR";var be=aa;var Ut=class extends Nn{},dN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ms(r){return r.replace(/[&<>"']/g,t=>dN[t])}var fp=class r extends Nc{static allowedChildren=[r,be,_t,Ut];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,e){let i=r.order.indexOf(t),s=r.order.indexOf(e);return i>=0||s>=0?i-s:t===e?0:t<e?-1:1}formatAt(t,e,i,s){if(r.compare(this.statics.blotName,i)<0&&this.scroll.query(i,Z.BLOT)){let n=this.isolate(t,e);s&&n.wrap(i,s)}else super.formatAt(t,e,i,s)}optimize(t){if(super.optimize(t),this.parent instanceof r&&r.compare(this.statics.blotName,this.parent.statics.blotName)>0){let e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}},ve=fp;var Aw=1,It=class extends ys{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=gp(this)),this.cache.delta}deleteAt(t,e){super.deleteAt(t,e),this.cache={}}formatAt(t,e,i,s){e<=0||(this.scroll.query(i,Z.BLOCK)?t+e===this.length()&&this.format(i,s):super.formatAt(t,Math.min(e,this.length()-t-1),i,s),this.cache={})}insertAt(t,e,i){if(i!=null){super.insertAt(t,e,i),this.cache={};return}if(e.length===0)return;let s=e.split(`
`),n=s.shift();n.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),n):this.children.tail.insertAt(this.children.tail.length(),n),this.cache={});let o=this;s.reduce((a,l)=>(o=o.split(a,!0),o.insertAt(0,l),l.length),t+n.length)}insertBefore(t,e){let{head:i}=this.children;super.insertBefore(t,e),i instanceof be&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Aw),this.cache.length}moveChildren(t,e){super.moveChildren(t,e),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e&&(t===0||t>=this.length()-Aw)){let s=this.clone();return t===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}let i=super.split(t,e);return this.cache={},i}};It.blotName="block";It.tagName="P";It.defaultChild=be;It.allowedChildren=[be,ve,_t,Ut];var re=class extends _t{attach(){super.attach(),this.attributes=new $o(this.domNode)}delta(){return new pp.default().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){let i=this.scroll.query(t,Z.BLOCK_ATTRIBUTE);i!=null&&this.attributes.attribute(i,e)}formatAt(t,e,i,s){this.format(i,s)}insertAt(t,e,i){if(i!=null){super.insertAt(t,e,i);return}let s=e.split(`
`),n=s.pop(),o=s.map(l=>{let c=this.scroll.create(It.blotName);return c.insertAt(0,l),c}),a=this.split(t);o.forEach(l=>{this.parent.insertBefore(l,a)}),n&&this.parent.insertBefore(this.scroll.create("text",n),a)}};re.scope=Z.BLOCK_BLOT;function gp(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.descendants(Zt).reduce((e,i)=>i.length()===0?e:e.insert(i.value(),He(i,{},t)),new pp.default).insert(`
`,He(r))}function He(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return r==null||("formats"in r&&typeof r.formats=="function"&&(t={...t,...r.formats()},e&&delete t["code-token"]),r.parent==null||r.parent.statics.blotName==="scroll"||r.parent.statics.scope!==r.statics.scope)?t:He(r.parent,t,e)}var mp=class r extends _t{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(t,e,i){super(t,e),this.selection=i,this.textNode=document.createTextNode(r.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let i=this,s=0;for(;i!=null&&i.statics.scope!==Z.BLOCK_BLOT;)s+=i.offset(i.parent),i=i.parent;i!=null&&(this.savedLength=r.CONTENTS.length,i.optimize(),i.formatAt(s,r.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let e=this.prev instanceof Ut?this.prev:null,i=e?e.length():0,s=this.next instanceof Ut?this.next:null,n=s?s.text:"",{textNode:o}=this,a=o.data.split(r.CONTENTS).join("");o.data=r.CONTENTS;let l;if(e)l=e,(a||s)&&(e.insertAt(e.length(),a+n),s&&s.remove());else if(s)l=s,s.insertAt(0,a);else{let c=document.createTextNode(a);l=this.scroll.create(c),this.parent.insertBefore(l,this)}if(this.remove(),t){let c=(d,f)=>e&&d===e.domNode?f:d===o?i+f-1:s&&d===s.domNode?i+a.length+f:null,h=c(t.start.node,t.start.offset),u=c(t.end.node,t.end.offset);if(h!==null&&u!==null)return{startNode:l.domNode,startOffset:h,endNode:l.domNode,endOffset:u}}return null}update(t,e){if(t.some(i=>i.type==="characterData"&&i.target===this.textNode)){let i=this.restore();i&&(e.range=i)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=r.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}},Gr=mp;var vp=De(Sw(),1);var ca=new WeakMap;var xp=["error","warn","log","info"],yp="warn";function Cw(r){if(yp&&xp.indexOf(r)<=xp.indexOf(yp)){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];console[r](...e)}}function wp(r){return xp.reduce((t,e)=>(t[e]=Cw.bind(console,e,r),t),{})}wp.level=r=>{yp=r};Cw.level=wp.level;var Ze=wp;var Ap=Ze("quill:events"),gN=["selectionchange","mousedown","mouseup","click"];gN.forEach(r=>{document.addEventListener(r,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{let n=ca.get(s);n&&n.emitter&&n.emitter.handleDOM(...e)})})});var kp=class extends vp.default{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Ap.error)}emit(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Ap.log.call(Ap,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach(n=>{let{node:o,handler:a}=n;(t.target===o||o.contains(t.target))&&a(t,...i)})}listenDOM(t,e,i){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:i})}},it=kp;var Sp=Ze("quill:selection"),Te=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}},Ep=class{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Te(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,it.sources.USER),1)}),this.emitter.on(it.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let i=this.getNativeRange();i!=null&&i.start.node!==this.cursor.textNode&&this.emitter.once(it.events.SCROLL_UPDATE,(s,n)=>{try{this.root.contains(i.start.node)&&this.root.contains(i.end.node)&&this.setNativeRange(i.start.node,i.start.offset,i.end.node,i.end.offset);let o=n.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(o?it.sources.SILENT:s)}catch{}})}),this.emitter.on(it.events.SCROLL_OPTIMIZE,(i,s)=>{if(s.range){let{startNode:n,startOffset:o,endNode:a,endOffset:l}=s.range;this.setNativeRange(n,o,a,l),this.update(it.sources.SILENT)}}),this.update(it.sources.SILENT)}handleComposition(){this.emitter.on(it.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(it.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(it.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();let i=this.getNativeRange();if(!(i==null||!i.native.collapsed||this.scroll.query(t,Z.BLOCK))){if(i.start.node!==this.cursor.textNode){let s=this.scroll.find(i.start.node,!1);if(s==null)return;if(s instanceof Zt){let n=s.split(i.start.offset);s.parent.insertBefore(this.cursor,n)}else s.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.scroll.length();t=Math.min(t,i-1),e=Math.min(t+e,i-1)-t;let s,[n,o]=this.scroll.leaf(t);if(n==null)return null;if(e>0&&o===n.length()){let[h]=this.scroll.leaf(t+1);if(h){let[u]=this.scroll.line(t),[d]=this.scroll.line(t+1);u===d&&(n=h,o=0)}}[s,o]=n.position(o,!0);let a=document.createRange();if(e>0)return a.setStart(s,o),[n,o]=this.scroll.leaf(t+e),n==null?null:([s,o]=n.position(o,!0),a.setEnd(s,o),a.getBoundingClientRect());let l="left",c;if(s instanceof Text){if(!s.data.length)return null;o<s.data.length?(a.setStart(s,o),a.setEnd(s,o+1)):(a.setStart(s,o-1),a.setEnd(s,o),l="right"),c=a.getBoundingClientRect()}else{if(!(n.domNode instanceof Element))return null;c=n.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){let t=document.getSelection();if(t==null||t.rangeCount<=0)return null;let e=t.getRangeAt(0);if(e==null)return null;let i=this.normalizeNative(e);return Sp.info("getNativeRange",i),i}getRange(){let t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];let e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Cp(this.root,document.activeElement)}normalizedToRange(t){let e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);let i=e.map(o=>{let[a,l]=o,c=this.scroll.find(a,!0),h=c.offset(this.scroll);return l===0?h:c instanceof Zt?h+c.index(a,l):h+c.length()}),s=Math.min(Math.max(...i),this.scroll.length()-1),n=Math.min(s,...i);return new Te(n,s-n)}normalizeNative(t){if(!Cp(this.root,t.startContainer)||!t.collapsed&&!Cp(this.root,t.endContainer))return null;let e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(i=>{let{node:s,offset:n}=i;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>n)s=s.childNodes[n],n=0;else if(s.childNodes.length===n)s=s.lastChild,s instanceof Text?n=s.data.length:s.childNodes.length>0?n=s.childNodes.length:n=s.childNodes.length+1;else break;i.node=s,i.offset=n}),e}rangeToNative(t){let e=this.scroll.length(),i=(s,n)=>{s=Math.min(e-1,s);let[o,a]=this.scroll.leaf(s);return o?o.position(a,n):[null,-1]};return[...i(t.index,!1),...i(t.index+t.length,!0)]}setNativeRange(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Sp.info("setNativeRange",t,e,i,s),t!=null&&(this.root.parentNode==null||t.parentNode==null||i.parentNode==null))return;let o=document.getSelection();if(o!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:a}=this.getNativeRange()||{};if(a==null||n||t!==a.startContainer||e!==a.startOffset||i!==a.endContainer||s!==a.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),i instanceof Element&&i.tagName==="BR"&&(s=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);let l=document.createRange();l.setStart(t,e),l.setEnd(i,s),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:it.sources.API;if(typeof e=="string"&&(i=e,e=!1),Sp.info("setRange",t),t!=null){let s=this.rangeToNative(t);this.setNativeRange(...s,e)}else this.setNativeRange(null);this.update(i)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:it.sources.USER,e=this.lastRange,[i,s]=this.getRange();if(this.lastRange=i,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!xs(e,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){let o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}let n=[it.events.SELECTION_CHANGE,qi(this.lastRange),qi(e),t];this.emitter.emit(it.events.EDITOR_CHANGE,...n),t!==it.sources.SILENT&&this.emitter.emit(...n)}}};function Cp(r,t){try{t.parentNode}catch{return!1}return r.contains(t)}var Ew=Ep;var mN=/^[ -~]*$/,Lp=class{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();let i=Tw(t),s=new zt.default;return vN(i.ops.slice()).reduce((o,a)=>{let l=zt.Op.length(a),c=a.attributes||{},h=!1,u=!1;if(a.insert!=null){if(s.retain(l),typeof a.insert=="string"){let g=a.insert;u=!g.endsWith(`
`)&&(e<=o||!!this.scroll.descendant(re,o)[0]),this.scroll.insertAt(o,g);let[p,b]=this.scroll.line(o),m=Be({},He(p));if(p instanceof It){let[x]=p.descendant(Zt,b);x&&(m=Be(m,He(x)))}c=zt.AttributeMap.diff(m,c)||{}}else if(typeof a.insert=="object"){let g=Object.keys(a.insert)[0];if(g==null)return o;let p=this.scroll.query(g,Z.INLINE)!=null;if(p)(e<=o||this.scroll.descendant(re,o)[0])&&(u=!0);else if(o>0){let[b,m]=this.scroll.descendant(Zt,o-1);b instanceof Ut?b.value()[m]!==`
`&&(h=!0):b instanceof _t&&b.statics.scope===Z.INLINE_BLOT&&(h=!0)}if(this.scroll.insertAt(o,g,a.insert[g]),p){let[b]=this.scroll.descendant(Zt,o);if(b){let m=Be({},He(b));c=zt.AttributeMap.diff(m,c)||{}}}}e+=l}else if(s.push(a),a.retain!==null&&typeof a.retain=="object"){let g=Object.keys(a.retain)[0];if(g==null)return o;this.scroll.updateEmbedAt(o,g,a.retain[g])}Object.keys(c).forEach(g=>{this.scroll.formatAt(o,l,g,c[g])});let d=h?1:0,f=u?1:0;return e+=d+f,s.retain(d),s.delete(f),o+l+d+f},0),s.reduce((o,a)=>typeof a.delete=="number"?(this.scroll.deleteAt(o,a.delete),o):o+zt.Op.length(a),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(i)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new zt.default().retain(t).delete(e))}formatLine(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach(n=>{this.scroll.lines(t,Math.max(e,1)).forEach(o=>{o.format(n,i[n])})}),this.scroll.optimize();let s=new zt.default().retain(t).retain(e,qi(i));return this.update(s)}formatText(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(i).forEach(n=>{this.scroll.formatAt(t,e,n,i[n])});let s=new zt.default().retain(t).retain(e,qi(i));return this.update(s)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new zt.default)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],s=[];e===0?this.scroll.path(t).forEach(a=>{let[l]=a;l instanceof It?i.push(l):l instanceof Zt&&s.push(l)}):(i=this.scroll.lines(t,e),s=this.scroll.descendants(Zt,t,e));let[n,o]=[i,s].map(a=>{let l=a.shift();if(l==null)return{};let c=He(l);for(;Object.keys(c).length>0;){let h=a.shift();if(h==null)return c;c=bN(He(h),c)}return c});return{...n,...o}}getHTML(t,e){let[i,s]=this.scroll.line(t);if(i){let n=i.length();return i.length()>=s+e&&!(s===0&&e===n)?ha(i,s,e,!0):ha(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(i=>typeof i.insert=="string").map(i=>i.insert).join("")}insertContents(t,e){let i=Tw(e),s=new zt.default().retain(t).concat(i);return this.scroll.insertContents(t,i),this.update(s)}insertEmbed(t,e,i){return this.scroll.insertAt(t,e,i),this.update(new zt.default().retain(t).insert({[e]:i}))}insertText(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(i).forEach(s=>{this.scroll.formatAt(t,e.length,s,i[s])}),this.update(new zt.default().retain(t).insert(e,qi(i)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let t=this.scroll.children.head;if(t?.statics.blotName!==It.blotName)return!1;let e=t;return e.children.length>1?!1:e.children.head instanceof be}removeFormat(t,e){let i=this.getText(t,e),[s,n]=this.scroll.line(t+e),o=0,a=new zt.default;s!=null&&(o=s.length()-n,a=s.delta().slice(n,n+o-1).insert(`
`));let c=this.getContents(t,e+o).diff(new zt.default().insert(i).concat(a)),h=new zt.default().retain(t).concat(c);return this.applyDelta(h)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,s=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(mN)&&this.scroll.find(e[0].target)){let n=this.scroll.find(e[0].target),o=He(n),a=n.offset(this.scroll),l=e[0].oldValue.replace(Gr.CONTENTS,""),c=new zt.default().insert(l),h=new zt.default().insert(n.value()),u=i&&{oldRange:Lw(i.oldRange,-a),newRange:Lw(i.newRange,-a)};t=new zt.default().retain(a).concat(c.diff(h,u)).reduce((f,g)=>g.insert?f.insert(g.insert,o):f.push(g),new zt.default),this.delta=s.compose(t)}else this.delta=this.getDelta(),(!t||!xs(s.compose(t),this.delta))&&(t=s.diff(this.delta,i));return t}};function Wn(r,t,e){if(r.length===0){let[f]=Tp(e.pop());return t<=0?`</li></${f}>`:`</li></${f}>${Wn([],t-1,e)}`}let[{child:i,offset:s,length:n,indent:o,type:a},...l]=r,[c,h]=Tp(a);if(o>t)return e.push(a),o===t+1?`<${c}><li${h}>${ha(i,s,n)}${Wn(l,o,e)}`:`<${c}><li>${Wn(r,t+1,e)}`;let u=e[e.length-1];if(o===t&&a===u)return`</li><li${h}>${ha(i,s,n)}${Wn(l,o,e)}`;let[d]=Tp(e.pop());return`</li></${d}>${Wn(r,t-1,e)}`}function ha(r,t,e){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in r&&typeof r.html=="function")return r.html(t,e);if(r instanceof Ut)return Ms(r.value().slice(t,t+e)).replaceAll(" ","&nbsp;");if(r instanceof _e){if(r.statics.blotName==="list-container"){let c=[];return r.children.forEachAt(t,e,(h,u,d)=>{let f="formats"in h&&typeof h.formats=="function"?h.formats():{};c.push({child:h,offset:u,length:d,indent:f.indent||0,type:f.list})}),Wn(c,-1,[])}let s=[];if(r.children.forEachAt(t,e,(c,h,u)=>{s.push(ha(c,h,u))}),i||r.statics.blotName==="list")return s.join("");let{outerHTML:n,innerHTML:o}=r.domNode,[a,l]=n.split(`>${o}<`);return a==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${l}`:`${a}>${s.join("")}<${l}`}return r.domNode instanceof Element?r.domNode.outerHTML:""}function bN(r,t){return Object.keys(t).reduce((e,i)=>{if(r[i]==null)return e;let s=t[i];return s===r[i]?e[i]=s:Array.isArray(s)?s.indexOf(r[i])<0?e[i]=s.concat([r[i]]):e[i]=s:e[i]=[s,r[i]],e},{})}function Tp(r){let t=r==="ordered"?"ol":"ul";switch(r){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function Tw(r){return r.reduce((t,e)=>{if(typeof e.insert=="string"){let i=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(i,e.attributes)}return t.push(e)},new zt.default)}function Lw(r,t){let{index:e,length:i}=r;return new Te(e+t,i)}function vN(r){let t=[];return r.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((s,n)=>{n&&t.push({insert:`
`,attributes:e.attributes}),s&&t.push({insert:s,attributes:e.attributes})}):t.push(e)}),t}var Mw=Lp;var Mp=class{static DEFAULTS={};constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}},Xt=Mp;var nh="\uFEFF",Rp=class extends _t{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(i=>{this.contentNode.appendChild(i)}),this.leftGuard=document.createTextNode(nh),this.rightGuard=document.createTextNode(nh),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,i,s=t.data.split(nh).join("");if(t===this.leftGuard)if(this.prev instanceof Ut){let n=this.prev.length();this.prev.insertAt(n,s),e={startNode:this.prev.domNode,startOffset:n+s.length}}else i=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(i),this),e={startNode:i,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof Ut?(this.next.insertAt(0,s),e={startNode:this.next.domNode,startOffset:s.length}):(i=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(i),this.next),e={startNode:i,startOffset:s.length}));return t.data=nh,e}update(t,e){t.forEach(i=>{if(i.type==="characterData"&&(i.target===this.leftGuard||i.target===this.rightGuard)){let s=this.restore(i.target);s&&(e.range=s)}})}},jn=Rp;var Ip=class{isComposing=!1;constructor(t,e){this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){let e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof jn)&&(this.emitter.emit(it.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(it.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(it.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(it.events.COMPOSITION_END,t),this.isComposing=!1}},Rw=Ip;var qp=class r{static DEFAULTS={modules:{}};static themes={default:r};modules={};constructor(t,e){this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){let e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}},Xn=qp;var xN=r=>r.parentElement||r.getRootNode().host||null,yN=r=>{let t=r.getBoundingClientRect(),e="offsetWidth"in r&&Math.abs(t.width)/r.offsetWidth||1,i="offsetHeight"in r&&Math.abs(t.height)/r.offsetHeight||1;return{top:t.top,right:t.left+r.clientWidth*e,bottom:t.top+r.clientHeight*i,left:t.left}},oh=r=>{let t=parseInt(r,10);return Number.isNaN(t)?0:t},Iw=(r,t,e,i,s,n)=>r<e&&t>i?0:r<e?-(e-r+s):t>i?t-r>i-e?r+s-e:t-i+n:0,wN=(r,t)=>{let e=r.ownerDocument,i=t,s=r;for(;s;){let n=s===e.body,o=n?{top:0,right:window.visualViewport?.width??e.documentElement.clientWidth,bottom:window.visualViewport?.height??e.documentElement.clientHeight,left:0}:yN(s),a=getComputedStyle(s),l=Iw(i.left,i.right,o.left,o.right,oh(a.scrollPaddingLeft),oh(a.scrollPaddingRight)),c=Iw(i.top,i.bottom,o.top,o.bottom,oh(a.scrollPaddingTop),oh(a.scrollPaddingBottom));if(l||c)if(n)e.defaultView?.scrollBy(l,c);else{let{scrollLeft:h,scrollTop:u}=s;c&&(s.scrollTop+=c),l&&(s.scrollLeft+=l);let d=s.scrollLeft-h,f=s.scrollTop-u;i={left:i.left-d,top:i.top-f,right:i.right-d,bottom:i.bottom-f}}s=n||a.position==="fixed"?null:xN(s)}},qw=wN;var AN=100,kN=["block","break","cursor","inline","scroll","text"],SN=(r,t,e)=>{let i=new Xr;return kN.forEach(s=>{let n=t.query(s);n&&i.register(n)}),r.forEach(s=>{let n=t.query(s);n||e.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;n;)if(i.register(n),n="blotName"in n?n.requiredContainer??null:null,o+=1,o>AN){e.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),i},Ow=SN;var Yn=Ze("quill"),ah=new Xr;_e.uiClass="ql-ui";var V=class r{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:ah,theme:"default"};static events=it.events;static sources=it.sources;static version="2.0.3";static imports={delta:$r.default,parchment:Zo,"core/module":Xt,"core/theme":Xn};static debug(t){t===!0&&(t="log"),Ze.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ca.get(t)||ah.find(t,e)}static import(t){return this.imports[t]==null&&Yn.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){let t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),i="attrName"in t?t.attrName:t.blotName;typeof i=="string"?this.register(`formats/${i}`,t,e):Object.keys(t).forEach(s=>{this.register(s,t[s],e)})}else{let t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],i=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!i&&Yn.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&ah.register(e),typeof e.register=="function"&&e.register(ah)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=CN(t,e),this.container=this.options.container,this.container==null){Yn.error("Invalid Quill container",t);return}this.options.debug&&r.debug(this.options.debug);let i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",ca.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new it;let s=Ko.blotName,n=this.options.registry.query(s);if(!n||!("blotName"in n))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new n(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Mw(this.scroll),this.selection=new Ew(this.scroll,this.emitter),this.composition=new Rw(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(it.events.EDITOR_CHANGE,o=>{o===it.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(it.events.SCROLL_UPDATE,(o,a)=>{let l=this.selection.lastRange,[c]=this.selection.getRange(),h=l&&c?{oldRange:l,newRange:c}:void 0;vi.call(this,()=>this.editor.update(null,a,h),o)}),this.emitter.on(it.events.SCROLL_EMBED_UPDATE,(o,a)=>{let l=this.selection.lastRange,[c]=this.selection.getRange(),h=l&&c?{oldRange:l,newRange:c}:void 0;vi.call(this,()=>{let u=new $r.default().retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(u,[],h)},r.sources.USER)}),i){let o=this.clipboard.convert({html:`${i}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){let i=t;t=document.createElement("div"),t.classList.add(i)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,i){return[t,e,,i]=ar(t,e,i),vi.call(this,()=>this.editor.deleteText(t,e),i,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;let e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:it.sources.API;return vi.call(this,()=>{let s=this.getSelection(!0),n=new $r.default;if(s==null)return n;if(this.scroll.query(t,Z.BLOCK))n=this.editor.formatLine(s.index,s.length,{[t]:e});else{if(s.length===0)return this.selection.format(t,e),n;n=this.editor.formatText(s.index,s.length,{[t]:e})}return this.setSelection(s,it.sources.SILENT),n},i)}formatLine(t,e,i,s,n){let o;return[t,e,o,n]=ar(t,e,i,s,n),vi.call(this,()=>this.editor.formatLine(t,e,o),n,t,0)}formatText(t,e,i,s,n){let o;return[t,e,o,n]=ar(t,e,i,s,n),vi.call(this,()=>this.editor.formatText(t,e,o),n,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=null;if(typeof t=="number"?i=this.selection.getBounds(t,e):i=this.selection.getBounds(t.index,t.length),!i)return null;let s=this.container.getBoundingClientRect();return{bottom:i.bottom-s.top,height:i.height,left:i.left-s.left,right:i.right-s.left,top:i.top-s.top,width:i.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=ar(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=ar(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=ar(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r.sources.API;return vi.call(this,()=>this.editor.insertEmbed(t,e,i),s,t)}insertText(t,e,i,s,n){let o;return[t,,o,n]=ar(t,0,i,s,n),vi.call(this,()=>this.editor.insertText(t,e,o),n,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,i){return[t,e,,i]=ar(t,e,i),vi.call(this,()=>this.editor.removeFormat(t,e),i,t)}scrollRectIntoView(t){qw(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it.sources.API;return vi.call(this,()=>{t=new $r.default(t);let i=this.getLength(),s=this.editor.deleteText(0,i),n=this.editor.insertContents(0,t),o=this.editor.deleteText(this.getLength()-1,1);return s.compose(n).compose(o)},e)}setSelection(t,e,i){t==null?this.selection.setRange(null,e||r.sources.API):([t,e,,i]=ar(t,e,i),this.selection.setRange(new Te(Math.max(0,t),e),i),i!==it.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it.sources.API,i=new $r.default().insert(t);return this.setContents(i,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:it.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it.sources.API;return vi.call(this,()=>(t=new $r.default(t),this.editor.applyDelta(t)),e,!0)}};function Nw(r){return typeof r=="string"?document.querySelector(r):r}function Op(r){return Object.entries(r??{}).reduce((t,e)=>{let[i,s]=e;return{...t,[i]:s===!0?{}:s}},{})}function Pw(r){return Object.fromEntries(Object.entries(r).filter(t=>t[1]!==void 0))}function CN(r,t){let e=Nw(r);if(!e)throw new Error("Invalid Quill container");let s=!t.theme||t.theme===V.DEFAULTS.theme?Xn:V.import(`themes/${t.theme}`);if(!s)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);let{modules:n,...o}=V.DEFAULTS,{modules:a,...l}=s.DEFAULTS,c=Op(t.modules);c!=null&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});let h=Be({},Op(n),Op(a),c),u={...o,...Pw(l),...Pw(t)},d=t.registry;return d?t.formats&&Yn.warn('Ignoring "formats" option because "registry" is specified'):d=t.formats?Ow(t.formats,u.registry,Yn):u.registry,{...u,registry:d,container:e,theme:s,modules:Object.entries(h).reduce((f,g)=>{let[p,b]=g;if(!b)return f;let m=V.import(`modules/${p}`);return m==null?(Yn.error(`Cannot load ${p} module. Are you sure you registered it?`),f):{...f,[p]:Be({},m.DEFAULTS||{},b)}},{}),bounds:Nw(u.bounds)}}function vi(r,t,e,i){if(!this.isEnabled()&&t===it.sources.USER&&!this.allowReadOnlyEdits)return new $r.default;let s=e==null?null:this.getSelection(),n=this.editor.delta,o=r();if(s!=null&&(e===!0&&(e=s.index),i==null?s=Dw(s,o,t):i!==0&&(s=Dw(s,e,i,t)),this.setSelection(s,it.sources.SILENT)),o.length()>0){let a=[it.events.TEXT_CHANGE,o,n,t];this.emitter.emit(it.events.EDITOR_CHANGE,...a),t!==it.sources.SILENT&&this.emitter.emit(...a)}return o}function ar(r,t,e,i,s){let n={};return typeof r.index=="number"&&typeof r.length=="number"?typeof t!="number"?(s=i,i=e,e=t,t=r.length,r=r.index):(t=r.length,r=r.index):typeof t!="number"&&(s=i,i=e,e=t,t=0),typeof e=="object"?(n=e,s=i):typeof e=="string"&&(i!=null?n[e]=i:s=e),s=s||it.sources.API,[r,t,n,s]}function Dw(r,t,e,i){let s=typeof e=="number"?e:0;if(r==null)return null;let n,o;return t&&typeof t.transformPosition=="function"?[n,o]=[r.index,r.index+r.length].map(a=>t.transformPosition(a,i!==it.sources.USER)):[n,o]=[r.index,r.index+r.length].map(a=>a<t||a===t&&i===it.sources.USER?a:s>=0?a+s:Math.max(t,a+s)),new Te(n,o-n)}var Np=class extends On{},ai=Np;var li=De(Ke(),1);function Fw(r){return r instanceof It||r instanceof re}function Bw(r){return typeof r.updateContent=="function"}var Dp=class extends Ko{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=It;static allowedChildren=[It,re,ai];constructor(t,e,i){let{emitter:s}=i;super(t,e),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",n=>this.handleDragStart(n))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(it.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(it.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(it.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){let[i,s]=this.line(t),[n]=this.line(t+e);if(super.deleteAt(t,e),n!=null&&i!==n&&s>0){if(i instanceof re||n instanceof re){this.optimize();return}let o=n.children.head instanceof be?null:n.children.head;i.moveChildren(n,o),i.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,i,s){super.formatAt(t,e,i,s),this.optimize()}insertAt(t,e,i){if(t>=this.length())if(i==null||this.scroll.query(e,Z.BLOCK)==null){let s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),i==null&&e.endsWith(`
`)?s.insertAt(0,e.slice(0,-1),i):s.insertAt(0,e,i)}else{let s=this.scroll.create(e,i);this.appendChild(s)}else super.insertAt(t,e,i);this.optimize()}insertBefore(t,e){if(t.statics.scope===Z.INLINE_BLOT){let i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(t),super.insertBefore(i,e)}else super.insertBefore(t,e)}insertContents(t,e){let i=this.deltaToRenderBlocks(e.concat(new li.default().insert(`
`))),s=i.pop();if(s==null)return;this.batchStart();let n=i.shift();if(n){let l=n.type==="block"&&(n.delta.length()===0||!this.descendant(re,t)[0]&&t<this.length()),c=n.type==="block"?n.delta:new li.default().insert({[n.key]:n.value});Pp(this,t,c);let h=n.type==="block"?1:0,u=t+c.length()+h;l&&this.insertAt(u-1,`
`);let d=He(this.line(t)[0]),f=li.AttributeMap.diff(d,n.attributes)||{};Object.keys(f).forEach(g=>{this.formatAt(u-1,1,g,f[g])}),t=u}let[o,a]=this.children.find(t);if(i.length&&(o&&(o=o.split(a),a=0),i.forEach(l=>{if(l.type==="block"){let c=this.createBlock(l.attributes,o||void 0);Pp(c,0,l.delta)}else{let c=this.create(l.key,l.value);this.insertBefore(c,o||void 0),Object.keys(l.attributes).forEach(h=>{c.format(h,l.attributes[h])})}})),s.type==="block"&&s.delta.length()){let l=o?o.offset(o.scroll)+a:this.length();Pp(this,l,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){let e=this.path(t).pop();if(!e)return[null,-1];let[i,s]=e;return i instanceof Zt?[i,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(Fw,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,i=(s,n,o)=>{let a=[],l=o;return s.children.forEachAt(n,o,(c,h,u)=>{Fw(c)?a.push(c):c instanceof On&&(a=a.concat(i(c,h,l))),l-=u}),a};return i(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(it.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=it.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(i=>{let{target:s}=i,n=this.find(s,!0);return n&&!Bw(n)}),t.length>0&&this.emitter.emit(it.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(it.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,i){let[s]=this.descendant(n=>n instanceof re,t);s&&s.statics.blotName===e&&Bw(s)&&s.updateContent(i)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){let e=[],i=new li.default;return t.forEach(s=>{let n=s?.insert;if(n)if(typeof n=="string"){let o=n.split(`
`);o.slice(0,-1).forEach(l=>{i.insert(l,s.attributes),e.push({type:"block",delta:i,attributes:s.attributes??{}}),i=new li.default});let a=o[o.length-1];a&&i.insert(a,s.attributes)}else{let o=Object.keys(n)[0];if(!o)return;this.query(o,Z.INLINE)?i.push(s):(i.length()&&e.push({type:"block",delta:i,attributes:{}}),i=new li.default,e.push({type:"blockEmbed",key:o,value:n[o],attributes:s.attributes??{}}))}}),i.length()&&e.push({type:"block",delta:i,attributes:{}}),e}createBlock(t,e){let i,s={};Object.entries(t).forEach(a=>{let[l,c]=a;this.query(l,Z.BLOCK&Z.BLOT)!=null?i=l:s[l]=c});let n=this.create(i||this.statics.defaultChild.blotName,i?t[i]:void 0);this.insertBefore(n,e||void 0);let o=n.length();return Object.entries(s).forEach(a=>{let[l,c]=a;n.formatAt(0,o,l,c)}),n}};function Pp(r,t,e){e.reduce((i,s)=>{let n=li.Op.length(s),o=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){let a=s.insert;r.insertAt(i,a);let[l]=r.descendant(Zt,i),c=He(l);o=li.AttributeMap.diff(c,o)||{}}else if(typeof s.insert=="object"){let a=Object.keys(s.insert)[0];if(a==null)return i;if(r.insertAt(i,a,s.insert[a]),r.scroll.query(a,Z.INLINE)!=null){let[c]=r.descendant(Zt,i),h=He(c);o=li.AttributeMap.diff(h,o)||{}}}}return Object.keys(o).forEach(a=>{r.formatAt(i,n,a,o[a])}),i+n},t)}var _w=Dp;var We=De(Ke(),1);var Fp={scope:Z.BLOCK,whitelist:["right","center","justify"]},zw=new Se("align","align",Fp),Bp=new Kt("align","ql-align",Fp),lh=new ze("align","text-align",Fp);var ua=class extends ze{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):e}},Hw=new Kt("color","ql-color",{scope:Z.INLINE}),da=new ua("color","color",{scope:Z.INLINE});var Ww=new Kt("background","ql-bg",{scope:Z.INLINE}),fa=new ua("background","background-color",{scope:Z.INLINE});var Ni=class extends ai{static create(t){let e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(i=>i.length()<=1?"":i.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${Ms(this.code(t,e))}
</pre>`}},Jt=class extends It{static TAB="  ";static register(){V.register(Ni)}},Vn=class extends ve{};Vn.blotName="code";Vn.tagName="CODE";Jt.blotName="code-block";Jt.className="ql-code-block";Jt.tagName="DIV";Ni.blotName="code-block-container";Ni.className="ql-code-block-container";Ni.tagName="DIV";Ni.allowedChildren=[Jt];Jt.allowedChildren=[Ut,be,Gr];Jt.requiredContainer=Ni;var _p={scope:Z.BLOCK,whitelist:["rtl"]},ch=new Se("direction","dir",_p),zp=new Kt("direction","ql-direction",_p),hh=new ze("direction","direction",_p);var jw={scope:Z.INLINE,whitelist:["serif","monospace"]},Wp=new Kt("font","ql-font",jw),Hp=class extends ze{value(t){return super.value(t).replace(/["']/g,"")}},uh=new Hp("font","font-family",jw);var jp=new Kt("size","ql-size",{scope:Z.INLINE,whitelist:["small","large","huge"]}),dh=new ze("size","font-size",{scope:Z.INLINE,whitelist:["10px","18px","32px"]});var ye=De(Ke(),1);var EN=Ze("quill:keyboard"),TN=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",pa=class r extends Xt{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(i=>!!e[i]!==t[i]&&e[i]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(i=>{this.options.bindings[i]&&this.addBinding(this.options.bindings[i])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=MN(t);if(s==null){EN.warn("Attempted to add invalid keyboard binding",s);return}typeof e=="function"&&(e={handler:e}),typeof i=="function"&&(i={handler:i}),(Array.isArray(s.key)?s.key:[s.key]).forEach(o=>{let a={...s,key:o,...e,...i};this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;let s=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(m=>r.match(t,m));if(s.length===0)return;let n=V.find(t.target,!0);if(n&&n.scroll!==this.quill.scroll)return;let o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;let[a,l]=this.quill.getLine(o.index),[c,h]=this.quill.getLeaf(o.index),[u,d]=o.length===0?[c,h]:this.quill.getLeaf(o.index+o.length),f=c instanceof Nn?c.value().slice(0,h):"",g=u instanceof Nn?u.value().slice(d):"",p={collapsed:o.length===0,empty:o.length===0&&a.length()<=1,format:this.quill.getFormat(o),line:a,offset:l,prefix:f,suffix:g,event:t};s.some(m=>{if(m.collapsed!=null&&m.collapsed!==p.collapsed||m.empty!=null&&m.empty!==p.empty||m.offset!=null&&m.offset!==p.offset)return!1;if(Array.isArray(m.format)){if(m.format.every(x=>p.format[x]==null))return!1}else if(typeof m.format=="object"&&!Object.keys(m.format).every(x=>m.format[x]===!0?p.format[x]!=null:m.format[x]===!1?p.format[x]==null:xs(m.format[x],p.format[x])))return!1;return m.prefix!=null&&!m.prefix.test(p.prefix)||m.suffix!=null&&!m.suffix.test(p.suffix)?!1:m.handler.call(this,o,p,m)!==!0})&&t.preventDefault()})}handleBackspace(t,e){let i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let s={},[n]=this.quill.getLine(t.index),o=new ye.default().retain(t.index-i).delete(i);if(e.offset===0){let[a]=this.quill.getLine(t.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){let c=n.formats(),h=this.quill.getFormat(t.index-1,1);if(s=ye.AttributeMap.diff(c,h)||{},Object.keys(s).length>0){let u=new ye.default().retain(t.index+n.length()-2).retain(1,s);o=o.compose(u)}}}this.quill.updateContents(o,V.sources.USER),this.quill.focus()}handleDelete(t,e){let i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-i)return;let s={},[n]=this.quill.getLine(t.index),o=new ye.default().retain(t.index).delete(i);if(e.offset>=n.length()-1){let[a]=this.quill.getLine(t.index+1);if(a){let l=n.formats(),c=this.quill.getFormat(t.index,1);s=ye.AttributeMap.diff(l,c)||{},Object.keys(s).length>0&&(o=o.retain(a.length()-1).retain(1,s))}}this.quill.updateContents(o,V.sources.USER),this.quill.focus()}handleDeleteRange(t){ga({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){let i=Object.keys(e.format).reduce((n,o)=>(this.quill.scroll.query(o,Z.BLOCK)&&!Array.isArray(e.format[o])&&(n[o]=e.format[o]),n),{}),s=new ye.default().retain(t.index).delete(t.length).insert(`
`,i);this.quill.updateContents(s,V.sources.USER),this.quill.setSelection(t.index+1,V.sources.SILENT),this.quill.focus()}},LN={bindings:{bold:Xp("bold"),italic:Xp("italic"),underline:Xp("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(r,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",V.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(r,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",V.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(r,t){t.format.indent!=null?this.quill.format("indent","-1",V.sources.USER):t.format.list!=null&&this.quill.format("list",!1,V.sources.USER)}},"indent code-block":Xw(!0),"outdent code-block":Xw(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(r){this.quill.deleteText(r.index-1,1,V.sources.USER)}},tab:{key:"Tab",handler(r,t){if(t.format.table)return!0;this.quill.history.cutoff();let e=new ye.default().retain(r.index).delete(r.length).insert("	");return this.quill.updateContents(e,V.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index+1,V.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,V.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(r,t){let e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(r.index,r.length,e,V.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(r){let[t,e]=this.quill.getLine(r.index),i={...t.formats(),list:"checked"},s=new ye.default().retain(r.index).insert(`
`,i).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,V.sources.USER),this.quill.setSelection(r.index+1,V.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(r,t){let[e,i]=this.quill.getLine(r.index),s=new ye.default().retain(r.index).insert(`
`,t.format).retain(e.length()-i-1).retain(1,{header:null});this.quill.updateContents(s,V.sources.USER),this.quill.setSelection(r.index+1,V.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(r){let t=this.quill.getModule("table");if(t){let[e,i,s,n]=t.getTable(r),o=RN(e,i,s,n);if(o==null)return;let a=e.offset();if(o<0){let l=new ye.default().retain(a).insert(`
`);this.quill.updateContents(l,V.sources.USER),this.quill.setSelection(r.index+1,r.length,V.sources.SILENT)}else if(o>0){a+=e.length();let l=new ye.default().retain(a).insert(`
`);this.quill.updateContents(l,V.sources.USER),this.quill.setSelection(a,V.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(r,t){let{event:e,line:i}=t,s=i.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(s-1,V.sources.USER):this.quill.setSelection(s+i.length(),V.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(r,t){if(this.quill.scroll.query("list")==null)return!0;let{length:e}=t.prefix,[i,s]=this.quill.getLine(r.index);if(s>e)return!0;let n;switch(t.prefix.trim()){case"[]":case"[ ]":n="unchecked";break;case"[x]":n="checked";break;case"-":case"*":n="bullet";break;default:n="ordered"}this.quill.insertText(r.index," ",V.sources.USER),this.quill.history.cutoff();let o=new ye.default().retain(r.index-s).delete(e+1).retain(i.length()-2-s).retain(1,{list:n});return this.quill.updateContents(o,V.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index-e,V.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(r){let[t,e]=this.quill.getLine(r.index),i=2,s=t;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,i-=1,i<=0){let n=new ye.default().retain(r.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(n,V.sources.USER),this.quill.setSelection(r.index-1,V.sources.SILENT),!1}return!0}},"embed left":fh("ArrowLeft",!1),"embed left shift":fh("ArrowLeft",!0),"embed right":fh("ArrowRight",!1),"embed right shift":fh("ArrowRight",!0),"table down":Yw(!1),"table up":Yw(!0)}};pa.DEFAULTS=LN;function Xw(r){return{key:"Tab",shiftKey:!r,format:{"code-block":!0},handler(t,e){let{event:i}=e,s=this.quill.scroll.query("code-block"),{TAB:n}=s;if(t.length===0&&!i.shiftKey){this.quill.insertText(t.index,n,V.sources.USER),this.quill.setSelection(t.index+n.length,V.sources.SILENT);return}let o=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t),{index:a,length:l}=t;o.forEach((c,h)=>{r?(c.insertAt(0,n),h===0?a+=n.length:l+=n.length):c.domNode.textContent.startsWith(n)&&(c.deleteAt(0,n.length),h===0?a-=n.length:l-=n.length)}),this.quill.update(V.sources.USER),this.quill.setSelection(a,l,V.sources.SILENT)}}}function fh(r,t){return{key:r,shiftKey:t,altKey:null,[r==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(i){let{index:s}=i;r==="ArrowRight"&&(s+=i.length+1);let[n]=this.quill.getLeaf(s);return n instanceof _t?(r==="ArrowLeft"?t?this.quill.setSelection(i.index-1,i.length+1,V.sources.USER):this.quill.setSelection(i.index-1,V.sources.USER):t?this.quill.setSelection(i.index,i.length+1,V.sources.USER):this.quill.setSelection(i.index+i.length+1,V.sources.USER),!1):!0}}}function Xp(r){return{key:r[0],shortKey:!0,handler(t,e){this.quill.format(r,!e.format[r],V.sources.USER)}}}function Yw(r){return{key:r?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){let i=r?"prev":"next",s=e.line,n=s.parent[i];if(n!=null){if(n.statics.blotName==="table-row"){let o=n.children.head,a=s;for(;a.prev!=null;)a=a.prev,o=o.next;let l=o.offset(this.quill.scroll)+Math.min(e.offset,o.length()-1);this.quill.setSelection(l,0,V.sources.USER)}}else{let o=s.table()[i];o!=null&&(r?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,V.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,V.sources.USER))}return!1}}}function MN(r){if(typeof r=="string"||typeof r=="number")r={key:r};else if(typeof r=="object")r=qi(r);else return null;return r.shortKey&&(r[TN]=r.shortKey,delete r.shortKey),r}function ga(r){let{quill:t,range:e}=r,i=t.getLines(e),s={};if(i.length>1){let n=i[0].formats(),o=i[i.length-1].formats();s=ye.AttributeMap.diff(o,n)||{}}t.deleteText(e,V.sources.USER),Object.keys(s).length>0&&t.formatLine(e.index,1,s,V.sources.USER),t.setSelection(e.index,V.sources.SILENT)}function RN(r,t,e,i){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?i===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}var IN=/font-weight:\s*normal/,qN=["P","OL","UL"],Vw=r=>r&&qN.includes(r.tagName),ON=r=>{Array.from(r.querySelectorAll("br")).filter(t=>Vw(t.previousElementSibling)&&Vw(t.nextElementSibling)).forEach(t=>{t.parentNode?.removeChild(t)})},NN=r=>{Array.from(r.querySelectorAll('b[style*="font-weight"]')).filter(t=>t.getAttribute("style")?.match(IN)).forEach(t=>{let e=r.createDocumentFragment();e.append(...t.childNodes),t.parentNode?.replaceChild(e,t)})};function Yp(r){r.querySelector('[id^="docs-internal-guid-"]')&&(NN(r),ON(r))}var PN=/\bmso-list:[^;]*ignore/i,DN=/\bmso-list:[^;]*\bl(\d+)/i,FN=/\bmso-list:[^;]*\blevel(\d+)/i,BN=(r,t)=>{let e=r.getAttribute("style"),i=e?.match(DN);if(!i)return null;let s=Number(i[1]),n=e?.match(FN),o=n?Number(n[1]):1,a=new RegExp(`@list l${s}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=t.match(a),c=l&&l[1]==="bullet"?"bullet":"ordered";return{id:s,indent:o,type:c,element:r}},_N=r=>{let t=Array.from(r.querySelectorAll("[style*=mso-list]")),e=[],i=[];t.forEach(o=>{(o.getAttribute("style")||"").match(PN)?e.push(o):i.push(o)}),e.forEach(o=>o.parentNode?.removeChild(o));let s=r.documentElement.innerHTML,n=i.map(o=>BN(o,s)).filter(o=>o);for(;n.length;){let o=[],a=n.shift();for(;a;)o.push(a),a=n.length&&n[0]?.element===a.element.nextElementSibling&&n[0].id===a.id?n.shift():null;let l=document.createElement("ul");o.forEach(u=>{let d=document.createElement("li");d.setAttribute("data-list",u.type),u.indent>1&&d.setAttribute("class",`ql-indent-${u.indent-1}`),d.innerHTML=u.element.innerHTML,l.appendChild(d)});let c=o[0]?.element,{parentNode:h}=c??{};c&&h?.replaceChild(l,c),o.slice(1).forEach(u=>{let{element:d}=u;h?.removeChild(d)})}};function Vp(r){r.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&_N(r)}var zN=[Vp,Yp],HN=r=>{r.documentElement&&zN.forEach(t=>{t(r)})},Uw=HN;var WN=Ze("quill:clipboard"),jN=[[Node.TEXT_NODE,eP],[Node.TEXT_NODE,$w],["br",GN],[Node.ELEMENT_NODE,$w],[Node.ELEMENT_NODE,UN],[Node.ELEMENT_NODE,VN],[Node.ELEMENT_NODE,QN],["li",ZN],["ol, ul",JN],["pre",$N],["tr",tP],["b",Up("bold")],["i",Up("italic")],["strike",Up("strike")],["style",KN]],XN=[zw,ch].reduce((r,t)=>(r[t.keyName]=t,r),{}),Gw=[lh,fa,da,hh,uh,dh].reduce((r,t)=>(r[t.keyName]=t,r),{}),gh=class extends Xt{static DEFAULTS={matchers:[]};constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",i=>this.onCaptureCopy(i,!1)),this.quill.root.addEventListener("cut",i=>this.onCaptureCopy(i,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],jN.concat(this.options.matchers??[]).forEach(i=>{let[s,n]=i;this.addMatcher(s,n)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:i}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[Jt.blotName])return new We.default().insert(i||"",{[Jt.blotName]:s[Jt.blotName]});if(!e)return new We.default().insert(i||"",s);let n=this.convertHTML(e);return ma(n,`
`)&&(n.ops[n.ops.length-1].attributes==null||s.table)?n.compose(new We.default().retain(n.length()-1).delete(1)):n}normalizeHTML(t){Uw(t)}convertHTML(t){let e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);let i=e.body,s=new WeakMap,[n,o]=this.prepareMatching(i,s);return mh(this.quill.scroll,i,n,o,s)}dangerouslyPasteHTML(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:V.sources.API;if(typeof t=="string"){let s=this.convert({html:t,text:""});this.quill.setContents(s,e),this.quill.setSelection(0,V.sources.SILENT)}else{let s=this.convert({html:e,text:""});this.quill.updateContents(new We.default().retain(t).concat(s),i),this.quill.setSelection(t+s.length(),V.sources.SILENT)}}onCaptureCopy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();let[i]=this.quill.selection.getRange();if(i==null)return;let{html:s,text:n}=this.onCopy(i,e);t.clipboardData?.setData("text/plain",n),t.clipboardData?.setData("text/html",s),e&&ga({range:i,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();let e=this.quill.getSelection(!0);if(e==null)return;let i=t.clipboardData?.getData("text/html"),s=t.clipboardData?.getData("text/plain");if(!i&&!s){let o=t.clipboardData?.getData("text/uri-list");o&&(s=this.normalizeURIList(o))}let n=Array.from(t.clipboardData?.files||[]);if(!i&&n.length>0){this.quill.uploader.upload(e,n);return}if(i&&n.length>0){let o=new DOMParser().parseFromString(i,"text/html");if(o.body.childElementCount===1&&o.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(e,n);return}}this.onPaste(e,{html:i,text:s})}onCopy(t){let e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:i,html:s}=e,n=this.quill.getFormat(t.index),o=this.convert({text:i,html:s},n);WN.log("onPaste",o,{text:i,html:s});let a=new We.default().retain(t.index).delete(t.length).concat(o);this.quill.updateContents(a,V.sources.USER),this.quill.setSelection(a.length()-t.length,V.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){let i=[],s=[];return this.matchers.forEach(n=>{let[o,a]=n;switch(o){case Node.TEXT_NODE:s.push(a);break;case Node.ELEMENT_NODE:i.push(a);break;default:Array.from(t.querySelectorAll(o)).forEach(l=>{e.has(l)?e.get(l)?.push(a):e.set(l,[a])});break}}),[i,s]}};function Rs(r,t,e,i){return i.query(t)?r.reduce((s,n)=>{if(!n.insert)return s;if(n.attributes&&n.attributes[t])return s.push(n);let o=e?{[t]:e}:{};return s.insert(n.insert,{...o,...n.attributes})},new We.default):r}function ma(r,t){let e="";for(let i=r.ops.length-1;i>=0&&e.length<t.length;--i){let s=r.ops[i];if(typeof s.insert!="string")break;e=s.insert+e}return e.slice(-1*t.length)===t}function Kr(r,t){if(!(r instanceof Element))return!1;let e=t.query(r);return e&&e.prototype instanceof _t?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(r.tagName.toLowerCase())}function YN(r,t){return r.previousElementSibling&&r.nextElementSibling&&!Kr(r.previousElementSibling,t)&&!Kr(r.nextElementSibling,t)}var ph=new WeakMap;function Kw(r){return r==null?!1:(ph.has(r)||(r.tagName==="PRE"?ph.set(r,!0):ph.set(r,Kw(r.parentNode))),ph.get(r))}function mh(r,t,e,i,s){return t.nodeType===t.TEXT_NODE?i.reduce((n,o)=>o(t,n,r),new We.default):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((n,o)=>{let a=mh(r,o,e,i,s);return o.nodeType===t.ELEMENT_NODE&&(a=e.reduce((l,c)=>c(o,l,r),a),a=(s.get(o)||[]).reduce((l,c)=>c(o,l,r),a)),n.concat(a)},new We.default):new We.default}function Up(r){return(t,e,i)=>Rs(e,r,!0,i)}function VN(r,t,e){let i=Se.keys(r),s=Kt.keys(r),n=ze.keys(r),o={};return i.concat(s).concat(n).forEach(a=>{let l=e.query(a,Z.ATTRIBUTE);l!=null&&(o[l.attrName]=l.value(r),o[l.attrName])||(l=XN[a],l!=null&&(l.attrName===a||l.keyName===a)&&(o[l.attrName]=l.value(r)||void 0),l=Gw[a],l!=null&&(l.attrName===a||l.keyName===a)&&(l=Gw[a],o[l.attrName]=l.value(r)||void 0))}),Object.entries(o).reduce((a,l)=>{let[c,h]=l;return Rs(a,c,h,e)},t)}function UN(r,t,e){let i=e.query(r);if(i==null)return t;if(i.prototype instanceof _t){let s={},n=i.value(r);if(n!=null)return s[i.blotName]=n,new We.default().insert(s,i.formats(r,e))}else if(i.prototype instanceof ys&&!ma(t,`
`)&&t.insert(`
`),"blotName"in i&&"formats"in i&&typeof i.formats=="function")return Rs(t,i.blotName,i.formats(r,e),e);return t}function GN(r,t){return ma(t,`
`)||t.insert(`
`),t}function $N(r,t,e){let i=e.query("code-block"),s=i&&"formats"in i&&typeof i.formats=="function"?i.formats(r,e):!0;return Rs(t,"code-block",s,e)}function KN(){return new We.default}function ZN(r,t,e){let i=e.query(r);if(i==null||i.blotName!=="list"||!ma(t,`
`))return t;let s=-1,n=r.parentNode;for(;n!=null;)["OL","UL"].includes(n.tagName)&&(s+=1),n=n.parentNode;return s<=0?t:t.reduce((o,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?o.push(a):o.insert(a.insert,{indent:s,...a.attributes||{}}):o,new We.default)}function JN(r,t,e){let i=r,s=i.tagName==="OL"?"ordered":"bullet",n=i.getAttribute("data-checked");return n&&(s=n==="true"?"checked":"unchecked"),Rs(t,"list",s,e)}function $w(r,t,e){if(!ma(t,`
`)){if(Kr(r,e)&&(r.childNodes.length>0||r instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&r.nextSibling){let i=r.nextSibling;for(;i!=null;){if(Kr(i,e))return t.insert(`
`);let s=e.query(i);if(s&&s.prototype instanceof re)return t.insert(`
`);i=i.firstChild}}}return t}function QN(r,t,e){let i={},s=r.style||{};return s.fontStyle==="italic"&&(i.italic=!0),s.textDecoration==="underline"&&(i.underline=!0),s.textDecoration==="line-through"&&(i.strike=!0),(s.fontWeight?.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(i.bold=!0),t=Object.entries(i).reduce((n,o)=>{let[a,l]=o;return Rs(n,a,l,e)},t),parseFloat(s.textIndent||0)>0?new We.default().insert("	").concat(t):t}function tP(r,t,e){let i=r.parentElement?.tagName==="TABLE"?r.parentElement:r.parentElement?.parentElement;if(i!=null){let n=Array.from(i.querySelectorAll("tr")).indexOf(r)+1;return Rs(t,"table",n,e)}return t}function eP(r,t,e){let i=r.data;if(r.parentElement?.tagName==="O:P")return t.insert(i.trim());if(!Kw(r)){if(i.trim().length===0&&i.includes(`
`)&&!YN(r,e))return t;i=i.replace(/[^\S\u00a0]/g," "),i=i.replace(/ {2,}/g," "),(r.previousSibling==null&&r.parentElement!=null&&Kr(r.parentElement,e)||r.previousSibling instanceof Element&&Kr(r.previousSibling,e))&&(i=i.replace(/^ /,"")),(r.nextSibling==null&&r.parentElement!=null&&Kr(r.parentElement,e)||r.nextSibling instanceof Element&&Kr(r.nextSibling,e))&&(i=i.replace(/ $/,"")),i=i.replaceAll("\xA0"," ")}return t.insert(i)}var bh=class extends Xt{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,e){super(t,e),this.quill.on(V.events.EDITOR_CHANGE,(i,s,n,o)=>{i===V.events.SELECTION_CHANGE?s&&o!==V.sources.SILENT&&(this.currentRange=s):i===V.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===V.sources.USER?this.record(s,n):this.transform(s)),this.currentRange=Gp(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(t,e){if(this.stack[t].length===0)return;let i=this.stack[t].pop();if(!i)return;let s=this.quill.getContents(),n=i.delta.invert(s);this.stack[e].push({delta:n,range:Gp(i.range,n)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,V.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,e){if(t.ops.length===0)return;this.stack.redo=[];let i=t.invert(e),s=this.currentRange,n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){let o=this.stack.undo.pop();o&&(i=i.compose(o.delta),s=o.range)}else this.lastRecorded=n;i.length()!==0&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){Zw(this.stack.undo,t),Zw(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,V.sources.USER);else{let e=rP(this.quill.scroll,t.delta);this.quill.setSelection(e,V.sources.USER)}}};function Zw(r,t){let e=t;for(let i=r.length-1;i>=0;i-=1){let s=r[i];r[i]={delta:e.transform(s.delta,!0),range:s.range&&Gp(s.range,e)},e=s.delta.transform(e),r[i].delta.length()===0&&r.splice(i,1)}}function iP(r,t){let e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(i=>r.query(i,Z.BLOCK)!=null):!1}function rP(r,t){let e=t.reduce((s,n)=>s+(n.delete||0),0),i=t.length()-e;return iP(r,t)&&(i-=1),i}function Gp(r,t){if(!r)return r;let e=t.transformPosition(r.index),i=t.transformPosition(r.index+r.length);return{index:e,length:i-e}}var Jw=De(Ke(),1);var vh=class extends Xt{constructor(t,e){super(t,e),t.root.addEventListener("drop",i=>{i.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(i.clientX,i.clientY);else if(document.caretPositionFromPoint){let o=document.caretPositionFromPoint(i.clientX,i.clientY);s=document.createRange(),s.setStart(o.offsetNode,o.offset),s.setEnd(o.offsetNode,o.offset)}let n=s&&t.selection.normalizeNative(s);if(n){let o=t.selection.normalizedToRange(n);i.dataTransfer?.files&&this.upload(o,i.dataTransfer.files)}})}upload(t,e){let i=[];Array.from(e).forEach(s=>{s&&this.options.mimetypes?.includes(s.type)&&i.push(s)}),i.length>0&&this.options.handler.call(this,t,i)}};vh.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(r,t){if(!this.quill.scroll.query("image"))return;let e=t.map(i=>new Promise(s=>{let n=new FileReader;n.onload=()=>{s(n.result)},n.readAsDataURL(i)}));Promise.all(e).then(i=>{let s=i.reduce((n,o)=>n.insert({image:o}),new Jw.default().retain(r.index).delete(r.length));this.quill.updateContents(s,it.sources.USER),this.quill.setSelection(r.index+i.length,it.sources.SILENT)})}};var Qw=vh;var Zr=De(Ke(),1);var t1=De(Ke(),1);var sP=["insertText","insertReplacementText"],$p=class extends Xt{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",i=>{this.handleBeforeInput(i)}),/Android/i.test(navigator.userAgent)||t.on(V.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){ga({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){let i=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new t1.default().retain(t.index).insert(e,i),V.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,V.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!sP.includes(t.inputType))return;let e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;let i=nP(t);if(i==null)return;let s=this.quill.selection.normalizeNative(e),n=s?this.quill.selection.normalizedToRange(s):null;n&&this.replaceText(n,i)&&t.preventDefault()}handleCompositionStart(){let t=this.quill.getSelection();t&&this.replaceText(t)}};function nP(r){return typeof r.data=="string"?r.data:r.dataTransfer?.types.includes("text/plain")?r.dataTransfer.getData("text/plain"):null}var e1=$p;var oP=/Mac/i.test(navigator.platform),aP=100,lP=r=>!!(r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key==="Home"||oP&&r.key==="a"&&r.ctrlKey===!0),Kp=class extends Xt{isListening=!1;selectionChangeDeadline=0;constructor(t,e){super(t,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:i,event:s}=e;if(!(i instanceof _e)||!i.uiNode)return!0;let n=getComputedStyle(i.domNode).direction==="rtl";return n&&s.key!=="ArrowRight"||!n&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(s.shiftKey?1:0),V.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&lP(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+aP,this.isListening)return;this.isListening=!0;let t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){let t=document.getSelection();if(!t)return;let e=t.getRangeAt(0);if(e.collapsed!==!0||e.startOffset!==0)return;let i=this.quill.scroll.find(e.startContainer);if(!(i instanceof _e)||!i.uiNode)return;let s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),t.removeAllRanges(),t.addRange(s)}},i1=Kp;V.register({"blots/block":It,"blots/block/embed":re,"blots/break":be,"blots/container":ai,"blots/cursor":Gr,"blots/embed":jn,"blots/inline":ve,"blots/scroll":_w,"blots/text":Ut,"modules/clipboard":gh,"modules/history":bh,"modules/keyboard":pa,"modules/uploader":Qw,"modules/input":e1,"modules/uiNode":i1});var xh=V;var Zp=class extends Kt{add(t,e){let i=0;if(e==="+1"||e==="-1"){let s=this.value(t)||0;i=e==="+1"?s+1:s-1}else typeof e=="number"&&(i=e);return i===0?(this.remove(t),!0):super.add(t,i.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}},cP=new Zp("indent","ql-indent",{scope:Z.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),r1=cP;var Jp=class extends It{static blotName="blockquote";static tagName="blockquote"},s1=Jp;var Qp=class extends It{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}},n1=Qp;var Is=class extends ai{};Is.blotName="list-container";Is.tagName="OL";var Jr=class extends It{static create(t){let e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){V.register(Is)}constructor(t,e){super(t,e);let i=e.ownerDocument.createElement("span"),s=n=>{if(!t.isEnabled())return;let o=this.statics.formats(e,t);o==="checked"?(this.format("list","unchecked"),n.preventDefault()):o==="unchecked"&&(this.format("list","checked"),n.preventDefault())};i.addEventListener("mousedown",s),i.addEventListener("touchstart",s),this.attachUI(i)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}};Jr.blotName="list";Jr.tagName="LI";Is.allowedChildren=[Jr];Jr.requiredContainer=Is;var tg=class extends ve{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},Un=tg;var eg=class extends Un{static blotName="italic";static tagName=["EM","I"]},o1=eg;var lr=class extends ve{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){let e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return ig(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}};function ig(r,t){let e=document.createElement("a");e.href=r;let i=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(i)>-1}var rg=class extends ve{static blotName="script";static tagName=["SUB","SUP"];static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}},a1=rg;var sg=class extends Un{static blotName="strike";static tagName=["S","STRIKE"]},l1=sg;var ng=class extends ve{static blotName="underline";static tagName="U"},c1=ng;var og=class extends jn{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){let{formula:t}=this.value();return`<span>${t}</span>`}},h1=og;var u1=["alt","height","width"],ag=class extends _t{static blotName="image";static tagName="IMG";static create(t){let e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return u1.reduce((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return ig(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){u1.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},d1=ag;var f1=["height","width"],lg=class extends re{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){let e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return f1.reduce((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e),{})}static sanitize(t){return lr.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){f1.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){let{video:t}=this.value();return`<a href="${t}">${t}</a>`}},p1=lg;var yh=De(Ke(),1);var ba=new Kt("code-token","hljs",{scope:Z.INLINE}),cr=class r extends ve{static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains(Jt.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,i){super(t,e,i),ba.add(this.domNode,i)}format(t,e){t!==r.blotName?super.format(t,e):e?ba.add(this.domNode,e):(ba.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),ba.value(this.domNode)||this.unwrap()}};cr.blotName="code-token";cr.className="ql-token";var je=class extends Jt{static create(t){let e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),cr.blotName,!1),super.replaceWith(t,e)}},qs=class extends Ni{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===je.blotName&&(this.forceNext=!0,this.children.forEach(i=>{i.format(t,e)}))}formatAt(t,e,i,s){i===je.blotName&&(this.forceNext=!0),super.formatAt(t,e,i,s)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;let s=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,n=je.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==s){if(s.trim().length>0||this.cachedText==null){let o=this.children.reduce((l,c)=>l.concat(gp(c,!1)),new yh.default),a=t(s,n);o.diff(a).reduce((l,c)=>{let{retain:h,attributes:u}=c;return h?(u&&Object.keys(u).forEach(d=>{[je.blotName,cr.blotName].includes(d)&&this.formatAt(l,h,d,u[d])}),l+h):l},0)}this.cachedText=s,this.forceNext=!1}}html(t,e){let[i]=this.children.find(t);return`<pre data-language="${i?je.formats(i.domNode):"plain"}">
${Ms(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let e=je.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}};qs.allowedChildren=[je];je.requiredContainer=qs;je.allowedChildren=[cr,Gr,Ut,be];var hP=(r,t,e)=>{if(typeof r.versionString=="string"){let i=r.versionString.split(".")[0];if(parseInt(i,10)>=11)return r.highlight(e,{language:t}).value}return r.highlight(t,e).value},va=class extends Xt{static register(){V.register(cr,!0),V.register(je,!0),V.register(qs,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((i,s)=>{let{key:n}=s;return i[n]=!0,i},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(V.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof qs))return;let e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(i=>{let{key:s,label:n}=i,o=e.ownerDocument.createElement("option");o.textContent=n,o.setAttribute("value",s),e.appendChild(o)}),e.addEventListener("change",()=>{t.format(je.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=je.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(V.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(V.sources.USER);let i=this.quill.getSelection();(t==null?this.quill.scroll.descendants(qs):[t]).forEach(n=>{n.highlight(this.highlightBlot,e)}),this.quill.update(V.sources.SILENT),i!=null&&this.quill.setSelection(i,V.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Ms(t).split(`
`).reduce((s,n,o)=>(o!==0&&s.insert(`
`,{[Jt.blotName]:e}),s.insert(n)),new yh.default);let i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(Jt.className),i.innerHTML=hP(this.options.hljs,e,t),mh(this.quill.scroll,i,[(s,n)=>{let o=ba.value(s);return o?n.compose(new yh.default().retain(n.length(),{[cr.blotName]:o})):n}],[(s,n)=>s.data.split(`
`).reduce((o,a,l)=>(l!==0&&o.insert(`
`,{[Jt.blotName]:e}),o.insert(a)),n)],new WeakMap)}};va.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var g1=De(Ke(),1);var ci=class r extends It{static blotName="table";static tagName="TD";static create(t){let e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",wh()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===r.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}},Pi=class extends ai{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let t=this.children.head.formats(),e=this.children.tail.formats(),i=this.next.children.head.formats(),s=this.next.children.tail.formats();return t.table===e.table&&t.table===i.table&&t.table===s.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;let i=e.formats(),s=e.next.formats();if(i.table!==s.table){let n=this.splitAfter(e);n&&n.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}},xi=class extends ai{static blotName="table-body";static tagName="TBODY"},Os=class extends ai{static blotName="table-container";static tagName="TABLE";balanceCells(){let t=this.descendants(Pi),e=t.reduce((i,s)=>Math.max(s.children.length,i),0);t.forEach(i=>{new Array(e-i.children.length).fill(0).forEach(()=>{let s;i.children.head!=null&&(s=ci.formats(i.children.head.domNode));let n=this.scroll.create(ci.blotName,s);i.appendChild(n),n.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){let[e]=this.descendant(xi);e==null||e.children.head==null||e.children.forEach(i=>{let s=i.children.at(t);s?.remove()})}insertColumn(t){let[e]=this.descendant(xi);e==null||e.children.head==null||e.children.forEach(i=>{let s=i.children.at(t),n=ci.formats(i.children.head.domNode),o=this.scroll.create(ci.blotName,n);i.insertBefore(o,s)})}insertRow(t){let[e]=this.descendant(xi);if(e==null||e.children.head==null)return;let i=wh(),s=this.scroll.create(Pi.blotName);e.children.head.children.forEach(()=>{let o=this.scroll.create(ci.blotName,i);s.appendChild(o)});let n=e.children.at(t);e.insertBefore(s,n)}rows(){let t=this.children.head;return t==null?[]:t.children.map(e=>e)}};Os.allowedChildren=[xi];xi.requiredContainer=Os;xi.allowedChildren=[Pi];Pi.requiredContainer=xi;Pi.allowedChildren=[ci];ci.requiredContainer=Pi;function wh(){return`row-${Math.random().toString(36).slice(2,6)}`}var cg=class extends Xt{static register(){V.register(ci),V.register(Pi),V.register(xi),V.register(Os)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Os).forEach(t=>{t.balanceCells()})}deleteColumn(){let[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(V.sources.USER))}deleteRow(){let[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(V.sources.USER))}deleteTable(){let[t]=this.getTable();if(t==null)return;let e=t.offset();t.remove(),this.quill.update(V.sources.USER),this.quill.setSelection(e,V.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];let[e,i]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==ci.blotName)return[null,null,null,-1];let s=e.parent;return[s.parent.parent,s,e,i]}insertColumn(t){let e=this.quill.getSelection();if(!e)return;let[i,s,n]=this.getTable(e);if(n==null)return;let o=n.cellOffset();i.insertColumn(o+t),this.quill.update(V.sources.USER);let a=s.rowOffset();t===0&&(a+=1),this.quill.setSelection(e.index+a,e.length,V.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){let e=this.quill.getSelection();if(!e)return;let[i,s,n]=this.getTable(e);if(n==null)return;let o=s.rowOffset();i.insertRow(o+t),this.quill.update(V.sources.USER),t>0?this.quill.setSelection(e,V.sources.SILENT):this.quill.setSelection(e.index+s.children.length,e.length,V.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){let i=this.quill.getSelection();if(i==null)return;let s=new Array(t).fill(0).reduce(n=>{let o=new Array(e).fill(`
`).join("");return n.insert(o,{table:wh()})},new g1.default().retain(i.index));this.quill.updateContents(s,V.sources.USER),this.quill.setSelection(i.index,V.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(V.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(V.events.TEXT_CHANGE,(i,s,n)=>{n===V.sources.USER&&this.balanceTables()}),!0):!1)})}},m1=cg;var x1=De(Ke(),1);var b1=Ze("quill:toolbar"),Gn=class extends Xt{constructor(t,e){if(super(t,e),Array.isArray(this.options.container)){let i=document.createElement("div");i.setAttribute("role","toolbar"),uP(i,this.options.container),t.container?.parentNode?.insertBefore(i,t.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){b1.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{let s=this.options.handlers?.[i];s&&this.addHandler(i,s)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(V.events.EDITOR_CHANGE,()=>{let[i]=this.quill.selection.getRange();this.update(i)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(s=>s.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){b1.warn("ignoring attaching to nonexistent format",e,t);return}let i=t.tagName==="SELECT"?"change":"click";t.addEventListener(i,s=>{let n;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;let a=t.options[t.selectedIndex];a.hasAttribute("selected")?n=!1:n=a.value||!1}else t.classList.contains("ql-active")?n=!1:n=t.value||!t.hasAttribute("value"),s.preventDefault();this.quill.focus();let[o]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,n);else if(this.quill.scroll.query(e).prototype instanceof _t){if(n=prompt(`Enter ${e}`),!n)return;this.quill.updateContents(new x1.default().retain(o.index).delete(o.length).insert({[e]:n}),V.sources.USER)}else this.quill.format(e,n,V.sources.USER);this.update(o)}),this.controls.push([e,t])}update(t){let e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(i=>{let[s,n]=i;if(n.tagName==="SELECT"){let o=null;if(t==null)o=null;else if(e[s]==null)o=n.querySelector("option[selected]");else if(!Array.isArray(e[s])){let a=e[s];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),o=n.querySelector(`option[value="${a}"]`)}o==null?(n.value="",n.selectedIndex=-1):o.selected=!0}else if(t==null)n.classList.remove("ql-active"),n.setAttribute("aria-pressed","false");else if(n.hasAttribute("value")){let o=e[s],a=o===n.getAttribute("value")||o!=null&&o.toString()===n.getAttribute("value")||o==null&&!n.getAttribute("value");n.classList.toggle("ql-active",a),n.setAttribute("aria-pressed",a.toString())}else{let o=e[s]!=null;n.classList.toggle("ql-active",o),n.setAttribute("aria-pressed",o.toString())}})}};Gn.DEFAULTS={};function v1(r,t,e){let i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${t}`),i.setAttribute("aria-pressed","false"),e!=null?(i.value=e,i.setAttribute("aria-label",`${t}: ${e}`)):i.setAttribute("aria-label",t),r.appendChild(i)}function uP(r,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{let i=document.createElement("span");i.classList.add("ql-formats"),e.forEach(s=>{if(typeof s=="string")v1(i,s);else{let n=Object.keys(s)[0],o=s[n];Array.isArray(o)?dP(i,n,o):v1(i,n,o)}}),r.appendChild(i)})}function dP(r,t,e){let i=document.createElement("select");i.classList.add(`ql-${t}`),e.forEach(s=>{let n=document.createElement("option");s!==!1?n.setAttribute("value",String(s)):n.setAttribute("selected","selected"),i.appendChild(n)}),r.appendChild(i)}Gn.DEFAULTS={container:null,handlers:{clean(){let r=this.quill.getSelection();if(r!=null)if(r.length===0){let t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,Z.INLINE)!=null&&this.quill.format(e,!1,V.sources.USER)})}else this.quill.removeFormat(r.index,r.length,V.sources.USER)},direction(r){let{align:t}=this.quill.getFormat();r==="rtl"&&t==null?this.quill.format("align","right",V.sources.USER):!r&&t==="right"&&this.quill.format("align",!1,V.sources.USER),this.quill.format("direction",r,V.sources.USER)},indent(r){let t=this.quill.getSelection(),e=this.quill.getFormat(t),i=parseInt(e.indent||0,10);if(r==="+1"||r==="-1"){let s=r==="+1"?1:-1;e.direction==="rtl"&&(s*=-1),this.quill.format("indent",i+s,V.sources.USER)}},link(r){r===!0&&(r=prompt("Enter link URL:")),this.quill.format("link",r,V.sources.USER)},list(r){let t=this.quill.getSelection(),e=this.quill.getFormat(t);r==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,V.sources.USER):this.quill.format("list","unchecked",V.sources.USER):this.quill.format("list",r,V.sources.USER)}}};var fP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',pP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',gP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',mP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',bP='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',vP='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',xP='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',yP='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',y1='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',wP='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',AP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',kP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',SP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',CP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',EP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',TP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',LP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',MP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',RP='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',IP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',qP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',OP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',NP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',PP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',DP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',FP='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',BP='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',_P='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',zP='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',HP='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',WP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',jP='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',XP='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Qr={align:{"":fP,center:pP,right:gP,justify:mP},background:bP,blockquote:vP,bold:xP,clean:yP,code:y1,"code-block":y1,color:wP,direction:{"":AP,rtl:kP},formula:SP,header:{1:CP,2:EP,3:TP,4:LP,5:MP,6:RP},italic:IP,image:qP,indent:{"+1":OP,"-1":NP},link:PP,list:{bullet:DP,check:FP,ordered:BP},script:{sub:_P,super:zP},strike:HP,table:WP,underline:jP,video:XP};var YP='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',w1=0;function A1(r,t){r.setAttribute(t,`${r.getAttribute(t)!=="true"}`)}var hg=class{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),A1(this.label,"aria-expanded"),A1(this.options,"aria-hidden")}buildItem(t){let e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");let i=t.getAttribute("value");return i&&e.setAttribute("data-value",i),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(e,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break;default:}}),e}buildLabel(){let t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=YP,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){let t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${w1}`,w1+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{let i=this.buildItem(e);t.appendChild(i),e.selected===!0&&this.selectItem(i)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.container.querySelector(".ql-selected");t!==i&&(i?.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){let i=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(i)}else this.selectItem(null);let e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},ts=hg;var ug=class extends ts{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(i=>{i.classList.add("ql-primary")})}buildItem(t){let e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);let i=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";i&&(i.tagName==="line"?i.style.stroke=s:i.style.fill=s)}},Ah=ug;var dg=class extends ts{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(i=>{i.innerHTML=e[i.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);let i=t||this.defaultItem;if(i!=null){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}},kh=dg;var VP=r=>{let{overflowY:t}=getComputedStyle(r,null);return t!=="visible"&&t!=="clip"},fg=class{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,VP(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){let e=t.left+t.width/2-this.root.offsetWidth/2,i=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${i}px`,this.root.classList.remove("ql-flip");let s=this.boundsContainer.getBoundingClientRect(),n=this.root.getBoundingClientRect(),o=0;if(n.right>s.right&&(o=s.right-n.right,this.root.style.left=`${e+o}px`),n.left<s.left&&(o=s.left-n.left,this.root.style.left=`${e+o}px`),n.bottom>s.bottom){let a=n.bottom-n.top,l=t.bottom-t.top+a;this.root.style.top=`${i-l}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},Sh=fg;var UP=[!1,"center","right","justify"],GP=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],$P=[!1,"serif","monospace"],KP=["1","2","3",!1],ZP=["small",!1,"large","huge"],hr=class extends Xn{constructor(t,e){super(t,e);let i=s=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",i);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(n=>{n.container.contains(s.target)||n.close()})};t.emitter.listenDOM("click",document.body,i)}addModule(t){let e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(i=>{(i.getAttribute("class")||"").split(/\s+/).forEach(n=>{if(n.startsWith("ql-")&&(n=n.slice(3),e[n]!=null))if(n==="direction")i.innerHTML=e[n][""]+e[n].rtl;else if(typeof e[n]=="string")i.innerHTML=e[n];else{let o=i.value||"";o!=null&&e[n][o]&&(i.innerHTML=e[n][o])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&xa(s,UP),typeof e.align=="object"))return new kh(s,e.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){let n=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&xa(s,GP,n==="background"?"#ffffff":"#000000"),new Ah(s,e[n])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?xa(s,$P):s.classList.contains("ql-header")?xa(s,KP):s.classList.contains("ql-size")&&xa(s,ZP)),new ts(s)});let i=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(it.events.EDITOR_CHANGE,i)}};hr.DEFAULTS=Be({},Xn.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let r=this.container.querySelector("input.ql-image[type=file]");r==null&&(r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),r.classList.add("ql-image"),r.addEventListener("change",()=>{let t=this.quill.getSelection(!0);this.quill.uploader.upload(t,r.files),r.value=""}),this.container.appendChild(r)),r.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});var $n=class extends Sh{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let i=this.quill.getBounds(this.quill.selection.savedRange);i!=null&&this.position(i),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,it.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,it.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=JP(t);case"formula":{if(!t)break;let e=this.quill.getSelection(!0);if(e!=null){let i=e.index+e.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,it.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(i+1," ",it.sources.USER),this.quill.setSelection(i+2,it.sources.USER)}break}default:}this.textbox.value="",this.hide()}};function JP(r){let t=r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=r.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:r}function xa(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(i=>{let s=document.createElement("option");i===e?s.setAttribute("selected","selected"):s.setAttribute("value",String(i)),r.appendChild(s)})}var QP=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],pg=class extends $n{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e),this.quill.on(it.events.EDITOR_CHANGE,(i,s,n,o)=>{if(i===it.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&o===it.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let a=this.quill.getLines(s.index,s.length);if(a.length===1){let l=this.quill.getBounds(s);l!=null&&this.position(l)}else{let l=a[a.length-1],c=this.quill.getIndex(l),h=Math.min(l.length()-1,s.index+s.length-c),u=this.quill.getBounds(new Te(c,h));u!=null&&this.position(u)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(it.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let t=this.quill.getSelection();if(t!=null){let e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){let e=super.position(t),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",e!==0&&(i.style.marginLeft=`${-1*e-i.offsetWidth/2}px`),e}},ya=class extends hr{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=QP),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new pg(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Qr),this.buildPickers(t.container.querySelectorAll("select"),Qr))}};ya.DEFAULTS=Be({},hr.DEFAULTS,{modules:{toolbar:{handlers:{link(r){r?this.quill.theme.tooltip.edit():this.quill.format("link",!1,V.sources.USER)}}}}});var tD=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],gg=class extends $n{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){let e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,"link",!1,it.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(it.events.SELECTION_CHANGE,(t,e,i)=>{if(t!=null){if(t.length===0&&i===it.sources.USER){let[s,n]=this.quill.scroll.descendant(lr,t.index);if(s!=null){this.linkRange=new Te(t.index-n,s.length());let o=lr.formats(s.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();let a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}},Ch=class extends hr{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=tD),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Qr),this.buildPickers(t.container.querySelectorAll("select"),Qr),this.tooltip=new gg(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,i)=>{t.handlers.link.call(t,!i.format.link)}))}};Ch.DEFAULTS=Be({},hr.DEFAULTS,{modules:{toolbar:{handlers:{link(r){if(r){let t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);let{tooltip:i}=this.quill.theme;i.edit("link",e)}else this.quill.format("link",!1,V.sources.USER)}}}}});var k1=Ch;xh.register({"attributors/attribute/direction":ch,"attributors/class/align":Bp,"attributors/class/background":Ww,"attributors/class/color":Hw,"attributors/class/direction":zp,"attributors/class/font":Wp,"attributors/class/size":jp,"attributors/style/align":lh,"attributors/style/background":fa,"attributors/style/color":da,"attributors/style/direction":hh,"attributors/style/font":uh,"attributors/style/size":dh},!0);xh.register({"formats/align":Bp,"formats/direction":zp,"formats/indent":r1,"formats/background":fa,"formats/color":da,"formats/font":Wp,"formats/size":jp,"formats/blockquote":s1,"formats/code-block":Jt,"formats/header":n1,"formats/list":Jr,"formats/bold":Un,"formats/code":Vn,"formats/italic":o1,"formats/link":lr,"formats/script":a1,"formats/strike":l1,"formats/underline":c1,"formats/formula":h1,"formats/image":d1,"formats/video":p1,"modules/syntax":va,"modules/table":m1,"modules/toolbar":Gn,"themes/bubble":ya,"themes/snow":k1,"ui/icons":Qr,"ui/picker":ts,"ui/icon-picker":kh,"ui/color-picker":Ah,"ui/tooltip":Sh},!0);var mg=xh;var Eh=class extends J{static targets=["textEditor","textInput","titleEditor","titleInput"];connect(){this.initializeEditors()}initializeEditors(){var r=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466","custom-color"],t=["#ffffff00","#ffffff","#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466","#FF69B4","#87CEEB","#00FA9A","#FFD700","#8A2BE2","#40E0D0","custom-color"];this.hasTitleEditorTarget&&(this.titleQuill=new mg(this.titleEditorTarget,{modules:{toolbar:[["bold","italic","underline",{color:r},{background:t}],["clean"]]},theme:"snow",placeholder:"Enter title..."}),this.titleInputTarget.value&&(this.titleQuill.root.innerHTML=this.titleInputTarget.value),this.setupColorHandlers(this.titleQuill),this.titleQuill.on("text-change",()=>{this.updateContent("title")})),this.hasTextEditorTarget&&(this.textQuill=new mg(this.textEditorTarget,{modules:{toolbar:[["bold","italic","underline"],[{color:r},{background:t}],[{header:[1,2,3,!1]}],[{list:"ordered"},{list:"bullet"}],["clean"]]},theme:"snow",placeholder:"Enter text content..."}),this.textInputTarget.value&&(this.textQuill.root.innerHTML=this.textInputTarget.value),this.setupColorHandlers(this.textQuill),this.textQuill.on("text-change",()=>{this.updateContent("text")}))}setupColorHandlers(r){let t=r.getModule("toolbar"),e=(i,s="#000000")=>{let n=prompt("Enter HEX color (e.g. #FF0000)",s);n&&(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(n)?i(n.toUpperCase()):alert("Please enter a valid HEX color (e.g. #FF0000)"))};t.addHandler("color",i=>{if(i==="custom-color"){let s=r.getFormat().color||"#000000";e(n=>{r.format("color",n)},s)}else r.format("color",i)}),t.addHandler("background",i=>{if(i==="custom-color"){let s=r.getFormat().background||"#FFFFFF";e(n=>{r.format("background",n)},s)}else r.format("background",i)})}updateContent(r){if(r==="title"&&this.titleQuill){let t=this.titleQuill.root.innerHTML;this.titleInputTarget.value!==t&&(this.titleInputTarget.value=t,this.titleInputTarget.dispatchEvent(new Event("change",{bubbles:!0})))}else if(r==="text"&&this.textQuill){let t=this.textQuill.root.innerHTML;this.textInputTarget.value!==t&&(this.textInputTarget.value=t,this.textInputTarget.dispatchEvent(new Event("change",{bubbles:!0})))}}disconnect(){this.titleQuill&&(this.titleQuill=null),this.textQuill&&(this.textQuill=null)}};var Th=class extends J{static targets=["moduleEditor","transitionDuration","loadingOptions"];connect(){document.addEventListener("click",this.handleOutsideClick.bind(this))}disconnect(){document.removeEventListener("click",this.handleOutsideClick.bind(this))}handleOutsideClick(r){this.element.contains(r.target)||this.deselectAllModules()}toggleTransitionDuration(r){let t=r?.target||this.element.querySelector('input[name*="[use_transitions]"]');this.hasTransitionDurationTarget&&(this.transitionDurationTarget.style.display=t.checked?"block":"none")}toggleLoadingOptions(r){this.loadingOptionsTarget.classList.toggle("hidden",!r.target.checked)}selectModule(r){r.stopPropagation();let t=r.currentTarget,e=t.dataset.moduleIdValue,i=t.dataset.stepIdValue;this.deselectAllModules(),t.classList.add("border-orange-500","ring-2","ring-orange-200"),this.moduleEditorTarget.classList.remove("-translate-x-full","hidden");let n=`/quiz_builder/${this.element.dataset.quizId}/steps/${i}/quiz_modules/${e}/edit`;Turbo.visit(n,{frame:"module-editor"})}deselectAllModules(){this.element.querySelectorAll("[data-module-id-value]").forEach(r=>{r.classList.remove("border-orange-500","ring-2","ring-orange-200")})}showStepSettings(r){let t=r.currentTarget.dataset.stepId,e=this.element.dataset.quizId;this.moduleEditorTarget.classList.remove("-translate-x-full","hidden");let i=`/quiz_builder/${e}/steps/${t}/settings`;Turbo.visit(i,{frame:"module-editor"})}};var Lh=class extends J{suggestSlug(r){if(r.type!=="blur")return;let e=r.target.value.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),i=this.element.querySelector('[name="quiz[slug]"]');i&&!i.value&&(i.value=e,i.dispatchEvent(new Event("input")))}};var Mh=class extends J{static targets=["container","template","option","preview","generalIcon","generalContent"];static values={moduleId:String};connect(){console.log("Select options controller connected"),this.optionTargets.length===0&&this.addOption()}toggleGeneral(){this.generalContentTarget.classList.toggle("hidden"),this.generalIconTarget.classList.toggle("rotate-180")}addOption(r){let t=this.templateTarget.content.cloneNode(!0);this.containerTarget.appendChild(t),this.containerTarget.lastElementChild.querySelector('input[type="text"]').focus()}removeOption(r){let t=r.currentTarget.closest('[data-select-options-target="option"]');this.optionTargets.length>1&&(t.remove(),this.submitForm())}updateOption(r){if(r.type==="blur"){let e=r.target.closest('[data-select-options-target="option"]').querySelectorAll('input[type="text"], input[type="url"]'),i=Array.from(e).some(n=>n.value.trim()!==""),s=document.activeElement;if(s&&s.tagName==="BUTTON")return;i&&this.submitForm()}}updateDisplayStyle(r){this.submitForm()}submitForm(){let r=this.element.closest("form"),t=new FormData(r);fetch(r.action,{method:"PATCH",headers:{Accept:"text/vnd.turbo-stream.html","X-CSRF-Token":document.querySelector("[name='csrf-token']").content},body:t}).then(e=>e.text()).then(e=>{Turbo.renderStreamMessage(e)})}};var Rh=class extends J{static targets=["input","status","message","submit"];connect(){this.originalValue=this.inputTarget.value}async check(){let r=this.inputTarget.value;if(r===this.originalValue){this.clearStatus();return}let e=await(await fetch(`/quiz_builder/check_slug?slug=${r}`)).json();this.updateStatus(e)}updateStatus(r){this.statusTarget.innerHTML=this.getStatusIcon(r),this.messageTarget.innerHTML=this.getMessage(r),this.submitTarget.disabled=!r.available}getStatusIcon(r){return r.available?'<svg class="w-5 h-5 text-green-500" ...></svg>':'<svg class="w-5 h-5 text-red-500" ...></svg>'}getMessage(r){return r.reserved?'<span class="text-red-600">This URL is reserved</span>':r.exists?'<span class="text-red-600">This URL is already taken</span>':r.available?'<span class="text-green-600">This URL is available</span>':""}clearStatus(){this.statusTarget.innerHTML="",this.messageTarget.innerHTML="",this.submitTarget.disabled=!0}};var Ih=class extends J{static targets=["item"];connect(){this.initializeSortable()}initializeSortable(){this.itemTargets.forEach(r=>{r.setAttribute("draggable",!0),r.addEventListener("dragstart",this.dragStart.bind(this)),r.addEventListener("dragend",this.dragEnd.bind(this)),r.addEventListener("dragover",this.dragOver.bind(this)),r.addEventListener("drop",this.drop.bind(this))})}dragStart(r){let t=r.target.closest('[data-sortable-target="item"]');t&&(r.dataTransfer.effectAllowed="move",r.dataTransfer.setData("text/plain",t.dataset.id),t.classList.add("opacity-50"))}dragEnd(r){let t=r.target.closest('[data-sortable-target="item"]');t&&t.classList.remove("opacity-50"),this.itemTargets.forEach(e=>{e.classList.remove("border-orange-400","border-t-2")})}dragOver(r){r.preventDefault();let t=r.target.closest('[data-sortable-target="item"]');t&&(r.dataTransfer.dropEffect="move",this.itemTargets.forEach(e=>e.classList.remove("border-orange-400","border-t-2")),t.classList.add("border-orange-400","border-t-2"))}async drop(r){r.preventDefault();let t=r.dataTransfer.getData("text/plain"),e=r.target.closest('[data-sortable-target="item"]');if(!e||t===e.dataset.id)return;let i=Array.from(this.itemTargets).indexOf(e)+1,s=document.querySelector("[data-quiz-id]").dataset.quizId;try{if(!(await fetch(`/quiz_builder/${s}/steps/${t}/reposition`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector('[name="csrf-token"]').content},body:JSON.stringify({position:i})})).ok)throw new Error("Failed to reposition");let o=this.itemTargets.find(a=>a.dataset.id===t);o&&this.element.insertBefore(o,e)}catch(n){console.error("Error repositioning:",n)}}};function Mg(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,i=Array(t);e<t;e++)i[e]=r[e];return i}function W1(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Q(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function S1(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Y1(i.key),i)}}function tt(r,t,e){return t&&S1(r.prototype,t),e&&S1(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Aa(r,t){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=Ug(r))||t&&r&&typeof r.length=="number"){e&&(r=e);var i=0,s=function(){};return{s,n:function(){return i>=r.length?{done:!0}:{done:!1,value:r[i++]}},e:function(l){throw l},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,o=!0,a=!1;return{s:function(){e=e.call(r)},n:function(){var l=e.next();return o=l.done,l},e:function(l){a=!0,n=l},f:function(){try{o||e.return==null||e.return()}finally{if(a)throw n}}}}function _a(r){var t=j1();return function(){var e,i=Dh(r);if(t){var s=Dh(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return function(n,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W1(n)}(this,e)}}function Ph(r,t,e){return(t=Y1(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Dh(r){return Dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dh(r)}function za(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Rg(r,t)}function j1(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j1=function(){return!!r})()}function C1(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,i)}return e}function K(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?C1(Object(e),!0).forEach(function(i){Ph(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):C1(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}function Rg(r,t){return Rg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},Rg(r,t)}function X1(r,t){return function(e){if(Array.isArray(e))return e}(r)||function(e,i){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var n,o,a,l,c=[],h=!0,u=!1;try{if(a=(s=s.call(e)).next,i===0){if(Object(s)!==s)return;h=!1}else for(;!(h=(n=a.call(s)).done)&&(c.push(n.value),c.length!==i);h=!0);}catch(d){u=!0,o=d}finally{try{if(!h&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(u)throw o}}return c}}(r,t)||Ug(r,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function se(r){return function(t){if(Array.isArray(t))return Mg(t)}(r)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(r)||Ug(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Y1(r){var t=function(e,i){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,i||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}(r,"string");return typeof t=="symbol"?t:t+""}function ro(r){return ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ro(r)}function Ug(r,t){if(r){if(typeof r=="string")return Mg(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Mg(r,t):void 0}}var F=function(){function r(){Q(this,r)}return tt(r,[{key:"shadeRGBColor",value:function(t,e){var i=e.split(","),s=t<0?0:255,n=t<0?-1*t:t,o=parseInt(i[0].slice(4),10),a=parseInt(i[1],10),l=parseInt(i[2],10);return"rgb("+(Math.round((s-o)*n)+o)+","+(Math.round((s-a)*n)+a)+","+(Math.round((s-l)*n)+l)+")"}},{key:"shadeHexColor",value:function(t,e){var i=parseInt(e.slice(1),16),s=t<0?0:255,n=t<0?-1*t:t,o=i>>16,a=i>>8&255,l=255&i;return"#"+(16777216+65536*(Math.round((s-o)*n)+o)+256*(Math.round((s-a)*n)+a)+(Math.round((s-l)*n)+l)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,e){return r.isColorHex(e)?this.shadeHexColor(t,e):this.shadeRGBColor(t,e)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(t){return t&&ro(t)==="object"&&!Array.isArray(t)&&t!=null}},{key:"is",value:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}},{key:"listToArray",value:function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i}},{key:"extend",value:function(t,e){var i=this;typeof Object.assign!="function"&&(Object.assign=function(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),a=1;a<arguments.length;a++){var l=arguments[a];if(l!=null)for(var c in l)l.hasOwnProperty(c)&&(o[c]=l[c])}return o});var s=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach(function(n){i.isObject(e[n])&&n in t?s[n]=i.extend(t[n],e[n]):Object.assign(s,Ph({},n,e[n]))}),s}},{key:"extendArray",value:function(t,e){var i=[];return t.map(function(s){i.push(r.extend(e,s))}),t=i}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(t){var e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(t===null||ro(t)!=="object")return t;if(i.has(t))return i.get(t);if(Array.isArray(t)){e=[],i.set(t,e);for(var s=0;s<t.length;s++)e[s]=this.clone(t[s],i)}else if(t instanceof Date)e=new Date(t.getTime());else for(var n in e={},i.set(t,e),t)t.hasOwnProperty(n)&&(e[n]=this.clone(t[n],i));return e}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return t===null?t:parseFloat(t)}},{key:"stripNumber",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(t)?t:parseFloat(t.toPrecision(e))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){return t.toString().includes("e")?Math.round(t):t}},{key:"elementExists",value:function(t){return!(!t||!t.isConnected)}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t,null),i=t.clientHeight,s=t.clientWidth;return i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),[s-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i]}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce(function(e,i){return Array.isArray(i)&&(i=i.reduce(function(s,n){return s.length>n.length?s:n})),e.length>i.length?e:i},0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;t.substring(0,1)!=="#"&&(t="#999999");var i=t.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var s=0;s<i.length;s++)i[s]=parseInt(i[s].length===1?i[s]+i[s]:i[s],16);return e!==void 0&&i.push(e),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&t.length===4?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"getPolygonPos",value:function(t,e){for(var i=[],s=2*Math.PI/e,n=0;n<e;n++){var o={};o.x=t*Math.sin(n*s),o.y=-t*Math.cos(n*s),i.push(o)}return i}},{key:"polarToCartesian",value:function(t,e,i,s){var n=(s-90)*Math.PI/180;return{x:t+i*Math.cos(n),y:e+i*Math.sin(n)}}},{key:"escapeString",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",i=t.toString().slice();return i=i.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,i){if(i>=t.length)for(var s=i-t.length+1;s--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style.key=e[i])}},{key:"preciseAddition",value:function(t,e){var i=(String(t).split(".")[1]||"").length,s=(String(e).split(".")[1]||"").length,n=Math.pow(10,Math.max(i,s));return(Math.round(t*n)+Math.round(e*n))/n}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isMsEdge",value:function(){var t=window.navigator.userAgent,e=t.indexOf("Edge/");return e>0&&parseInt(t.substring(e+5,t.indexOf(".",e)),10)}},{key:"getGCD",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,s=Math.pow(10,i-Math.floor(Math.log10(Math.max(t,e))));for(t=Math.round(Math.abs(t)*s),e=Math.round(Math.abs(e)*s);e;){var n=e;e=t%e,t=n}return t/s}},{key:"getPrimeFactors",value:function(t){for(var e=[],i=2;t>=2;)t%i==0?(e.push(i),t/=i):i++;return e}},{key:"mod",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,s=Math.pow(10,i-Math.floor(Math.log10(Math.max(t,e))));return(t=Math.round(Math.abs(t)*s))%(e=Math.round(Math.abs(e)*s))/s}}]),r}(),co=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"animateLine",value:function(t,e,i,s){t.attr(e).animate(s).attr(i)}},{key:"animateMarker",value:function(t,e,i,s){t.attr({opacity:0}).animate(e).attr({opacity:1}).after(function(){s()})}},{key:"animateRect",value:function(t,e,i,s,n){t.attr(e).animate(s).attr(i).after(function(){return n()})}},{key:"animatePathsGradually",value:function(t){var e=t.el,i=t.realIndex,s=t.j,n=t.fill,o=t.pathFrom,a=t.pathTo,l=t.speed,c=t.delay,h=this.w,u=0;h.config.chart.animations.animateGradually.enabled&&(u=h.config.chart.animations.animateGradually.delay),h.config.chart.animations.dynamicAnimation.enabled&&h.globals.dataChanged&&h.config.chart.type!=="bar"&&(u=0),this.morphSVG(e,i,s,h.config.chart.type!=="line"||h.globals.comboCharts?n:"stroke",o,a,l,c*u)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(t){var e=t.el;e.classList.remove("apexcharts-element-hidden"),e.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,this.showDelayedElements(),typeof e.config.chart.events.animationEnd=="function"&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,i,s,n,o,a,l){var c=this,h=this.w;n||(n=t.attr("pathFrom")),o||(o=t.attr("pathTo"));var u=function(d){return h.config.chart.type==="radar"&&(a=1),"M 0 ".concat(h.globals.gridHeight)};(!n||n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n=u()),(!o.trim()||o.indexOf("undefined")>-1||o.indexOf("NaN")>-1)&&(o=u()),h.globals.shouldAnimate||(a=1),t.plot(n).animate(1,l).plot(n).animate(a,l).plot(o).after(function(){F.isNumber(i)?i===h.globals.series[h.globals.maxValsInArrayIndex].length-2&&h.globals.shouldAnimate&&c.animationCompleted(t):s!=="none"&&h.globals.shouldAnimate&&(!h.globals.comboCharts&&e===h.globals.series.length-1||h.globals.comboCharts)&&c.animationCompleted(t),c.showDelayedElements()})}}]),r}(),Ig={},V1=[];function dt(r,t){if(Array.isArray(r))for(let e of r)dt(e,t);else if(typeof r!="object")U1(Object.getOwnPropertyNames(t)),Ig[r]=Object.assign(Ig[r]||{},t);else for(let e in r)dt(e,r[e])}function Xe(r){return Ig[r]||{}}function U1(r){V1.push(...r)}function Gg(r,t){let e,i=r.length,s=[];for(e=0;e<i;e++)s.push(t(r[e]));return s}function bg(r){return r%360*Math.PI/180}function ho(r){return r.charAt(0).toUpperCase()+r.slice(1)}function uo(r,t,e,i){return t!=null&&e!=null||(i=i||r.bbox(),t==null?t=i.width/i.height*e:e==null&&(e=i.height/i.width*t)),{width:t,height:e}}function qg(r,t){let e=r.origin,i=r.ox!=null?r.ox:r.originX!=null?r.originX:"center",s=r.oy!=null?r.oy:r.originY!=null?r.originY:"center";e!=null&&([i,s]=Array.isArray(e)?e:typeof e=="object"?[e.x,e.y]:[e,e]);let n=typeof i=="string",o=typeof s=="string";if(n||o){let{height:a,width:l,x:c,y:h}=t.bbox();n&&(i=i.includes("left")?c:i.includes("right")?c+l:c+l/2),o&&(s=s.includes("top")?h:s.includes("bottom")?h+a:h+a/2)}return[i,s]}var eD=new Set(["desc","metadata","title"]),Og=r=>eD.has(r.nodeName),G1=(r,t,e={})=>{let i={...t};for(let s in i)i[s].valueOf()===e[s]&&delete i[s];Object.keys(i).length?r.node.setAttribute("data-svgjs",JSON.stringify(i)):(r.node.removeAttribute("data-svgjs"),r.node.removeAttribute("svgjs:data"))},$g="http://www.w3.org/2000/svg",vg="http://www.w3.org/2000/xmlns/",fo="http://www.w3.org/1999/xlink",yt={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function Ha(){return yt.window}var Kg=class{},Fs={},Zg="___SYMBOL___ROOT___";function Ma(r,t=$g){return yt.document.createElementNS(t,r)}function Le(r,t=!1){if(r instanceof Kg)return r;if(typeof r=="object")return xg(r);if(r==null)return new Fs[Zg];if(typeof r=="string"&&r.charAt(0)!=="<")return xg(yt.document.querySelector(r));let e=t?yt.document.createElement("div"):Ma("svg");return e.innerHTML=r,r=xg(e.firstChild),e.removeChild(e.firstChild),r}function Rt(r,t){return t&&(t instanceof yt.window.Node||t.ownerDocument&&t instanceof t.ownerDocument.defaultView.Node)?t:Ma(r)}function ui(r){if(!r)return null;if(r.instance instanceof Kg)return r.instance;if(r.nodeName==="#document-fragment")return new Fs.Fragment(r);let t=ho(r.nodeName||"Dom");return t==="LinearGradient"||t==="RadialGradient"?t="Gradient":Fs[t]||(t="Dom"),new Fs[t](r)}var xg=ui;function wt(r,t=r.name,e=!1){return Fs[t]=r,e&&(Fs[Zg]=r),U1(Object.getOwnPropertyNames(r.prototype)),r}var iD=1e3;function $1(r){return"Svgjs"+ho(r)+iD++}function K1(r){for(let t=r.children.length-1;t>=0;t--)K1(r.children[t]);return r.id&&(r.id=$1(r.nodeName)),r}function at(r,t){let e,i;for(i=(r=Array.isArray(r)?r:[r]).length-1;i>=0;i--)for(e in t)r[i].prototype[e]=t[e]}function Mt(r){return function(...t){let e=t[t.length-1];return!e||e.constructor!==Object||e instanceof Array?r.apply(this,t):r.apply(this,t.slice(0,-1)).attr(e)}}dt("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){let r=this.position();return this.parent().add(this.remove(),r+1),this},backward:function(){let r=this.position();return this.parent().add(this.remove(),r?r-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(r){(r=Le(r)).remove();let t=this.position();return this.parent().add(r,t),this},after:function(r){(r=Le(r)).remove();let t=this.position();return this.parent().add(r,t+1),this},insertBefore:function(r){return(r=Le(r)).before(this),this},insertAfter:function(r){return(r=Le(r)).after(this),this}});var Z1=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,rD=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,sD=/rgb\((\d+),(\d+),(\d+)\)/,nD=/(#[a-z_][a-z0-9\-_]*)/i,oD=/\)\s*,?\s*/,aD=/\s/g,E1=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,T1=/^rgb\(/,L1=/^(\s+)?$/,M1=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,lD=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,br=/[\s,]+/,Jg=/[MLHVCSQTAZ]/i;function cD(r){let t=Math.round(r),e=Math.max(0,Math.min(255,t)).toString(16);return e.length===1?"0"+e:e}function Kn(r,t){for(let e=t.length;e--;)if(r[t[e]]==null)return!1;return!0}function yg(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+6*(t-r)*e:e<.5?t:e<2/3?r+(t-r)*(2/3-e)*6:r}dt("Dom",{classes:function(){let r=this.attr("class");return r==null?[]:r.trim().split(br)},hasClass:function(r){return this.classes().indexOf(r)!==-1},addClass:function(r){if(!this.hasClass(r)){let t=this.classes();t.push(r),this.attr("class",t.join(" "))}return this},removeClass:function(r){return this.hasClass(r)&&this.attr("class",this.classes().filter(function(t){return t!==r}).join(" ")),this},toggleClass:function(r){return this.hasClass(r)?this.removeClass(r):this.addClass(r)}}),dt("Dom",{css:function(r,t){let e={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(i){return!!i.length}).forEach(function(i){let s=i.split(/\s*:\s*/);e[s[0]]=s[1]}),e;if(arguments.length<2){if(Array.isArray(r)){for(let i of r){let s=i;e[i]=this.node.style.getPropertyValue(s)}return e}if(typeof r=="string")return this.node.style.getPropertyValue(r);if(typeof r=="object")for(let i in r)this.node.style.setProperty(i,r[i]==null||L1.test(r[i])?"":r[i])}return arguments.length===2&&this.node.style.setProperty(r,t==null||L1.test(t)?"":t),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return this.css("display")!=="none"}}),dt("Dom",{data:function(r,t,e){if(r==null)return this.data(Gg(function(i,s){let n,o=i.length,a=[];for(n=0;n<o;n++)s(i[n])&&a.push(i[n]);return a}(this.node.attributes,i=>i.nodeName.indexOf("data-")===0),i=>i.nodeName.slice(5)));if(r instanceof Array){let i={};for(let s of r)i[s]=this.data(s);return i}if(typeof r=="object")for(t in r)this.data(t,r[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+r))}catch{return this.attr("data-"+r)}else this.attr("data-"+r,t===null?null:e===!0||typeof t=="string"||typeof t=="number"?t:JSON.stringify(t));return this}}),dt("Dom",{remember:function(r,t){if(typeof arguments[0]=="object")for(let e in r)this.remember(e,r[e]);else{if(arguments.length===1)return this.memory()[r];this.memory()[r]=t}return this},forget:function(){if(arguments.length===0)this._memory={};else for(let r=arguments.length-1;r>=0;r--)delete this.memory()[arguments[r]];return this},memory:function(){return this._memory=this._memory||{}}});var pi=class r{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof r||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&typeof t.r=="number"&&typeof t.g=="number"&&typeof t.b=="number"}static random(t="vibrant",e){let{random:i,round:s,sin:n,PI:o}=Math;if(t==="vibrant"){let a=24*i()+57,l=38*i()+45,c=360*i();return new r(a,l,c,"lch")}if(t==="sine"){let a=s(80*n(2*o*(e=e??i())/.5+.01)+150),l=s(50*n(2*o*e/.5+4.6)+200),c=s(100*n(2*o*e/.5+2.3)+150);return new r(a,l,c)}if(t==="pastel"){let a=8*i()+86,l=17*i()+9,c=360*i();return new r(a,l,c,"lch")}if(t==="dark"){let a=10+10*i(),l=50*i()+86,c=360*i();return new r(a,l,c,"lch")}if(t==="rgb"){let a=255*i(),l=255*i(),c=255*i();return new r(a,l,c)}if(t==="lab"){let a=100*i(),l=256*i()-128,c=256*i()-128;return new r(a,l,c,"lab")}if(t==="grey"){let a=255*i();return new r(a,a,a)}throw new Error("Unsupported random color mode")}static test(t){return typeof t=="string"&&(E1.test(t)||T1.test(t))}cmyk(){let{_a:t,_b:e,_c:i}=this.rgb(),[s,n,o]=[t,e,i].map(l=>l/255),a=Math.min(1-s,1-n,1-o);return a===1?new r(0,0,0,1,"cmyk"):new r((1-s-a)/(1-a),(1-n-a)/(1-a),(1-o-a)/(1-a),a,"cmyk")}hsl(){let{_a:t,_b:e,_c:i}=this.rgb(),[s,n,o]=[t,e,i].map(d=>d/255),a=Math.max(s,n,o),l=Math.min(s,n,o),c=(a+l)/2,h=a===l,u=a-l;return new r(360*(h?0:a===s?((n-o)/u+(n<o?6:0))/6:a===n?((o-s)/u+2)/6:a===o?((s-n)/u+4)/6:0),100*(h?0:c>.5?u/(2-a-l):u/(a+l)),100*c,"hsl")}init(t=0,e=0,i=0,s=0,n="rgb"){if(t=t||0,this.space)for(let u in this.space)delete this[this.space[u]];if(typeof t=="number")n=typeof s=="string"?s:n,s=typeof s=="string"?0:s,Object.assign(this,{_a:t,_b:e,_c:i,_d:s,space:n});else if(t instanceof Array)this.space=e||(typeof t[3]=="string"?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){let u=function(d,f){let g=Kn(d,"rgb")?{_a:d.r,_b:d.g,_c:d.b,_d:0,space:"rgb"}:Kn(d,"xyz")?{_a:d.x,_b:d.y,_c:d.z,_d:0,space:"xyz"}:Kn(d,"hsl")?{_a:d.h,_b:d.s,_c:d.l,_d:0,space:"hsl"}:Kn(d,"lab")?{_a:d.l,_b:d.a,_c:d.b,_d:0,space:"lab"}:Kn(d,"lch")?{_a:d.l,_b:d.c,_c:d.h,_d:0,space:"lch"}:Kn(d,"cmyk")?{_a:d.c,_b:d.m,_c:d.y,_d:d.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return g.space=f||g.space,g}(t,e);Object.assign(this,u)}else if(typeof t=="string")if(T1.test(t)){let u=t.replace(aD,""),[d,f,g]=sD.exec(u).slice(1,4).map(p=>parseInt(p));Object.assign(this,{_a:d,_b:f,_c:g,_d:0,space:"rgb"})}else{if(!E1.test(t))throw Error("Unsupported string format, can't construct Color");{let u=p=>parseInt(p,16),[,d,f,g]=rD.exec(function(p){return p.length===4?["#",p.substring(1,2),p.substring(1,2),p.substring(2,3),p.substring(2,3),p.substring(3,4),p.substring(3,4)].join(""):p}(t)).map(u);Object.assign(this,{_a:d,_b:f,_c:g,_d:0,space:"rgb"})}}let{_a:o,_b:a,_c:l,_d:c}=this,h=this.space==="rgb"?{r:o,g:a,b:l}:this.space==="xyz"?{x:o,y:a,z:l}:this.space==="hsl"?{h:o,s:a,l}:this.space==="lab"?{l:o,a,b:l}:this.space==="lch"?{l:o,c:a,h:l}:this.space==="cmyk"?{c:o,m:a,y:l,k:c}:{};Object.assign(this,h)}lab(){let{x:t,y:e,z:i}=this.xyz();return new r(116*e-16,500*(t-e),200*(e-i),"lab")}lch(){let{l:t,a:e,b:i}=this.lab(),s=Math.sqrt(e**2+i**2),n=180*Math.atan2(i,e)/Math.PI;return n<0&&(n*=-1,n=360-n),new r(t,s,n,"lch")}rgb(){if(this.space==="rgb")return this;if((t=this.space)==="lab"||t==="xyz"||t==="lch"){let{x:e,y:i,z:s}=this;if(this.space==="lab"||this.space==="lch"){let{l:f,a:g,b:p}=this;if(this.space==="lch"){let{c:A,h:C}=this,M=Math.PI/180;g=A*Math.cos(M*C),p=A*Math.sin(M*C)}let b=(f+16)/116,m=g/500+b,x=b-p/200,v=16/116,w=.008856,y=7.787;e=.95047*(m**3>w?m**3:(m-v)/y),i=1*(b**3>w?b**3:(b-v)/y),s=1.08883*(x**3>w?x**3:(x-v)/y)}let n=3.2406*e+-1.5372*i+-.4986*s,o=-.9689*e+1.8758*i+.0415*s,a=.0557*e+-.204*i+1.057*s,l=Math.pow,c=.0031308,h=n>c?1.055*l(n,1/2.4)-.055:12.92*n,u=o>c?1.055*l(o,1/2.4)-.055:12.92*o,d=a>c?1.055*l(a,1/2.4)-.055:12.92*a;return new r(255*h,255*u,255*d)}if(this.space==="hsl"){let{h:e,s:i,l:s}=this;if(e/=360,i/=100,s/=100,i===0)return s*=255,new r(s,s,s);let n=s<.5?s*(1+i):s+i-s*i,o=2*s-n,a=255*yg(o,n,e+1/3),l=255*yg(o,n,e),c=255*yg(o,n,e-1/3);return new r(a,l,c)}if(this.space==="cmyk"){let{c:e,m:i,y:s,k:n}=this,o=255*(1-Math.min(1,e*(1-n)+n)),a=255*(1-Math.min(1,i*(1-n)+n)),l=255*(1-Math.min(1,s*(1-n)+n));return new r(o,a,l)}return this;var t}toArray(){let{_a:t,_b:e,_c:i,_d:s,space:n}=this;return[t,e,i,s,n]}toHex(){let[t,e,i]=this._clamped().map(cD);return`#${t}${e}${i}`}toRgb(){let[t,e,i]=this._clamped();return`rgb(${t},${e},${i})`}toString(){return this.toHex()}xyz(){let{_a:t,_b:e,_c:i}=this.rgb(),[s,n,o]=[t,e,i].map(b=>b/255),a=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,l=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,c=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,h=(.4124*a+.3576*l+.1805*c)/.95047,u=(.2126*a+.7152*l+.0722*c)/1,d=(.0193*a+.1192*l+.9505*c)/1.08883,f=h>.008856?Math.pow(h,1/3):7.787*h+16/116,g=u>.008856?Math.pow(u,1/3):7.787*u+16/116,p=d>.008856?Math.pow(d,1/3):7.787*d+16/116;return new r(f,g,p,"xyz")}_clamped(){let{_a:t,_b:e,_c:i}=this.rgb(),{max:s,min:n,round:o}=Math;return[t,e,i].map(a=>s(0,n(o(a),255)))}},St=class r{constructor(...t){this.init(...t)}clone(){return new r(this)}init(t,e){let n=Array.isArray(t)?{x:t[0],y:t[1]}:typeof t=="object"?{x:t.x,y:t.y}:{x:t,y:e};return this.x=n.x==null?0:n.x,this.y=n.y==null?0:n.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){ft.isMatrixLike(t)||(t=new ft(t));let{x:e,y:i}=this;return this.x=t.a*e+t.c*i+t.e,this.y=t.b*e+t.d*i+t.f,this}};function Zn(r,t,e){return Math.abs(t-r)<(e||1e-6)}var ft=class r{constructor(...t){this.init(...t)}static formatTransforms(t){let e=t.flip==="both"||t.flip===!0,i=t.flip&&(e||t.flip==="x")?-1:1,s=t.flip&&(e||t.flip==="y")?-1:1,n=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,a=t.scale&&t.scale.length?t.scale[0]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleX)?t.scaleX*i:i,l=t.scale&&t.scale.length?t.scale[1]*s:isFinite(t.scale)?t.scale*s:isFinite(t.scaleY)?t.scaleY*s:s,c=t.shear||0,h=t.rotate||t.theta||0,u=new St(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),d=u.x,f=u.y,g=new St(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),p=g.x,b=g.y,m=new St(t.translate||t.tx||t.translateX,t.ty||t.translateY),x=m.x,v=m.y,w=new St(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:a,scaleY:l,skewX:n,skewY:o,shear:c,theta:h,rx:w.x,ry:w.y,tx:x,ty:v,ox:d,oy:f,px:p,py:b}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return t.a!=null||t.b!=null||t.c!=null||t.d!=null||t.e!=null||t.f!=null}static matrixMultiply(t,e,i){let s=t.a*e.a+t.c*e.b,n=t.b*e.a+t.d*e.b,o=t.a*e.c+t.c*e.d,a=t.b*e.c+t.d*e.d,l=t.e+t.a*e.e+t.c*e.f,c=t.f+t.b*e.e+t.d*e.f;return i.a=s,i.b=n,i.c=o,i.d=a,i.e=l,i.f=c,i}around(t,e,i){return this.clone().aroundO(t,e,i)}aroundO(t,e,i){let s=t||0,n=e||0;return this.translateO(-s,-n).lmultiplyO(i).translateO(s,n)}clone(){return new r(this)}decompose(t=0,e=0){let i=this.a,s=this.b,n=this.c,o=this.d,a=this.e,l=this.f,c=i*o-s*n,h=c>0?1:-1,u=h*Math.sqrt(i*i+s*s),d=Math.atan2(h*s,h*i),f=180/Math.PI*d,g=Math.cos(d),p=Math.sin(d),b=(i*n+s*o)/c,m=n*u/(b*i-s)||o*u/(b*s+i);return{scaleX:u,scaleY:m,shear:b,rotate:f,translateX:a-t+t*g*u+e*(b*g*u-p*m),translateY:l-e+t*p*u+e*(b*p*u+g*m),originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;let e=new r(t);return Zn(this.a,e.a)&&Zn(this.b,e.b)&&Zn(this.c,e.c)&&Zn(this.d,e.d)&&Zn(this.e,e.e)&&Zn(this.f,e.f)}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return t==="x"?this.scaleO(-1,1,e,0):t==="y"?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}init(t){let e=r.fromArray([1,0,0,1,0,0]);return t=t instanceof ge?t.matrixify():typeof t=="string"?r.fromArray(t.split(br).map(parseFloat)):Array.isArray(t)?r.fromArray(t):typeof t=="object"&&r.isMatrixLike(t)?t:typeof t=="object"?new r().transform(t):arguments.length===6?r.fromArray([].slice.call(arguments)):e,this.a=t.a!=null?t.a:e.a,this.b=t.b!=null?t.b:e.b,this.c=t.c!=null?t.c:e.c,this.d=t.d!=null?t.d:e.d,this.e=t.e!=null?t.e:e.e,this.f=t.f!=null?t.f:e.f,this}inverse(){return this.clone().inverseO()}inverseO(){let t=this.a,e=this.b,i=this.c,s=this.d,n=this.e,o=this.f,a=t*s-e*i;if(!a)throw new Error("Cannot invert "+this);let l=s/a,c=-e/a,h=-i/a,u=t/a,d=-(l*n+h*o),f=-(c*n+u*o);return this.a=l,this.b=c,this.c=h,this.d=u,this.e=d,this.f=f,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){let e=t instanceof r?t:new r(t);return r.matrixMultiply(e,this,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){let e=t instanceof r?t:new r(t);return r.matrixMultiply(this,e,this)}rotate(t,e,i){return this.clone().rotateO(t,e,i)}rotateO(t,e=0,i=0){t=bg(t);let s=Math.cos(t),n=Math.sin(t),{a:o,b:a,c:l,d:c,e:h,f:u}=this;return this.a=o*s-a*n,this.b=a*s+o*n,this.c=l*s-c*n,this.d=c*s+l*n,this.e=h*s-u*n+i*n-e*s+e,this.f=u*s+h*n-e*n-i*s+i,this}scale(){return this.clone().scaleO(...arguments)}scaleO(t,e=t,i=0,s=0){arguments.length===3&&(s=i,i=e,e=t);let{a:n,b:o,c:a,d:l,e:c,f:h}=this;return this.a=n*t,this.b=o*e,this.c=a*t,this.d=l*e,this.e=c*t-i*t+i,this.f=h*e-s*e+s,this}shear(t,e,i){return this.clone().shearO(t,e,i)}shearO(t,e=0,i=0){let{a:s,b:n,c:o,d:a,e:l,f:c}=this;return this.a=s+n*t,this.c=o+a*t,this.e=l+c*t-i*t,this}skew(){return this.clone().skewO(...arguments)}skewO(t,e=t,i=0,s=0){arguments.length===3&&(s=i,i=e,e=t),t=bg(t),e=bg(e);let n=Math.tan(t),o=Math.tan(e),{a,b:l,c,d:h,e:u,f:d}=this;return this.a=a+l*n,this.b=l+a*o,this.c=c+h*n,this.d=h+c*o,this.e=u+d*n-s*n,this.f=d+u*o-i*o,this}skewX(t,e,i){return this.skew(t,0,e,i)}skewY(t,e,i){return this.skew(0,t,e,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(r.isMatrixLike(t))return new r(t).multiplyO(this);let e=r.formatTransforms(t),{x:i,y:s}=new St(e.ox,e.oy).transform(this),n=new r().translateO(e.rx,e.ry).lmultiplyO(this).translateO(-i,-s).scaleO(e.scaleX,e.scaleY).skewO(e.skewX,e.skewY).shearO(e.shear).rotateO(e.theta).translateO(i,s);if(isFinite(e.px)||isFinite(e.py)){let o=new St(i,s).transform(n),a=isFinite(e.px)?e.px-o.x:0,l=isFinite(e.py)?e.py-o.y:0;n.translateO(a,l)}return n.translateO(e.tx,e.ty),n}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}};function es(){if(!es.nodes){let r=Le().size(2,0);r.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),r.attr("focusable","false"),r.attr("aria-hidden","true");let t=r.path().node;es.nodes={svg:r,path:t}}if(!es.nodes.svg.node.parentNode){let r=yt.document.body||yt.document.documentElement;es.nodes.svg.addTo(r)}return es.nodes}function J1(r){return!(r.width||r.height||r.x||r.y)}wt(ft,"Matrix");var Qt=class r{constructor(...t){this.init(...t)}addOffset(){return this.x+=yt.window.pageXOffset,this.y+=yt.window.pageYOffset,new r(this)}init(t){return t=typeof t=="string"?t.split(br).map(parseFloat):Array.isArray(t)?t:typeof t=="object"?[t.left!=null?t.left:t.x,t.top!=null?t.top:t.y,t.width,t.height]:arguments.length===4?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return J1(this)}merge(t){let e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),s=Math.max(this.x+this.width,t.x+t.width)-e,n=Math.max(this.y+this.height,t.y+t.height)-i;return new r(e,i,s,n)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof ft||(t=new ft(t));let e=1/0,i=-1/0,s=1/0,n=-1/0;return[new St(this.x,this.y),new St(this.x2,this.y),new St(this.x,this.y2),new St(this.x2,this.y2)].forEach(function(o){o=o.transform(t),e=Math.min(e,o.x),i=Math.max(i,o.x),s=Math.min(s,o.y),n=Math.max(n,o.y)}),new r(e,s,i-e,n-s)}};function R1(r,t,e){let i;try{if(i=t(r.node),J1(i)&&(s=r.node)!==yt.document&&!(yt.document.documentElement.contains||function(n){for(;n.parentNode;)n=n.parentNode;return n===yt.document}).call(yt.document.documentElement,s))throw new Error("Element not in the dom")}catch{i=e(r)}var s;return i}dt({viewbox:{viewbox(r,t,e,i){return r==null?new Qt(this.attr("viewBox")):this.attr("viewBox",new Qt(r,t,e,i))},zoom(r,t){let{width:e,height:i}=this.attr(["width","height"]);if((e||i)&&typeof e!="string"&&typeof i!="string"||(e=this.node.clientWidth,i=this.node.clientHeight),!e||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");let s=this.viewbox(),n=e/s.width,o=i/s.height,a=Math.min(n,o);if(r==null)return a;let l=a/r;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),t=t||new St(e/2/n+s.x,i/2/o+s.y);let c=new Qt(s).transform(new ft({scale:l,origin:t}));return this.viewbox(c)}}}),wt(Qt,"Box");var gr=class extends Array{constructor(t=[],...e){if(super(t,...e),typeof t=="number")return this;this.length=0,this.push(...t)}};at([gr],{each(r,...t){return typeof r=="function"?this.map((e,i,s)=>r.call(e,e,i,s)):this.map(e=>e[r](...t))},toArray(){return Array.prototype.concat.apply([],this)}});var hD=["toArray","constructor","each"];function Ws(r,t){return new gr(Gg((t||yt.document).querySelectorAll(r),function(e){return ui(e)}))}gr.extend=function(r){r=r.reduce((t,e)=>(hD.includes(e)||e[0]==="_"||(e in Array.prototype&&(t["$"+e]=Array.prototype[e]),t[e]=function(...i){return this.each(e,...i)}),t),{}),at([gr],r)};var uD=0,Q1={};function tA(r){let t=r.getEventHolder();return t===yt.window&&(t=Q1),t.events||(t.events={}),t.events}function Qg(r){return r.getEventTarget()}function dr(r,t,e,i,s){let n=e.bind(i||r),o=Le(r),a=tA(o),l=Qg(o);t=Array.isArray(t)?t:t.split(br),e._svgjsListenerId||(e._svgjsListenerId=++uD),t.forEach(function(c){let h=c.split(".")[0],u=c.split(".")[1]||"*";a[h]=a[h]||{},a[h][u]=a[h][u]||{},a[h][u][e._svgjsListenerId]=n,l.addEventListener(h,n,s||!1)})}function di(r,t,e,i){let s=Le(r),n=tA(s),o=Qg(s);(typeof e!="function"||(e=e._svgjsListenerId))&&(t=Array.isArray(t)?t:(t||"").split(br)).forEach(function(a){let l=a&&a.split(".")[0],c=a&&a.split(".")[1],h,u;if(e)n[l]&&n[l][c||"*"]&&(o.removeEventListener(l,n[l][c||"*"][e],i||!1),delete n[l][c||"*"][e]);else if(l&&c){if(n[l]&&n[l][c]){for(u in n[l][c])di(o,[l,c].join("."),u);delete n[l][c]}}else if(c)for(a in n)for(h in n[a])c===h&&di(o,[a,c].join("."));else if(l){if(n[l]){for(h in n[l])di(o,[l,h].join("."));delete n[l]}}else{for(a in n)di(o,a);(function(d){let f=d.getEventHolder();f===yt.window&&(f=Q1),f.events&&(f.events={})})(s)}})}var _s=class extends Kg{addEventListener(){}dispatch(t,e,i){return function(s,n,o,a){let l=Qg(s);return n instanceof yt.window.Event||(n=new yt.window.CustomEvent(n,{detail:o,cancelable:!0,...a})),l.dispatchEvent(n),n}(this,t,e,i)}dispatchEvent(t){let e=this.getEventHolder().events;if(!e)return!0;let i=e[t.type];for(let s in i)for(let n in i[s])i[s][n](t);return!t.defaultPrevented}fire(t,e,i){return this.dispatch(t,e,i),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e,i){return di(this,t,e,i),this}on(t,e,i,s){return dr(this,t,e,i,s),this}removeEventListener(){}};function I1(){}wt(_s,"EventTarget");var wg=400,dD=">",fD=0,pD={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"},mr=class extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return typeof t=="number"||(this.length=0,this.push(...this.parse(t))),this}parse(t=[]){return t instanceof Array?t:t.trim().split(br).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){let t=[];return t.push(...this),t}},xt=class r{constructor(...t){this.init(...t)}convert(t){return new r(this.value,t)}divide(t){return t=new r(t),new r(this/t,this.unit||t.unit)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"",typeof t=="number"?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:typeof t=="string"?(e=t.match(Z1))&&(this.value=parseFloat(e[1]),e[5]==="%"?this.value/=100:e[5]==="s"&&(this.value*=1e3),this.unit=e[5]):t instanceof r&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new r(t),new r(this-t,this.unit||t.unit)}plus(t){return t=new r(t),new r(this+t,this.unit||t.unit)}times(t){return t=new r(t),new r(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(1e8*this.value)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}},gD=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),eA=[],rs=class r extends _s{constructor(t,e){super(),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return(t=Le(t)).removeNamespace&&this.node instanceof yt.window.SVGElement&&t.removeNamespace(),e==null?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t,e){return Le(t).put(this,e)}children(){return new gr(Gg(this.node.children,function(t){return ui(t)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0,e=!0){this.writeDataToDom();let i=this.node.cloneNode(t);return e&&(i=K1(i)),new this.constructor(i)}each(t,e){let i=this.children(),s,n;for(s=0,n=i.length;s<n;s++)t.apply(i[s],[s,i]),e&&i[s].each(t,e);return this}element(t,e){return this.put(new r(Ma(t),e))}first(){return ui(this.node.firstChild)}get(t){return ui(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,e){return this.xml(t,e,"http://www.w3.org/1999/xhtml")}id(t){return t!==void 0||this.node.id||(this.node.id=$1(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return ui(this.node.lastChild)}matches(t){let e=this.node,i=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return i&&i.call(e,t)}parent(t){let e=this;if(!e.node.parentNode)return null;if(e=ui(e.node.parentNode),!t)return e;do if(typeof t=="string"?e.matches(t):e instanceof t)return e;while(e=ui(e.node.parentNode));return e}put(t,e){return t=Le(t),this.add(t,e),t}putIn(t,e){return Le(t).add(this,e)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=Le(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e=null){let i=10**t,s=this.attr(e);for(let n in s)typeof s[n]=="number"&&(s[n]=Math.round(s[n]*i)/i);return this.attr(s),this}svg(t,e){return this.xml(t,e,$g)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){let e=this.parent();if(!e)return this.addTo(t);let i=e.index(this);return e.put(t,i).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(t,e,i){if(typeof t=="boolean"&&(i=e,e=t,t=null),t==null||typeof t=="function"){e=e==null||e,this.writeDataToDom();let a=this;if(t!=null){if(a=ui(a.node.cloneNode(!0)),e){let l=t(a);if(a=l||a,l===!1)return""}a.each(function(){let l=t(this),c=l||this;l===!1?this.remove():l&&this!==c&&this.replace(c)},!0)}return e?a.node.outerHTML:a.node.innerHTML}e=e!=null&&e;let s=Ma("wrapper",i),n=yt.document.createDocumentFragment();s.innerHTML=t;for(let a=s.children.length;a--;)n.appendChild(s.firstElementChild);let o=this.parent();return e?this.replace(n)&&o:this.add(n)}};at(rs,{attr:function(r,t,e){if(r==null){r={},t=this.node.attributes;for(let i of t)r[i.nodeName]=M1.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return r}if(r instanceof Array)return r.reduce((i,s)=>(i[s]=this.attr(s),i),{});if(typeof r=="object"&&r.constructor===Object)for(t in r)this.attr(t,r[t]);else if(t===null)this.node.removeAttribute(r);else{if(t==null)return(t=this.node.getAttribute(r))==null?pD[r]:M1.test(t)?parseFloat(t):t;typeof(t=eA.reduce((i,s)=>s(r,i,this),t))=="number"?t=new xt(t):gD.has(r)&&pi.isColor(t)?t=new pi(t):t.constructor===Array&&(t=new mr(t)),r==="leading"?this.leading&&this.leading(t):typeof e=="string"?this.node.setAttributeNS(e,r,t.toString()):this.node.setAttribute(r,t.toString()),!this.rebuild||r!=="font-size"&&r!=="x"||this.rebuild()}return this},find:function(r){return Ws(r,this.node)},findOne:function(r){return ui(this.node.querySelector(r))}}),wt(rs,"Dom");var ge=class extends rs{constructor(r,t){super(r,t),this.dom={},this.node.instance=this,(r.hasAttribute("data-svgjs")||r.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(r.getAttribute("data-svgjs"))??JSON.parse(r.getAttribute("svgjs:data"))??{})}center(r,t){return this.cx(r).cy(t)}cx(r){return r==null?this.x()+this.width()/2:this.x(r-this.width()/2)}cy(r){return r==null?this.y()+this.height()/2:this.y(r-this.height()/2)}defs(){let r=this.root();return r&&r.defs()}dmove(r,t){return this.dx(r).dy(t)}dx(r=0){return this.x(new xt(r).plus(this.x()))}dy(r=0){return this.y(new xt(r).plus(this.y()))}getEventHolder(){return this}height(r){return this.attr("height",r)}move(r,t){return this.x(r).y(t)}parents(r=this.root()){let t=typeof r=="string";t||(r=Le(r));let e=new gr,i=this;for(;(i=i.parent())&&i.node!==yt.document&&i.nodeName!=="#document-fragment"&&(e.push(i),t||i.node!==r.node)&&(!t||!i.matches(r));)if(i.node===this.root().node)return null;return e}reference(r){if(!(r=this.attr(r)))return null;let t=(r+"").match(nD);return t?Le(t[1]):null}root(){let r=this.parent(function(t){return Fs[t]}(Zg));return r&&r.root()}setData(r){return this.dom=r,this}size(r,t){let e=uo(this,r,t);return this.width(new xt(e.width)).height(new xt(e.height))}width(r){return this.attr("width",r)}writeDataToDom(){return G1(this,this.dom),super.writeDataToDom()}x(r){return this.attr("x",r)}y(r){return this.attr("y",r)}};at(ge,{bbox:function(){let r=R1(this,t=>t.getBBox(),t=>{try{let e=t.clone().addTo(es().svg).show(),i=e.node.getBBox();return e.remove(),i}catch(e){throw new Error(`Getting bbox of element "${t.node.nodeName}" is not possible: ${e.toString()}`)}});return new Qt(r)},rbox:function(r){let t=R1(this,i=>i.getBoundingClientRect(),i=>{throw new Error(`Getting rbox of element "${i.node.nodeName}" is not possible`)}),e=new Qt(t);return r?e.transform(r.screenCTM().inverseO()):e.addOffset()},inside:function(r,t){let e=this.bbox();return r>e.x&&t>e.y&&r<e.x+e.width&&t<e.y+e.height},point:function(r,t){return new St(r,t).transformO(this.screenCTM().inverseO())},ctm:function(){return new ft(this.node.getCTM())},screenCTM:function(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){let r=this.rect(1,1),t=r.node.getScreenCTM();return r.remove(),new ft(t)}return new ft(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new ft}}}),wt(ge,"Element");var wa={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(r,t){return t==="color"?r:r+"-"+t}};["fill","stroke"].forEach(function(r){let t={},e;t[r]=function(i){if(i===void 0)return this.attr(r);if(typeof i=="string"||i instanceof pi||pi.isRgb(i)||i instanceof ge)this.attr(r,i);else for(e=wa[r].length-1;e>=0;e--)i[wa[r][e]]!=null&&this.attr(wa.prefix(r,wa[r][e]),i[wa[r][e]]);return this},dt(["Element","Runner"],t)}),dt(["Element","Runner"],{matrix:function(r,t,e,i,s,n){return r==null?new ft(this):this.attr("transform",new ft(r,t,e,i,s,n))},rotate:function(r,t,e){return this.transform({rotate:r,ox:t,oy:e},!0)},skew:function(r,t,e,i){return arguments.length===1||arguments.length===3?this.transform({skew:r,ox:t,oy:e},!0):this.transform({skew:[r,t],ox:e,oy:i},!0)},shear:function(r,t,e){return this.transform({shear:r,ox:t,oy:e},!0)},scale:function(r,t,e,i){return arguments.length===1||arguments.length===3?this.transform({scale:r,ox:t,oy:e},!0):this.transform({scale:[r,t],ox:e,oy:i},!0)},translate:function(r,t){return this.transform({translate:[r,t]},!0)},relative:function(r,t){return this.transform({relative:[r,t]},!0)},flip:function(r="both",t="center"){return"xybothtrue".indexOf(r)===-1&&(t=r,r="both"),this.transform({flip:r,origin:t},!0)},opacity:function(r){return this.attr("opacity",r)}}),dt("radius",{radius:function(r,t=r){return(this._element||this).type==="radialGradient"?this.attr("r",new xt(r)):this.rx(r).ry(t)}}),dt("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(r){return new St(this.node.getPointAtLength(r))}}),dt(["Element","Runner"],{font:function(r,t){if(typeof r=="object"){for(t in r)this.font(t,r[t]);return this}return r==="leading"?this.leading(t):r==="anchor"?this.attr("text-anchor",t):r==="size"||r==="family"||r==="weight"||r==="stretch"||r==="variant"||r==="style"?this.attr("font-"+r,t):this.attr(r,t)}});dt("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(r,t){return r[t]=function(e){return e===null?this.off(t):this.on(t,e),this},r},{})),dt("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(oD).slice(0,-1).map(function(t){let e=t.trim().split("(");return[e[0],e[1].split(br).map(function(i){return parseFloat(i)})]}).reverse().reduce(function(t,e){return e[0]==="matrix"?t.lmultiply(ft.fromArray(e[1])):t[e[0]].apply(t,e[1])},new ft)},toParent:function(r,t){if(this===r)return this;if(Og(this.node))return this.addTo(r,t);let e=this.screenCTM(),i=r.screenCTM().inverse();return this.addTo(r,t).untransform().transform(i.multiply(e)),this},toRoot:function(r){return this.toParent(this.root(),r)},transform:function(r,t){if(r==null||typeof r=="string"){let i=new ft(this).decompose();return r==null?i:i[r]}ft.isMatrixLike(r)||(r={...r,origin:qg(r,this)});let e=new ft(t===!0?this:t||!1).transform(r);return this.attr("transform",e)}});var Me=class r extends ge{flatten(){return this.each(function(){if(this instanceof r)return this.flatten().ungroup()}),this}ungroup(t=this.parent(),e=t.index(this)){return e=e===-1?t.children().length:e,this.each(function(i,s){return s[s.length-i-1].toParent(t,e)}),this.remove()}};wt(Me,"Container");var so=class extends Me{constructor(t,e=t){super(Rt("defs",t),e)}flatten(){return this}ungroup(){return this}};wt(so,"Defs");var Re=class extends ge{};function tm(r){return this.attr("rx",r)}function em(r){return this.attr("ry",r)}function iA(r){return r==null?this.cx()-this.rx():this.cx(r+this.rx())}function rA(r){return r==null?this.cy()-this.ry():this.cy(r+this.ry())}function sA(r){return this.attr("cx",r)}function nA(r){return this.attr("cy",r)}function oA(r){return r==null?2*this.rx():this.rx(new xt(r).divide(2))}function aA(r){return r==null?2*this.ry():this.ry(new xt(r).divide(2))}wt(Re,"Shape");var mD=Object.freeze({__proto__:null,cx:sA,cy:nA,height:aA,rx:tm,ry:em,width:oA,x:iA,y:rA}),to=class extends Re{constructor(t,e=t){super(Rt("ellipse",t),e)}size(t,e){let i=uo(this,t,e);return this.rx(new xt(i.width).divide(2)).ry(new xt(i.height).divide(2))}};at(to,mD),dt("Container",{ellipse:Mt(function(r=0,t=r){return this.put(new to).size(r,t).move(0,0)})}),wt(to,"Ellipse");var Fh=class extends rs{constructor(t=yt.document.createDocumentFragment()){super(t)}xml(t,e,i){if(typeof t=="boolean"&&(i=e,e=t,t=null),t==null||typeof t=="function"){let s=new rs(Ma("wrapper",i));return s.add(this.node.cloneNode(!0)),s.xml(!1,i)}return super.xml(t,!1,i)}};function lA(r,t){return(this._element||this).type==="radialGradient"?this.attr({fx:new xt(r),fy:new xt(t)}):this.attr({x1:new xt(r),y1:new xt(t)})}function cA(r,t){return(this._element||this).type==="radialGradient"?this.attr({cx:new xt(r),cy:new xt(t)}):this.attr({x2:new xt(r),y2:new xt(t)})}wt(Fh,"Fragment");var bD=Object.freeze({__proto__:null,from:lA,to:cA}),Bs=class extends Me{constructor(t,e){super(Rt(t+"Gradient",typeof t=="string"?null:t),e)}attr(t,e,i){return t==="transform"&&(t="gradientTransform"),super.attr(t,e,i)}bbox(){return new Qt}targets(){return Ws("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}};at(Bs,bD),dt({Container:{gradient(...r){return this.defs().gradient(...r)}},Defs:{gradient:Mt(function(r,t){return this.put(new Bs(r)).update(t)})}}),wt(Bs,"Gradient");var zs=class extends Me{constructor(t,e=t){super(Rt("pattern",t),e)}attr(t,e,i){return t==="transform"&&(t="patternTransform"),super.attr(t,e,i)}bbox(){return new Qt}targets(){return Ws("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}};dt({Container:{pattern(...r){return this.defs().pattern(...r)}},Defs:{pattern:Mt(function(r,t,e){return this.put(new zs).update(e).attr({x:0,y:0,width:r,height:t,patternUnits:"userSpaceOnUse"})})}}),wt(zs,"Pattern");var Oh=class extends Re{constructor(r,t=r){super(Rt("image",r),t)}load(r,t){if(!r)return this;let e=new yt.window.Image;return dr(e,"load",function(i){let s=this.parent(zs);this.width()===0&&this.height()===0&&this.size(e.width,e.height),s instanceof zs&&s.width()===0&&s.height()===0&&s.size(this.width(),this.height()),typeof t=="function"&&t.call(this,i)},this),dr(e,"load error",function(){di(e)}),this.attr("href",e.src=r,fo)}},q1;q1=function(r,t,e){return r!=="fill"&&r!=="stroke"||lD.test(t)&&(t=e.root().defs().image(t)),t instanceof Oh&&(t=e.root().defs().pattern(0,0,i=>{i.add(t)})),t},eA.push(q1),dt({Container:{image:Mt(function(r,t){return this.put(new Oh).size(0,0).load(r,t)})}}),wt(Oh,"Image");var Fi=class extends mr{bbox(){let t=-1/0,e=-1/0,i=1/0,s=1/0;return this.forEach(function(n){t=Math.max(n[0],t),e=Math.max(n[1],e),i=Math.min(n[0],i),s=Math.min(n[1],s)}),new Qt(i,s,t-i,e-s)}move(t,e){let i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(let s=this.length-1;s>=0;s--)this[s]=[this[s][0]+t,this[s][1]+e];return this}parse(t=[0,0]){let e=[];(t=t instanceof Array?Array.prototype.concat.apply([],t):t.trim().split(br).map(parseFloat)).length%2!=0&&t.pop();for(let i=0,s=t.length;i<s;i+=2)e.push([t[i],t[i+1]]);return e}size(t,e){let i,s=this.bbox();for(i=this.length-1;i>=0;i--)s.width&&(this[i][0]=(this[i][0]-s.x)*t/s.width+s.x),s.height&&(this[i][1]=(this[i][1]-s.y)*e/s.height+s.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){let t=[];for(let e=0,i=this.length;e<i;e++)t.push(this[e].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){ft.isMatrixLike(t)||(t=new ft(t));for(let e=this.length;e--;){let[i,s]=this[e];this[e][0]=t.a*i+t.c*s+t.e,this[e][1]=t.b*i+t.d*s+t.f}return this}},vD=Fi,im=Object.freeze({__proto__:null,MorphArray:vD,height:function(r){let t=this.bbox();return r==null?t.height:this.size(t.width,r)},width:function(r){let t=this.bbox();return r==null?t.width:this.size(r,t.height)},x:function(r){return r==null?this.bbox().x:this.move(r,this.bbox().y)},y:function(r){return r==null?this.bbox().y:this.move(this.bbox().x,r)}}),Ds=class extends Re{constructor(r,t=r){super(Rt("line",r),t)}array(){return new Fi([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(r,t){return this.attr(this.array().move(r,t).toLine())}plot(r,t,e,i){return r==null?this.array():(r=t!==void 0?{x1:r,y1:t,x2:e,y2:i}:new Fi(r).toLine(),this.attr(r))}size(r,t){let e=uo(this,r,t);return this.attr(this.array().size(e.width,e.height).toLine())}};at(Ds,im),dt({Container:{line:Mt(function(...r){return Ds.prototype.plot.apply(this.put(new Ds),r[0]!=null?r:[0,0,0,0])})}}),wt(Ds,"Line");var Nh=class extends Me{constructor(r,t=r){super(Rt("marker",r),t)}height(r){return this.attr("markerHeight",r)}orient(r){return this.attr("orient",r)}ref(r,t){return this.attr("refX",r).attr("refY",t)}toString(){return"url(#"+this.id()+")"}update(r){return this.clear(),typeof r=="function"&&r.call(this,this),this}width(r){return this.attr("markerWidth",r)}};function Jn(r,t){return function(e){return e==null?this[r]:(this[r]=e,t&&t.call(this),this)}}dt({Container:{marker(...r){return this.defs().marker(...r)}},Defs:{marker:Mt(function(r,t,e){return this.put(new Nh).size(r,t).ref(r/2,t/2).viewbox(0,0,r,t).attr("orient","auto").update(e)})},marker:{marker(r,t,e,i){let s=["marker"];return r!=="all"&&s.push(r),s=s.join("-"),r=arguments[1]instanceof Nh?arguments[1]:this.defs().marker(t,e,i),this.attr(s,r)}}}),wt(Nh,"Marker");var xD={"-":function(r){return r},"<>":function(r){return-Math.cos(r*Math.PI)/2+.5},">":function(r){return Math.sin(r*Math.PI/2)},"<":function(r){return 1-Math.cos(r*Math.PI/2)},bezier:function(r,t,e,i){return function(s){return s<0?r>0?t/r*s:e>0?i/e*s:0:s>1?e<1?(1-i)/(1-e)*s+(i-e)/(1-e):r<1?(1-t)/(1-r)*s+(t-r)/(1-r):1:3*s*(1-s)**2*t+3*s**2*(1-s)*i+s**3}},steps:function(r,t="end"){t=t.split("-").reverse()[0];let e=r;return t==="none"?--e:t==="both"&&++e,(i,s=!1)=>{let n=Math.floor(i*r),o=i*n%1==0;return t!=="start"&&t!=="both"||++n,s&&o&&--n,i>=0&&n<0&&(n=0),i<=1&&n>e&&(n=e),n/e}}},Ra=class{done(){return!1}},Ia=class extends Ra{constructor(t=dD){super(),this.ease=xD[t]||t}step(t,e,i){return typeof t!="number"?i<1?t:e:t+(e-t)*this.ease(i)}},no=class extends Ra{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,e,i,s){return this.stepper(t,e,i,s)}};function O1(){let r=(this._duration||500)/1e3,t=this._overshoot||0,e=Math.PI,i=Math.log(t/100+1e-10),s=-i/Math.sqrt(e*e+i*i),n=3.9/(s*r);this.d=2*s*n,this.k=n*n}at(class extends no{constructor(r=500,t=0){super(),this.duration(r).overshoot(t)}step(r,t,e,i){if(typeof r=="string")return r;if(i.done=e===1/0,e===1/0)return t;if(e===0)return r;e>100&&(e=16),e/=1e3;let s=i.velocity||0,n=-this.d*s-this.k*(r-t),o=r+s*e+n*e*e/2;return i.velocity=s+n*e,i.done=Math.abs(t-o)+Math.abs(s)<.002,i.done?t:o}},{duration:Jn("_duration",O1),overshoot:Jn("_overshoot",O1)});at(class extends no{constructor(r=.1,t=.01,e=0,i=1e3){super(),this.p(r).i(t).d(e).windup(i)}step(r,t,e,i){if(typeof r=="string")return r;if(i.done=e===1/0,e===1/0)return t;if(e===0)return r;let s=t-r,n=(i.integral||0)+s*e,o=(s-(i.error||0))/e,a=this._windup;return a!==!1&&(n=Math.max(-a,Math.min(n,a))),i.error=s,i.integral=n,i.done=Math.abs(s)<.001,i.done?t:r+(this.P*s+this.I*n+this.D*o)}},{windup:Jn("_windup"),p:Jn("P"),i:Jn("I"),d:Jn("D")});var yD={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Ng={M:function(r,t,e){return t.x=e.x=r[0],t.y=e.y=r[1],["M",t.x,t.y]},L:function(r,t){return t.x=r[0],t.y=r[1],["L",r[0],r[1]]},H:function(r,t){return t.x=r[0],["H",r[0]]},V:function(r,t){return t.y=r[0],["V",r[0]]},C:function(r,t){return t.x=r[4],t.y=r[5],["C",r[0],r[1],r[2],r[3],r[4],r[5]]},S:function(r,t){return t.x=r[2],t.y=r[3],["S",r[0],r[1],r[2],r[3]]},Q:function(r,t){return t.x=r[2],t.y=r[3],["Q",r[0],r[1],r[2],r[3]]},T:function(r,t){return t.x=r[0],t.y=r[1],["T",r[0],r[1]]},Z:function(r,t,e){return t.x=e.x,t.y=e.y,["Z"]},A:function(r,t){return t.x=r[5],t.y=r[6],["A",r[0],r[1],r[2],r[3],r[4],r[5],r[6]]}},Ag="mlhvqtcsaz".split("");for(let r=0,t=Ag.length;r<t;++r)Ng[Ag[r]]=function(e){return function(i,s,n){if(e==="H")i[0]=i[0]+s.x;else if(e==="V")i[0]=i[0]+s.y;else if(e==="A")i[5]=i[5]+s.x,i[6]=i[6]+s.y;else for(let o=0,a=i.length;o<a;++o)i[o]=i[o]+(o%2?s.y:s.x);return Ng[e](i,s,n)}}(Ag[r].toUpperCase());function Pg(r){return r.segment.length&&r.segment.length-1===yD[r.segment[0].toUpperCase()]}function wD(r,t){r.inNumber&&Ns(r,!1);let e=Jg.test(t);if(e)r.segment=[t];else{let i=r.lastCommand,s=i.toLowerCase(),n=i===s;r.segment=[s==="m"?n?"l":"L":i]}return r.inSegment=!0,r.lastCommand=r.segment[0],e}function Ns(r,t){if(!r.inNumber)throw new Error("Parser Error");r.number&&r.segment.push(parseFloat(r.number)),r.inNumber=t,r.number="",r.pointSeen=!1,r.hasExponent=!1,Pg(r)&&Dg(r)}function Dg(r){r.inSegment=!1,r.absolute&&(r.segment=function(t){let e=t.segment[0];return Ng[e](t.segment.slice(1),t.p,t.p0)}(r)),r.segments.push(r.segment)}function AD(r){if(!r.segment.length)return!1;let t=r.segment[0].toUpperCase()==="A",e=r.segment.length;return t&&(e===4||e===5)}function kD(r){return r.lastToken.toUpperCase()==="E"}var SD=new Set([" ",",","	",`
`,"\r","\f"]),Je=class extends mr{bbox(){return es().path.setAttribute("d",this.toString()),new Qt(es.nodes.path.getBBox())}move(t,e){let i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(let s,n=this.length-1;n>=0;n--)s=this[n][0],s==="M"||s==="L"||s==="T"?(this[n][1]+=t,this[n][2]+=e):s==="H"?this[n][1]+=t:s==="V"?this[n][1]+=e:s==="C"||s==="S"||s==="Q"?(this[n][1]+=t,this[n][2]+=e,this[n][3]+=t,this[n][4]+=e,s==="C"&&(this[n][5]+=t,this[n][6]+=e)):s==="A"&&(this[n][6]+=t,this[n][7]+=e);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),function(e,i=!0){let s=0,n="",o={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:i,p0:new St,p:new St};for(;o.lastToken=n,n=e.charAt(s++);)if(o.inSegment||!wD(o,n))if(n!==".")if(isNaN(parseInt(n)))if(SD.has(n))o.inNumber&&Ns(o,!1);else if(n!=="-"&&n!=="+")if(n.toUpperCase()!=="E"){if(Jg.test(n)){if(o.inNumber)Ns(o,!1);else{if(!Pg(o))throw new Error("parser Error");Dg(o)}--s}}else o.number+=n,o.hasExponent=!0;else{if(o.inNumber&&!kD(o)){Ns(o,!1),--s;continue}o.number+=n,o.inNumber=!0}else{if(o.number==="0"||AD(o)){o.inNumber=!0,o.number=n,Ns(o,!0);continue}o.inNumber=!0,o.number+=n}else{if(o.pointSeen||o.hasExponent){Ns(o,!1),--s;continue}o.inNumber=!0,o.pointSeen=!0,o.number+=n}return o.inNumber&&Ns(o,!1),o.inSegment&&Pg(o)&&Dg(o),o.segments}(t)}size(t,e){let i=this.bbox(),s,n;for(i.width=i.width===0?1:i.width,i.height=i.height===0?1:i.height,s=this.length-1;s>=0;s--)n=this[s][0],n==="M"||n==="L"||n==="T"?(this[s][1]=(this[s][1]-i.x)*t/i.width+i.x,this[s][2]=(this[s][2]-i.y)*e/i.height+i.y):n==="H"?this[s][1]=(this[s][1]-i.x)*t/i.width+i.x:n==="V"?this[s][1]=(this[s][1]-i.y)*e/i.height+i.y:n==="C"||n==="S"||n==="Q"?(this[s][1]=(this[s][1]-i.x)*t/i.width+i.x,this[s][2]=(this[s][2]-i.y)*e/i.height+i.y,this[s][3]=(this[s][3]-i.x)*t/i.width+i.x,this[s][4]=(this[s][4]-i.y)*e/i.height+i.y,n==="C"&&(this[s][5]=(this[s][5]-i.x)*t/i.width+i.x,this[s][6]=(this[s][6]-i.y)*e/i.height+i.y)):n==="A"&&(this[s][1]=this[s][1]*t/i.width,this[s][2]=this[s][2]*e/i.height,this[s][6]=(this[s][6]-i.x)*t/i.width+i.x,this[s][7]=(this[s][7]-i.y)*e/i.height+i.y);return this}toString(){return function(t){let e="";for(let i=0,s=t.length;i<s;i++)e+=t[i][0],t[i][1]!=null&&(e+=t[i][1],t[i][2]!=null&&(e+=" ",e+=t[i][2],t[i][3]!=null&&(e+=" ",e+=t[i][3],e+=" ",e+=t[i][4],t[i][5]!=null&&(e+=" ",e+=t[i][5],e+=" ",e+=t[i][6],t[i][7]!=null&&(e+=" ",e+=t[i][7])))));return e+" "}(this)}},hA=r=>{let t=typeof r;return t==="number"?xt:t==="string"?pi.isColor(r)?pi:br.test(r)?Jg.test(r)?Je:mr:Z1.test(r)?xt:qa:Fg.indexOf(r.constructor)>-1?r.constructor:Array.isArray(r)?mr:t==="object"?Hs:qa},ur=class{constructor(t){this._stepper=t||new Ia("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(t,e){return t&&e},!0)}from(t){return t==null?this._from:(this._from=this._set(t),this)}stepper(t){return t==null?this._stepper:(this._stepper=t,this)}to(t){return t==null?this._to:(this._to=this._set(t),this)}type(t){return t==null?this._type:(this._type=t,this)}_set(t){this._type||this.type(hA(t));let e=new this._type(t);return this._type===pi&&(e=this._to?e[this._to[4]]():this._from?e[this._from[4]]():e),this._type===Hs&&(e=this._to?e.align(this._to):this._from?e.align(this._from):e),e=e.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(e.length)).map(Object).map(function(i){return i.done=!0,i}),e}},qa=class{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}},Oa=class r{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,r.defaults,t),this}toArray(){let t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}};Oa.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};var CD=(r,t)=>r[0]<t[0]?-1:r[0]>t[0]?1:0,Hs=class{constructor(...t){this.init(...t)}align(t){let e=this.values;for(let i=0,s=e.length;i<s;++i){if(e[i+1]===t[i+1]){if(e[i+1]===pi&&t[i+7]!==e[i+7]){let a=t[i+7],l=new pi(this.values.splice(i+3,5))[a]().toArray();this.values.splice(i+3,0,...l)}i+=e[i+2]+2;continue}if(!t[i+1])return this;let n=new t[i+1]().toArray(),o=e[i+2]+3;e.splice(i,o,t[i],t[i+1],t[i+2],...n),i+=e[i+2]+2}return this}init(t){if(this.values=[],Array.isArray(t))return void(this.values=t.slice());t=t||{};let e=[];for(let i in t){let s=hA(t[i]),n=new s(t[i]).toArray();e.push([i,s,n.length,...n])}return e.sort(CD),this.values=e.reduce((i,s)=>i.concat(s),[]),this}toArray(){return this.values}valueOf(){let t={},e=this.values;for(;e.length;){let i=e.shift(),s=e.shift(),n=e.shift(),o=e.splice(0,n);t[i]=new s(o)}return t}},Fg=[qa,Oa,Hs],is=class extends Re{constructor(t,e=t){super(Rt("path",t),e)}array(){return this._array||(this._array=new Je(this.attr("d")))}clear(){return delete this._array,this}height(t){return t==null?this.bbox().height:this.size(this.bbox().width,t)}move(t,e){return this.attr("d",this.array().move(t,e))}plot(t){return t==null?this.array():this.clear().attr("d",typeof t=="string"?t:this._array=new Je(t))}size(t,e){let i=uo(this,t,e);return this.attr("d",this.array().size(i.width,i.height))}width(t){return t==null?this.bbox().width:this.size(t,this.bbox().height)}x(t){return t==null?this.bbox().x:this.move(t,this.bbox().y)}y(t){return t==null?this.bbox().y:this.move(this.bbox().x,t)}};is.prototype.MorphArray=Je,dt({Container:{path:Mt(function(r){return this.put(new is).plot(r||new Je)})}}),wt(is,"Path");var uA=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new Fi(this.attr("points")))},clear:function(){return delete this._array,this},move:function(r,t){return this.attr("points",this.array().move(r,t))},plot:function(r){return r==null?this.array():this.clear().attr("points",typeof r=="string"?r:this._array=new Fi(r))},size:function(r,t){let e=uo(this,r,t);return this.attr("points",this.array().size(e.width,e.height))}}),fr=class extends Re{constructor(t,e=t){super(Rt("polygon",t),e)}};dt({Container:{polygon:Mt(function(r){return this.put(new fr).plot(r||new Fi)})}}),at(fr,im),at(fr,uA),wt(fr,"Polygon");var pr=class extends Re{constructor(t,e=t){super(Rt("polyline",t),e)}};dt({Container:{polyline:Mt(function(r){return this.put(new pr).plot(r||new Fi)})}}),at(pr,im),at(pr,uA),wt(pr,"Polyline");var eo=class extends Re{constructor(t,e=t){super(Rt("rect",t),e)}};at(eo,{rx:tm,ry:em}),dt({Container:{rect:Mt(function(r,t){return this.put(new eo).size(r,t)})}}),wt(eo,"Rect");var ka=class{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){let e=t.next!==void 0?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){let t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}},Ct={nextDraw:null,frames:new ka,timeouts:new ka,immediates:new ka,timer:()=>yt.window.performance||yt.window.Date,transforms:[],frame(r){let t=Ct.frames.push({run:r});return Ct.nextDraw===null&&(Ct.nextDraw=yt.window.requestAnimationFrame(Ct._draw)),t},timeout(r,t){t=t||0;let e=Ct.timer().now()+t,i=Ct.timeouts.push({run:r,time:e});return Ct.nextDraw===null&&(Ct.nextDraw=yt.window.requestAnimationFrame(Ct._draw)),i},immediate(r){let t=Ct.immediates.push(r);return Ct.nextDraw===null&&(Ct.nextDraw=yt.window.requestAnimationFrame(Ct._draw)),t},cancelFrame(r){r!=null&&Ct.frames.remove(r)},clearTimeout(r){r!=null&&Ct.timeouts.remove(r)},cancelImmediate(r){r!=null&&Ct.immediates.remove(r)},_draw(r){let t=null,e=Ct.timeouts.last();for(;(t=Ct.timeouts.shift())&&(r>=t.time?t.run():Ct.timeouts.push(t),t!==e););let i=null,s=Ct.frames.last();for(;i!==s&&(i=Ct.frames.shift());)i.run(r);let n=null;for(;n=Ct.immediates.shift();)n();Ct.nextDraw=Ct.timeouts.first()||Ct.frames.first()?yt.window.requestAnimationFrame(Ct._draw):null}},ED=function(r){let t=r.start,e=r.runner.duration();return{start:t,duration:e,end:t+e,runner:r.runner}},TD=function(){let r=yt.window;return(r.performance||r.Date).now()},Bh=class extends _s{constructor(t=TD){super(),this._timeSource=t,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){let t=this.getLastRunnerInfo(),e=t?t.runner.duration():0;return(t?t.start:this._time)+e}getEndTimeOfTimeline(){let t=this._runners.map(e=>e.start+e.runner.duration());return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return t==null?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){let e=this.speed();if(t==null)return this.speed(-e);let i=Math.abs(e);return this.speed(t?-i:i)}schedule(t,e,i){if(t==null)return this._runners.map(ED);let s=0,n=this.getEndTime();if(e=e||0,i==null||i==="last"||i==="after")s=n;else if(i==="absolute"||i==="start")s=e,e=0;else if(i==="now")s=this._time;else if(i==="relative"){let l=this.getRunnerInfoById(t.id);l&&(s=l.start+e,e=0)}else{if(i!=="with-last")throw new Error('Invalid value for the "when" parameter');{let l=this.getLastRunnerInfo();s=l?l.start:this._time}}t.unschedule(),t.timeline(this);let o=t.persist(),a={persist:o===null?this._persist:o,start:s+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(a),this._runners.sort((l,c)=>l.start-c.start),this._runnerIds=this._runners.map(l=>l.runner.id),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return t==null?this._timeSource:(this._timeSource=t,this)}speed(t){return t==null?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return t==null?this._time:(this._time=t,this._continue(!0))}unschedule(t){let e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return Ct.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=Ct.frame(this._step)),this)}_stepFn(t=!1){let e=this._timeSource(),i=e-this._lastSourceTime;t&&(i=0);let s=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=s,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){let a=this._runners[o],l=a.runner;this._time-a.start<=0&&l.reset()}let n=!1;for(let o=0,a=this._runners.length;o<a;o++){let l=this._runners[o],c=l.runner,h=s,u=this._time-l.start;if(u<=0){n=!0;continue}u<h&&(h=u),c.active()&&(c.step(h).done?l.persist!==!0&&c.duration()-c.time()+this._time+l.persist<this._time&&(c.unschedule(),--o,--a):n=!0)}return n&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}};dt({Element:{timeline:function(r){return r==null?(this._timeline=this._timeline||new Bh,this._timeline):(this._timeline=r,this)}}});var yi=class r extends _s{constructor(t){super(),this.id=r.id++,t=typeof(t=t??wg)=="function"?new no(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof t=="number"&&t,this._isDeclarative=t instanceof no,this._stepper=this._isDeclarative?t:new Ia,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new ft,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(t,e,i){let s=1,n=!1,o=0;return e=e??fD,i=i||"last",typeof(t=t??wg)!="object"||t instanceof Ra||(e=t.delay??e,i=t.when??i,n=t.swing||n,s=t.times??s,o=t.wait??o,t=t.duration??wg),{duration:t,delay:e,swing:n,times:s,wait:o,when:i}}active(t){return t==null?this.enabled:(this.enabled=t,this)}addTransform(t){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,e,i){let s=r.sanitise(t,e,i),n=new r(s.duration);return this._timeline&&n.timeline(this._timeline),this._element&&n.element(this._element),n.loop(s).schedule(s.delay,s.when)}clearTransform(){return this.transforms=new ft,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(t=>!t.isTransform))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new Ia(t),this}element(t){return t==null?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,e,i){return typeof t=="object"&&(e=t.swing,i=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=i||0,this._times===!0&&(this._times=1/0),this}loops(t){let e=this._duration+this._wait;if(t==null){let n=Math.floor(this._time/e),o=(this._time-n*e)/this._duration;return Math.min(n+o,this._times)}let i=t%1,s=e*Math.floor(t)+this._duration*i;return this.time(s)}persist(t){return t==null?this._persist:(this._persist=t,this)}position(t){let e=this._time,i=this._duration,s=this._wait,n=this._times,o=this._swing,a=this._reverse,l;if(t==null){let u=function(f){let g=o*Math.floor(f%(2*(s+i))/(s+i)),p=g&&!a||!g&&a,b=Math.pow(-1,p)*(f%(s+i))/i+p;return Math.max(Math.min(b,1),0)},d=n*(s+i)-s;return l=e<=0?Math.round(u(1e-5)):e<d?u(e):Math.round(u(d-1e-5)),l}let c=Math.floor(this.loops()),h=o&&c%2==0;return l=c+(h&&!a||a&&h?t:1-t),this.loops(l)}progress(t){return t==null?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,e,i,s){return this._queue.push({initialiser:t||I1,runner:e||I1,retarget:i,isTransform:s,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(t){return this._reverse=t??!this._reverse,this}schedule(t,e,i){if(t instanceof Bh||(i=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,i),this}step(t){if(!this.enabled)return this;t=t??16,this._time+=t;let e=this.position(),i=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;let s=this.duration(),n=this._lastTime<=0&&this._time>0,o=this._lastTime<s&&this._time>=s;this._lastTime=this._time,n&&this.fire("start",this);let a=this._isDeclarative;this.done=!a&&!o&&this._time>=s,this._reseted=!1;let l=!1;return(i||a)&&(this._initialise(i),this.transforms=new ft,l=this._run(a?t:e),this.fire("step",this)),this.done=this.done||l&&a,o&&this.fire("finished",this),this}time(t){if(t==null)return this._time;let e=t-this._time;return this.step(e),this}timeline(t){return t===void 0?this._timeline:(this._timeline=t,this)}unschedule(){let t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(t||this._isDeclarative)for(let e=0,i=this._queue.length;e<i;++e){let s=this._queue[e],n=this._isDeclarative||!s.initialised&&t;t=!s.finished,n&&t&&(s.initialiser.call(this),s.initialised=!0)}}_rememberMorpher(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){let i=this.timeline();i&&i.play()}}_run(t){let e=!0;for(let i=0,s=this._queue.length;i<s;++i){let n=this._queue[i],o=n.runner.call(this,t);n.finished=n.finished||o===!0,e=e&&n.finished}return e}_tryRetarget(t,e,i){if(this._history[t]){if(!this._history[t].caller.initialised){let n=this._queue.indexOf(this._history[t].caller);return this._queue.splice(n,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,e,i):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;let s=this.timeline();return s&&s.play(),!0}return!1}};yi.id=0;var oo=class{constructor(t=new ft,e=-1,i=!0){this.transforms=t,this.id=e,this.done=i}clearTransformsFromQueue(){}};at([yi,oo],{mergeWith(r){return new oo(r.transforms.lmultiply(this.transforms),r.id)}});var dA=(r,t)=>r.lmultiplyO(t),fA=r=>r.transforms;function LD(){let r=this._transformationRunners.runners.map(fA).reduce(dA,new ft);this.transform(r),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}var Bg=class{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;let e=t.id+1;return this.runners.push(t),this.ids.push(e),this}clearBefore(t){let e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new oo).forEach(i=>i.clearTransformsFromQueue()),this}edit(t,e){let i=this.ids.indexOf(t+1);return this.ids.splice(i,1,t+1),this.runners.splice(i,1,e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let e=0;e<this.runners.length;++e){let i=this.runners[e];if(t&&i.done&&t.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))){this.remove(i.id);let s=i.mergeWith(t);this.edit(t.id,s),t=s,--e}else t=i}return this}remove(t){let e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}};dt({Element:{animate(r,t,e){let i=yi.sanitise(r,t,e),s=this.timeline();return new yi(i.duration).loop(i).element(this).timeline(s.play()).schedule(i.delay,i.when)},delay(r,t){return this.animate(0,r,t)},_clearTransformRunnersBefore(r){this._transformationRunners.clearBefore(r.id)},_currentTransform(r){return this._transformationRunners.runners.filter(t=>t.id<=r.id).map(fA).reduce(dA,new ft)},_addRunner(r){this._transformationRunners.add(r),Ct.cancelImmediate(this._frameId),this._frameId=Ct.immediate(LD.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new Bg().add(new oo(new ft(this))))}}});at(yi,{attr(r,t){return this.styleAttr("attr",r,t)},css(r,t){return this.styleAttr("css",r,t)},styleAttr(r,t,e){if(typeof t=="string")return this.styleAttr(r,{[t]:e});let i=t;if(this._tryRetarget(r,i))return this;let s=new ur(this._stepper).to(i),n=Object.keys(i);return this.queue(function(){s=s.from(this.element()[r](n))},function(o){return this.element()[r](s.at(o).valueOf()),s.done()},function(o){let a=Object.keys(o),l=(c=n,a.filter(u=>!c.includes(u)));var c;if(l.length){let u=this.element()[r](l),d=new Hs(s.from()).valueOf();Object.assign(d,u),s.from(d)}let h=new Hs(s.to()).valueOf();Object.assign(h,o),s.to(h),n=a,i=o}),this._rememberMorpher(r,s),this},zoom(r,t){if(this._tryRetarget("zoom",r,t))return this;let e=new ur(this._stepper).to(new xt(r));return this.queue(function(){e=e.from(this.element().zoom())},function(i){return this.element().zoom(e.at(i),t),e.done()},function(i,s){t=s,e.to(i)}),this._rememberMorpher("zoom",e),this},transform(r,t,e){if(t=r.relative||t,this._isDeclarative&&!t&&this._tryRetarget("transform",r))return this;let i=ft.isMatrixLike(r);e=r.affine!=null?r.affine:e??!i;let s=new ur(this._stepper).type(e?Oa:ft),n,o,a,l,c;return this.queue(function(){o=o||this.element(),n=n||qg(r,o),c=new ft(t?void 0:o),o._addRunner(this),t||o._clearTransformRunnersBefore(this)},function(h){t||this.clearTransform();let{x:u,y:d}=new St(n).transform(o._currentTransform(this)),f=new ft({...r,origin:[u,d]}),g=this._isDeclarative&&a?a:c;if(e){f=f.decompose(u,d),g=g.decompose(u,d);let b=f.rotate,m=g.rotate,x=[b-360,b,b+360],v=x.map(A=>Math.abs(A-m)),w=Math.min(...v),y=v.indexOf(w);f.rotate=x[y]}t&&(i||(f.rotate=r.rotate||0),this._isDeclarative&&l&&(g.rotate=l)),s.from(g),s.to(f);let p=s.at(h);return l=p.rotate,a=new ft(p),this.addTransform(a),o._addRunner(this),s.done()},function(h){(h.origin||"center").toString()!==(r.origin||"center").toString()&&(n=qg(h,o)),r={...h,origin:n}},!0),this._isDeclarative&&this._rememberMorpher("transform",s),this},x(r){return this._queueNumber("x",r)},y(r){return this._queueNumber("y",r)},ax(r){return this._queueNumber("ax",r)},ay(r){return this._queueNumber("ay",r)},dx(r=0){return this._queueNumberDelta("x",r)},dy(r=0){return this._queueNumberDelta("y",r)},dmove(r,t){return this.dx(r).dy(t)},_queueNumberDelta(r,t){if(t=new xt(t),this._tryRetarget(r,t))return this;let e=new ur(this._stepper).to(t),i=null;return this.queue(function(){i=this.element()[r](),e.from(i),e.to(i+t)},function(s){return this.element()[r](e.at(s)),e.done()},function(s){e.to(i+new xt(s))}),this._rememberMorpher(r,e),this},_queueObject(r,t){if(this._tryRetarget(r,t))return this;let e=new ur(this._stepper).to(t);return this.queue(function(){e.from(this.element()[r]())},function(i){return this.element()[r](e.at(i)),e.done()}),this._rememberMorpher(r,e),this},_queueNumber(r,t){return this._queueObject(r,new xt(t))},cx(r){return this._queueNumber("cx",r)},cy(r){return this._queueNumber("cy",r)},move(r,t){return this.x(r).y(t)},amove(r,t){return this.ax(r).ay(t)},center(r,t){return this.cx(r).cy(t)},size(r,t){let e;return r&&t||(e=this._element.bbox()),r||(r=e.width/e.height*t),t||(t=e.height/e.width*r),this.width(r).height(t)},width(r){return this._queueNumber("width",r)},height(r){return this._queueNumber("height",r)},plot(r,t,e,i){if(arguments.length===4)return this.plot([r,t,e,i]);if(this._tryRetarget("plot",r))return this;let s=new ur(this._stepper).type(this._element.MorphArray).to(r);return this.queue(function(){s.from(this._element.array())},function(n){return this._element.plot(s.at(n)),s.done()}),this._rememberMorpher("plot",s),this},leading(r){return this._queueNumber("leading",r)},viewbox(r,t,e,i){return this._queueObject("viewbox",new Qt(r,t,e,i))},update(r){return typeof r!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(r.opacity!=null&&this.attr("stop-opacity",r.opacity),r.color!=null&&this.attr("stop-color",r.color),r.offset!=null&&this.attr("offset",r.offset),this)}}),at(yi,{rx:tm,ry:em,from:lA,to:cA}),wt(yi,"Runner");var Na=class extends Me{constructor(t,e=t){super(Rt("svg",t),e),this.namespace()}defs(){return this.isRoot()?ui(this.node.querySelector("defs"))||this.put(new so):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof yt.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:$g,version:"1.1"}).attr("xmlns:xlink",fo,vg):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,vg).attr("xmlns:svgjs",null,vg)}root(){return this.isRoot()?this:super.root()}};dt({Container:{nested:Mt(function(){return this.put(new Na)})}}),wt(Na,"Svg",!0);var _g=class extends Me{constructor(r,t=r){super(Rt("symbol",r),t)}};dt({Container:{symbol:Mt(function(){return this.put(new _g)})}}),wt(_g,"Symbol");var pA=Object.freeze({__proto__:null,amove:function(r,t){return this.ax(r).ay(t)},ax:function(r){return this.attr("x",r)},ay:function(r){return this.attr("y",r)},build:function(r){return this._build=!!r,this},center:function(r,t,e=this.bbox()){return this.cx(r,e).cy(t,e)},cx:function(r,t=this.bbox()){return r==null?t.cx:this.attr("x",this.attr("x")+r-t.cx)},cy:function(r,t=this.bbox()){return r==null?t.cy:this.attr("y",this.attr("y")+r-t.cy)},length:function(){return this.node.getComputedTextLength()},move:function(r,t,e=this.bbox()){return this.x(r,e).y(t,e)},plain:function(r){return this._build===!1&&this.clear(),this.node.appendChild(yt.document.createTextNode(r)),this},x:function(r,t=this.bbox()){return r==null?t.x:this.attr("x",this.attr("x")+r-t.x)},y:function(r,t=this.bbox()){return r==null?t.y:this.attr("y",this.attr("y")+r-t.y)}}),Qe=class extends Re{constructor(t,e=t){super(Rt("text",t),e),this.dom.leading=this.dom.leading??new xt(1.3),this._rebuild=!0,this._build=!1}leading(t){return t==null?this.dom.leading:(this.dom.leading=new xt(t),this.rebuild())}rebuild(t){if(typeof t=="boolean"&&(this._rebuild=t),this._rebuild){let e=this,i=0,s=this.dom.leading;this.each(function(n){if(Og(this.node))return;let o=yt.window.getComputedStyle(this.node).getPropertyValue("font-size"),a=s*new xt(o);this.dom.newLined&&(this.attr("x",e.attr("x")),this.text()===`
`?i+=a:(this.attr("dy",n?a+i:0),i=0))}),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new xt(t.leading||1.3),this}writeDataToDom(){return G1(this,this.dom,{leading:1.3}),this}text(t){if(t===void 0){let e=this.node.childNodes,i=0;t="";for(let s=0,n=e.length;s<n;++s)e[s].nodeName==="textPath"||Og(e[s])?s===0&&(i=s+1):(s!==i&&e[s].nodeType!==3&&ui(e[s]).dom.newLined===!0&&(t+=`
`),t+=e[s].textContent);return t}if(this.clear().build(!0),typeof t=="function")t.call(this,this);else for(let e=0,i=(t=(t+"").split(`
`)).length;e<i;e++)this.newLine(t[e]);return this.build(!1).rebuild()}};at(Qe,pA),dt({Container:{text:Mt(function(r=""){return this.put(new Qe).text(r)}),plain:Mt(function(r=""){return this.put(new Qe).plain(r)})}}),wt(Qe,"Text");var io=class extends Re{constructor(t,e=t){super(Rt("tspan",t),e),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;let t=this.parent();if(!(t instanceof Qe))return this;let e=t.index(this),i=yt.window.getComputedStyle(this.node).getPropertyValue("font-size"),s=t.dom.leading*new xt(i);return this.dy(e?s:0).attr("x",t.x())}text(t){return t==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof t=="function"?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}};at(io,pA),dt({Tspan:{tspan:Mt(function(r=""){let t=new io;return this._build||this.clear(),this.put(t).text(r)})},Text:{newLine:function(r=""){return this.tspan(r).newLine()}}}),wt(io,"Tspan");var Sa=class extends Re{constructor(t,e=t){super(Rt("circle",t),e)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new xt(t).divide(2))}};at(Sa,{x:iA,y:rA,cx:sA,cy:nA,width:oA,height:aA}),dt({Container:{circle:Mt(function(r=0){return this.put(new Sa).size(r).move(0,0)})}}),wt(Sa,"Circle");var Ca=class extends Me{constructor(t,e=t){super(Rt("clipPath",t),e)}remove(){return this.targets().forEach(function(t){t.unclip()}),super.remove()}targets(){return Ws("svg [clip-path*="+this.id()+"]")}};dt({Container:{clip:Mt(function(){return this.defs().put(new Ca)})},Element:{clipper(){return this.reference("clip-path")},clipWith(r){let t=r instanceof Ca?r:this.parent().clip().add(r);return this.attr("clip-path","url(#"+t.id()+")")},unclip(){return this.attr("clip-path",null)}}}),wt(Ca,"ClipPath");var _h=class extends ge{constructor(t,e=t){super(Rt("foreignObject",t),e)}};dt({Container:{foreignObject:Mt(function(r,t){return this.put(new _h).size(r,t)})}}),wt(_h,"ForeignObject");var gA=Object.freeze({__proto__:null,dmove:function(r,t){return this.children().forEach(e=>{let i;try{i=e.node instanceof Ha().SVGSVGElement?new Qt(e.attr(["x","y","width","height"])):e.bbox()}catch{return}let s=new ft(e),n=s.translate(r,t).transform(s.inverse()),o=new St(i.x,i.y).transform(n);e.move(o.x,o.y)}),this},dx:function(r){return this.dmove(r,0)},dy:function(r){return this.dmove(0,r)},height:function(r,t=this.bbox()){return r==null?t.height:this.size(t.width,r,t)},move:function(r=0,t=0,e=this.bbox()){let i=r-e.x,s=t-e.y;return this.dmove(i,s)},size:function(r,t,e=this.bbox()){let i=uo(this,r,t,e),s=i.width/e.width,n=i.height/e.height;return this.children().forEach(o=>{let a=new St(e).transform(new ft(o).inverse());o.scale(s,n,a.x,a.y)}),this},width:function(r,t=this.bbox()){return r==null?t.width:this.size(r,t.height,t)},x:function(r,t=this.bbox()){return r==null?t.x:this.move(r,t.y,t)},y:function(r,t=this.bbox()){return r==null?t.y:this.move(t.x,r,t)}}),Di=class extends Me{constructor(t,e=t){super(Rt("g",t),e)}};at(Di,gA),dt({Container:{group:Mt(function(){return this.put(new Di)})}}),wt(Di,"G");var Qn=class extends Me{constructor(t,e=t){super(Rt("a",t),e)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,fo)}};at(Qn,gA),dt({Container:{link:Mt(function(r){return this.put(new Qn).to(r)})},Element:{unlink(){let r=this.linker();if(!r)return this;let t=r.parent();if(!t)return this.remove();let e=t.index(r);return t.add(this,e),r.remove(),this},linkTo(r){let t=this.linker();return t||(t=new Qn,this.wrap(t)),typeof r=="function"?r.call(t,t):t.to(r),this},linker(){let r=this.parent();return r&&r.node.nodeName.toLowerCase()==="a"?r:null}}}),wt(Qn,"A");var Ea=class extends Me{constructor(t,e=t){super(Rt("mask",t),e)}remove(){return this.targets().forEach(function(t){t.unmask()}),super.remove()}targets(){return Ws("svg [mask*="+this.id()+"]")}};dt({Container:{mask:Mt(function(){return this.defs().put(new Ea)})},Element:{masker(){return this.reference("mask")},maskWith(r){let t=r instanceof Ea?r:this.parent().mask().add(r);return this.attr("mask","url(#"+t.id()+")")},unmask(){return this.attr("mask",null)}}}),wt(Ea,"Mask");var zh=class extends ge{constructor(t,e=t){super(Rt("stop",t),e)}update(t){return(typeof t=="number"||t instanceof xt)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),t.opacity!=null&&this.attr("stop-opacity",t.opacity),t.color!=null&&this.attr("stop-color",t.color),t.offset!=null&&this.attr("offset",new xt(t.offset)),this}};dt({Gradient:{stop:function(r,t,e){return this.put(new zh).update(r,t,e)}}}),wt(zh,"Stop");var Ta=class extends ge{constructor(t,e=t){super(Rt("style",t),e)}addText(t=""){return this.node.textContent+=t,this}font(t,e,i={}){return this.rule("@font-face",{fontFamily:t,src:e,...i})}rule(t,e){return this.addText(function(i,s){if(!i)return"";if(!s)return i;let n=i+"{";for(let o in s)n+=o.replace(/([A-Z])/g,function(a,l){return"-"+l.toLowerCase()})+":"+s[o]+";";return n+="}",n}(t,e))}};dt("Dom",{style(r,t){return this.put(new Ta).rule(r,t)},fontface(r,t,e){return this.put(new Ta).font(r,t,e)}}),wt(Ta,"Style");var La=class extends Qe{constructor(t,e=t){super(Rt("textPath",t),e)}array(){let t=this.track();return t?t.array():null}plot(t){let e=this.track(),i=null;return e&&(i=e.plot(t)),t==null?i:this}track(){return this.reference("href")}};dt({Container:{textPath:Mt(function(r,t){return r instanceof Qe||(r=this.text(r)),r.path(t)})},Text:{path:Mt(function(r,t=!0){let e=new La,i;if(r instanceof is||(r=this.defs().path(r)),e.attr("href","#"+r,fo),t)for(;i=this.node.firstChild;)e.node.appendChild(i);return this.put(e)}),textPath(){return this.findOne("textPath")}},Path:{text:Mt(function(r){return r instanceof Qe||(r=new Qe().addTo(this.parent()).text(r)),r.path(this)}),targets(){return Ws("svg textPath").filter(r=>(r.attr("href")||"").includes(this.id()))}}}),La.prototype.MorphArray=Je,wt(La,"TextPath");var Hh=class extends Re{constructor(t,e=t){super(Rt("use",t),e)}use(t,e){return this.attr("href",(e||"")+"#"+t,fo)}};dt({Container:{use:Mt(function(r,t){return this.put(new Hh).use(r,t)})}}),wt(Hh,"Use");var MD=Le;at([Na,_g,Oh,zs,Nh],Xe("viewbox")),at([Ds,pr,fr,is],Xe("marker")),at(Qe,Xe("Text")),at(is,Xe("Path")),at(so,Xe("Defs")),at([Qe,io],Xe("Tspan")),at([eo,to,Bs,yi],Xe("radius")),at(_s,Xe("EventTarget")),at(rs,Xe("Dom")),at(ge,Xe("Element")),at(Re,Xe("Shape")),at([Me,Fh],Xe("Container")),at(Bs,Xe("Gradient")),at(yi,Xe("Runner")),gr.extend([...new Set(V1)]),function(r=[]){Fg.push(...[].concat(r))}([xt,pi,Qt,ft,mr,Fi,Je,St]),at(Fg,{to(r){return new ur().type(this.constructor).from(this.toArray()).to(r)},fromArray(r){return this.init(r),this},toConsumable(){return this.toArray()},morph(r,t,e,i,s){return this.fromArray(r.map(function(n,o){return i.step(n,t[o],e,s[o],s)}))}});var Lt=class extends ge{constructor(t){super(Rt("filter",t),t),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(t,e){return!(t=super.put(t,e)).attr("in")&&this.$autoSetIn&&t.attr("in",this.$source),t.attr("result")||t.attr("result",t.id()),t}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return Ws('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}},Pa=class extends ge{constructor(t,e){super(t,e),this.result(this.id())}in(t){if(t==null){let e=this.attr("in");return this.parent()&&this.parent().find(`[result="${e}"]`)[0]||e}return this.attr("in",t)}result(t){return this.attr("result",t)}toString(){return this.result()}},hi=r=>function(...t){for(let e=r.length;e--;)t[e]!=null&&this.attr(r[e],t[e])},RD={blend:hi(["in","in2","mode"]),colorMatrix:hi(["type","values"]),composite:hi(["in","in2","operator"]),convolveMatrix:function(r){r=new mr(r).toString(),this.attr({order:Math.sqrt(r.split(" ").length),kernelMatrix:r})},diffuseLighting:hi(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:hi(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:hi(["in","dx","dy","stdDeviation"]),flood:hi(["flood-color","flood-opacity"]),gaussianBlur:function(r=0,t=r){this.attr("stdDeviation",r+" "+t)},image:function(r){this.attr("href",r,fo)},morphology:hi(["operator","radius"]),offset:hi(["dx","dy"]),specularLighting:hi(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:hi([]),turbulence:hi(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach(r=>{let t=ho(r),e=RD[r];Lt[t+"Effect"]=class extends Pa{constructor(i){super(Rt("fe"+t,i),i)}update(i){return e.apply(this,i),this}},Lt.prototype[r]=Mt(function(i,...s){let n=new Lt[t+"Effect"];return i==null?this.put(n):(typeof i=="function"?i.call(n,n):s.unshift(i),this.put(n).update(s))})}),at(Lt,{merge(r){let t=this.put(new Lt.MergeEffect);return typeof r=="function"?(r.call(t,t),t):((r instanceof Array?r:[...arguments]).forEach(e=>{e instanceof Lt.MergeNode?t.put(e):t.mergeNode(e)}),t)},componentTransfer(r={}){let t=this.put(new Lt.ComponentTransferEffect);if(typeof r=="function")return r.call(t,t),t;r.r||r.g||r.b||r.a||(r={r,g:r,b:r,a:r});for(let e in r)t.add(new Lt["Func"+e.toUpperCase()](r[e]));return t}});["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach(r=>{let t=ho(r);Lt[t]=class extends Pa{constructor(e){super(Rt("fe"+t,e),e)}}});["funcR","funcG","funcB","funcA"].forEach(function(r){let t=Lt[ho(r)],e=Mt(function(){return this.put(new t)});Lt.ComponentTransferEffect.prototype[r]=e});["distantLight","pointLight","spotLight"].forEach(r=>{let t=Lt[ho(r)],e=Mt(function(){return this.put(new t)});Lt.DiffuseLightingEffect.prototype[r]=e,Lt.SpecularLightingEffect.prototype[r]=e}),at(Lt.MergeEffect,{mergeNode(r){return this.put(new Lt.MergeNode).attr("in",r)}}),at(so,{filter:function(r){let t=this.put(new Lt);return typeof r=="function"&&r.call(t,t),t}}),at(Me,{filter:function(r){return this.defs().filter(r)}}),at(ge,{filterWith:function(r){let t=r instanceof Lt?r:this.defs().filter(r);return this.attr("filter",t)},unfilter:function(r){return this.attr("filter",null)},filterer(){return this.reference("filter")}});var ID={blend:function(r,t){return this.parent()&&this.parent().blend(this,r,t)},colorMatrix:function(r,t){return this.parent()&&this.parent().colorMatrix(r,t).in(this)},componentTransfer:function(r){return this.parent()&&this.parent().componentTransfer(r).in(this)},composite:function(r,t){return this.parent()&&this.parent().composite(this,r,t)},convolveMatrix:function(r){return this.parent()&&this.parent().convolveMatrix(r).in(this)},diffuseLighting:function(r,t,e,i){return this.parent()&&this.parent().diffuseLighting(r,e,i).in(this)},displacementMap:function(r,t,e,i){return this.parent()&&this.parent().displacementMap(this,r,t,e,i)},dropShadow:function(r,t,e){return this.parent()&&this.parent().dropShadow(this,r,t,e).in(this)},flood:function(r,t){return this.parent()&&this.parent().flood(r,t)},gaussianBlur:function(r,t){return this.parent()&&this.parent().gaussianBlur(r,t).in(this)},image:function(r){return this.parent()&&this.parent().image(r)},merge:function(r){return r=r instanceof Array?r:[...r],this.parent()&&this.parent().merge(this,...r)},morphology:function(r,t){return this.parent()&&this.parent().morphology(r,t).in(this)},offset:function(r,t){return this.parent()&&this.parent().offset(r,t).in(this)},specularLighting:function(r,t,e,i,s){return this.parent()&&this.parent().specularLighting(r,e,i,s).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(r,t,e,i,s){return this.parent()&&this.parent().turbulence(r,t,e,i,s).in(this)}};at(Pa,ID),at(Lt.MergeEffect,{in:function(r){return r instanceof Lt.MergeNode?this.add(r,0):this.add(new Lt.MergeNode().in(r),0),this}}),at([Lt.CompositeEffect,Lt.BlendEffect,Lt.DisplacementMapEffect],{in2:function(r){if(r==null){let t=this.attr("in2");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in2",r)}}),Lt.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};var pe=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"getDefaultFilter",value:function(t,e){var i=this.w;t.unfilter(!0),new Lt().size("120%","180%","-5%","-40%"),i.config.chart.dropShadow.enabled&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"applyFilter",value:function(t,e,i){var s,n=this,o=this.w;if(t.unfilter(!0),i!=="none"){var a,l,c=o.config.chart.dropShadow,h=i==="lighten"?2:.3;t.filterWith(function(u){u.colorMatrix({type:"matrix",values:`
          `.concat(h,` 0 0 0 0
          0 `).concat(h,` 0 0 0
          0 0 `).concat(h,` 0 0
          0 0 0 1 0
        `),in:"SourceGraphic",result:"brightness"}),c.enabled&&n.addShadow(u,e,c,"brightness")}),!c.noUserSpaceOnUse&&((a=t.filterer())===null||a===void 0||(l=a.node)===null||l===void 0||l.setAttribute("filterUnits","userSpaceOnUse")),this._scaleFilterSize((s=t.filterer())===null||s===void 0?void 0:s.node)}else this.getDefaultFilter(t,e)}},{key:"addShadow",value:function(t,e,i,s){var n,o=this.w,a=i.blur,l=i.top,c=i.left,h=i.color,u=i.opacity;if(h=Array.isArray(h)?h[e]:h,((n=o.config.chart.dropShadow.enabledOnSeries)===null||n===void 0?void 0:n.length)>0&&o.config.chart.dropShadow.enabledOnSeries.indexOf(e)===-1)return t;t.offset({in:s,dx:c,dy:l,result:"offset"}),t.gaussianBlur({in:"offset",stdDeviation:a,result:"blur"}),t.flood({"flood-color":h,"flood-opacity":u,result:"flood"}),t.composite({in:"flood",in2:"blur",operator:"in",result:"shadow"}),t.merge(["shadow",s])}},{key:"dropShadow",value:function(t,e){var i,s,n,o,a,l=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=this.w;return t.unfilter(!0),F.isMsEdge()&&h.config.chart.type==="radialBar"||((i=h.config.chart.dropShadow.enabledOnSeries)===null||i===void 0?void 0:i.length)>0&&((n=h.config.chart.dropShadow.enabledOnSeries)===null||n===void 0?void 0:n.indexOf(c))===-1?t:(t.filterWith(function(u){l.addShadow(u,c,e,"SourceGraphic")}),e.noUserSpaceOnUse||(o=t.filterer())===null||o===void 0||(a=o.node)===null||a===void 0||a.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize((s=t.filterer())===null||s===void 0?void 0:s.node),t)}},{key:"setSelectionFilter",value:function(t,e,i){var s=this.w;if(s.globals.selectedDataPoints[e]!==void 0&&s.globals.selectedDataPoints[e].indexOf(i)>-1){t.node.setAttribute("selected",!0);var n=s.config.states.active.filter;n!=="none"&&this.applyFilter(t,e,n.type)}}},{key:"_scaleFilterSize",value:function(t){t&&function(e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),r}(),U=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"roundPathCorners",value:function(t,e){function i(M,O,B){var _=O.x-M.x,z=O.y-M.y,N=Math.sqrt(_*_+z*z);return s(M,O,Math.min(1,B/N))}function s(M,O,B){return{x:M.x+(O.x-M.x)*B,y:M.y+(O.y-M.y)*B}}function n(M,O){M.length>2&&(M[M.length-2]=O.x,M[M.length-1]=O.y)}function o(M){return{x:parseFloat(M[M.length-2]),y:parseFloat(M[M.length-1])}}t.indexOf("NaN")>-1&&(t="");var a=t.split(/[,\s]/).reduce(function(M,O){var B=O.match("([a-zA-Z])(.+)");return B?(M.push(B[1]),M.push(B[2])):M.push(O),M},[]).reduce(function(M,O){return parseFloat(O)==O&&M.length?M[M.length-1].push(O):M.push([O]),M},[]),l=[];if(a.length>1){var c=o(a[0]),h=null;a[a.length-1][0]=="Z"&&a[0].length>2&&(h=["L",c.x,c.y],a[a.length-1]=h),l.push(a[0]);for(var u=1;u<a.length;u++){var d=l[l.length-1],f=a[u],g=f==h?a[1]:a[u+1];if(g&&d&&d.length>2&&f[0]=="L"&&g.length>2&&g[0]=="L"){var p,b,m=o(d),x=o(f),v=o(g);p=i(x,m,e),b=i(x,v,e),n(f,p),f.origPoint=x,l.push(f);var w=s(p,x,.5),y=s(x,b,.5),A=["C",w.x,w.y,y.x,y.y,b.x,b.y];A.origPoint=x,l.push(A)}else l.push(f)}if(h){var C=o(l[l.length-1]);l.push(["Z"]),n(l[0],C)}}else l=a;return l.reduce(function(M,O){return M+O.join(" ")+" "},"")}},{key:"drawLine",value:function(t,e,i,s){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:t,y1:e,x2:i,y2:s,stroke:n,"stroke-dasharray":o,"stroke-width":a,"stroke-linecap":l})}},{key:"drawRect",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,h=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,u=this.w.globals.dom.Paper.rect();return u.attr({x:t,y:e,width:i>0?i:0,height:s>0?s:0,rx:n,ry:n,opacity:a,"stroke-width":l!==null?l:0,stroke:c!==null?c:"none","stroke-dasharray":h}),u.node.setAttribute("fill",o),u}},{key:"drawPolygon",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(t).attr({fill:s,stroke:e,"stroke-width":i})}},{key:"drawCircle",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;t<0&&(t=0);var i=this.w.globals.dom.Paper.circle(2*t);return e!==null&&i.attr(e),i}},{key:"drawPath",value:function(t){var e=t.d,i=e===void 0?"":e,s=t.stroke,n=s===void 0?"#a8a8a8":s,o=t.strokeWidth,a=o===void 0?1:o,l=t.fill,c=t.fillOpacity,h=c===void 0?1:c,u=t.strokeOpacity,d=u===void 0?1:u,f=t.classes,g=t.strokeLinecap,p=g===void 0?null:g,b=t.strokeDashArray,m=b===void 0?0:b,x=this.w;return p===null&&(p=x.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(x.globals.gridHeight)),x.globals.dom.Paper.path(i).attr({fill:l,"fill-opacity":h,stroke:n,"stroke-opacity":d,"stroke-linecap":p,"stroke-width":a,"stroke-dasharray":m,class:f})}},{key:"group",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=this.w.globals.dom.Paper.group();return t!==null&&e.attr(t),e}},{key:"move",value:function(t,e){var i=["M",t,e].join(" ");return i}},{key:"line",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=null;return i===null?s=[" L",t,e].join(" "):i==="H"?s=[" H",t].join(" "):i==="V"&&(s=[" V",e].join(" ")),s}},{key:"curve",value:function(t,e,i,s,n,o){var a=["C",t,e,i,s,n,o].join(" ");return a}},{key:"quadraticCurve",value:function(t,e,i,s){return["Q",t,e,i,s].join(" ")}},{key:"arc",value:function(t,e,i,s,n,o,a){var l="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(l="a");var c=[l,t,e,i,s,n,o,a].join(" ");return c}},{key:"renderPaths",value:function(t){var e,i=t.j,s=t.realIndex,n=t.pathFrom,o=t.pathTo,a=t.stroke,l=t.strokeWidth,c=t.strokeLinecap,h=t.fill,u=t.animationDelay,d=t.initialSpeed,f=t.dataChangeSpeed,g=t.className,p=t.chartType,b=t.shouldClipToGrid,m=b===void 0||b,x=t.bindEventsOnPaths,v=x===void 0||x,w=t.drawShadow,y=w===void 0||w,A=this.w,C=new pe(this.ctx),M=new co(this.ctx),O=this.w.config.chart.animations.enabled,B=O&&this.w.config.chart.animations.dynamicAnimation.enabled,_=!!(O&&!A.globals.resized||B&&A.globals.dataChanged&&A.globals.shouldAnimate);_?e=n:(e=o,A.globals.animationEnded=!0);var z=A.config.stroke.dashArray,N=0;N=Array.isArray(z)?z[s]:A.config.stroke.dashArray;var E=this.drawPath({d:e,stroke:a,strokeWidth:l,fill:h,fillOpacity:1,classes:g,strokeLinecap:c,strokeDashArray:N});E.attr("index",s),m&&(p==="bar"&&!A.globals.isHorizontal||A.globals.comboCharts?E.attr({"clip-path":"url(#gridRectBarMask".concat(A.globals.cuid,")")}):E.attr({"clip-path":"url(#gridRectMask".concat(A.globals.cuid,")")})),A.config.chart.dropShadow.enabled&&y&&C.dropShadow(E,A.config.chart.dropShadow,s),v&&(E.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,E)),E.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,E)),E.node.addEventListener("mousedown",this.pathMouseDown.bind(this,E))),E.attr({pathTo:o,pathFrom:n});var I={el:E,j:i,realIndex:s,pathFrom:n,pathTo:o,fill:h,strokeWidth:l,delay:u};return!O||A.globals.resized||A.globals.dataChanged?!A.globals.resized&&A.globals.dataChanged||M.showDelayedElements():M.animatePathsGradually(K(K({},I),{},{speed:d})),A.globals.dataChanged&&B&&_&&M.animatePathsGradually(K(K({},I),{},{speed:f})),E}},{key:"drawPattern",value:function(t,e,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(e,i,function(o){t==="horizontalLines"?o.line(0,0,i,0).stroke({color:s,width:n+1}):t==="verticalLines"?o.line(0,0,0,e).stroke({color:s,width:n+1}):t==="slantedLines"?o.line(0,0,e,i).stroke({color:s,width:n}):t==="squares"?o.rect(e,i).fill("none").stroke({color:s,width:n}):t==="circles"&&o.circle(e).fill("none").stroke({color:s,width:n})})}},{key:"drawGradient",value:function(t,e,i,s,n){var o,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],h=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,u=this.w;e.length<9&&e.indexOf("#")===0&&(e=F.hexToRgba(e,s)),i.length<9&&i.indexOf("#")===0&&(i=F.hexToRgba(i,n));var d=0,f=1,g=1,p=null;l!==null&&(d=l[0]!==void 0?l[0]/100:0,f=l[1]!==void 0?l[1]/100:1,g=l[2]!==void 0?l[2]/100:1,p=l[3]!==void 0?l[3]/100:null);var b=!(u.config.chart.type!=="donut"&&u.config.chart.type!=="pie"&&u.config.chart.type!=="polarArea"&&u.config.chart.type!=="bubble");if(o=c&&c.length!==0?u.globals.dom.Paper.gradient(b?"radial":"linear",function(v){(Array.isArray(c[h])?c[h]:c).forEach(function(w){v.stop(w.offset/100,w.color,w.opacity)})}):u.globals.dom.Paper.gradient(b?"radial":"linear",function(v){v.stop(d,e,s),v.stop(f,i,n),v.stop(g,i,n),p!==null&&v.stop(p,e,s)}),b){var m=u.globals.gridWidth/2,x=u.globals.gridHeight/2;u.config.chart.type!=="bubble"?o.attr({gradientUnits:"userSpaceOnUse",cx:m,cy:x,r:a}):o.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else t==="vertical"?o.from(0,0).to(0,1):t==="diagonal"?o.from(0,0).to(1,1):t==="horizontal"?o.from(0,1).to(1,1):t==="diagonal2"&&o.from(1,0).to(0,1);return o}},{key:"getTextBasedOnMaxWidth",value:function(t){var e=t.text,i=t.maxWidth,s=t.fontSize,n=t.fontFamily,o=this.getTextRects(e,s,n),a=o.width/e.length,l=Math.floor(i/a);return i<o.width?e.slice(0,l-3)+"...":e}},{key:"drawText",value:function(t){var e=this,i=t.x,s=t.y,n=t.text,o=t.textAnchor,a=t.fontSize,l=t.fontFamily,c=t.fontWeight,h=t.foreColor,u=t.opacity,d=t.maxWidth,f=t.cssClass,g=f===void 0?"":f,p=t.isPlainText,b=p===void 0||p,m=t.dominantBaseline,x=m===void 0?"auto":m,v=this.w;n===void 0&&(n="");var w=n;o||(o="start"),h&&h.length||(h=v.config.chart.foreColor),l=l||v.config.chart.fontFamily,c=c||"regular";var y,A={maxWidth:d,fontSize:a=a||"11px",fontFamily:l};return Array.isArray(n)?y=v.globals.dom.Paper.text(function(C){for(var M=0;M<n.length;M++)w=n[M],d&&(w=e.getTextBasedOnMaxWidth(K({text:n[M]},A))),M===0?C.tspan(w):C.tspan(w).newLine()}):(d&&(w=this.getTextBasedOnMaxWidth(K({text:n},A))),y=b?v.globals.dom.Paper.plain(n):v.globals.dom.Paper.text(function(C){return C.tspan(w)})),y.attr({x:i,y:s,"text-anchor":o,"dominant-baseline":x,"font-size":a,"font-family":l,"font-weight":c,fill:h,class:"apexcharts-text "+g}),y.node.style.fontFamily=l,y.node.style.opacity=u,y}},{key:"getMarkerPath",value:function(t,e,i,s){var n="";switch(i){case"cross":n="M ".concat(t-(s/=1.4)," ").concat(e-s," L ").concat(t+s," ").concat(e+s,"  M ").concat(t-s," ").concat(e+s," L ").concat(t+s," ").concat(e-s);break;case"plus":n="M ".concat(t-(s/=1.12)," ").concat(e," L ").concat(t+s," ").concat(e,"  M ").concat(t," ").concat(e-s," L ").concat(t," ").concat(e+s);break;case"star":case"sparkle":var o=5;s*=1.15,i==="sparkle"&&(s/=1.1,o=4);for(var a=Math.PI/o,l=0;l<=2*o;l++){var c=l*a,h=l%2==0?s:s/2;n+=(l===0?"M":"L")+(t+h*Math.sin(c))+","+(e-h*Math.cos(c))}n+="Z";break;case"triangle":n="M ".concat(t," ").concat(e-s,` 
             L `).concat(t+s," ").concat(e+s,` 
             L `).concat(t-s," ").concat(e+s,` 
             Z`);break;case"square":case"rect":n="M ".concat(t-(s/=1.125)," ").concat(e-s,` 
           L `).concat(t+s," ").concat(e-s,` 
           L `).concat(t+s," ").concat(e+s,` 
           L `).concat(t-s," ").concat(e+s,` 
           Z`);break;case"diamond":s*=1.05,n="M ".concat(t," ").concat(e-s,` 
             L `).concat(t+s," ").concat(e,` 
             L `).concat(t," ").concat(e+s,` 
             L `).concat(t-s," ").concat(e,` 
            Z`);break;case"line":n="M ".concat(t-(s/=1.1)," ").concat(e,` 
           L `).concat(t+s," ").concat(e);break;default:s*=2,n="M ".concat(t,", ").concat(e,` 
           m -`).concat(s/2,`, 0 
           a `).concat(s/2,",").concat(s/2," 0 1,0 ").concat(s,`,0 
           a `).concat(s/2,",").concat(s/2," 0 1,0 -").concat(s,",0")}return n}},{key:"drawMarkerShape",value:function(t,e,i,s,n){var o=this.drawPath({d:this.getMarkerPath(t,e,i,s,n),stroke:n.pointStrokeColor,strokeDashArray:n.pointStrokeDashArray,strokeWidth:n.pointStrokeWidth,fill:n.pointFillColor,fillOpacity:n.pointFillOpacity,strokeOpacity:n.pointStrokeOpacity});return o.attr({cx:t,cy:e,shape:n.shape,class:n.class?n.class:""}),o}},{key:"drawMarker",value:function(t,e,i){t=t||0;var s=i.pSize||0;return F.isNumber(e)||(s=0,e=0),this.drawMarkerShape(t,e,i?.shape,s,K(K({},i),i.shape==="line"||i.shape==="plus"||i.shape==="cross"?{pointStrokeColor:i.pointFillColor,pointStrokeOpacity:i.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(t,e){var i=this.w,s=new pe(this.ctx),n=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10);if(typeof i.config.chart.events.dataPointMouseEnter=="function"&&i.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:n,dataPointIndex:o,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:n,dataPointIndex:o,w:i}]),(i.config.states.active.filter.type==="none"||t.node.getAttribute("selected")!=="true")&&i.config.states.hover.filter.type!=="none"&&!i.globals.isTouchDevice){var a=i.config.states.hover.filter;s.applyFilter(t,n,a.type)}}},{key:"pathMouseLeave",value:function(t,e){var i=this.w,s=new pe(this.ctx),n=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10);typeof i.config.chart.events.dataPointMouseLeave=="function"&&i.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:n,dataPointIndex:o,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:n,dataPointIndex:o,w:i}]),i.config.states.active.filter.type!=="none"&&t.node.getAttribute("selected")==="true"||i.config.states.hover.filter.type!=="none"&&s.getDefaultFilter(t,n)}},{key:"pathMouseDown",value:function(t,e){var i=this.w,s=new pe(this.ctx),n=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10),a="false";if(t.node.getAttribute("selected")==="true"){if(t.node.setAttribute("selected","false"),i.globals.selectedDataPoints[n].indexOf(o)>-1){var l=i.globals.selectedDataPoints[n].indexOf(o);i.globals.selectedDataPoints[n].splice(l,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var c=i.globals.dom.Paper.find(".apexcharts-series path:not(.apexcharts-decoration-element)"),h=i.globals.dom.Paper.find(".apexcharts-series circle:not(.apexcharts-decoration-element), .apexcharts-series rect:not(.apexcharts-decoration-element)"),u=function(g){Array.prototype.forEach.call(g,function(p){p.node.setAttribute("selected","false"),s.getDefaultFilter(p,n)})};u(c),u(h)}t.node.setAttribute("selected","true"),a="true",i.globals.selectedDataPoints[n]===void 0&&(i.globals.selectedDataPoints[n]=[]),i.globals.selectedDataPoints[n].push(o)}if(a==="true"){var d=i.config.states.active.filter;if(d!=="none")s.applyFilter(t,n,d.type);else if(i.config.states.hover.filter!=="none"&&!i.globals.isTouchDevice){var f=i.config.states.hover.filter;s.applyFilter(t,n,f.type)}}else i.config.states.active.filter.type!=="none"&&(i.config.states.hover.filter.type==="none"||i.globals.isTouchDevice?s.getDefaultFilter(t,n):(f=i.config.states.hover.filter,s.applyFilter(t,n,f.type)));typeof i.config.chart.events.dataPointSelection=="function"&&i.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:o,w:i}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:o,w:i}])}},{key:"rotateAroundCenter",value:function(t){var e={};return t&&typeof t.getBBox=="function"&&(e=t.getBBox()),{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getTextRects",value:function(t,e,i,s){var n=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=this.w,a=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:i,foreColor:"#fff",opacity:0});s&&a.attr("transform",s),o.globals.dom.Paper.add(a);var l=a.bbox();return n||(l=a.node.getBoundingClientRect()),a.remove(),{width:l.width,height:l.height}}},{key:"placeTextWithEllipsis",value:function(t,e,i){if(typeof t.getComputedTextLength=="function"&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=i/1.1)){for(var s=e.length-3;s>0;s-=3)if(t.getSubStringLength(0,s)<=i/1.1)return void(t.textContent=e.substring(0,s)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}}]),r}(),Yt=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"getStackedSeriesTotals",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=this.w,i=[];if(e.globals.series.length===0)return i;for(var s=0;s<e.globals.series[e.globals.maxValsInArrayIndex].length;s++){for(var n=0,o=0;o<e.globals.series.length;o++)e.globals.series[o][s]!==void 0&&t.indexOf(o)===-1&&(n+=e.globals.series[o][s]);i.push(n)}return i}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t===null?this.w.config.series.reduce(function(e,i){return e+i},0):this.w.globals.series[t].reduce(function(e,i){return e+i},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var t=this,e=this.w,i=[];return e.globals.seriesGroups.forEach(function(s){var n=[];e.config.series.forEach(function(a,l){s.indexOf(e.globals.seriesNames[l])>-1&&n.push(l)});var o=e.globals.series.map(function(a,l){return n.indexOf(l)===-1?l:-1}).filter(function(a){return a!==-1});i.push(t.getStackedSeriesTotals(o))}),i}},{key:"setSeriesYAxisMappings",value:function(){var t=this.w.globals,e=this.w.config,i=[],s=[],n=[],o=t.series.length>e.yaxis.length||e.yaxis.some(function(u){return Array.isArray(u.seriesName)});e.series.forEach(function(u,d){n.push(d),s.push(null)}),e.yaxis.forEach(function(u,d){i[d]=[]});var a=[];e.yaxis.forEach(function(u,d){var f=!1;if(u.seriesName){var g=[];Array.isArray(u.seriesName)?g=u.seriesName:g.push(u.seriesName),g.forEach(function(p){e.series.forEach(function(b,m){if(b.name===p){var x=m;d===m||o?!o||n.indexOf(m)>-1?i[d].push([d,m]):console.warn("Series '"+b.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(i[m].push([m,d]),x=d),f=!0,(x=n.indexOf(x))!==-1&&n.splice(x,1)}})})}f||a.push(d)}),i=i.map(function(u,d){var f=[];return u.forEach(function(g){s[g[1]]=g[0],f.push(g[1])}),f});for(var l=e.yaxis.length-1,c=0;c<a.length&&(l=a[c],i[l]=[],n);c++){var h=n[0];n.shift(),i[l].push(h),s[h]=l}n.forEach(function(u){i[l].push(u),s[u]=l}),t.seriesYAxisMap=i.map(function(u){return u}),t.seriesYAxisReverseMap=s.map(function(u){return u}),t.seriesYAxisMap.forEach(function(u,d){u.forEach(function(f){e.series[f]&&e.series[f].group===void 0&&(e.series[f].group="apexcharts-axis-".concat(d.toString()))})})}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(t===null?this.w.config.series.filter(function(e){return e!==null}):this.w.config.series[t].data.filter(function(e){return e!==null})).length===0}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every(function(e,i,s){return e===s[0]})}},{key:"getCategoryLabels",value:function(t){var e=this.w,i=t.slice();return e.config.xaxis.convertedCatToNumeric&&(i=t.map(function(s,n){return e.config.xaxis.labels.formatter(s-e.globals.minX+1)})),i}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map(function(e){return e.length}).indexOf(Math.max.apply(Math,t.globals.series.map(function(e){return e.length})))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach(function(i){e=Math.max(e,i)}),t.config.markers.discrete&&t.config.markers.discrete.length&&t.config.markers.discrete.forEach(function(i){e=Math.max(e,i.size)}),e>0&&(t.config.markers.hover.size>0?e=t.config.markers.hover.size:e+=t.config.markers.hover.sizeOffset),t.globals.markers.largestSize=e,e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map(function(e,i){var s=0;if(Array.isArray(e))for(var n=0;n<e.length;n++)s+=e[n];else s+=e;return s})}},{key:"getSeriesTotalsXRange",value:function(t,e){var i=this.w;return i.globals.series.map(function(s,n){for(var o=0,a=0;a<s.length;a++)i.globals.seriesX[n][a]>t&&i.globals.seriesX[n][a]<e&&(o+=s[a]);return o})}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map(function(e,i){var s=[];if(Array.isArray(e))for(var n=0;n<e.length;n++){var o=t.globals.stackedSeriesTotals[n],a=0;o&&(a=100*e[n]/o),s.push(a)}else{var l=100*e/t.globals.seriesTotals.reduce(function(c,h){return c+h},0);s.push(l)}return s})}},{key:"getCalculatedRatios",value:function(){var t,e,i,s=this,n=this.w,o=n.globals,a=[],l=0,c=[],h=.1,u=0;if(o.yRange=[],o.isMultipleYAxis)for(var d=0;d<o.minYArr.length;d++)o.yRange.push(Math.abs(o.minYArr[d]-o.maxYArr[d])),c.push(0);else o.yRange.push(Math.abs(o.minY-o.maxY));o.xRange=Math.abs(o.maxX-o.minX),o.zRange=Math.abs(o.maxZ-o.minZ);for(var f=0;f<o.yRange.length;f++)a.push(o.yRange[f]/o.gridHeight);if(e=o.xRange/o.gridWidth,t=o.yRange/o.gridWidth,i=o.xRange/o.gridHeight,(l=o.zRange/o.gridHeight*16)||(l=1),o.minY!==Number.MIN_VALUE&&Math.abs(o.minY)!==0&&(o.hasNegs=!0),n.globals.seriesYAxisReverseMap.length>0){var g=function(b,m){var x=n.config.yaxis[n.globals.seriesYAxisReverseMap[m]],v=b<0?-1:1;return b=Math.abs(b),x.logarithmic&&(b=s.getBaseLog(x.logBase,b)),-v*b/a[m]};if(o.isMultipleYAxis){c=[];for(var p=0;p<a.length;p++)c.push(g(o.minYArr[p],p))}else(c=[]).push(g(o.minY,0)),o.minY!==Number.MIN_VALUE&&Math.abs(o.minY)!==0&&(h=-o.minY/t,u=o.minX/e)}else(c=[]).push(0),h=0,u=0;return{yRatio:a,invertedYRatio:t,zRatio:l,xRatio:e,invertedXRatio:i,baseLineInvertedY:h,baseLineY:c,baseLineX:u}}},{key:"getLogSeries",value:function(t){var e=this,i=this.w;return i.globals.seriesLog=t.map(function(s,n){var o=i.globals.seriesYAxisReverseMap[n];return i.config.yaxis[o]&&i.config.yaxis[o].logarithmic?s.map(function(a){return a===null?null:e.getLogVal(i.config.yaxis[o].logBase,a,n)}):s}),i.globals.invalidLogScale?t:i.globals.seriesLog}},{key:"getLogValAtSeriesIndex",value:function(t,e){if(t===null)return null;var i=this.w,s=i.globals.seriesYAxisReverseMap[e];return i.config.yaxis[s]&&i.config.yaxis[s].logarithmic?this.getLogVal(i.config.yaxis[s].logBase,t,e):t}},{key:"getBaseLog",value:function(t,e){return Math.log(e)/Math.log(t)}},{key:"getLogVal",value:function(t,e,i){if(e<=0)return 0;var s=this.w,n=s.globals.minYArr[i]===0?-1:this.getBaseLog(t,s.globals.minYArr[i]),o=(s.globals.maxYArr[i]===0?0:this.getBaseLog(t,s.globals.maxYArr[i]))-n;return e<1?e/o:(this.getBaseLog(t,e)-n)/o}},{key:"getLogYRatios",value:function(t){var e=this,i=this.w,s=this.w.globals;return s.yLogRatio=t.slice(),s.logYRange=s.yRange.map(function(n,o){var a=i.globals.seriesYAxisReverseMap[o];if(i.config.yaxis[a]&&e.w.config.yaxis[a].logarithmic){var l,c=-Number.MAX_VALUE,h=Number.MIN_VALUE;return s.seriesLog.forEach(function(u,d){u.forEach(function(f){i.config.yaxis[d]&&i.config.yaxis[d].logarithmic&&(c=Math.max(f,c),h=Math.min(f,h))})}),l=Math.pow(s.yRange[o],Math.abs(h-c)/s.yRange[o]),s.yLogRatio[o]=l/s.gridHeight,l}}),s.invalidLogScale?t.slice():s.yLogRatio}},{key:"drawSeriesByGroup",value:function(t,e,i,s){var n=this.w,o=[];return t.series.length>0&&e.forEach(function(a){var l=[],c=[];t.i.forEach(function(h,u){n.config.series[h].group===a&&(l.push(t.series[u]),c.push(h))}),l.length>0&&o.push(s.draw(l,i,c))}),o}}],[{key:"checkComboSeries",value:function(t,e){var i=!1,s=0,n=0;return e===void 0&&(e="line"),t.length&&t[0].type!==void 0&&t.forEach(function(o){o.type!=="bar"&&o.type!=="column"&&o.type!=="candlestick"&&o.type!=="boxPlot"||s++,o.type!==void 0&&o.type!==e&&n++}),n>0&&(i=!0),{comboBarCount:s,comboCharts:i}}},{key:"extendArrayProps",value:function(t,e,i){var s,n,o,a,l,c;return(s=e)!==null&&s!==void 0&&s.yaxis&&(e=t.extendYAxis(e,i)),(n=e)!==null&&n!==void 0&&n.annotations&&(e.annotations.yaxis&&(e=t.extendYAxisAnnotations(e)),(o=e)!==null&&o!==void 0&&(a=o.annotations)!==null&&a!==void 0&&a.xaxis&&(e=t.extendXAxisAnnotations(e)),(l=e)!==null&&l!==void 0&&(c=l.annotations)!==null&&c!==void 0&&c.points&&(e=t.extendPointAnnotations(e))),e}}]),r}(),Vh=function(){function r(t){Q(this,r),this.w=t.w,this.annoCtx=t}return tt(r,[{key:"setOrientations",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this.w;if(t.label.orientation==="vertical"){var s=e!==null?e:0,n=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(s,"']"));if(n!==null){var o=n.getBoundingClientRect();n.setAttribute("x",parseFloat(n.getAttribute("x"))-o.height+4);var a=t.label.position==="top"?o.width:-o.width;n.setAttribute("y",parseFloat(n.getAttribute("y"))+a);var l=this.annoCtx.graphics.rotateAroundCenter(n),c=l.x,h=l.y;n.setAttribute("transform","rotate(-90 ".concat(c," ").concat(h,")"))}}}},{key:"addBackgroundToAnno",value:function(t,e){var i=this.w;if(!t||!e.label.text||!String(e.label.text).trim())return null;var s=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),n=t.getBoundingClientRect(),o=e.label.style.padding,a=o.left,l=o.right,c=o.top,h=o.bottom;if(e.label.orientation==="vertical"){var u=[a,l,c,h];c=u[0],h=u[1],a=u[2],l=u[3]}var d=n.left-s.left-a,f=n.top-s.top-c,g=this.annoCtx.graphics.drawRect(d-i.globals.barPadForNumericAxis,f,n.width+a+l,n.height+c+h,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&g.node.classList.add(e.id),g}},{key:"annotationsBackground",value:function(){var t=this,e=this.w,i=function(s,n,o){var a=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-annotations .apexcharts-").concat(o,"-annotation-label[rel='").concat(n,"']"));if(a){var l=a.parentNode,c=t.addBackgroundToAnno(a,s);c&&(l.insertBefore(c.node,a),s.label.mouseEnter&&c.node.addEventListener("mouseenter",s.label.mouseEnter.bind(t,s)),s.label.mouseLeave&&c.node.addEventListener("mouseleave",s.label.mouseLeave.bind(t,s)),s.label.click&&c.node.addEventListener("click",s.label.click.bind(t,s)))}};e.config.annotations.xaxis.forEach(function(s,n){return i(s,n,"xaxis")}),e.config.annotations.yaxis.forEach(function(s,n){return i(s,n,"yaxis")}),e.config.annotations.points.forEach(function(s,n){return i(s,n,"point")})}},{key:"getY1Y2",value:function(t,e){var i,s=this.w,n=t==="y1"?e.y:e.y2,o=!1;if(this.annoCtx.invertAxis){var a=s.config.xaxis.convertedCatToNumeric?s.globals.categoryLabels:s.globals.labels,l=a.indexOf(n),c=s.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(l+1,")"));i=c?parseFloat(c.getAttribute("y")):(s.globals.gridHeight/a.length-1)*(l+1)-s.globals.barHeight,e.seriesIndex!==void 0&&s.globals.barHeight&&(i-=s.globals.barHeight/2*(s.globals.series.length-1)-s.globals.barHeight*e.seriesIndex)}else{var h,u=s.globals.seriesYAxisMap[e.yAxisIndex][0],d=s.config.yaxis[e.yAxisIndex].logarithmic?new Yt(this.annoCtx.ctx).getLogVal(s.config.yaxis[e.yAxisIndex].logBase,n,u)/s.globals.yLogRatio[u]:(n-s.globals.minYArr[u])/(s.globals.yRange[u]/s.globals.gridHeight);i=s.globals.gridHeight-Math.min(Math.max(d,0),s.globals.gridHeight),o=d>s.globals.gridHeight||d<0,!e.marker||e.y!==void 0&&e.y!==null||(i=0),(h=s.config.yaxis[e.yAxisIndex])!==null&&h!==void 0&&h.reversed&&(i=d)}return typeof n=="string"&&n.includes("px")&&(i=parseFloat(n)),{yP:i,clipped:o}}},{key:"getX1X2",value:function(t,e){var i=this.w,s=t==="x1"?e.x:e.x2,n=this.annoCtx.invertAxis?i.globals.minY:i.globals.minX,o=this.annoCtx.invertAxis?i.globals.maxY:i.globals.maxX,a=this.annoCtx.invertAxis?i.globals.yRange[0]:i.globals.xRange,l=!1,c=this.annoCtx.inversedReversedAxis?(o-s)/(a/i.globals.gridWidth):(s-n)/(a/i.globals.gridWidth);return i.config.xaxis.type!=="category"&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||i.config.chart.sparkline.enabled||(c=this.getStringX(s)),typeof s=="string"&&s.includes("px")&&(c=parseFloat(s)),s==null&&e.marker&&(c=i.globals.gridWidth),e.seriesIndex!==void 0&&i.globals.barWidth&&!this.annoCtx.invertAxis&&(c-=i.globals.barWidth/2*(i.globals.series.length-1)-i.globals.barWidth*e.seriesIndex),c>i.globals.gridWidth?(c=i.globals.gridWidth,l=!0):c<0&&(c=0,l=!0),{x:c,clipped:l}}},{key:"getStringX",value:function(t){var e=this.w,i=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);var s=e.globals.labels.map(function(o){return Array.isArray(o)?o.join(" "):o}).indexOf(t),n=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(s+1,")"));return n&&(i=parseFloat(n.getAttribute("x"))),i}}]),r}(),qD=function(){function r(t){Q(this,r),this.w=t.w,this.annoCtx=t,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Vh(this.annoCtx)}return tt(r,[{key:"addXaxisAnnotation",value:function(t,e,i){var s,n=this.w,o=this.helpers.getX1X2("x1",t),a=o.x,l=o.clipped,c=!0,h=t.label.text,u=t.strokeDashArray;if(F.isNumber(a)){if(t.x2===null||t.x2===void 0){if(!l){var d=this.annoCtx.graphics.drawLine(a+t.offsetX,0+t.offsetY,a+t.offsetX,n.globals.gridHeight+t.offsetY,t.borderColor,u,t.borderWidth);e.appendChild(d.node),t.id&&d.node.classList.add(t.id)}}else{var f=this.helpers.getX1X2("x2",t);if(s=f.x,c=f.clipped,s<a){var g=a;a=s,s=g}var p=this.annoCtx.graphics.drawRect(a+t.offsetX,0+t.offsetY,s-a,n.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,u);p.node.classList.add("apexcharts-annotation-rect"),p.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),e.appendChild(p.node),t.id&&p.node.classList.add(t.id)}if(!l||!c){var b=this.annoCtx.graphics.getTextRects(h,parseFloat(t.label.style.fontSize)),m=t.label.position==="top"?4:t.label.position==="center"?n.globals.gridHeight/2+(t.label.orientation==="vertical"?b.width/2:0):n.globals.gridHeight,x=this.annoCtx.graphics.drawText({x:a+t.label.offsetX,y:m+t.label.offsetY-(t.label.orientation==="vertical"?t.label.position==="top"?b.width/2-12:-b.width/2:0),text:h,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});x.attr({rel:i}),e.appendChild(x.node),this.annoCtx.helpers.setOrientations(t,i)}}}},{key:"drawXAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map(function(s,n){t.addXaxisAnnotation(s,i.node,n)}),i}}]),r}(),fe=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return tt(r,[{key:"isValidDate",value:function(t){return typeof t!="number"&&!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);var i=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return i=this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,e){var i=this.w.globals.locale,s=this.w.config.xaxis.labels.datetimeUTC,n=["\0"].concat(se(i.months)),o=[""].concat(se(i.shortMonths)),a=[""].concat(se(i.days)),l=[""].concat(se(i.shortDays));function c(M,O){var B=M+"";for(O=O||2;B.length<O;)B="0"+B;return B}var h=s?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+h)).replace(/(^|[^\\])yy/g,"$1"+h.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+h);var u=(s?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+n[0])).replace(/(^|[^\\])MMM/g,"$1"+o[0])).replace(/(^|[^\\])MM/g,"$1"+c(u))).replace(/(^|[^\\])M/g,"$1"+u);var d=s?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+a[0])).replace(/(^|[^\\])ddd/g,"$1"+l[0])).replace(/(^|[^\\])dd/g,"$1"+c(d))).replace(/(^|[^\\])d/g,"$1"+d);var f=s?t.getUTCHours():t.getHours(),g=f>12?f-12:f===0?12:f;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+c(f))).replace(/(^|[^\\])H/g,"$1"+f)).replace(/(^|[^\\])hh+/g,"$1"+c(g))).replace(/(^|[^\\])h/g,"$1"+g);var p=s?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+c(p))).replace(/(^|[^\\])m/g,"$1"+p);var b=s?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+c(b))).replace(/(^|[^\\])s/g,"$1"+b);var m=s?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+c(m,3)),m=Math.round(m/10),e=e.replace(/(^|[^\\])ff/g,"$1"+c(m)),m=Math.round(m/10);var x=f<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+m)).replace(/(^|[^\\])TT+/g,"$1"+x)).replace(/(^|[^\\])T/g,"$1"+x.charAt(0));var v=x.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+v)).replace(/(^|[^\\])t/g,"$1"+v.charAt(0));var w=-t.getTimezoneOffset(),y=s||!w?"Z":w>0?"+":"-";if(!s){var A=(w=Math.abs(w))%60;y+=c(Math.floor(w/60))+":"+c(A)}e=e.replace(/(^|[^\\])K/g,"$1"+y);var C=(s?t.getUTCDay():t.getDay())+1;return e=(e=(e=(e=(e=e.replace(new RegExp(a[0],"g"),a[C])).replace(new RegExp(l[0],"g"),l[C])).replace(new RegExp(n[0],"g"),n[u])).replace(new RegExp(o[0],"g"),o[u])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,i){var s=this.w;s.config.xaxis.min!==void 0&&(t=s.config.xaxis.min),s.config.xaxis.max!==void 0&&(e=s.config.xaxis.max);var n=this.getDate(t),o=this.getDate(e),a=this.formatDate(n,"yyyy MM dd HH mm ss fff").split(" "),l=this.formatDate(o,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(a[6],10),maxMillisecond:parseInt(l[6],10),minSecond:parseInt(a[5],10),maxSecond:parseInt(l[5],10),minMinute:parseInt(a[4],10),maxMinute:parseInt(l[4],10),minHour:parseInt(a[3],10),maxHour:parseInt(l[3],10),minDate:parseInt(a[2],10),maxDate:parseInt(l[2],10),minMonth:parseInt(a[1],10)-1,maxMonth:parseInt(l[1],10)-1,minYear:parseInt(a[0],10),maxYear:parseInt(l[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,i){return this.determineDaysOfMonths(t,e)-i}},{key:"determineDaysOfYear",value:function(t){var e=365;return this.isLeapYear(t)&&(e=366),e}},{key:"determineRemainingDaysOfYear",value:function(t,e,i){var s=this.daysCntOfYear[e]+i;return e>1&&this.isLeapYear()&&s++,s}},{key:"determineDaysOfMonths",value:function(t,e){var i=30;switch(t=F.monthMod(t),!0){case this.months30.indexOf(t)>-1:t===2&&(i=this.isLeapYear(e)?29:28);break;case this.months31.indexOf(t)>-1:default:i=31}return i}}]),r}(),Wa=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.tooltipKeyFormat="dd MMM"}return tt(r,[{key:"xLabelFormat",value:function(t,e,i,s){var n=this.w;if(n.config.xaxis.type==="datetime"&&n.config.xaxis.labels.formatter===void 0&&n.config.tooltip.x.formatter===void 0){var o=new fe(this.ctx);return o.formatDate(o.getDate(e),n.config.tooltip.x.format)}return t(e,i,s)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map(function(e){return e}):t}},{key:"defaultYFormatter",value:function(t,e,i){var s=this.w;if(F.isNumber(t))if(s.globals.yValueDecimal!==0)t=t.toFixed(e.decimalsInFloat!==void 0?e.decimalsInFloat:s.globals.yValueDecimal);else{var n=t.toFixed(0);t=t==n?n:t.toFixed(1)}return t}},{key:"setLabelFormatters",value:function(){var t=this,e=this.w;return e.globals.xaxisTooltipFormatter=function(i){return t.defaultGeneralFormatter(i)},e.globals.ttKeyFormatter=function(i){return t.defaultGeneralFormatter(i)},e.globals.ttZFormatter=function(i){return i},e.globals.legendFormatter=function(i){return t.defaultGeneralFormatter(i)},e.config.xaxis.labels.formatter!==void 0?e.globals.xLabelFormatter=e.config.xaxis.labels.formatter:e.globals.xLabelFormatter=function(i){if(F.isNumber(i)){if(!e.config.xaxis.convertedCatToNumeric&&e.config.xaxis.type==="numeric"){if(F.isNumber(e.config.xaxis.decimalsInFloat))return i.toFixed(e.config.xaxis.decimalsInFloat);var s=e.globals.maxX-e.globals.minX;return s>0&&s<100?i.toFixed(1):i.toFixed(0)}return e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?i.toFixed(1):i.toFixed(0)}return i},typeof e.config.tooltip.x.formatter=="function"?e.globals.ttKeyFormatter=e.config.tooltip.x.formatter:e.globals.ttKeyFormatter=e.globals.xLabelFormatter,typeof e.config.xaxis.tooltip.formatter=="function"&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),(Array.isArray(e.config.tooltip.y)||e.config.tooltip.y.formatter!==void 0)&&(e.globals.ttVal=e.config.tooltip.y),e.config.tooltip.z.formatter!==void 0&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),e.config.legend.formatter!==void 0&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach(function(i,s){i.labels.formatter!==void 0?e.globals.yLabelFormatters[s]=i.labels.formatter:e.globals.yLabelFormatters[s]=function(n){return e.globals.xyCharts?Array.isArray(n)?n.map(function(o){return t.defaultYFormatter(o,i,s)}):t.defaultYFormatter(n,i,s):n}}),e.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if(t.config.chart.type==="heatmap"){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var e=t.globals.seriesNames.reduce(function(i,s){return i.length>s.length?i:s},0);t.globals.yAxisScale[0].niceMax=e,t.globals.yAxisScale[0].niceMin=e}}}]),r}(),ss=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"getLabel",value:function(t,e,i,s){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",a=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],l=this.w,c=t[s]===void 0?"":t[s],h=c,u=l.globals.xLabelFormatter,d=l.config.xaxis.labels.formatter,f=!1,g=new Wa(this.ctx),p=c;a&&(h=g.xLabelFormat(u,c,p,{i:s,dateFormatter:new fe(this.ctx).formatDate,w:l}),d!==void 0&&(h=d(c,t[s],{i:s,dateFormatter:new fe(this.ctx).formatDate,w:l})));var b,m;e.length>0?(b=e[s].unit,m=null,e.forEach(function(y){y.unit==="month"?m="year":y.unit==="day"?m="month":y.unit==="hour"?m="day":y.unit==="minute"&&(m="hour")}),f=m===b,i=e[s].position,h=e[s].value):l.config.xaxis.type==="datetime"&&d===void 0&&(h=""),h===void 0&&(h=""),h=Array.isArray(h)?h:h.toString();var x=new U(this.ctx),v={};v=l.globals.rotateXLabels&&a?x.getTextRects(h,parseInt(o,10),null,"rotate(".concat(l.config.xaxis.labels.rotate," 0 0)"),!1):x.getTextRects(h,parseInt(o,10));var w=!l.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(h)&&(String(h)==="NaN"||n.indexOf(h)>=0&&w)&&(h=""),{x:i,text:h,textRect:v,isBold:f}}},{key:"checkLabelBasedOnTickamount",value:function(t,e,i){var s=this.w,n=s.config.xaxis.tickAmount;return n==="dataPoints"&&(n=Math.round(s.globals.gridWidth/120)),n>i||t%Math.round(i/(n+1))==0||(e.text=""),e}},{key:"checkForOverflowingLabels",value:function(t,e,i,s,n){var o=this.w;if(t===0&&o.globals.skipFirstTimelinelabel&&(e.text=""),t===i-1&&o.globals.skipLastTimelinelabel&&(e.text=""),o.config.xaxis.labels.hideOverlappingLabels&&s.length>0){var a=n[n.length-1];e.x<a.textRect.width/(o.globals.rotateXLabels?Math.abs(o.config.xaxis.labels.rotate)/12:1.01)+a.x&&(e.text="")}return e}},{key:"checkForReversedLabels",value:function(t,e){var i=this.w;return i.config.yaxis[t]&&i.config.yaxis[t].reversed&&e.reverse(),e}},{key:"yAxisAllSeriesCollapsed",value:function(t){var e=this.w.globals;return!e.seriesYAxisMap[t].some(function(i){return e.collapsedSeriesIndices.indexOf(i)===-1})}},{key:"translateYAxisIndex",value:function(t){var e=this.w,i=e.globals,s=e.config.yaxis;return i.series.length>s.length||s.some(function(n){return Array.isArray(n.seriesName)})?t:i.seriesYAxisReverseMap[t]}},{key:"isYAxisHidden",value:function(t){var e=this.w,i=e.config.yaxis[t];if(!i.show||this.yAxisAllSeriesCollapsed(t))return!0;if(!i.showForNullSeries){var s=e.globals.seriesYAxisMap[t],n=new Yt(this.ctx);return s.every(function(o){return n.isSeriesNull(o)})}return!1}},{key:"getYAxisForeColor",value:function(t,e){var i=this.w;return Array.isArray(t)&&i.globals.yAxisScale[e]&&this.ctx.theme.pushExtraColors(t,i.globals.yAxisScale[e].result.length,!1),t}},{key:"drawYAxisTicks",value:function(t,e,i,s,n,o,a){var l=this.w,c=new U(this.ctx),h=l.globals.translateY+l.config.yaxis[n].labels.offsetY;if(l.globals.isBarHorizontal?h=0:l.config.chart.type==="heatmap"&&(h+=o/2),s.show&&e>0){l.config.yaxis[n].opposite===!0&&(t+=s.width);for(var u=e;u>=0;u--){var d=c.drawLine(t+i.offsetX-s.width+s.offsetX,h+s.offsetY,t+i.offsetX+s.offsetX,h+s.offsetY,s.color);a.add(d),h+=o}}}}]),r}(),OD=function(){function r(t){Q(this,r),this.w=t.w,this.annoCtx=t,this.helpers=new Vh(this.annoCtx),this.axesUtils=new ss(this.annoCtx)}return tt(r,[{key:"addYaxisAnnotation",value:function(t,e,i){var s,n=this.w,o=t.strokeDashArray,a=this.helpers.getY1Y2("y1",t),l=a.yP,c=a.clipped,h=!0,u=!1,d=t.label.text;if(t.y2===null||t.y2===void 0){if(!c){u=!0;var f=this.annoCtx.graphics.drawLine(0+t.offsetX,l+t.offsetY,this._getYAxisAnnotationWidth(t),l+t.offsetY,t.borderColor,o,t.borderWidth);e.appendChild(f.node),t.id&&f.node.classList.add(t.id)}}else{if(s=(a=this.helpers.getY1Y2("y2",t)).yP,h=a.clipped,s>l){var g=l;l=s,s=g}if(!c||!h){u=!0;var p=this.annoCtx.graphics.drawRect(0+t.offsetX,s+t.offsetY,this._getYAxisAnnotationWidth(t),l-s,0,t.fillColor,t.opacity,1,t.borderColor,o);p.node.classList.add("apexcharts-annotation-rect"),p.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),e.appendChild(p.node),t.id&&p.node.classList.add(t.id)}}if(u){var b=t.label.position==="right"?n.globals.gridWidth:t.label.position==="center"?n.globals.gridWidth/2:0,m=this.annoCtx.graphics.drawText({x:b+t.label.offsetX,y:(s??l)+t.label.offsetY-3,text:d,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});m.attr({rel:i}),e.appendChild(m.node)}}},{key:"_getYAxisAnnotationWidth",value:function(t){var e=this.w;return e.globals.gridWidth,(t.width.indexOf("%")>-1?e.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10))+t.offsetX}},{key:"drawYAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.forEach(function(s,n){s.yAxisIndex=t.axesUtils.translateYAxisIndex(s.yAxisIndex),t.axesUtils.isYAxisHidden(s.yAxisIndex)&&t.axesUtils.yAxisAllSeriesCollapsed(s.yAxisIndex)||t.addYaxisAnnotation(s,i.node,n)}),i}}]),r}(),ND=function(){function r(t){Q(this,r),this.w=t.w,this.annoCtx=t,this.helpers=new Vh(this.annoCtx)}return tt(r,[{key:"addPointAnnotation",value:function(t,e,i){if(!(this.w.globals.collapsedSeriesIndices.indexOf(t.seriesIndex)>-1)){var s=this.helpers.getX1X2("x1",t),n=s.x,o=s.clipped,a=(s=this.helpers.getY1Y2("y1",t)).yP,l=s.clipped;if(F.isNumber(n)&&!l&&!o){var c={pSize:t.marker.size,pointStrokeWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},h=this.annoCtx.graphics.drawMarker(n+t.marker.offsetX,a+t.marker.offsetY,c);e.appendChild(h.node);var u=t.label.text?t.label.text:"",d=this.annoCtx.graphics.drawText({x:n+t.label.offsetX,y:a+t.label.offsetY-t.marker.size-parseFloat(t.label.style.fontSize)/1.6,text:u,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(d.attr({rel:i}),e.appendChild(d.node),t.customSVG.SVG){var f=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});f.attr({transform:"translate(".concat(n+t.customSVG.offsetX,", ").concat(a+t.customSVG.offsetY,")")}),f.node.innerHTML=t.customSVG.SVG,e.appendChild(f.node)}if(t.image.path){var g=t.image.width?t.image.width:20,p=t.image.height?t.image.height:20;h=this.annoCtx.addImage({x:n+t.image.offsetX-g/2,y:a+t.image.offsetY-p/2,width:g,height:p,path:t.image.path,appendTo:".apexcharts-point-annotations"})}t.mouseEnter&&h.node.addEventListener("mouseenter",t.mouseEnter.bind(this,t)),t.mouseLeave&&h.node.addEventListener("mouseleave",t.mouseLeave.bind(this,t)),t.click&&h.node.addEventListener("click",t.click.bind(this,t))}}}},{key:"drawPointAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map(function(s,n){t.addPointAnnotation(s,i.node,n)}),i}}]),r}(),mA={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Ps=function(){function r(){Q(this,r),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return tt(r,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[mA],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.7},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{line:{isSlopeChart:!1,colors:{threshold:0,colorAboveThreshold:void 0,colorBelowThreshold:void 0}},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0},seriesTitle:{show:!0,offsetY:1,offsetX:1,borderColor:"#000",borderWidth:1,borderRadius:2,style:{background:"rgba(0, 0, 0, 0.6)",color:"#fff",fontSize:"12px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:6,right:6,top:2,bottom:2}}}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(e,i){return e+i},0)/t.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(t){return t},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(e,i){return e+i},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return t!==null?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],clusterGroupedSeries:!0,clusterGroupedSeriesOrientation:"vertical",labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{hover:{filter:{type:"lighten"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken"}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t?t+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.8}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),r}(),PD=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.graphics=new U(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Vh(this),this.xAxisAnnotations=new qD(this),this.yAxisAnnotations=new OD(this),this.pointsAnnotations=new ND(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return tt(r,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts&&t.globals.dataPoints){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),s=this.pointsAnnotations.drawPointAnnotations(),n=t.config.chart.animations.enabled,o=[e,i,s],a=[i.node,e.node,s.node],l=0;l<3;l++)t.globals.dom.elGraphical.add(o[l]),!n||t.globals.resized||t.globals.dataChanged||t.config.chart.type!=="scatter"&&t.config.chart.type!=="bubble"&&t.globals.dataPoints>1&&a[l].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:a[l],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map(function(e,i){t.addImage(e,i)})}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map(function(e,i){t.addText(e,i)})}},{key:"addXaxisAnnotation",value:function(t,e,i){this.xAxisAnnotations.addXaxisAnnotation(t,e,i)}},{key:"addYaxisAnnotation",value:function(t,e,i){this.yAxisAnnotations.addYaxisAnnotation(t,e,i)}},{key:"addPointAnnotation",value:function(t,e,i){this.pointsAnnotations.addPointAnnotation(t,e,i)}},{key:"addText",value:function(t,e){var i=t.x,s=t.y,n=t.text,o=t.textAnchor,a=t.foreColor,l=t.fontSize,c=t.fontFamily,h=t.fontWeight,u=t.cssClass,d=t.backgroundColor,f=t.borderWidth,g=t.strokeDashArray,p=t.borderRadius,b=t.borderColor,m=t.appendTo,x=m===void 0?".apexcharts-svg":m,v=t.paddingLeft,w=v===void 0?4:v,y=t.paddingRight,A=y===void 0?4:y,C=t.paddingBottom,M=C===void 0?2:C,O=t.paddingTop,B=O===void 0?2:O,_=this.w,z=this.graphics.drawText({x:i,y:s,text:n,textAnchor:o||"start",fontSize:l||"12px",fontWeight:h||"regular",fontFamily:c||_.config.chart.fontFamily,foreColor:a||_.config.chart.foreColor,cssClass:u}),N=_.globals.dom.baseEl.querySelector(x);N&&N.appendChild(z.node);var E=z.bbox();if(n){var I=this.graphics.drawRect(E.x-w,E.y-B,E.width+w+A,E.height+M+B,p,d||"transparent",1,f,b,g);N.insertBefore(I.node,z.node)}}},{key:"addImage",value:function(t,e){var i=this.w,s=t.path,n=t.x,o=n===void 0?0:n,a=t.y,l=a===void 0?0:a,c=t.width,h=c===void 0?20:c,u=t.height,d=u===void 0?20:u,f=t.appendTo,g=f===void 0?".apexcharts-svg":f,p=i.globals.dom.Paper.image(s);p.size(h,d).move(o,l);var b=i.globals.dom.baseEl.querySelector(g);return b&&b.appendChild(p.node),p}},{key:"addXaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(t,e,i){return this.invertAxis===void 0&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(t){var e=t.params,i=t.pushToMemory,s=t.context,n=t.type,o=t.contextMethod,a=s,l=a.w,c=l.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations")),h=c.childNodes.length+1,u=new Ps,d=Object.assign({},n==="xaxis"?u.xAxisAnnotation:n==="yaxis"?u.yAxisAnnotation:u.pointAnnotation),f=F.extend(d,e);switch(n){case"xaxis":this.addXaxisAnnotation(f,c,h);break;case"yaxis":this.addYaxisAnnotation(f,c,h);break;case"point":this.addPointAnnotation(f,c,h)}var g=l.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations .apexcharts-").concat(n,"-annotation-label[rel='").concat(h,"']")),p=this.helpers.addBackgroundToAnno(g,f);return p&&c.insertBefore(p.node,g),i&&l.globals.memory.methodsToExec.push({context:a,id:f.id?f.id:F.randomId(),method:o,label:"addAnnotation",params:e}),s}},{key:"clearAnnotations",value:function(t){for(var e=t.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),s=e.globals.memory.methodsToExec.length-1;s>=0;s--)e.globals.memory.methodsToExec[s].label!=="addText"&&e.globals.memory.methodsToExec[s].label!=="addAnnotation"||e.globals.memory.methodsToExec.splice(s,1);i=F.listToArray(i),Array.prototype.forEach.call(i,function(n){for(;n.firstChild;)n.removeChild(n.firstChild)})}},{key:"removeAnnotation",value:function(t,e){var i=t.w,s=i.globals.dom.baseEl.querySelectorAll(".".concat(e));s&&(i.globals.memory.methodsToExec.map(function(n,o){n.id===e&&i.globals.memory.methodsToExec.splice(o,1)}),Array.prototype.forEach.call(s,function(n){n.parentElement.removeChild(n)}))}}]),r}(),kg=function(r){var t,e=r.isTimeline,i=r.ctx,s=r.seriesIndex,n=r.dataPointIndex,o=r.y1,a=r.y2,l=r.w,c=l.globals.seriesRangeStart[s][n],h=l.globals.seriesRangeEnd[s][n],u=l.globals.labels[n],d=l.config.series[s].name?l.config.series[s].name:"",f=l.globals.ttKeyFormatter,g=l.config.tooltip.y.title.formatter,p={w:l,seriesIndex:s,dataPointIndex:n,start:c,end:h};typeof g=="function"&&(d=g(d,p)),(t=l.config.series[s].data[n])!==null&&t!==void 0&&t.x&&(u=l.config.series[s].data[n].x),e||l.config.xaxis.type==="datetime"&&(u=new Wa(i).xLabelFormat(l.globals.ttKeyFormatter,u,u,{i:void 0,dateFormatter:new fe(i).formatDate,w:l})),typeof f=="function"&&(u=f(u,p)),Number.isFinite(o)&&Number.isFinite(a)&&(c=o,h=a);var b="",m="",x=l.globals.colors[s];if(l.config.tooltip.x.formatter===void 0)if(l.config.xaxis.type==="datetime"){var v=new fe(i);b=v.formatDate(v.getDate(c),l.config.tooltip.x.format),m=v.formatDate(v.getDate(h),l.config.tooltip.x.format)}else b=c,m=h;else b=l.config.tooltip.x.formatter(c),m=l.config.tooltip.x.formatter(h);return{start:c,end:h,startVal:b,endVal:m,ylabel:u,color:x,seriesName:d}},Sg=function(r){var t=r.color,e=r.seriesName,i=r.ylabel,s=r.start,n=r.end,o=r.seriesIndex,a=r.dataPointIndex,l=r.ctx.tooltip.tooltipLabels.getFormatters(o);s=l.yLbFormatter(s),n=l.yLbFormatter(n);var c=l.yLbFormatter(r.w.globals.series[o][a]),h=`<span class="value start-value">
  `.concat(s,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(n,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+t+'">'+(e||"")+'</span></div><div> <span class="category">'+i+": </span> "+(r.w.globals.comboCharts?r.w.config.series[o].type==="rangeArea"||r.w.config.series[o].type==="rangeBar"?h:"<span>".concat(c,"</span>"):h)+" </div></div>"},Da=function(){function r(t){Q(this,r),this.opts=t}return tt(r,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.hideYAxis(),F.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(t,e){var i=e.w.config.series[e.seriesIndex].name;return t!==null?i+": "+t:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"square"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),K(K({},this.bar()),{},{chart:{animations:{speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var t=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var i=e.seriesIndex,s=e.dataPointIndex,n=e.w;return t._getBoxTooltip(n,i,s,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var t=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var i=e.seriesIndex,s=e.dataPointIndex,n=e.w;return t._getBoxTooltip(n,i,s,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){e.ctx;var i=e.seriesIndex,s=e.dataPointIndex,n=e.w,o=function(){var a=n.globals.seriesRangeStart[i][s];return n.globals.seriesRangeEnd[i][s]-a};return n.globals.comboCharts?n.config.series[i].type==="rangeBar"||n.config.series[i].type==="rangeArea"?o():t:o()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?function(e){var i=kg(K(K({},e),{},{isTimeline:!0})),s=i.color,n=i.seriesName,o=i.ylabel,a=i.startVal,l=i.endVal;return Sg(K(K({},e),{},{color:s,seriesName:n,ylabel:o,start:a,end:l}))}(t):function(e){var i=kg(e),s=i.color,n=i.seriesName,o=i.ylabel,a=i.start,l=i.end;return Sg(K(K({},e),{},{color:s,seriesName:n,ylabel:o,start:a,end:l}))}(t)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(t){var e,i;return(e=t.plotOptions.bar)!==null&&e!==void 0&&e.barHeight||(t.plotOptions.bar.barHeight=2),(i=t.plotOptions.bar)!==null&&i!==void 0&&i.columnWidth||(t.plotOptions.bar.columnWidth=2),t}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(t){return function(e){var i=kg(e),s=i.color,n=i.seriesName,o=i.ylabel,a=i.start,l=i.end;return Sg(K(K({},e),{},{color:s,seriesName:n,ylabel:o,start:a,end:l}))}(t)}}}}},{key:"brush",value:function(t){return F.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var e=t.dataLabels.formatter;return t.yaxis.forEach(function(i,s){t.yaxis[s].min=0,t.yaxis[s].max=100}),t.chart.type==="bar"&&(t.dataLabels.formatter=e||function(i){return typeof i=="number"&&i?i.toFixed(0)+"%":i}),t}},{key:"stackedBars",value:function(){var t=this.bar();return K(K({},t),{},{plotOptions:K(K({},t.plotOptions),{},{bar:K(K({},t.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,i){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(o){return F.isNumber(o)?Math.floor(o):o};var s=t.xaxis.labels.formatter,n=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return i&&i.length&&(n=i.map(function(o){return Array.isArray(o)?o:String(o)})),n&&n.length&&(t.xaxis.labels.formatter=function(o){return F.isNumber(o)?s(n[Math.floor(o)-1]):s(o)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(t,e,i,s,n){var o=t.globals.seriesCandleO[e][i],a=t.globals.seriesCandleH[e][i],l=t.globals.seriesCandleM[e][i],c=t.globals.seriesCandleL[e][i],h=t.globals.seriesCandleC[e][i];return t.config.series[e].type&&t.config.series[e].type!==n?`<div class="apexcharts-custom-tooltip">
          `.concat(t.config.series[e].name?t.config.series[e].name:"series-"+(e+1),": <strong>").concat(t.globals.series[e][i],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(t.config.chart.type,'">')+"<div>".concat(s[0],': <span class="value">')+o+"</span></div>"+"<div>".concat(s[1],': <span class="value">')+a+"</span></div>"+(l?"<div>".concat(s[2],': <span class="value">')+l+"</span></div>":"")+"<div>".concat(s[3],': <span class="value">')+c+"</span></div>"+"<div>".concat(s[4],': <span class="value">')+h+"</span></div></div>"}}]),r}(),Fa=function(){function r(t){Q(this,r),this.opts=t}return tt(r,[{key:"init",value:function(t){var e=t.responsiveOverride,i=this.opts,s=new Ps,n=new Da(i);this.chartType=i.chart.type,i=this.extendYAxis(i),i=this.extendAnnotations(i);var o=s.init(),a={};if(i&&ro(i)==="object"){var l,c,h,u,d,f,g,p,b,m,x={};x=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)!==-1?n[i.chart.type]():n.line(),(l=i.plotOptions)!==null&&l!==void 0&&(c=l.bar)!==null&&c!==void 0&&c.isFunnel&&(x=n.funnel()),i.chart.stacked&&i.chart.type==="bar"&&(x=n.stackedBars()),(h=i.chart.brush)!==null&&h!==void 0&&h.enabled&&(x=n.brush(x)),(u=i.plotOptions)!==null&&u!==void 0&&(d=u.line)!==null&&d!==void 0&&d.isSlopeChart&&(x=n.slope()),i.chart.stacked&&i.chart.stackType==="100%"&&(i=n.stacked100(i)),(f=i.plotOptions)!==null&&f!==void 0&&(g=f.bar)!==null&&g!==void 0&&g.isDumbbell&&(i=n.dumbbell(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},e||(i.xaxis.convertedCatToNumeric=!1),((p=(i=this.checkForCatToNumericXAxis(this.chartType,x,i)).chart.sparkline)!==null&&p!==void 0&&p.enabled||(b=window.Apex.chart)!==null&&b!==void 0&&(m=b.sparkline)!==null&&m!==void 0&&m.enabled)&&(x=n.sparkline(x)),a=F.extend(o,x)}var v=F.extend(a,window.Apex);return o=F.extend(v,i),o=this.handleUserInputErrors(o)}},{key:"checkForCatToNumericXAxis",value:function(t,e,i){var s,n,o=new Da(i),a=(t==="bar"||t==="boxPlot")&&((s=i.plotOptions)===null||s===void 0||(n=s.bar)===null||n===void 0?void 0:n.horizontal),l=t==="pie"||t==="polarArea"||t==="donut"||t==="radar"||t==="radialBar"||t==="heatmap",c=i.xaxis.type!=="datetime"&&i.xaxis.type!=="numeric",h=i.xaxis.tickPlacement?i.xaxis.tickPlacement:e.xaxis&&e.xaxis.tickPlacement;return a||l||!c||h==="between"||(i=o.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(t,e){var i=new Ps;(t.yaxis===void 0||!t.yaxis||Array.isArray(t.yaxis)&&t.yaxis.length===0)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=F.extend(t.yaxis,window.Apex.yaxis)),t.yaxis.constructor!==Array?t.yaxis=[F.extend(i.yAxis,t.yaxis)]:t.yaxis=F.extendArray(t.yaxis,i.yAxis);var s=!1;t.yaxis.forEach(function(o){o.logarithmic&&(s=!0)});var n=t.series;return e&&!n&&(n=e.config.series),s&&n.length!==t.yaxis.length&&n.length&&(t.yaxis=n.map(function(o,a){if(o.name||(n[a].name="series-".concat(a+1)),t.yaxis[a])return t.yaxis[a].seriesName=n[a].name,t.yaxis[a];var l=F.extend(i.yAxis,t.yaxis[0]);return l.show=!1,l})),s&&n.length>1&&n.length!==t.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),t}},{key:"extendAnnotations",value:function(t){return t.annotations===void 0&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),t=this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new Ps;return t.annotations.yaxis=F.extendArray(t.annotations.yaxis!==void 0?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new Ps;return t.annotations.xaxis=F.extendArray(t.annotations.xaxis!==void 0?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new Ps;return t.annotations.points=F.extendArray(t.annotations.points!==void 0?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&t.theme.mode==="dark"&&(t.tooltip||(t.tooltip={}),t.tooltip.theme!=="light"&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var e=t;if(e.tooltip.shared&&e.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(e.chart.type==="bar"&&e.plotOptions.bar.horizontal){if(e.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");e.yaxis[0].reversed&&(e.yaxis[0].opposite=!0),e.xaxis.tooltip.enabled=!1,e.yaxis[0].tooltip.enabled=!1,e.chart.zoom.enabled=!1}return e.chart.type!=="bar"&&e.chart.type!=="rangeBar"||e.tooltip.shared&&e.xaxis.crosshairs.width==="barWidth"&&e.series.length>1&&(e.xaxis.crosshairs.width="tickWidth"),e.chart.type!=="candlestick"&&e.chart.type!=="boxPlot"||e.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(e.chart.type," chart is not supported.")),e.yaxis[0].reversed=!1),e}}]),r}(),bA=function(){function r(){Q(this,r)}return tt(r,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleM=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRange=[],t.seriesPercent=[],t.seriesGoals=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.hasXaxisGroups=!1,t.groups=[],t.barGroups=[],t.lineGroups=[],t.areaGroups=[],t.hasSeriesGroups=!1,t.seriesGroups=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.lastWheelExecution=0,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0,t.multiAxisTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:t.chart.toolbar.autoSelected==="zoom"&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:t.chart.toolbar.autoSelected==="pan"&&t.chart.toolbar.tools.pan,selectionEnabled:t.chart.toolbar.autoSelected==="selection"&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:t.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=F.extend({},t),e.initialSeries=F.clone(t.series),e.lastXAxis=F.clone(e.initialConfig.xaxis),e.lastYAxis=F.clone(e.initialConfig.yaxis),e}}]),r}(),DD=function(){function r(t){Q(this,r),this.opts=t}return tt(r,[{key:"init",value:function(){var t=new Fa(this.opts).init({responsiveOverride:!1});return{config:t,globals:new bA().init(t)}}}]),r}(),wi=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return tt(r,[{key:"clippedImgArea",value:function(t){var e=this.w,i=e.config,s=parseInt(e.globals.gridWidth,10),n=parseInt(e.globals.gridHeight,10),o=s>n?s:n,a=t.image,l=0,c=0;t.width===void 0&&t.height===void 0?i.fill.image.width!==void 0&&i.fill.image.height!==void 0?(l=i.fill.image.width+1,c=i.fill.image.height):(l=o+1,c=o):(l=t.width,c=t.height);var h=document.createElementNS(e.globals.SVGNS,"pattern");U.setAttrs(h,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:l+"px",height:c+"px"});var u=document.createElementNS(e.globals.SVGNS,"image");h.appendChild(u),u.setAttributeNS(window.SVG.xlink,"href",a),U.setAttrs(u,{x:0,y:0,preserveAspectRatio:"none",width:l+"px",height:c+"px"}),u.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(h)}},{key:"getSeriesIndex",value:function(t){var e=this.w,i=e.config.chart.type;return(i==="bar"||i==="rangeBar")&&e.config.plotOptions.bar.distributed||i==="heatmap"||i==="treemap"?this.seriesIndex=t.seriesNumber:this.seriesIndex=t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"computeColorStops",value:function(t,e){var i,s=this.w,n=null,o=null,a=Aa(t);try{for(a.s();!(i=a.n()).done;){var l=i.value;l>=e.threshold?(n===null||l>n)&&(n=l):(o===null||l<o)&&(o=l)}}catch(u){a.e(u)}finally{a.f()}n===null&&(n=e.threshold),o===null&&(o=e.threshold);var c=n-e.threshold+(e.threshold-o);c===0&&(c=1);var h=100-(e.threshold-o)/c*100;return[{offset:h=Math.max(0,Math.min(h,100)),color:e.colorAboveThreshold,opacity:s.config.fill.opacity},{offset:0,color:e.colorBelowThreshold,opacity:s.config.fill.opacity}]}},{key:"fillPath",value:function(t){var e,i,s,n=this.w;this.opts=t;var o,a,l,c=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var h=c.plotOptions.line.colors.colorAboveThreshold&&c.plotOptions.line.colors.colorBelowThreshold,u=this.getFillColors()[this.seriesIndex];n.globals.seriesColors[this.seriesIndex]!==void 0&&(u=n.globals.seriesColors[this.seriesIndex]),typeof u=="function"&&(u=u({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:n}));var d,f,g,p=t.fillType?t.fillType:this.getFillType(this.seriesIndex),b=Array.isArray(c.fill.opacity)?c.fill.opacity[this.seriesIndex]:c.fill.opacity,m=p==="gradient"||h;t.color&&(u=t.color),(e=n.config.series[this.seriesIndex])!==null&&e!==void 0&&(i=e.data)!==null&&i!==void 0&&(s=i[t.dataPointIndex])!==null&&s!==void 0&&s.fillColor&&(u=(d=n.config.series[this.seriesIndex])===null||d===void 0||(f=d.data)===null||f===void 0||(g=f[t.dataPointIndex])===null||g===void 0?void 0:g.fillColor),u||(u="#fff",console.warn("undefined color - ApexCharts"));var x=u;if(u.indexOf("rgb")===-1?u.indexOf("#")===-1?x=u:u.length<9&&(x=F.hexToRgba(u,b)):u.indexOf("rgba")>-1?b=F.getOpacityFromRGBA(u):x=F.hexToRgba(F.rgb2hex(u),b),t.opacity&&(b=t.opacity),p==="pattern"&&(a=this.handlePatternFill({fillConfig:t.fillConfig,patternFill:a,fillColor:u,fillOpacity:b,defaultColor:x})),m){var v=se(c.fill.gradient.colorStops)||[],w=c.fill.gradient.type;h&&(v[this.seriesIndex]=this.computeColorStops(n.globals.series[this.seriesIndex],c.plotOptions.line.colors),w="vertical"),l=this.handleGradientFill({type:w,fillConfig:t.fillConfig,fillColor:u,fillOpacity:b,colorStops:v,i:this.seriesIndex})}if(p==="image"){var y=c.fill.image.src,A=t.patternID?t.patternID:"",C="pattern".concat(n.globals.cuid).concat(t.seriesNumber+1).concat(A);this.patternIDs.indexOf(C)===-1&&(this.clippedImgArea({opacity:b,image:Array.isArray(y)?t.seriesNumber<y.length?y[t.seriesNumber]:y[0]:y,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:C}),this.patternIDs.push(C)),o="url(#".concat(C,")")}else o=m?l:p==="pattern"?a:x;return t.solid&&(o=x),o}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,i=this.opts,s=[];return t.globals.comboCharts?t.config.series[this.seriesIndex].type==="line"?Array.isArray(t.globals.stroke.colors)?s=t.globals.stroke.colors:s.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?s=t.globals.fill.colors:s.push(t.globals.fill.colors):e.chart.type==="line"?Array.isArray(t.globals.stroke.colors)?s=t.globals.stroke.colors:s.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?s=t.globals.fill.colors:s.push(t.globals.fill.colors),i.fillColors!==void 0&&(s=[],Array.isArray(i.fillColors)?s=i.fillColors.slice():s.push(i.fillColors)),s}},{key:"handlePatternFill",value:function(t){var e=t.fillConfig,i=t.patternFill,s=t.fillColor,n=t.fillOpacity,o=t.defaultColor,a=this.w.config.fill;e&&(a=e);var l=this.opts,c=new U(this.ctx),h=Array.isArray(a.pattern.strokeWidth)?a.pattern.strokeWidth[this.seriesIndex]:a.pattern.strokeWidth,u=s;return Array.isArray(a.pattern.style)?i=a.pattern.style[l.seriesNumber]!==void 0?c.drawPattern(a.pattern.style[l.seriesNumber],a.pattern.width,a.pattern.height,u,h,n):o:i=c.drawPattern(a.pattern.style,a.pattern.width,a.pattern.height,u,h,n),i}},{key:"handleGradientFill",value:function(t){var e=t.type,i=t.fillColor,s=t.fillOpacity,n=t.fillConfig,o=t.colorStops,a=t.i,l=this.w.config.fill;n&&(l=K(K({},l),n));var c=this.opts,h=new U(this.ctx),u=new F;e=e||l.gradient.type;var d,f=i,g=l.gradient.opacityFrom===void 0?s:Array.isArray(l.gradient.opacityFrom)?l.gradient.opacityFrom[a]:l.gradient.opacityFrom;f.indexOf("rgba")>-1&&(g=F.getOpacityFromRGBA(f));var p=l.gradient.opacityTo===void 0?s:Array.isArray(l.gradient.opacityTo)?l.gradient.opacityTo[a]:l.gradient.opacityTo;if(l.gradient.gradientToColors===void 0||l.gradient.gradientToColors.length===0)d=l.gradient.shade==="dark"?u.shadeColor(-1*parseFloat(l.gradient.shadeIntensity),i.indexOf("rgb")>-1?F.rgb2hex(i):i):u.shadeColor(parseFloat(l.gradient.shadeIntensity),i.indexOf("rgb")>-1?F.rgb2hex(i):i);else if(l.gradient.gradientToColors[c.seriesNumber]){var b=l.gradient.gradientToColors[c.seriesNumber];d=b,b.indexOf("rgba")>-1&&(p=F.getOpacityFromRGBA(b))}else d=i;if(l.gradient.gradientFrom&&(f=l.gradient.gradientFrom),l.gradient.gradientTo&&(d=l.gradient.gradientTo),l.gradient.inverseColors){var m=f;f=d,d=m}return f.indexOf("rgb")>-1&&(f=F.rgb2hex(f)),d.indexOf("rgb")>-1&&(d=F.rgb2hex(d)),h.drawGradient(e,f,d,g,p,c.size,l.gradient.stops,o,a)}}]),r}(),po=function(){function r(t,e){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var e=0;e<=t.globals.series.length;e++)t.globals.markers.size[e]===void 0&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map(function(i){return t.config.markers.size})}},{key:"plotChartMarkers",value:function(t){var e=t.pointsPos,i=t.seriesIndex,s=t.j,n=t.pSize,o=t.alwaysDrawMarker,a=o!==void 0&&o,l=t.isVirtualPoint,c=l!==void 0&&l,h=this.w,u=i,d=e,f=null,g=new U(this.ctx),p=h.config.markers.discrete&&h.config.markers.discrete.length;if(Array.isArray(d.x))for(var b=0;b<d.x.length;b++){var m=void 0,x=s,v=!F.isNumber(d.y[b]);h.globals.markers.largestSize===0&&h.globals.hasNullValues&&h.globals.series[u][s+1]!==null&&!c&&(v=!0),s===1&&b===0&&(x=0),s===1&&b===1&&(x=1);var w="apexcharts-marker";if(h.config.chart.type!=="line"&&h.config.chart.type!=="area"||h.globals.comboCharts||h.config.tooltip.intersect||(w+=" no-pointer-events"),(Array.isArray(h.config.markers.size)?h.globals.markers.size[i]>0:h.config.markers.size>0)||a||p){v||(w+=" w".concat(F.randomId()));var y=this.getMarkerConfig({cssClass:w,seriesIndex:i,dataPointIndex:x});h.config.series[u].data[x]&&(h.config.series[u].data[x].fillColor&&(y.pointFillColor=h.config.series[u].data[x].fillColor),h.config.series[u].data[x].strokeColor&&(y.pointStrokeColor=h.config.series[u].data[x].strokeColor)),n!==void 0&&(y.pSize=n),(d.x[b]<-h.globals.markers.largestSize||d.x[b]>h.globals.gridWidth+h.globals.markers.largestSize||d.y[b]<-h.globals.markers.largestSize||d.y[b]>h.globals.gridHeight+h.globals.markers.largestSize)&&(y.pSize=0),!v&&((h.globals.markers.size[i]>0||a||p)&&!f&&(f=g.group({class:a||p?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(h.globals.cuid,")")),(m=g.drawMarker(d.x[b],d.y[b],y)).attr("rel",x),m.attr("j",x),m.attr("index",i),m.node.setAttribute("default-marker-size",y.pSize),new pe(this.ctx).setSelectionFilter(m,i,x),this.addEvents(m),f&&f.add(m))}else h.globals.pointsArray[i]===void 0&&(h.globals.pointsArray[i]=[]),h.globals.pointsArray[i].push([d.x[b],d.y[b]])}return f}},{key:"getMarkerConfig",value:function(t){var e=t.cssClass,i=t.seriesIndex,s=t.dataPointIndex,n=s===void 0?null:s,o=t.radius,a=o===void 0?null:o,l=t.size,c=l===void 0?null:l,h=t.strokeWidth,u=h===void 0?null:h,d=this.w,f=this.getMarkerStyle(i),g=c===null?d.globals.markers.size[i]:c,p=d.config.markers;return n!==null&&p.discrete.length&&p.discrete.map(function(b){b.seriesIndex===i&&b.dataPointIndex===n&&(f.pointStrokeColor=b.strokeColor,f.pointFillColor=b.fillColor,g=b.size,f.pointShape=b.shape)}),{pSize:a===null?g:a,pRadius:a!==null?a:p.radius,pointStrokeWidth:u!==null?u:Array.isArray(p.strokeWidth)?p.strokeWidth[i]:p.strokeWidth,pointStrokeColor:f.pointStrokeColor,pointFillColor:f.pointFillColor,shape:f.pointShape||(Array.isArray(p.shape)?p.shape[i]:p.shape),class:e,pointStrokeOpacity:Array.isArray(p.strokeOpacity)?p.strokeOpacity[i]:p.strokeOpacity,pointStrokeDashArray:Array.isArray(p.strokeDashArray)?p.strokeDashArray[i]:p.strokeDashArray,pointFillOpacity:Array.isArray(p.fillOpacity)?p.fillOpacity[i]:p.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(t){var e=this.w,i=new U(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,i=e.globals.markers.colors,s=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(s)?s[t]:s,pointFillColor:Array.isArray(i)?i[t]:i}}}]),r}(),vA=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.initialAnim=this.w.config.chart.animations.enabled}return tt(r,[{key:"draw",value:function(t,e,i){var s=this.w,n=new U(this.ctx),o=i.realIndex,a=i.pointsPos,l=i.zRatio,c=i.elParent,h=n.group({class:"apexcharts-series-markers apexcharts-series-".concat(s.config.chart.type)});if(h.attr("clip-path","url(#gridRectMarkerMask".concat(s.globals.cuid,")")),Array.isArray(a.x))for(var u=0;u<a.x.length;u++){var d=e+1,f=!0;e===0&&u===0&&(d=0),e===0&&u===1&&(d=1);var g=s.globals.markers.size[o];if(l!==1/0){var p=s.config.plotOptions.bubble;g=s.globals.seriesZ[o][d],p.zScaling&&(g/=l),p.minBubbleRadius&&g<p.minBubbleRadius&&(g=p.minBubbleRadius),p.maxBubbleRadius&&g>p.maxBubbleRadius&&(g=p.maxBubbleRadius)}var b=a.x[u],m=a.y[u];if(g=g||0,m!==null&&s.globals.series[o][d]!==void 0||(f=!1),f){var x=this.drawPoint(b,m,g,o,d,e);h.add(x)}c.add(h)}}},{key:"drawPoint",value:function(t,e,i,s,n,o){var a=this.w,l=s,c=new co(this.ctx),h=new pe(this.ctx),u=new wi(this.ctx),d=new po(this.ctx),f=new U(this.ctx),g=d.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:n,radius:a.config.chart.type==="bubble"||a.globals.comboCharts&&a.config.series[s]&&a.config.series[s].type==="bubble"?i:null}),p=u.fillPath({seriesNumber:s,dataPointIndex:n,color:g.pointFillColor,patternUnits:"objectBoundingBox",value:a.globals.series[s][o]}),b=f.drawMarker(t,e,g);if(a.config.series[l].data[n]&&a.config.series[l].data[n].fillColor&&(p=a.config.series[l].data[n].fillColor),b.attr({fill:p}),a.config.chart.dropShadow.enabled){var m=a.config.chart.dropShadow;h.dropShadow(b,m,s)}if(!this.initialAnim||a.globals.dataChanged||a.globals.resized)a.globals.animationEnded=!0;else{var x=a.config.chart.animations.speed;c.animateMarker(b,x,a.globals.easing,function(){window.setTimeout(function(){c.animationCompleted(b)},100)})}return b.attr({rel:n,j:n,index:s,"default-marker-size":g.pSize}),h.setSelectionFilter(b,s,n),d.addEvents(b),b.node.classList.add("apexcharts-marker"),b}},{key:"centerTextInBubble",value:function(t){var e=this.w;return{y:t+=parseInt(e.config.dataLabels.style.fontSize,10)/4}}}]),r}(),ao=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"dataLabelsCorrection",value:function(t,e,i,s,n,o,a){var l=this.w,c=!1,h=new U(this.ctx).getTextRects(i,a),u=h.width,d=h.height;e<0&&(e=0),e>l.globals.gridHeight+d&&(e=l.globals.gridHeight+d/2),l.globals.dataLabelsRects[s]===void 0&&(l.globals.dataLabelsRects[s]=[]),l.globals.dataLabelsRects[s].push({x:t,y:e,width:u,height:d});var f=l.globals.dataLabelsRects[s].length-2,g=l.globals.lastDrawnDataLabelsIndexes[s]!==void 0?l.globals.lastDrawnDataLabelsIndexes[s][l.globals.lastDrawnDataLabelsIndexes[s].length-1]:0;if(l.globals.dataLabelsRects[s][f]!==void 0){var p=l.globals.dataLabelsRects[s][g];(t>p.x+p.width||e>p.y+p.height||e+d<p.y||t+u<p.x)&&(c=!0)}return(n===0||o)&&(c=!0),{x:t,y:e,textRects:h,drawnextLabel:c}}},{key:"drawDataLabel",value:function(t){var e=this,i=t.type,s=t.pos,n=t.i,o=t.j,a=t.isRangeStart,l=t.strokeWidth,c=l===void 0?2:l,h=this.w,u=new U(this.ctx),d=h.config.dataLabels,f=0,g=0,p=o,b=null;if(h.globals.collapsedSeriesIndices.indexOf(n)!==-1||!d.enabled||!Array.isArray(s.x))return b;b=u.group({class:"apexcharts-data-labels"});for(var m=0;m<s.x.length;m++)if(f=s.x[m]+d.offsetX,g=s.y[m]+d.offsetY+c,!isNaN(f)){o===1&&m===0&&(p=0),o===1&&m===1&&(p=1);var x=h.globals.series[n][p];i==="rangeArea"&&(x=a?h.globals.seriesRangeStart[n][p]:h.globals.seriesRangeEnd[n][p]);var v="",w=function(A){return h.config.dataLabels.formatter(A,{ctx:e.ctx,seriesIndex:n,dataPointIndex:p,w:h})};h.config.chart.type==="bubble"?(v=w(x=h.globals.seriesZ[n][p]),g=s.y[m],g=new vA(this.ctx).centerTextInBubble(g,n,p).y):x!==void 0&&(v=w(x));var y=h.config.dataLabels.textAnchor;h.globals.isSlopeChart&&(y=p===0?"end":p===h.config.series[n].data.length-1?"start":"middle"),this.plotDataLabelsText({x:f,y:g,text:v,i:n,j:p,parent:b,offsetCorrection:!0,dataLabelsConfig:h.config.dataLabels,textAnchor:y})}return b}},{key:"plotDataLabelsText",value:function(t){var e=this.w,i=new U(this.ctx),s=t.x,n=t.y,o=t.i,a=t.j,l=t.text,c=t.textAnchor,h=t.fontSize,u=t.parent,d=t.dataLabelsConfig,f=t.color,g=t.alwaysDrawDataLabel,p=t.offsetCorrection,b=t.className,m=null;if(Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(o)<0)return m;var x={x:s,y:n,drawnextLabel:!0,textRects:null};p&&(x=this.dataLabelsCorrection(s,n,l,o,a,g,parseInt(d.style.fontSize,10))),e.globals.zoomed||(s=x.x,n=x.y),x.textRects&&(s<-20-x.textRects.width||s>e.globals.gridWidth+x.textRects.width+30)&&(l="");var v=e.globals.dataLabels.style.colors[o];((e.config.chart.type==="bar"||e.config.chart.type==="rangeBar")&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed)&&(v=e.globals.dataLabels.style.colors[a]),typeof v=="function"&&(v=v({series:e.globals.series,seriesIndex:o,dataPointIndex:a,w:e})),f&&(v=f);var w=d.offsetX,y=d.offsetY;if(e.config.chart.type!=="bar"&&e.config.chart.type!=="rangeBar"||(w=0,y=0),e.globals.isSlopeChart&&(a!==0&&(w=-2*d.offsetX+5),a!==0&&a!==e.config.series[o].data.length-1&&(w=0)),x.drawnextLabel){if((m=i.drawText({width:100,height:parseInt(d.style.fontSize,10),x:s+w,y:n+y,foreColor:v,textAnchor:c||d.textAnchor,text:l,fontSize:h||d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight||"normal"})).attr({class:b||"apexcharts-datalabel",cx:s,cy:n}),d.dropShadow.enabled){var A=d.dropShadow;new pe(this.ctx).dropShadow(m,A)}u.add(m),e.globals.lastDrawnDataLabelsIndexes[o]===void 0&&(e.globals.lastDrawnDataLabelsIndexes[o]=[]),e.globals.lastDrawnDataLabelsIndexes[o].push(a)}return m}},{key:"addBackgroundToDataLabel",value:function(t,e){var i=this.w,s=i.config.dataLabels.background,n=s.padding,o=s.padding/2,a=e.width,l=e.height,c=new U(this.ctx).drawRect(e.x-n,e.y-o/2,a+2*n,l+o,s.borderRadius,i.config.chart.background!=="transparent"&&i.config.chart.background?i.config.chart.background:"#fff",s.opacity,s.borderWidth,s.borderColor);return s.dropShadow.enabled&&new pe(this.ctx).dropShadow(c,s.dropShadow),c}},{key:"dataLabelsBackground",value:function(){var t=this.w;if(t.config.chart.type!=="bubble")for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<e.length;i++){var s=e[i],n=s.getBBox(),o=null;if(n.width&&n.height&&(o=this.addBackgroundToDataLabel(s,n)),o){s.parentNode.insertBefore(o.node,s);var a=s.getAttribute("fill");t.config.chart.animations.enabled&&!t.globals.resized&&!t.globals.dataChanged?o.animate().attr({fill:a}):o.attr({fill:a}),s.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),s=0;s<e.length;s++)i&&i.insertBefore(e[s],i.nextSibling)}}]),r}(),fi=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.legendInactiveClass="legend-mouseover-inactive"}return tt(r,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(F.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),i=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(t,e){var i=this.w;function s(n){for(var o=0;o<n.length;o++)n[o].index===e&&t.node.classList.add("apexcharts-series-collapsed")}s(i.globals.collapsedSeries),s(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var e=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,e.isHidden),e.isHidden}},{key:"showSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!0)}},{key:"hideSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],s=this.w,n=F.clone(s.globals.initialSeries);s.globals.previousPaths=[],i?(s.globals.collapsedSeries=[],s.globals.ancillaryCollapsedSeries=[],s.globals.collapsedSeriesIndices=[],s.globals.ancillaryCollapsedSeriesIndices=[]):n=this.emptyCollapsedSeries(n),s.config.series=n,t&&(e&&(s.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var e=this.w,i=0;i<t.length;i++)e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i].data=[]);return t}},{key:"highlightSeries",value:function(t){var e=this.w,i=this.getSeriesByName(t),s=parseInt(i?.getAttribute("data:realIndex"),10),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),o=null,a=null,l=null;if(e.globals.axisCharts||e.config.chart.type==="radialBar")if(e.globals.axisCharts){o=e.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(s,"']")),a=e.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(s,"']"));var c=e.globals.seriesYAxisReverseMap[s];l=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(c,"']"))}else o=e.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(s+1,"']"));else o=e.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(s+1,"'] path"));for(var h=0;h<n.length;h++)n[h].classList.add(this.legendInactiveClass);if(o)e.globals.axisCharts||o.parentNode.classList.remove(this.legendInactiveClass),o.classList.remove(this.legendInactiveClass),a!==null&&a.classList.remove(this.legendInactiveClass),l!==null&&l.classList.remove(this.legendInactiveClass);else for(var u=0;u<n.length;u++)n[u].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(t,e){var i=this.w;e||(e=t.target);var s=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(t.type==="mousemove"){var n=parseInt(e.getAttribute("rel"),10)-1;this.highlightSeries(i.globals.seriesNames[n])}else if(t.type==="mouseout")for(var o=0;o<s.length;o++)s[o].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){var i=this,s=this.w,n=s.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),o=function(c){for(var h=0;h<n.length;h++)n[h].classList[c](i.legendInactiveClass)};if(t.type==="mousemove"){var a=parseInt(e.getAttribute("rel"),10)-1;o("add");var l=s.config.plotOptions.heatmap.colorScale.ranges;(function(c,h){for(var u=0;u<n.length;u++){var d=Number(n[u].getAttribute("val"));d>=c.from&&(d<c.to||c.to===h&&d===h)&&n[u].classList.remove(i.legendInactiveClass)}})(l[a],l.reduce(function(c,h){return Math.max(c,h.to)},0))}else t.type==="mouseout"&&o("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=this.w,s=0;if(i.config.series.length>1){for(var n=i.config.series.map(function(a,l){return a.data&&a.data.length>0&&i.globals.collapsedSeriesIndices.indexOf(l)===-1&&(!i.globals.comboCharts||e.length===0||e.length&&e.indexOf(i.config.series[l].type)>-1)?l:-1}),o=t==="asc"?0:n.length-1;t==="asc"?o<n.length:o>=0;t==="asc"?o++:o--)if(n[o]!==-1){s=n[o];break}}return s}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(t,e){return t.type==="bar"||t.type==="column"?e:-1}).filter(function(t){return t!==-1}):this.w.config.series.map(function(t,e){return e})}},{key:"getPreviousPaths",value:function(){var t=this.w;function e(o,a,l){for(var c=o[a].childNodes,h={type:l,paths:[],realIndex:o[a].getAttribute("data:realIndex")},u=0;u<c.length;u++)if(c[u].hasAttribute("pathTo")){var d=c[u].getAttribute("pathTo");h.paths.push({d})}t.globals.previousPaths.push(h)}t.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(o){for(var a,l=(a=o,t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(a,"-series .apexcharts-series"))),c=0;c<l.length;c++)e(l,c,o)});var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series"));if(i.length>0)for(var s=function(o){for(var a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(o,"'] rect")),l=[],c=function(u){var d=function(g){return a[u].getAttribute(g)},f={x:parseFloat(d("x")),y:parseFloat(d("y")),width:parseFloat(d("width")),height:parseFloat(d("height"))};l.push({rect:f,color:a[u].getAttribute("color")})},h=0;h<a.length;h++)c(h);t.globals.previousPaths.push(l)},n=0;n<i.length;n++)s(n);t.globals.axisCharts||(t.globals.previousPaths=t.globals.series)}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,i=new U(this.ctx),s=t.globals.svgWidth/2,n=t.globals.svgHeight/2,o="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,e.align==="left"?(s=10,o="start"):e.align==="right"&&(s=t.globals.svgWidth-10,o="end"),e.verticalAlign==="top"?n=50:e.verticalAlign==="bottom"&&(n=t.globals.svgHeight-50),s+=e.offsetX,n=n+parseInt(e.style.fontSize,10)+2+e.offsetY,e.text!==void 0&&e.text!==""){var a=i.drawText({x:s,y:n,text:e.text,textAnchor:o,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(a)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,i=0;i<t.length;i++)if(t[i].length===0)for(var s=0;s<t[e.globals.maxValsInArrayIndex].length;s++)t[i].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,i=this.filteredSeriesX(),s=0;s<i.length-1;s++)if(i[s][0]!==i[s+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){var t=this.w.globals.seriesX.map(function(e){return e.length>0?e:[]});return t}}]),r}(),rm=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Yt(this.ctx)}return tt(r,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new fi(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),t[this.activeSeriesIndex].data!==void 0&&t[this.activeSeriesIndex].data.length>0&&t[this.activeSeriesIndex].data[0]!==null&&t[this.activeSeriesIndex].data[0].x!==void 0&&t[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new fi(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),t[this.activeSeriesIndex].data!==void 0&&t[this.activeSeriesIndex].data.length>0&&t[this.activeSeriesIndex].data[0]!==void 0&&t[this.activeSeriesIndex].data[0]!==null&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){for(var i=this.w.config,s=this.w.globals,n=i.chart.type==="boxPlot"||i.series[e].type==="boxPlot",o=0;o<t[e].data.length;o++)if(t[e].data[o][1]!==void 0&&(Array.isArray(t[e].data[o][1])&&t[e].data[o][1].length===4&&!n?this.twoDSeries.push(F.parseNumber(t[e].data[o][1][3])):t[e].data[o].length>=5?this.twoDSeries.push(F.parseNumber(t[e].data[o][4])):this.twoDSeries.push(F.parseNumber(t[e].data[o][1])),s.dataFormatXNumeric=!0),i.xaxis.type==="datetime"){var a=new Date(t[e].data[o][0]);a=new Date(a).getTime(),this.twoDSeriesX.push(a)}else this.twoDSeriesX.push(t[e].data[o][0]);for(var l=0;l<t[e].data.length;l++)t[e].data[l][2]!==void 0&&(this.threeDSeries.push(t[e].data[l][2]),s.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var i=this.w.config,s=this.w.globals,n=new fe(this.ctx),o=e;s.collapsedSeriesIndices.indexOf(e)>-1&&(o=this.activeSeriesIndex);for(var a=0;a<t[e].data.length;a++)t[e].data[a].y!==void 0&&(Array.isArray(t[e].data[a].y)?this.twoDSeries.push(F.parseNumber(t[e].data[a].y[t[e].data[a].y.length-1])):this.twoDSeries.push(F.parseNumber(t[e].data[a].y))),t[e].data[a].goals!==void 0&&Array.isArray(t[e].data[a].goals)?(this.seriesGoals[e]===void 0&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(t[e].data[a].goals)):(this.seriesGoals[e]===void 0&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(null));for(var l=0;l<t[o].data.length;l++){var c=typeof t[o].data[l].x=="string",h=Array.isArray(t[o].data[l].x),u=!h&&!!n.isValidDate(t[o].data[l].x);if(c||u)if(c||i.xaxis.convertedCatToNumeric){var d=s.isBarHorizontal&&s.isRangeData;i.xaxis.type!=="datetime"||d?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[o].data[l].x),isNaN(t[o].data[l].x)||this.w.config.xaxis.type==="category"||typeof t[o].data[l].x=="string"||(s.isXNumeric=!0)):this.twoDSeriesX.push(n.parseDate(t[o].data[l].x))}else i.xaxis.type==="datetime"?this.twoDSeriesX.push(n.parseDate(t[o].data[l].x.toString())):(s.dataFormatXNumeric=!0,s.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[o].data[l].x)));else h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[o].data[l].x)):(s.isXNumeric=!0,s.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[o].data[l].x))}if(t[e].data[0]&&t[e].data[0].z!==void 0){for(var f=0;f<t[e].data.length;f++)this.threeDSeries.push(t[e].data[f].z);s.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var i=this.w.globals,s={};return this.isFormat2DArray()?s=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(s=this.handleRangeDataFormat("xy",t,e)),i.seriesRangeStart.push(s.start===void 0?[]:s.start),i.seriesRangeEnd.push(s.end===void 0?[]:s.end),i.seriesRange.push(s.rangeUniques),i.seriesRange.forEach(function(n,o){n&&n.forEach(function(a,l){a.y.forEach(function(c,h){for(var u=0;u<a.y.length;u++)if(h!==u){var d=c.y1,f=c.y2,g=a.y[u].y1;d<=a.y[u].y2&&g<=f&&(a.overlaps.indexOf(c.rangeName)<0&&a.overlaps.push(c.rangeName),a.overlaps.indexOf(a.y[u].rangeName)<0&&a.overlaps.push(a.y[u].rangeName))}})})}),s}},{key:"handleCandleStickBoxData",value:function(t,e){var i=this.w.globals,s={};return this.isFormat2DArray()?s=this.handleCandleStickBoxDataFormat("array",t,e):this.isFormatXY()&&(s=this.handleCandleStickBoxDataFormat("xy",t,e)),i.seriesCandleO[e]=s.o,i.seriesCandleH[e]=s.h,i.seriesCandleM[e]=s.m,i.seriesCandleL[e]=s.l,i.seriesCandleC[e]=s.c,s}},{key:"handleRangeDataFormat",value:function(t,e,i){var s=[],n=[],o=e[i].data.filter(function(h,u,d){return u===d.findIndex(function(f){return f.x===h.x})}).map(function(h,u){return{x:h.x,overlaps:[],y:[]}});if(t==="array")for(var a=0;a<e[i].data.length;a++)Array.isArray(e[i].data[a])?(s.push(e[i].data[a][1][0]),n.push(e[i].data[a][1][1])):(s.push(e[i].data[a]),n.push(e[i].data[a]));else if(t==="xy")for(var l=function(h){var u=Array.isArray(e[i].data[h].y),d=F.randomId(),f=e[i].data[h].x,g={y1:u?e[i].data[h].y[0]:e[i].data[h].y,y2:u?e[i].data[h].y[1]:e[i].data[h].y,rangeName:d};e[i].data[h].rangeName=d;var p=o.findIndex(function(b){return b.x===f});o[p].y.push(g),s.push(g.y1),n.push(g.y2)},c=0;c<e[i].data.length;c++)l(c);return{start:s,end:n,rangeUniques:o}}},{key:"handleCandleStickBoxDataFormat",value:function(t,e,i){var s=this.w,n=s.config.chart.type==="boxPlot"||s.config.series[i].type==="boxPlot",o=[],a=[],l=[],c=[],h=[];if(t==="array")if(n&&e[i].data[0].length===6||!n&&e[i].data[0].length===5)for(var u=0;u<e[i].data.length;u++)o.push(e[i].data[u][1]),a.push(e[i].data[u][2]),n?(l.push(e[i].data[u][3]),c.push(e[i].data[u][4]),h.push(e[i].data[u][5])):(c.push(e[i].data[u][3]),h.push(e[i].data[u][4]));else for(var d=0;d<e[i].data.length;d++)Array.isArray(e[i].data[d][1])&&(o.push(e[i].data[d][1][0]),a.push(e[i].data[d][1][1]),n?(l.push(e[i].data[d][1][2]),c.push(e[i].data[d][1][3]),h.push(e[i].data[d][1][4])):(c.push(e[i].data[d][1][2]),h.push(e[i].data[d][1][3])));else if(t==="xy")for(var f=0;f<e[i].data.length;f++)Array.isArray(e[i].data[f].y)&&(o.push(e[i].data[f].y[0]),a.push(e[i].data[f].y[1]),n?(l.push(e[i].data[f].y[2]),c.push(e[i].data[f].y[3]),h.push(e[i].data[f].y[4])):(c.push(e[i].data[f].y[2]),h.push(e[i].data[f].y[3])));return{o,h:a,m:l,l:c,c:h}}},{key:"parseDataAxisCharts",value:function(t){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,s=this.w.config,n=this.w.globals,o=new fe(i),a=s.labels.length>0?s.labels.slice():s.xaxis.categories.slice();n.isRangeBar=s.chart.type==="rangeBar"&&n.isBarHorizontal,n.hasXaxisGroups=s.xaxis.type==="category"&&s.xaxis.group.groups.length>0,n.hasXaxisGroups&&(n.groups=s.xaxis.group.groups),t.forEach(function(f,g){f.name!==void 0?n.seriesNames.push(f.name):n.seriesNames.push("series-"+parseInt(g+1,10))}),this.coreUtils.setSeriesYAxisMappings();var l=[],c=se(new Set(s.series.map(function(f){return f.group})));s.series.forEach(function(f,g){var p=c.indexOf(f.group);l[p]||(l[p]=[]),l[p].push(n.seriesNames[g])}),n.seriesGroups=l;for(var h=function(){for(var f=0;f<a.length;f++)if(typeof a[f]=="string"){if(!o.isValidDate(a[f]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");e.twoDSeriesX.push(o.parseDate(a[f]))}else e.twoDSeriesX.push(a[f])},u=0;u<t.length;u++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],t[u].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(s.chart.type!=="rangeBar"&&s.chart.type!=="rangeArea"&&t[u].type!=="rangeBar"&&t[u].type!=="rangeArea"||(n.isRangeData=!0,s.chart.type!=="rangeBar"&&s.chart.type!=="rangeArea"||this.handleRangeData(t,u)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,u):this.isFormatXY()&&this.handleFormatXY(t,u),s.chart.type!=="candlestick"&&t[u].type!=="candlestick"&&s.chart.type!=="boxPlot"&&t[u].type!=="boxPlot"||this.handleCandleStickBoxData(t,u),n.series.push(this.twoDSeries),n.labels.push(this.twoDSeriesX),n.seriesX.push(this.twoDSeriesX),n.seriesGoals=this.seriesGoals,u!==this.activeSeriesIndex||this.fallbackToCategory||(n.isXNumeric=!0);else{s.xaxis.type==="datetime"?(n.isXNumeric=!0,h(),n.seriesX.push(this.twoDSeriesX)):s.xaxis.type==="numeric"&&(n.isXNumeric=!0,a.length>0&&(this.twoDSeriesX=a,n.seriesX.push(this.twoDSeriesX))),n.labels.push(this.twoDSeriesX);var d=t[u].data.map(function(f){return F.parseNumber(f)});n.series.push(d)}n.seriesZ.push(this.threeDSeries),t[u].color!==void 0?n.seriesColors.push(t[u].color):n.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,i=this.w.config;e.series=t.slice(),e.seriesNames=i.labels.slice();for(var s=0;s<e.series.length;s++)e.seriesNames[s]===void 0&&e.seriesNames.push("series-"+(s+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,i=this.w.globals;e.xaxis.categories.length>0?i.labels=e.xaxis.categories:e.labels.length>0?i.labels=e.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRange.length&&(i.seriesRange.map(function(s){s.forEach(function(n){i.labels.indexOf(n.x)<0&&n.x&&i.labels.push(n.x)})}),i.labels=Array.from(new Set(i.labels.map(JSON.stringify)),JSON.parse)),e.xaxis.convertedCatToNumeric&&(new Da(e).convertCatToNumericXaxis(e,this.ctx,i.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,i=this.w.config,s=[];if(e.axisCharts){if(e.series.length>0)if(this.isFormatXY())for(var n=i.series.map(function(u,d){return u.data.filter(function(f,g,p){return p.findIndex(function(b){return b.x===f.x})===g})}),o=n.reduce(function(u,d,f,g){return g[u].length>d.length?u:f},0),a=0;a<n[o].length;a++)s.push(a+1);else for(var l=0;l<e.series[e.maxValsInArrayIndex].length;l++)s.push(l+1);e.seriesX=[];for(var c=0;c<t.length;c++)e.seriesX.push(s);this.w.globals.isBarHorizontal||(e.isXNumeric=!0)}if(s.length===0){s=e.axisCharts?[]:e.series.map(function(u,d){return d+1});for(var h=0;h<t.length;h++)e.seriesX.push(s)}e.labels=s,i.xaxis.convertedCatToNumeric&&(e.categoryLabels=s.map(function(u){return i.xaxis.labels.formatter(u)})),e.noLabelsProvided=!0}},{key:"parseData",value:function(t){var e=this.w,i=e.config,s=e.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),s.axisCharts?(this.parseDataAxisCharts(t),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(t),i.chart.stacked){var n=new fi(this.ctx);s.series=n.setNullSeriesToZeroValues(s.series)}this.coreUtils.getSeriesTotals(),s.axisCharts&&(s.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),s.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),s.dataFormatXNumeric||s.isXNumeric&&(i.xaxis.type!=="numeric"||i.labels.length!==0||i.xaxis.categories.length!==0)||this.handleExternalLabelsData(t);for(var o=this.coreUtils.getCategoryLabels(s.labels),a=0;a<o.length;a++)if(Array.isArray(o[a])){s.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this.w,e=[];t.globals.seriesYAxisMap.forEach(function(i,s){var n=0;i.forEach(function(o){t.globals.collapsedSeriesIndices.indexOf(o)!==-1&&n++}),n>0&&n==i.length&&e.push(s)}),t.globals.ignoreYAxisIndexes=e.map(function(i){return i})}}]),r}(),Wh=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"scaleSvgNode",value:function(t,e){var i=parseFloat(t.getAttributeNS(null,"width")),s=parseFloat(t.getAttributeNS(null,"height"));t.setAttributeNS(null,"width",i*e),t.setAttributeNS(null,"height",s*e),t.setAttributeNS(null,"viewBox","0 0 "+i+" "+s)}},{key:"getSvgString",value:function(t){var e=this;return new Promise(function(i){var s=e.w,n=t||s.config.chart.toolbar.export.scale||s.config.chart.toolbar.export.width/s.globals.svgWidth;n||(n=1);var o=e.w.globals.dom.Paper.svg(),a=e.w.globals.dom.Paper.node.cloneNode(!0);n!==1&&e.scaleSvgNode(a,n),e.convertImagesToBase64(a).then(function(){o=new XMLSerializer().serializeToString(a),i(o.replace(/&nbsp;/g,"&#160;"))})})}},{key:"convertImagesToBase64",value:function(t){var e=this,i=t.getElementsByTagName("image"),s=Array.from(i).map(function(n){var o=n.getAttributeNS("http://www.w3.org/1999/xlink","href");return o&&!o.startsWith("data:")?e.getBase64FromUrl(o).then(function(a){n.setAttributeNS("http://www.w3.org/1999/xlink","href",a)}).catch(function(a){console.error("Error converting image to base64:",a)}):Promise.resolve()});return Promise.all(s)}},{key:"getBase64FromUrl",value:function(t){return new Promise(function(e,i){var s=new Image;s.crossOrigin="Anonymous",s.onload=function(){var n=document.createElement("canvas");n.width=s.width,n.height=s.height,n.getContext("2d").drawImage(s,0,0),e(n.toDataURL())},s.onerror=i,s.src=t})}},{key:"cleanup",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(s,function(n){n.setAttribute("width",0)}),e&&e[0]&&(e[0].setAttribute("x",-500),e[0].setAttribute("x1",-500),e[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){var t=this;return new Promise(function(e){t.cleanup(),t.getSvgString().then(function(i){var s=new Blob([i],{type:"image/svg+xml;charset=utf-8"});e(URL.createObjectURL(s))})})}},{key:"dataURI",value:function(t){var e=this;return new Promise(function(i){var s=e.w,n=t?t.scale||t.width/s.globals.svgWidth:1;e.cleanup();var o=document.createElement("canvas");o.width=s.globals.svgWidth*n,o.height=parseInt(s.globals.dom.elWrap.style.height,10)*n;var a=s.config.chart.background!=="transparent"&&s.config.chart.background?s.config.chart.background:"#fff",l=o.getContext("2d");l.fillStyle=a,l.fillRect(0,0,o.width*n,o.height*n),e.getSvgString(n).then(function(c){var h="data:image/svg+xml,"+encodeURIComponent(c),u=new Image;u.crossOrigin="anonymous",u.onload=function(){if(l.drawImage(u,0,0),o.msToBlob){var d=o.msToBlob();i({blob:d})}else{var f=o.toDataURL("image/png");i({imgURI:f})}},u.src=h})})}},{key:"exportToSVG",value:function(){var t=this;this.svgUrl().then(function(e){t.triggerDownload(e,t.w.config.chart.toolbar.export.svg.filename,".svg")})}},{key:"exportToPng",value:function(){var t=this,e=this.w.config.chart.toolbar.export.scale,i=this.w.config.chart.toolbar.export.width,s=e?{scale:e}:i?{width:i}:void 0;this.dataURI(s).then(function(n){var o=n.imgURI,a=n.blob;a?navigator.msSaveOrOpenBlob(a,t.w.globals.chartID+".png"):t.triggerDownload(o,t.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(t){var e=this,i=t.series,s=t.fileName,n=t.columnDelimiter,o=n===void 0?",":n,a=t.lineDelimiter,l=a===void 0?`
`:a,c=this.w;i||(i=c.config.series);var h=[],u=[],d="",f=c.globals.series.map(function(y,A){return c.globals.collapsedSeriesIndices.indexOf(A)===-1?y:[]}),g=function(y){return typeof c.config.chart.toolbar.export.csv.categoryFormatter=="function"?c.config.chart.toolbar.export.csv.categoryFormatter(y):c.config.xaxis.type==="datetime"&&String(y).length>=10?new Date(y).toDateString():F.isNumber(y)?y:y.split(o).join("")},p=function(y){return typeof c.config.chart.toolbar.export.csv.valueFormatter=="function"?c.config.chart.toolbar.export.csv.valueFormatter(y):y},b=Math.max.apply(Math,se(i.map(function(y){return y.data?y.data.length:0}))),m=new rm(this.ctx),x=new ss(this.ctx),v=function(y){var A="";if(c.globals.axisCharts){if(c.config.xaxis.type==="category"||c.config.xaxis.convertedCatToNumeric)if(c.globals.isBarHorizontal){var C=c.globals.yLabelFormatters[0],M=new fi(e.ctx).getActiveConfigSeriesIndex();A=C(c.globals.labels[y],{seriesIndex:M,dataPointIndex:y,w:c})}else A=x.getLabel(c.globals.labels,c.globals.timescaleLabels,0,y).text;c.config.xaxis.type==="datetime"&&(c.config.xaxis.categories.length?A=c.config.xaxis.categories[y]:c.config.labels.length&&(A=c.config.labels[y]))}else A=c.config.labels[y];return A===null?"nullvalue":(Array.isArray(A)&&(A=A.join(" ")),F.isNumber(A)?A:A.split(o).join(""))},w=function(y,A){if(h.length&&A===0&&u.push(h.join(o)),y.data){y.data=y.data.length&&y.data||se(Array(b)).map(function(){return""});for(var C=0;C<y.data.length;C++){h=[];var M=v(C);if(M!=="nullvalue"){if(M||(m.isFormatXY()?M=i[A].data[C].x:m.isFormat2DArray()&&(M=i[A].data[C]?i[A].data[C][0]:"")),A===0){h.push(g(M));for(var O=0;O<c.globals.series.length;O++){var B,_=m.isFormatXY()?(B=i[O].data[C])===null||B===void 0?void 0:B.y:f[O][C];h.push(p(_))}}(c.config.chart.type==="candlestick"||y.type&&y.type==="candlestick")&&(h.pop(),h.push(c.globals.seriesCandleO[A][C]),h.push(c.globals.seriesCandleH[A][C]),h.push(c.globals.seriesCandleL[A][C]),h.push(c.globals.seriesCandleC[A][C])),(c.config.chart.type==="boxPlot"||y.type&&y.type==="boxPlot")&&(h.pop(),h.push(c.globals.seriesCandleO[A][C]),h.push(c.globals.seriesCandleH[A][C]),h.push(c.globals.seriesCandleM[A][C]),h.push(c.globals.seriesCandleL[A][C]),h.push(c.globals.seriesCandleC[A][C])),c.config.chart.type==="rangeBar"&&(h.pop(),h.push(c.globals.seriesRangeStart[A][C]),h.push(c.globals.seriesRangeEnd[A][C])),h.length&&u.push(h.join(o))}}}};h.push(c.config.chart.toolbar.export.csv.headerCategory),c.config.chart.type==="boxPlot"?(h.push("minimum"),h.push("q1"),h.push("median"),h.push("q3"),h.push("maximum")):c.config.chart.type==="candlestick"?(h.push("open"),h.push("high"),h.push("low"),h.push("close")):c.config.chart.type==="rangeBar"?(h.push("minimum"),h.push("maximum")):i.map(function(y,A){var C=(y.name?y.name:"series-".concat(A))+"";c.globals.axisCharts&&h.push(C.split(o).join("")?C.split(o).join(""):"series-".concat(A))}),c.globals.axisCharts||(h.push(c.config.chart.toolbar.export.csv.headerValue),u.push(h.join(o))),c.globals.allSeriesHasEqualX||!c.globals.axisCharts||c.config.xaxis.categories.length||c.config.labels.length?i.map(function(y,A){c.globals.axisCharts?w(y,A):((h=[]).push(g(c.globals.labels[A])),h.push(p(f[A])),u.push(h.join(o)))}):function(){var y=new Set,A={};i.forEach(function(C,M){C?.data.forEach(function(O){var B,_;if(m.isFormatXY())B=O.x,_=O.y;else{if(!m.isFormat2DArray())return;B=O[0],_=O[1]}A[B]||(A[B]=Array(i.length).fill("")),A[B][M]=p(_),y.add(B)})}),h.length&&u.push(h.join(o)),Array.from(y).sort().forEach(function(C){u.push([g(C),A[C].join(o)])})}(),d+=u.join(l),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+d),s||c.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,e,i){var s=document.createElement("a");s.href=t,s.download=(e||this.w.globals.chartID)+i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}]),r}(),Ba=function(){function r(t,e){Q(this,r),this.ctx=t,this.elgrid=e,this.w=t.w;var i=this.w;this.axesUtils=new ss(t),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],i.config.xaxis.position==="top"?this.offY=0:this.offY=i.globals.gridHeight,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return tt(r,[{key:"drawXaxis",value:function(){var t=this.w,e=new U(this.ctx),i=e.group({class:"apexcharts-xaxis",transform:"translate(".concat(t.config.xaxis.offsetX,", ").concat(t.config.xaxis.offsetY,")")}),s=e.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});i.add(s);for(var n=[],o=0;o<this.xaxisLabels.length;o++)n.push(this.xaxisLabels[o]);if(this.drawXAxisLabelAndGroup(!0,e,s,n,t.globals.isXNumeric,function(g,p){return p}),t.globals.hasXaxisGroups){var a=t.globals.groups;n=[];for(var l=0;l<a.length;l++)n.push(a[l].title);var c={};t.config.xaxis.group.style&&(c.xaxisFontSize=t.config.xaxis.group.style.fontSize,c.xaxisFontFamily=t.config.xaxis.group.style.fontFamily,c.xaxisForeColors=t.config.xaxis.group.style.colors,c.fontWeight=t.config.xaxis.group.style.fontWeight,c.cssClass=t.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,e,s,n,!1,function(g,p){return a[g].cols*p},c)}if(t.config.xaxis.title.text!==void 0){var h=e.group({class:"apexcharts-xaxis-title"}),u=e.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(t.config.xaxis.position==="bottom"?t.globals.xAxisLabelsHeight:-t.globals.xAxisLabelsHeight-10)+t.config.xaxis.title.offsetY,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});h.add(u),i.add(h)}if(t.config.xaxis.axisBorder.show){var d=t.globals.barPadForNumericAxis,f=e.drawLine(t.globals.padHorizontal+t.config.xaxis.axisBorder.offsetX-d,this.offY,this.xaxisBorderWidth+d,this.offY,t.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(f):i.add(f)}return i}},{key:"drawXAxisLabelAndGroup",value:function(t,e,i,s,n,o){var a,l=this,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},h=[],u=[],d=this.w,f=c.xaxisFontSize||this.xaxisFontSize,g=c.xaxisFontFamily||this.xaxisFontFamily,p=c.xaxisForeColors||this.xaxisForeColors,b=c.fontWeight||d.config.xaxis.labels.style.fontWeight,m=c.cssClass||d.config.xaxis.labels.style.cssClass,x=d.globals.padHorizontal,v=s.length,w=d.config.xaxis.type==="category"?d.globals.dataPoints:v;if(w===0&&v>w&&(w=v),n){var y=Math.max(Number(d.config.xaxis.tickAmount)||1,w>1?w-1:w);a=d.globals.gridWidth/Math.min(y,v-1),x=x+o(0,a)/2+d.config.xaxis.labels.offsetX}else a=d.globals.gridWidth/w,x=x+o(0,a)+d.config.xaxis.labels.offsetX;for(var A=function(M){var O=x-o(M,a)/2+d.config.xaxis.labels.offsetX;M===0&&v===1&&a/2===x&&w===1&&(O=d.globals.gridWidth/2);var B=l.axesUtils.getLabel(s,d.globals.timescaleLabels,O,M,h,f,t),_=28;if(d.globals.rotateXLabels&&t&&(_=22),d.config.xaxis.title.text&&d.config.xaxis.position==="top"&&(_+=parseFloat(d.config.xaxis.title.style.fontSize)+2),t||(_=_+parseFloat(f)+(d.globals.xAxisLabelsHeight-d.globals.xAxisGroupLabelsHeight)+(d.globals.rotateXLabels?10:0)),B=d.config.xaxis.tickAmount!==void 0&&d.config.xaxis.tickAmount!=="dataPoints"&&d.config.xaxis.type!=="datetime"?l.axesUtils.checkLabelBasedOnTickamount(M,B,v):l.axesUtils.checkForOverflowingLabels(M,B,v,h,u),d.config.xaxis.labels.show){var z=e.drawText({x:B.x,y:l.offY+d.config.xaxis.labels.offsetY+_-(d.config.xaxis.position==="top"?d.globals.xAxisHeight+d.config.xaxis.axisTicks.height-2:0),text:B.text,textAnchor:"middle",fontWeight:B.isBold?600:b,fontSize:f,fontFamily:g,foreColor:Array.isArray(p)?t&&d.config.xaxis.convertedCatToNumeric?p[d.globals.minX+M-1]:p[M]:p,isPlainText:!1,cssClass:(t?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+m});if(i.add(z),z.on("click",function(E){if(typeof d.config.chart.events.xAxisLabelClick=="function"){var I=Object.assign({},d,{labelIndex:M});d.config.chart.events.xAxisLabelClick(E,l.ctx,I)}}),t){var N=document.createElementNS(d.globals.SVGNS,"title");N.textContent=Array.isArray(B.text)?B.text.join(" "):B.text,z.node.appendChild(N),B.text!==""&&(h.push(B.text),u.push(B))}}M<v-1&&(x+=o(M+1,a))},C=0;C<=v-1;C++)A(C)}},{key:"drawXaxisInversed",value:function(t){var e,i,s=this,n=this.w,o=new U(this.ctx),a=n.config.yaxis[0].opposite?n.globals.translateYAxisX[t]:0,l=o.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),c=o.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+a+", 0)"});l.add(c);var h=[];if(n.config.yaxis[t].show)for(var u=0;u<this.xaxisLabels.length;u++)h.push(this.xaxisLabels[u]);e=n.globals.gridHeight/h.length,i=-e/2.2;var d=n.globals.yLabelFormatters[0],f=n.config.yaxis[0].labels;if(f.show)for(var g=function(y){var A=h[y]===void 0?"":h[y];A=d(A,{seriesIndex:t,dataPointIndex:y,w:n});var C=s.axesUtils.getYAxisForeColor(f.style.colors,t),M=0;Array.isArray(A)&&(M=A.length/2*parseInt(f.style.fontSize,10));var O=f.offsetX-15,B="end";s.yaxis.opposite&&(B="start"),n.config.yaxis[0].labels.align==="left"?(O=f.offsetX,B="start"):n.config.yaxis[0].labels.align==="center"?(O=f.offsetX,B="middle"):n.config.yaxis[0].labels.align==="right"&&(B="end");var _=o.drawText({x:O,y:i+e+f.offsetY-M,text:A,textAnchor:B,foreColor:Array.isArray(C)?C[y]:C,fontSize:f.style.fontSize,fontFamily:f.style.fontFamily,fontWeight:f.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+f.style.cssClass,maxWidth:f.maxWidth});c.add(_),_.on("click",function(E){if(typeof n.config.chart.events.xAxisLabelClick=="function"){var I=Object.assign({},n,{labelIndex:y});n.config.chart.events.xAxisLabelClick(E,s.ctx,I)}});var z=document.createElementNS(n.globals.SVGNS,"title");if(z.textContent=Array.isArray(A)?A.join(" "):A,_.node.appendChild(z),n.config.yaxis[t].labels.rotate!==0){var N=o.rotateAroundCenter(_.node);_.node.setAttribute("transform","rotate(".concat(n.config.yaxis[t].labels.rotate," 0 ").concat(N.y,")"))}i+=e},p=0;p<=h.length-1;p++)g(p);if(n.config.yaxis[0].title.text!==void 0){var b=o.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+a+", 0)"}),m=o.drawText({x:n.config.yaxis[0].title.offsetX,y:n.globals.gridHeight/2+n.config.yaxis[0].title.offsetY,text:n.config.yaxis[0].title.text,textAnchor:"middle",foreColor:n.config.yaxis[0].title.style.color,fontSize:n.config.yaxis[0].title.style.fontSize,fontWeight:n.config.yaxis[0].title.style.fontWeight,fontFamily:n.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[0].title.style.cssClass});b.add(m),l.add(b)}var x=0;this.isCategoryBarHorizontal&&n.config.yaxis[0].opposite&&(x=n.globals.gridWidth);var v=n.config.xaxis.axisBorder;if(v.show){var w=o.drawLine(n.globals.padHorizontal+v.offsetX+x,1+v.offsetY,n.globals.padHorizontal+v.offsetX+x,n.globals.gridHeight+v.offsetY,v.color,0);this.elgrid&&this.elgrid.elGridBorders&&n.config.grid.show?this.elgrid.elGridBorders.add(w):l.add(w)}return n.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(x,h.length,n.config.yaxis[0].axisBorder,n.config.yaxis[0].axisTicks,0,e,l),l}},{key:"drawXaxisTicks",value:function(t,e,i){var s=this.w,n=t;if(!(t<0||t-2>s.globals.gridWidth)){var o=this.offY+s.config.xaxis.axisTicks.offsetY;if(e=e+o+s.config.xaxis.axisTicks.height,s.config.xaxis.position==="top"&&(e=o-s.config.xaxis.axisTicks.height),s.config.xaxis.axisTicks.show){var a=new U(this.ctx).drawLine(t+s.config.xaxis.axisTicks.offsetX,o+s.config.xaxis.offsetY,n+s.config.xaxis.axisTicks.offsetX,e+s.config.xaxis.offsetY,s.config.xaxis.axisTicks.color);i.add(a),a.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],i=this.xaxisLabels.length,s=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var n=0;n<i;n++)s=this.xaxisLabels[n].position,e.push(s);else for(var o=i,a=0;a<o;a++){var l=o;t.globals.isXNumeric&&t.config.chart.type!=="bar"&&(l-=1),s+=t.globals.gridWidth/l,e.push(s)}return e}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,e=new U(this.ctx),i=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var a=0;a<s.length;a++){var l=e.rotateAroundCenter(s[a]);l.y=l.y-1,l.x=l.x+1,s[a].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(l.x," ").concat(l.y,")")),s[a].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var c=s[a].childNodes;t.config.xaxis.labels.trim&&Array.prototype.forEach.call(c,function(f){e.placeTextWithEllipsis(f,f.textContent,t.globals.xAxisLabelsHeight-(t.config.legend.position==="bottom"?20:10))})}else(function(){for(var f=t.globals.gridWidth/(t.globals.labels.length+1),g=0;g<s.length;g++){var p=s[g].childNodes;t.config.xaxis.labels.trim&&t.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(p,function(b){e.placeTextWithEllipsis(b,b.textContent,f)})}})();if(n.length>0){var h=n[n.length-1].getBBox(),u=n[0].getBBox();h.x<-20&&n[n.length-1].parentNode.removeChild(n[n.length-1]),u.x+u.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&n[0].parentNode.removeChild(n[0]);for(var d=0;d<o.length;d++)e.placeTextWithEllipsis(o[d],o[d].textContent,t.config.yaxis[0].labels.maxWidth-(t.config.yaxis[0].title.text?2*parseFloat(t.config.yaxis[0].title.style.fontSize):0)-15)}}}]),r}(),xA=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w;var e=this.w;this.xaxisLabels=e.globals.labels.slice(),this.axesUtils=new ss(t),this.isRangeBar=e.globals.seriesRange.length&&e.globals.isBarHorizontal,e.globals.timescaleLabels.length>0&&(this.xaxisLabels=e.globals.timescaleLabels.slice())}return tt(r,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=this.w,i=new U(this.ctx);t||(t=i.group({class:"apexcharts-grid"}));var s=i.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),n=i.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(n),t.add(s),t}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var t=this.renderGrid();return this.drawGridArea(t.el),t}return null}},{key:"createGridMask",value:function(){var t=this.w,e=t.globals,i=new U(this.ctx),s=Array.isArray(t.config.stroke.width)?Math.max.apply(Math,se(t.config.stroke.width)):t.config.stroke.width,n=function(h){var u=document.createElementNS(e.SVGNS,"clipPath");return u.setAttribute("id",h),u};e.dom.elGridRectMask=n("gridRectMask".concat(e.cuid)),e.dom.elGridRectBarMask=n("gridRectBarMask".concat(e.cuid)),e.dom.elGridRectMarkerMask=n("gridRectMarkerMask".concat(e.cuid)),e.dom.elForecastMask=n("forecastMask".concat(e.cuid)),e.dom.elNonForecastMask=n("nonForecastMask".concat(e.cuid));var o=0,a=0;(["bar","rangeBar","candlestick","boxPlot"].includes(t.config.chart.type)||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(o=Math.max(t.config.grid.padding.left,e.barPadForNumericAxis),a=Math.max(t.config.grid.padding.right,e.barPadForNumericAxis)),e.dom.elGridRect=i.drawRect(-s/2-2,-s/2-2,e.gridWidth+s+4,e.gridHeight+s+4,0,"#fff"),e.dom.elGridRectBar=i.drawRect(-s/2-o-2,-s/2-2,e.gridWidth+s+a+o+4,e.gridHeight+s+4,0,"#fff");var l=t.globals.markers.largestSize;e.dom.elGridRectMarker=i.drawRect(-l,-l,e.gridWidth+2*l,e.gridHeight+2*l,0,"#fff"),e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node),e.dom.elGridRectBarMask.appendChild(e.dom.elGridRectBar.node),e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node);var c=e.dom.baseEl.querySelector("defs");c.appendChild(e.dom.elGridRectMask),c.appendChild(e.dom.elGridRectBarMask),c.appendChild(e.dom.elGridRectMarkerMask),c.appendChild(e.dom.elForecastMask),c.appendChild(e.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,i=t.x1,s=t.y1,n=t.x2,o=t.y2,a=t.xCount,l=t.parent,c=this.w;if(!(e===0&&c.globals.skipFirstTimelinelabel||e===a-1&&c.globals.skipLastTimelinelabel&&!c.config.xaxis.labels.formatter||c.config.chart.type==="radar")){c.config.grid.xaxis.lines.show&&this._drawGridLine({i:e,x1:i,y1:s,x2:n,y2:o,xCount:a,parent:l});var h=0;if(c.globals.hasXaxisGroups&&c.config.xaxis.tickPlacement==="between"){var u=c.globals.groups;if(u){for(var d=0,f=0;d<e&&f<u.length;f++)d+=u[f].cols;d===e&&(h=.6*c.globals.xAxisLabelsHeight)}}new Ba(this.ctx).drawXaxisTicks(i,h,c.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(t){var e=t.i,i=t.x1,s=t.y1,n=t.x2,o=t.y2,a=t.xCount,l=t.parent,c=this.w,h=l.node.classList.contains("apexcharts-gridlines-horizontal"),u=c.globals.barPadForNumericAxis,d=s===0&&o===0||i===0&&n===0||s===c.globals.gridHeight&&o===c.globals.gridHeight||c.globals.isBarHorizontal&&(e===0||e===a-1),f=new U(this).drawLine(i-(h?u:0),s,n+(h?u:0),o,c.config.grid.borderColor,c.config.grid.strokeDashArray);f.node.classList.add("apexcharts-gridline"),d&&c.config.grid.show?this.elGridBorders.add(f):l.add(f)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,i=t.x1,s=t.y1,n=t.x2,o=t.y2,a=t.type,l=this.w,c=new U(this.ctx),h=l.globals.barPadForNumericAxis,u=l.config.grid[a].colors[e],d=c.drawRect(i-(a==="row"?h:0),s,n+(a==="row"?2*h:0),o,0,u,l.config.grid[a].opacity);this.elg.add(d),d.attr("clip-path","url(#gridRectMask".concat(l.globals.cuid,")")),d.node.classList.add("apexcharts-grid-".concat(a))}},{key:"_drawXYLines",value:function(t){var e=this,i=t.xCount,s=t.tickAmount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show){var o,a=n.globals.padHorizontal,l=n.globals.gridHeight;n.globals.timescaleLabels.length?function(g){for(var p=g.xC,b=g.x1,m=g.y1,x=g.x2,v=g.y2,w=0;w<p;w++)b=e.xaxisLabels[w].position,x=e.xaxisLabels[w].position,e._drawGridLines({i:w,x1:b,y1:m,x2:x,y2:v,xCount:i,parent:e.elgridLinesV})}({xC:i,x1:a,y1:0,x2:o,y2:l}):(n.globals.isXNumeric&&(i=n.globals.xAxisScale.result.length),function(g){for(var p=g.xC,b=g.x1,m=g.y1,x=g.x2,v=g.y2,w=0;w<p+(n.globals.isXNumeric?0:1);w++)w===0&&p===1&&n.globals.dataPoints===1&&(x=b=n.globals.gridWidth/2),e._drawGridLines({i:w,x1:b,y1:m,x2:x,y2:v,xCount:i,parent:e.elgridLinesV}),x=b+=n.globals.gridWidth/(n.globals.isXNumeric?p-1:p)}({xC:i,x1:a,y1:0,x2:o,y2:l}))}if(n.config.grid.yaxis.lines.show){var c=0,h=0,u=n.globals.gridWidth,d=s+1;this.isRangeBar&&(d=n.globals.labels.length);for(var f=0;f<d+(this.isRangeBar?1:0);f++)this._drawGridLine({i:f,xCount:d+(this.isRangeBar?1:0),x1:0,y1:c,x2:u,y2:h,parent:this.elgridLinesH}),h=c+=n.globals.gridHeight/(this.isRangeBar?d:s)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var s,n=i.globals.padHorizontal,o=i.globals.gridHeight,a=0;a<e+1;a++)i.config.grid.xaxis.lines.show&&this._drawGridLine({i:a,xCount:e+1,x1:n,y1:0,x2:s,y2:o,parent:this.elgridLinesV}),new Ba(this.ctx).drawXaxisTicks(n,0,i.globals.dom.elGraphical),s=n+=i.globals.gridWidth/e;if(i.config.grid.yaxis.lines.show)for(var l=0,c=0,h=i.globals.gridWidth,u=0;u<i.globals.dataPoints+1;u++)this._drawGridLine({i:u,xCount:i.globals.dataPoints+1,x1:0,y1:l,x2:h,y2:c,parent:this.elgridLinesH}),c=l+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=t.globals,i=new U(this.ctx);this.elg=i.group({class:"apexcharts-grid"}),this.elgridLinesH=i.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=i.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=i.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var s=0;s<e.seriesYAxisMap.length&&e.ignoreYAxisIndexes.includes(s);)s++;s===e.seriesYAxisMap.length&&(s=0);var n,o=e.yAxisScale[s].result.length-1;if(!e.isBarHorizontal||this.isRangeBar){var a,l,c;n=this.xaxisLabels.length,this.isRangeBar&&(o=e.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(n=t.config.xaxis.tickAmount),((a=e.yAxisScale)===null||a===void 0||(l=a[s])===null||l===void 0||(c=l.result)===null||c===void 0?void 0:c.length)>0&&t.config.xaxis.type!=="datetime"&&(n=e.yAxisScale[s].result.length-1)),this._drawXYLines({xCount:n,tickAmount:o})}else n=o,o=e.xTickAmount,this._drawInvertedXYLines({xCount:n,tickAmount:o});return this.drawGridBands(n,o),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:e.gridWidth/n}}},{key:"drawGridBands",value:function(t,e){var i,s,n=this,o=this.w;if(((i=o.config.grid.row.colors)===null||i===void 0?void 0:i.length)>0&&function(g,p,b,m,x,v){for(var w=0,y=0;w<p;w++,y++)y>=o.config.grid[g].colors.length&&(y=0),n._drawGridBandRect({c:y,x1:b,y1:m,x2:x,y2:v,type:g}),m+=o.globals.gridHeight/e}("row",e,0,0,o.globals.gridWidth,o.globals.gridHeight/e),((s=o.config.grid.column.colors)===null||s===void 0?void 0:s.length)>0){var a=o.globals.isBarHorizontal||o.config.xaxis.tickPlacement!=="on"||o.config.xaxis.type!=="category"&&!o.config.xaxis.convertedCatToNumeric?t:t-1;o.globals.isXNumeric&&(a=o.globals.xAxisScale.result.length-1);for(var l=o.globals.padHorizontal,c=o.globals.padHorizontal+o.globals.gridWidth/a,h=o.globals.gridHeight,u=0,d=0;u<t;u++,d++){var f;d>=o.config.grid.column.colors.length&&(d=0),o.config.xaxis.type==="datetime"&&(l=this.xaxisLabels[u].position,c=(((f=this.xaxisLabels[u+1])===null||f===void 0?void 0:f.position)||o.globals.gridWidth)-this.xaxisLabels[u].position),this._drawGridBandRect({c:d,x1:l,y1:0,x2:c,y2:h,type:"column"}),l+=o.globals.gridWidth/a}}}}]),r}(),yA=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.coreUtils=new Yt(this.ctx)}return tt(r,[{key:"niceScale",value:function(t,e){var i,s,n,o,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=1e-11,c=this.w,h=c.globals;h.isBarHorizontal?(i=c.config.xaxis,s=Math.max((h.svgWidth-100)/25,2)):(i=c.config.yaxis[a],s=Math.max((h.svgHeight-100)/15,2)),F.isNumber(s)||(s=10),n=i.min!==void 0&&i.min!==null,o=i.max!==void 0&&i.min!==null;var u=i.stepSize!==void 0&&i.stepSize!==null,d=i.tickAmount!==void 0&&i.tickAmount!==null,f=d?i.tickAmount:h.niceScaleDefaultTicks[Math.min(Math.round(s/2),h.niceScaleDefaultTicks.length-1)];if(h.isMultipleYAxis&&!d&&h.multiAxisTickAmount>0&&(f=h.multiAxisTickAmount,d=!0),f=f==="dataPoints"?h.dataPoints-1:Math.abs(Math.round(f)),(t===Number.MIN_VALUE&&e===0||!F.isNumber(t)&&!F.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE)&&(t=F.isNumber(i.min)?i.min:0,e=F.isNumber(i.max)?i.max:t+f,h.allSeriesCollapsed=!1),t>e){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var g=e;e=t,t=g}else t===e&&(t=t===0?0:t-1,e=e===0?2:e+1);var p=[];f<1&&(f=1);var b=f,m=Math.abs(e-t);!n&&t>0&&t/m<.15&&(t=0,n=!0),!o&&e<0&&-e/m<.15&&(e=0,o=!0);var x=(m=Math.abs(e-t))/b,v=x,w=Math.floor(Math.log10(v)),y=Math.pow(10,w),A=Math.ceil(v/y);if(x=v=(A=h.niceScaleAllowedMagMsd[h.yValueDecimal===0?0:1][A])*y,h.isBarHorizontal&&i.stepSize&&i.type!=="datetime"?(x=i.stepSize,u=!0):u&&(x=i.stepSize),u&&i.forceNiceScale){var C=Math.floor(Math.log10(x));x*=Math.pow(10,w-C)}if(n&&o){var M=m/b;if(d)if(u)if(F.mod(m,x)!=0){var O=F.getGCD(x,M);x=M/O<10?O:M}else F.mod(x,M)==0?x=M:(M=x,d=!1);else x=M;else if(u)F.mod(m,x)==0?M=x:x=M;else if(F.mod(m,x)==0)M=x;else{M=m/(b=Math.ceil(m/x));var B=F.getGCD(m,x);m/B<s&&(M=B),x=M}b=Math.round(m/x)}else{if(n||o){if(o)if(d)t=e-x*b;else{var _=t;t=x*Math.floor(t/x),Math.abs(e-t)/F.getGCD(m,x)>s&&(t=e-x*f,t+=x*Math.floor((_-t)/x))}else if(n)if(d)e=t+x*b;else{var z=e;e=x*Math.ceil(e/x),Math.abs(e-t)/F.getGCD(m,x)>s&&(e=t+x*f,e+=x*Math.ceil((z-e)/x))}}else if(h.isMultipleYAxis&&d){var N=x*Math.floor(t/x),E=N+x*b;E<e&&(x*=2),E=e,e=(t=N)+x*b,m=Math.abs(e-t),t>0&&t<Math.abs(E-e)&&(t=0,e=x*b),e<0&&-e<Math.abs(N-t)&&(e=0,t=-x*b)}else t=x*Math.floor(t/x),e=x*Math.ceil(e/x);m=Math.abs(e-t),x=F.getGCD(m,x),b=Math.round(m/x)}if(d||n||o||(b=Math.ceil((m-l)/(x+l)))>16&&F.getPrimeFactors(b).length<2&&b++,!d&&i.forceNiceScale&&h.yValueDecimal===0&&b>m&&(b=m,x=Math.round(m/b)),b>s&&(!d&&!u||i.forceNiceScale)){var I=F.getPrimeFactors(b),S=I.length-1,R=b;t:for(var L=0;L<S;L++)for(var q=0;q<=S-L;q++){for(var T=Math.min(q+L,S),k=R,D=1,X=q;X<=T;X++)D*=I[X];if((k/=D)<s){R=k;break t}}x=R===b?m:m/R,b=Math.round(m/x)}h.isMultipleYAxis&&h.multiAxisTickAmount==0&&h.ignoreYAxisIndexes.indexOf(a)<0&&(h.multiAxisTickAmount=b);var H=t-x,G=x*l;do H+=x,p.push(F.stripNumber(H,7));while(e-H>G);return{result:p,niceMin:p[0],niceMax:p[p.length-1]}}},{key:"linearScale",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,o=Math.abs(e-t),a=[];if(t===e)return{result:a=[t],niceMin:a[0],niceMax:a[a.length-1]};(i=this._adjustTicksForSmallRange(i,s,o))==="dataPoints"&&(i=this.w.globals.dataPoints-1),n||(n=o/i),n=Math.round(10*(n+Number.EPSILON))/10,i===Number.MAX_VALUE&&(i=5,n=1);for(var l=t;i>=0;)a.push(l),l=F.preciseAddition(l,n),i-=1;return{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"logarithmicScaleNice",value:function(t,e,i){e<=0&&(e=Math.max(t,i)),t<=0&&(t=Math.min(e,i));for(var s=[],n=Math.ceil(Math.log(e)/Math.log(i)+1),o=Math.floor(Math.log(t)/Math.log(i));o<n;o++)s.push(Math.pow(i,o));return{result:s,niceMin:s[0],niceMax:s[s.length-1]}}},{key:"logarithmicScale",value:function(t,e,i){e<=0&&(e=Math.max(t,i)),t<=0&&(t=Math.min(e,i));for(var s=[],n=Math.log(e)/Math.log(i),o=Math.log(t)/Math.log(i),a=n-o,l=Math.round(a),c=a/l,h=0,u=o;h<l;h++,u+=c)s.push(Math.pow(i,u));return s.push(Math.pow(i,n)),{result:s,niceMin:t,niceMax:e}}},{key:"_adjustTicksForSmallRange",value:function(t,e,i){var s=t;if(e!==void 0&&this.w.config.yaxis[e].labels.formatter&&this.w.config.yaxis[e].tickAmount===void 0){var n=Number(this.w.config.yaxis[e].labels.formatter(1));F.isNumber(n)&&this.w.globals.yValueDecimal===0&&(s=Math.ceil(i))}return s<t?s:t}},{key:"setYScaleForIndex",value:function(t,e,i){var s=this.w.globals,n=this.w.config,o=s.isBarHorizontal?n.xaxis:n.yaxis[t];s.yAxisScale[t]===void 0&&(s.yAxisScale[t]=[]);var a=Math.abs(i-e);o.logarithmic&&a<=5&&(s.invalidLogScale=!0),o.logarithmic&&a>5?(s.allSeriesCollapsed=!1,s.yAxisScale[t]=o.forceNiceScale?this.logarithmicScaleNice(e,i,o.logBase):this.logarithmicScale(e,i,o.logBase)):i!==-Number.MAX_VALUE&&F.isNumber(i)&&e!==Number.MAX_VALUE&&F.isNumber(e)?(s.allSeriesCollapsed=!1,s.yAxisScale[t]=this.niceScale(e,i,t)):s.yAxisScale[t]=this.niceScale(Number.MIN_VALUE,0,t)}},{key:"setXScale",value:function(t,e){var i=this.w,s=i.globals,n=Math.abs(e-t);if(e!==-Number.MAX_VALUE&&F.isNumber(e)){var o=s.xTickAmount;n<10&&n>1&&(o=n),s.xAxisScale=this.linearScale(t,e,o,0,i.config.xaxis.stepSize)}else s.xAxisScale=this.linearScale(0,10,10);return s.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var t=this,e=this.w.config,i=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var s=i.seriesYAxisMap,n=i.minYArr,o=i.maxYArr;i.allSeriesCollapsed=!0,i.barGroups=[],s.forEach(function(a,l){var c=[];a.forEach(function(h){var u,d=(u=e.series[h])===null||u===void 0?void 0:u.group;c.indexOf(d)<0&&c.push(d)}),a.length>0?function(){var h,u,d=Number.MAX_VALUE,f=-Number.MAX_VALUE,g=d,p=f;if(e.chart.stacked)(function(){var x=new Array(i.dataPoints).fill(0),v=[],w=[],y=[];c.forEach(function(){v.push(x.map(function(){return Number.MIN_VALUE})),w.push(x.map(function(){return Number.MIN_VALUE})),y.push(x.map(function(){return Number.MIN_VALUE}))});for(var A=function(M){!h&&e.series[a[M]].type&&(h=e.series[a[M]].type);var O=a[M];u=e.series[O].group?e.series[O].group:"axis-".concat(l),!(i.collapsedSeriesIndices.indexOf(O)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(O)<0)||(i.allSeriesCollapsed=!1,c.forEach(function(B,_){if(e.series[O].group===B)for(var z=0;z<i.series[O].length;z++){var N=i.series[O][z];N>=0?w[_][z]+=N:y[_][z]+=N,v[_][z]+=N,g=Math.min(g,N),p=Math.max(p,N)}})),h!=="bar"&&h!=="column"||i.barGroups.push(u)},C=0;C<a.length;C++)A(C);h||(h=e.chart.type),h==="bar"||h==="column"?c.forEach(function(M,O){d=Math.min(d,Math.min.apply(null,y[O])),f=Math.max(f,Math.max.apply(null,w[O]))}):(c.forEach(function(M,O){g=Math.min(g,Math.min.apply(null,v[O])),p=Math.max(p,Math.max.apply(null,v[O]))}),d=g,f=p),d===Number.MIN_VALUE&&f===Number.MIN_VALUE&&(f=-Number.MAX_VALUE)})();else for(var b=0;b<a.length;b++){var m=a[b];d=Math.min(d,n[m]),f=Math.max(f,o[m]),!(i.collapsedSeriesIndices.indexOf(m)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(m)<0)||(i.allSeriesCollapsed=!1)}e.yaxis[l].min!==void 0&&(d=typeof e.yaxis[l].min=="function"?e.yaxis[l].min(d):e.yaxis[l].min),e.yaxis[l].max!==void 0&&(f=typeof e.yaxis[l].max=="function"?e.yaxis[l].max(f):e.yaxis[l].max),i.barGroups=i.barGroups.filter(function(x,v,w){return w.indexOf(x)===v}),t.setYScaleForIndex(l,d,f),a.forEach(function(x){n[x]=i.yAxisScale[l].niceMin,o[x]=i.yAxisScale[l].niceMax})}():t.setYScaleForIndex(l,0,-Number.MAX_VALUE)})}}]),r}(),zg=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.scales=new yA(t)}return tt(r,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,n=this.w.config,o=this.w.globals,a=-Number.MAX_VALUE,l=Number.MIN_VALUE;s===null&&(s=t+1);var c=o.series,h=c,u=c;n.chart.type==="candlestick"?(h=o.seriesCandleL,u=o.seriesCandleH):n.chart.type==="boxPlot"?(h=o.seriesCandleO,u=o.seriesCandleC):o.isRangeData&&(h=o.seriesRangeStart,u=o.seriesRangeEnd);var d=!1;if(o.seriesX.length>=s){var f,g=(f=o.brushSource)===null||f===void 0?void 0:f.w.config.chart.brush;(n.chart.zoom.enabled&&n.chart.zoom.autoScaleYaxis||g!=null&&g.enabled&&g!=null&&g.autoScaleYaxis)&&(d=!0)}for(var p=t;p<s;p++){o.dataPoints=Math.max(o.dataPoints,c[p].length);var b=n.series[p].type;o.categoryLabels.length&&(o.dataPoints=o.categoryLabels.filter(function(y){return y!==void 0}).length),o.labels.length&&n.xaxis.type!=="datetime"&&o.series.reduce(function(y,A){return y+A.length},0)!==0&&(o.dataPoints=Math.max(o.dataPoints,o.labels.length));var m=0,x=c[p].length-1;if(d){if(n.xaxis.min)for(;m<x&&o.seriesX[p][m]<n.xaxis.min;m++);if(n.xaxis.max)for(;x>m&&o.seriesX[p][x]>n.xaxis.max;x--);}for(var v=m;v<=x&&v<o.series[p].length;v++){var w=c[p][v];if(w!==null&&F.isNumber(w)){switch(u[p][v]!==void 0&&(a=Math.max(a,u[p][v]),e=Math.min(e,u[p][v])),h[p][v]!==void 0&&(e=Math.min(e,h[p][v]),i=Math.max(i,h[p][v])),b){case"candlestick":o.seriesCandleC[p][v]!==void 0&&(a=Math.max(a,o.seriesCandleH[p][v]),e=Math.min(e,o.seriesCandleL[p][v]));break;case"boxPlot":o.seriesCandleC[p][v]!==void 0&&(a=Math.max(a,o.seriesCandleC[p][v]),e=Math.min(e,o.seriesCandleO[p][v]))}b&&b!=="candlestick"&&b!=="boxPlot"&&b!=="rangeArea"&&b!=="rangeBar"&&(a=Math.max(a,o.series[p][v]),e=Math.min(e,o.series[p][v])),o.seriesGoals[p]&&o.seriesGoals[p][v]&&Array.isArray(o.seriesGoals[p][v])&&o.seriesGoals[p][v].forEach(function(y){a=Math.max(a,y.value),e=Math.min(e,y.value)}),i=a,w=F.noExponents(w),F.isFloat(w)&&(o.yValueDecimal=Math.max(o.yValueDecimal,w.toString().split(".")[1].length)),l>h[p][v]&&h[p][v]<0&&(l=h[p][v])}else o.hasNullValues=!0}b!=="bar"&&b!=="column"||(l<0&&a<0&&(a=0,i=Math.max(i,0)),l===Number.MIN_VALUE&&(l=0,e=Math.min(e,0)))}return n.chart.type==="rangeBar"&&o.seriesRangeStart.length&&o.isBarHorizontal&&(l=e),n.chart.type==="bar"&&(l<0&&a<0&&(a=0),l===Number.MIN_VALUE&&(l=0)),{minY:l,maxY:a,lowestY:e,highestY:i}}},{key:"setYRange",value:function(){var t=this.w.globals,e=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var i,s=Number.MAX_VALUE;if(t.isMultipleYAxis){s=Number.MAX_VALUE;for(var n=0;n<t.series.length;n++)i=this.getMinYMaxY(n),t.minYArr[n]=i.lowestY,t.maxYArr[n]=i.highestY,s=Math.min(s,i.lowestY)}return i=this.getMinYMaxY(0,s,null,t.series.length),e.chart.type==="bar"?(t.minY=i.minY,t.maxY=i.maxY):(t.minY=i.lowestY,t.maxY=i.highestY),s=i.lowestY,e.chart.stacked&&this._setStackedMinMax(),e.chart.type==="line"||e.chart.type==="area"||e.chart.type==="scatter"||e.chart.type==="candlestick"||e.chart.type==="boxPlot"||e.chart.type==="rangeBar"&&!t.isBarHorizontal?t.minY===Number.MIN_VALUE&&s!==-Number.MAX_VALUE&&s!==t.maxY&&(t.minY=s):t.minY=t.minY!==Number.MIN_VALUE?Math.min(i.minY,t.minY):i.minY,e.yaxis.forEach(function(o,a){o.max!==void 0&&(typeof o.max=="number"?t.maxYArr[a]=o.max:typeof o.max=="function"&&(t.maxYArr[a]=o.max(t.isMultipleYAxis?t.maxYArr[a]:t.maxY)),t.maxY=t.maxYArr[a]),o.min!==void 0&&(typeof o.min=="number"?t.minYArr[a]=o.min:typeof o.min=="function"&&(t.minYArr[a]=o.min(t.isMultipleYAxis?t.minYArr[a]===Number.MIN_VALUE?0:t.minYArr[a]:t.minY)),t.minY=t.minYArr[a])}),t.isBarHorizontal&&["min","max"].forEach(function(o){e.xaxis[o]!==void 0&&typeof e.xaxis[o]=="number"&&(o==="min"?t.minY=e.xaxis[o]:t.maxY=e.xaxis[o])}),t.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),t.minY=s):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.minY,t.maxYArr[0]=t.maxY),t.barGroups=[],t.lineGroups=[],t.areaGroups=[],e.series.forEach(function(o){switch(o.type||e.chart.type){case"bar":case"column":t.barGroups.push(o.group);break;case"line":t.lineGroups.push(o.group);break;case"area":t.areaGroups.push(o.group)}}),t.barGroups=t.barGroups.filter(function(o,a,l){return l.indexOf(o)===a}),t.lineGroups=t.lineGroups.filter(function(o,a,l){return l.indexOf(o)===a}),t.areaGroups=t.areaGroups.filter(function(o,a,l){return l.indexOf(o)===a}),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr,yAxisScale:t.yAxisScale}}},{key:"setXRange",value:function(){var t=this.w.globals,e=this.w.config,i=e.xaxis.type==="numeric"||e.xaxis.type==="datetime"||e.xaxis.type==="category"&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var l=0;l<t.series.length;l++)if(t.labels[l])for(var c=0;c<t.labels[l].length;c++)t.labels[l][c]!==null&&F.isNumber(t.labels[l][c])&&(t.maxX=Math.max(t.maxX,t.labels[l][c]),t.initialMaxX=Math.max(t.maxX,t.labels[l][c]),t.minX=Math.min(t.minX,t.labels[l][c]),t.initialMinX=Math.min(t.minX,t.labels[l][c]))}(),t.noLabelsProvided&&e.xaxis.categories.length===0&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var s=10;if(e.xaxis.tickAmount===void 0)s=Math.round(t.svgWidth/150),e.xaxis.type==="numeric"&&t.dataPoints<30&&(s=t.dataPoints-1),s>t.dataPoints&&t.dataPoints!==0&&(s=t.dataPoints-1);else if(e.xaxis.tickAmount==="dataPoints"){if(t.series.length>1&&(s=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric){var n=t.maxX-t.minX;n<30&&(s=n-1)}}else s=e.xaxis.tickAmount;if(t.xTickAmount=s,e.xaxis.max!==void 0&&typeof e.xaxis.max=="number"&&(t.maxX=e.xaxis.max),e.xaxis.min!==void 0&&typeof e.xaxis.min=="number"&&(t.minX=e.xaxis.min),e.xaxis.range!==void 0&&(t.minX=t.maxX-e.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var o=[],a=t.minX-1;a<t.maxX;a++)o.push(a+1);t.xAxisScale={result:o,niceMin:o[0],niceMax:o[o.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(0,s,s,0,e.xaxis.stepSize),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,s-1,0,e.xaxis.stepSize),t.seriesX=t.labels.slice());i&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ){for(var e=0;e<t.series.length;e++)if(t.seriesZ[e]!==void 0)for(var i=0;i<t.seriesZ[e].length;i++)t.seriesZ[e][i]!==null&&F.isNumber(t.seriesZ[e][i])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][i]),t.minZ=Math.min(t.minZ,t.seriesZ[e][i]))}}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,e=this.w.config;if(t.minX===t.maxX){var i=new fe(this.ctx);if(e.xaxis.type==="datetime"){var s=i.getDate(t.minX);e.xaxis.labels.datetimeUTC?s.setUTCDate(s.getUTCDate()-2):s.setDate(s.getDate()-2),t.minX=new Date(s).getTime();var n=i.getDate(t.maxX);e.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()+2):n.setDate(n.getDate()+2),t.maxX=new Date(n).getTime()}else(e.xaxis.type==="numeric"||e.xaxis.type==="category"&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach(function(e,i){if(e.length){e.length===1&&e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var s=e.slice();s.sort(function(n,o){return n-o}),s.forEach(function(n,o){if(o>0){var a=n-s[o-1];a>0&&(t.minXDiff=Math.min(a,t.minXDiff))}}),t.dataPoints!==1&&t.minXDiff!==Number.MAX_VALUE||(t.minXDiff=.5)}})}},{key:"_setStackedMinMax",value:function(){var t=this,e=this.w.globals;if(e.series.length){var i=e.seriesGroups;i.length||(i=[this.w.globals.seriesNames.map(function(o){return o})]);var s={},n={};i.forEach(function(o){s[o]=[],n[o]=[],t.w.config.series.map(function(a,l){return o.indexOf(e.seriesNames[l])>-1?l:null}).filter(function(a){return a!==null}).forEach(function(a){for(var l=0;l<e.series[e.maxValsInArrayIndex].length;l++){var c,h,u,d;s[o][l]===void 0&&(s[o][l]=0,n[o][l]=0),(t.w.config.chart.stacked&&!e.comboCharts||t.w.config.chart.stacked&&e.comboCharts&&(!t.w.config.chart.stackOnlyBar||((c=t.w.config.series)===null||c===void 0||(h=c[a])===null||h===void 0?void 0:h.type)==="bar"||((u=t.w.config.series)===null||u===void 0||(d=u[a])===null||d===void 0?void 0:d.type)==="column"))&&e.series[a][l]!==null&&F.isNumber(e.series[a][l])&&(e.series[a][l]>0?s[o][l]+=parseFloat(e.series[a][l])+1e-4:n[o][l]+=parseFloat(e.series[a][l]))}})}),Object.entries(s).forEach(function(o){var a=X1(o,1)[0];s[a].forEach(function(l,c){e.maxY=Math.max(e.maxY,s[a][c]),e.minY=Math.min(e.minY,n[a][c])})})}}}]),r}(),sm=function(){function r(t,e){Q(this,r),this.ctx=t,this.elgrid=e,this.w=t.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=i.config.xaxis.position==="bottom"?i.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new ss(t)}return tt(r,[{key:"drawYaxis",value:function(t){var e=this.w,i=new U(this.ctx),s=e.config.yaxis[t].labels.style,n=s.fontSize,o=s.fontFamily,a=s.fontWeight,l=i.group({class:"apexcharts-yaxis",rel:t,transform:"translate(".concat(e.globals.translateYAxisX[t],", 0)")});if(this.axesUtils.isYAxisHidden(t))return l;var c=i.group({class:"apexcharts-yaxis-texts-g"});l.add(c);var h=e.globals.yAxisScale[t].result.length-1,u=e.globals.gridHeight/h,d=e.globals.yLabelFormatters[t],f=this.axesUtils.checkForReversedLabels(t,e.globals.yAxisScale[t].result.slice());if(e.config.yaxis[t].labels.show){var g=e.globals.translateY+e.config.yaxis[t].labels.offsetY;e.globals.isBarHorizontal?g=0:e.config.chart.type==="heatmap"&&(g-=u/2),g+=parseInt(n,10)/3;for(var p=h;p>=0;p--){var b=d(f[p],p,e),m=e.config.yaxis[t].labels.padding;e.config.yaxis[t].opposite&&e.config.yaxis.length!==0&&(m*=-1);var x=this.getTextAnchor(e.config.yaxis[t].labels.align,e.config.yaxis[t].opposite),v=this.axesUtils.getYAxisForeColor(s.colors,t),w=Array.isArray(v)?v[p]:v,y=F.listToArray(e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-label tspan"))).map(function(C){return C.textContent}),A=i.drawText({x:m,y:g,text:y.includes(b)&&!e.config.yaxis[t].labels.showDuplicates?"":b,textAnchor:x,fontSize:n,fontFamily:o,fontWeight:a,maxWidth:e.config.yaxis[t].labels.maxWidth,foreColor:w,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(s.cssClass)});c.add(A),this.addTooltip(A,b),e.config.yaxis[t].labels.rotate!==0&&this.rotateLabel(i,A,firstLabel,e.config.yaxis[t].labels.rotate),g+=u}}return this.addYAxisTitle(i,l,t),this.addAxisBorder(i,l,t,h,u),l}},{key:"getTextAnchor",value:function(t,e){return t==="left"?"start":t==="center"?"middle":t==="right"?"end":e?"start":"end"}},{key:"addTooltip",value:function(t,e){var i=document.createElementNS(this.w.globals.SVGNS,"title");i.textContent=Array.isArray(e)?e.join(" "):e,t.node.appendChild(i)}},{key:"rotateLabel",value:function(t,e,i,s){var n=t.rotateAroundCenter(i.node),o=t.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(".concat(s," ").concat(n.x," ").concat(o.y,")"))}},{key:"addYAxisTitle",value:function(t,e,i){var s=this.w;if(s.config.yaxis[i].title.text!==void 0){var n=t.group({class:"apexcharts-yaxis-title"}),o=s.config.yaxis[i].opposite?s.globals.translateYAxisX[i]:0,a=t.drawText({x:o,y:s.globals.gridHeight/2+s.globals.translateY+s.config.yaxis[i].title.offsetY,text:s.config.yaxis[i].title.text,textAnchor:"end",foreColor:s.config.yaxis[i].title.style.color,fontSize:s.config.yaxis[i].title.style.fontSize,fontWeight:s.config.yaxis[i].title.style.fontWeight,fontFamily:s.config.yaxis[i].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(s.config.yaxis[i].title.style.cssClass)});n.add(a),e.add(n)}}},{key:"addAxisBorder",value:function(t,e,i,s,n){var o=this.w,a=o.config.yaxis[i].axisBorder,l=31+a.offsetX;if(o.config.yaxis[i].opposite&&(l=-31-a.offsetX),a.show){var c=t.drawLine(l,o.globals.translateY+a.offsetY-2,l,o.globals.gridHeight+o.globals.translateY+a.offsetY+2,a.color,0,a.width);e.add(c)}o.config.yaxis[i].axisTicks.show&&this.axesUtils.drawYAxisTicks(l,s,a,o.config.yaxis[i].axisTicks,i,n,e)}},{key:"drawYaxisInversed",value:function(t){var e=this.w,i=new U(this.ctx),s=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),n=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});s.add(n);var o=e.globals.yAxisScale[t].result.length-1,a=e.globals.gridWidth/o+.1,l=a+e.config.xaxis.labels.offsetX,c=e.globals.xLabelFormatter,h=this.axesUtils.checkForReversedLabels(t,e.globals.yAxisScale[t].result.slice()),u=e.globals.timescaleLabels;if(u.length>0&&(this.xaxisLabels=u.slice(),o=(h=u.slice()).length),e.config.xaxis.labels.show)for(var d=u.length?0:o;u.length?d<u.length:d>=0;u.length?d++:d--){var f=c(h[d],d,e),g=e.globals.gridWidth+e.globals.padHorizontal-(l-a+e.config.xaxis.labels.offsetX);if(u.length){var p=this.axesUtils.getLabel(h,u,g,d,this.drawnLabels,this.xaxisFontSize);g=p.x,f=p.text,this.drawnLabels.push(p.text),d===0&&e.globals.skipFirstTimelinelabel&&(f=""),d===h.length-1&&e.globals.skipLastTimelinelabel&&(f="")}var b=i.drawText({x:g,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-(e.config.xaxis.position==="top"?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:f,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(e.config.xaxis.labels.style.cssClass)});n.add(b),b.tspan(f),this.addTooltip(b,f),l+=a}return this.inversedYAxisTitleText(s),this.inversedYAxisBorder(s),s}},{key:"inversedYAxisBorder",value:function(t){var e=this.w,i=new U(this.ctx),s=e.config.xaxis.axisBorder;if(s.show){var n=0;e.config.chart.type==="bar"&&e.globals.isXNumeric&&(n-=15);var o=i.drawLine(e.globals.padHorizontal+n+s.offsetX,this.xAxisoffX,e.globals.gridWidth,this.xAxisoffX,s.color,0,s.height);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(o):t.add(o)}}},{key:"inversedYAxisTitleText",value:function(t){var e=this.w,i=new U(this.ctx);if(e.config.xaxis.title.text!==void 0){var s=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),n=i.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(e.config.xaxis.title.style.fontSize)+e.config.xaxis.title.offsetY+20,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(e.config.xaxis.title.style.cssClass)});s.add(n),t.add(s)}}},{key:"yAxisTitleRotate",value:function(t,e){var i=this.w,s=new U(this.ctx),n=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g")),o=n?n.getBoundingClientRect():{width:0,height:0},a=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text")),l=a?a.getBoundingClientRect():{width:0,height:0};if(a){var c=this.xPaddingForYAxisTitle(t,o,l,e);a.setAttribute("x",c.xPos-(e?10:0));var h=s.rotateAroundCenter(a);a.setAttribute("transform","rotate(".concat(e?-1*i.config.yaxis[t].title.rotate:i.config.yaxis[t].title.rotate," ").concat(h.x," ").concat(h.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,e,i,s){var n=this.w,o=0,a=10;return n.config.yaxis[t].title.text===void 0||t<0?{xPos:o,padd:0}:(s?o=e.width+n.config.yaxis[t].title.offsetX+i.width/2+a/2:(o=-1*e.width+n.config.yaxis[t].title.offsetX+a/2+i.width/2,n.globals.isBarHorizontal&&(a=25,o=-1*e.width-n.config.yaxis[t].title.offsetX-a)),{xPos:o,padd:a})}},{key:"setYAxisXPosition",value:function(t,e){var i=this.w,s=0,n=0,o=18,a=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.forEach(function(l,c){var h=i.globals.ignoreYAxisIndexes.includes(c)||!l.show||l.floating||t[c].width===0,u=t[c].width+e[c].width;l.opposite?i.globals.isBarHorizontal?(n=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[c]=n-l.labels.offsetX):(n=i.globals.gridWidth+i.globals.translateX+a,h||(a+=u+20),i.globals.translateYAxisX[c]=n-l.labels.offsetX+20):(s=i.globals.translateX-o,h||(o+=u+20),i.globals.translateYAxisX[c]=s+l.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var t=this.w;F.listToArray(t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach(function(e,i){var s=t.config.yaxis[i];if(s&&!s.floating&&s.labels.align!==void 0){var n=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),o=F.listToArray(t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"))),a=n.getBoundingClientRect();o.forEach(function(l){l.setAttribute("text-anchor",s.labels.align)}),s.labels.align!=="left"||s.opposite?s.labels.align==="center"?n.setAttribute("transform","translate(".concat(a.width/2*(s.opposite?1:-1),", 0)")):s.labels.align==="right"&&s.opposite&&n.setAttribute("transform","translate(".concat(a.width,", 0)")):n.setAttribute("transform","translate(-".concat(a.width,", 0)"))}})}}]),r}(),FD=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.documentEvent=F.bind(this.documentEvent,this)}return tt(r,[{key:"addEventListener",value:function(t,e){var i=this.w;i.globals.events.hasOwnProperty(t)?i.globals.events[t].push(e):i.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){var s=i.globals.events[t].indexOf(e);s!==-1&&i.globals.events[t].splice(s,1)}}},{key:"fireEvent",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var s=i.globals.events[t],n=s.length,o=0;o<n;o++)s[o].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var t=this,e=this.w,i=this.ctx,s=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach(function(n){s.addEventListener(n,function(o){var a=Object.assign({},e,{seriesIndex:e.globals.axisCharts?e.globals.capturedSeriesIndex:0,dataPointIndex:e.globals.capturedDataPointIndex});o.type==="mousemove"||o.type==="touchmove"?typeof e.config.chart.events.mouseMove=="function"&&e.config.chart.events.mouseMove(o,i,a):o.type==="mouseleave"||o.type==="touchleave"?typeof e.config.chart.events.mouseLeave=="function"&&e.config.chart.events.mouseLeave(o,i,a):(o.type==="mouseup"&&o.which===1||o.type==="touchend")&&(typeof e.config.chart.events.click=="function"&&e.config.chart.events.click(o,i,a),i.ctx.events.fireEvent("click",[o,i,a]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(n){e.globals.dom.baseEl.addEventListener(n,t.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e=this.w,i=t.target.className;if(t.type==="click"){var s=e.globals.dom.baseEl.querySelector(".apexcharts-menu");s&&s.classList.contains("apexcharts-menu-open")&&i!=="apexcharts-menu-icon"&&s.classList.remove("apexcharts-menu-open")}e.globals.clientX=t.type==="touchmove"?t.touches[0].clientX:t.clientX,e.globals.clientY=t.type==="touchmove"?t.touches[0].clientY:t.clientY}}]),r}(),BD=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"setCurrentLocaleValues",value:function(t){var e=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(e=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=e.filter(function(n){return n.name===t})[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var s=F.extend(mA,i);this.w.globals.locale=s.options}}]),r}(),_D=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"drawAxis",value:function(t,e){var i,s,n=this,o=this.w.globals,a=this.w.config,l=new Ba(this.ctx,e),c=new sm(this.ctx,e);o.axisCharts&&t!=="radar"&&(o.isBarHorizontal?(s=c.drawYaxisInversed(0),i=l.drawXaxisInversed(0),o.dom.elGraphical.add(i),o.dom.elGraphical.add(s)):(i=l.drawXaxis(),o.dom.elGraphical.add(i),a.yaxis.map(function(h,u){if(o.ignoreYAxisIndexes.indexOf(u)===-1&&(s=c.drawYaxis(u),o.dom.Paper.add(s),n.w.config.grid.position==="back")){var d=o.dom.Paper.children()[1];d.remove(),o.dom.Paper.add(d)}})))}}]),r}(),Hg=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new U(this.ctx),i=new pe(this.ctx),s=t.config.xaxis.crosshairs.fill.gradient,n=t.config.xaxis.crosshairs.dropShadow,o=t.config.xaxis.crosshairs.fill.type,a=s.colorFrom,l=s.colorTo,c=s.opacityFrom,h=s.opacityTo,u=s.stops,d=n.enabled,f=n.left,g=n.top,p=n.blur,b=n.color,m=n.opacity,x=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){o==="gradient"&&(x=e.drawGradient("vertical",a,l,c,h,null,u,null));var v=e.drawRect();t.config.xaxis.crosshairs.width===1&&(v=e.drawLine());var w=t.globals.gridHeight;(!F.isNumber(w)||w<0)&&(w=0);var y=t.config.xaxis.crosshairs.width;(!F.isNumber(y)||y<0)&&(y=0),v.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:w,width:y,height:w,fill:x,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),d&&(v=i.dropShadow(v,{left:f,top:g,blur:p,color:b,opacity:m})),t.globals.dom.elGraphical.add(v)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,e=new U(this.ctx),i=t.config.yaxis[0].crosshairs,s=t.globals.barPadForNumericAxis;if(t.config.yaxis[0].crosshairs.show){var n=e.drawLine(-s,0,t.globals.gridWidth+s,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);n.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(n)}var o=e.drawLine(-s,0,t.globals.gridWidth+s,0,i.stroke.color,0,0);o.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(o)}}]),r}(),zD=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"checkResponsiveConfig",value:function(t){var e=this,i=this.w,s=i.config;if(s.responsive.length!==0){var n=s.responsive.slice();n.sort(function(c,h){return c.breakpoint>h.breakpoint?1:h.breakpoint>c.breakpoint?-1:0}).reverse();var o=new Fa({}),a=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=n[0].breakpoint,u=window.innerWidth>0?window.innerWidth:screen.width;if(u>h){var d=F.clone(i.globals.initialConfig);d.series=F.clone(i.config.series);var f=Yt.extendArrayProps(o,d,i);c=F.extend(f,c),c=F.extend(i.config,c),e.overrideResponsiveOptions(c)}else for(var g=0;g<n.length;g++)u<n[g].breakpoint&&(c=Yt.extendArrayProps(o,n[g].options,i),c=F.extend(i.config,c),e.overrideResponsiveOptions(c))};if(t){var l=Yt.extendArrayProps(o,t,i);l=F.extend(i.config,l),a(l=F.extend(l,t))}else a({})}}},{key:"overrideResponsiveOptions",value:function(t){var e=new Fa(t).init({responsiveOverride:!0});this.w.config=e}}]),r}(),HD=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return tt(r,[{key:"checkHeatmapDistributed",value:function(){var t=this.w.config,e=t.chart,i=t.plotOptions;return e.type==="treemap"&&i.treemap&&i.treemap.distributed||e.type==="heatmap"&&i.heatmap&&i.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var t=this.w.config,e=t.chart,i=t.plotOptions;return i.bar&&i.bar.distributed&&(e.type==="bar"||e.type==="rangeBar")}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t=this.w,e=new F;t.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(t.config.theme.mode));var i=se(t.config.colors||t.config.fill.colors||[]);t.globals.colors=this.getColors(i),this.applySeriesColors(t.globals.seriesColors,t.globals.colors),t.config.theme.monochrome.enabled&&(t.globals.colors=this.getMonochromeColors(t.config.theme.monochrome,t.globals.series,e));var s=t.globals.colors.slice();this.pushExtraColors(t.globals.colors),this.applyColorTypes(["fill","stroke"],s),this.applyDataLabelsColors(s),this.applyRadarPolygonsColors(),this.applyMarkersColors(s)}},{key:"getColors",value:function(t){var e=this,i=this.w;return t&&t.length!==0?Array.isArray(t)&&t.length>0&&typeof t[0]=="function"?(this.isColorFn=!0,i.config.series.map(function(s,n){var o=t[n]||t[0];return typeof o=="function"?o({value:i.globals.axisCharts?i.globals.series[n][0]||0:i.globals.series[n],seriesIndex:n,dataPointIndex:n,w:e.w}):o})):t:this.predefined()}},{key:"applySeriesColors",value:function(t,e){t.forEach(function(i,s){i&&(e[s]=i)})}},{key:"getMonochromeColors",value:function(t,e,i){var s=t.color,n=t.shadeIntensity,o=t.shadeTo,a=this.isBarDistributed||this.isHeatmapDistributed?e[0].length*e.length:e.length,l=1/(a/n),c=0;return Array.from({length:a},function(){var h=o==="dark"?i.shadeColor(-1*c,s):i.shadeColor(c,s);return c+=l,h})}},{key:"applyColorTypes",value:function(t,e){var i=this,s=this.w;t.forEach(function(n){s.globals[n].colors=s.config[n].colors===void 0?i.isColorFn?s.config.colors:e:s.config[n].colors.slice(),i.pushExtraColors(s.globals[n].colors)})}},{key:"applyDataLabelsColors",value:function(t){var e=this.w;e.globals.dataLabels.style.colors=e.config.dataLabels.style.colors===void 0?t:e.config.dataLabels.style.colors.slice(),this.pushExtraColors(e.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var t=this.w;t.globals.radarPolygons.fill.colors=t.config.plotOptions.radar.polygons.fill.colors===void 0?[t.config.theme.mode==="dark"?"#424242":"none"]:t.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(t.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(t){var e=this.w;e.globals.markers.colors=e.config.markers.colors===void 0?t:e.config.markers.colors.slice(),this.pushExtraColors(e.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=this.w,n=e||s.globals.series.length;if(i===null&&(i=this.isBarDistributed||this.isHeatmapDistributed||s.config.chart.type==="heatmap"&&s.config.plotOptions.heatmap&&s.config.plotOptions.heatmap.colorScale.inverse),i&&s.globals.series.length&&(n=s.globals.series[s.globals.maxValsInArrayIndex].length*s.globals.series.length),t.length<n)for(var o=n-t.length,a=0;a<o;a++)t.push(t[a])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode,i=e==="dark"?"palette4":e==="light"?"palette1":t.theme.palette||"palette1",s=e==="dark"?"#f6f7f8":e==="light"?"#373d3f":t.chart.foreColor||"#373d3f";return t.tooltip.theme=e||"light",t.chart.foreColor=s,t.theme.palette=i,t}},{key:"predefined",value:function(){var t={palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"],palette3:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"],palette4:["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"],palette5:["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"],default:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]};return t[this.w.config.theme.palette]||t.default}}]),r}(),WD=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,i=t==="title"?e.config.title:e.config.subtitle,s=e.globals.svgWidth/2,n=i.offsetY,o="middle";if(i.align==="left"?(s=10,o="start"):i.align==="right"&&(s=e.globals.svgWidth-10,o="end"),s+=i.offsetX,n=n+parseInt(i.style.fontSize,10)+i.margin/2,i.text!==void 0){var a=new U(this.ctx).drawText({x:s,y:n,text:i.text,textAnchor:o,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});a.node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(a)}}}]),r}(),jD=function(){function r(t){Q(this,r),this.w=t.w,this.dCtx=t}return tt(r,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,i=0,s=0,n=t==="title"?e.config.title.floating:e.config.subtitle.floating,o=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(o!==null&&!n){var a=o.getBoundingClientRect();i=a.width,s=e.globals.axisCharts?a.height+5:a.height}return{width:i,height:s}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.elLegendWrap;t.config.legend.height||t.config.legend.position!=="top"&&t.config.legend.position!=="bottom"||(e.style.maxHeight=t.globals.svgHeight/2+"px");var i=Object.assign({},F.getBoundingClientRect(e));return e!==null&&!t.config.legend.floating&&t.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:i.height===0?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},t.config.legend.position!=="left"&&t.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var t=this,e=this.w,i=[];e.config.series.forEach(function(l,c){l.data.forEach(function(h,u){var d;d=e.globals.series[c][u],s=e.config.dataLabels.formatter(d,{ctx:t.dCtx.ctx,seriesIndex:c,dataPointIndex:u,w:e}),i.push(s)})});var s=F.getLargestStringFromArr(i),n=new U(this.dCtx.ctx),o=e.config.dataLabels.style,a=n.getTextRects(s,parseInt(o.fontSize),o.fontFamily);return{width:1.05*a.width,height:a.height}}},{key:"getLargestStringFromMultiArr",value:function(t,e){var i=t;if(this.w.globals.isMultiLineX){var s=e.map(function(o,a){return Array.isArray(o)?o.length:1}),n=Math.max.apply(Math,se(s));i=e[s.indexOf(n)]}return i}}]),r}(),XD=function(){function r(t){Q(this,r),this.w=t.w,this.dCtx=t}return tt(r,[{key:"getxAxisLabelsCoords",value:function(){var t,e=this.w,i=e.globals.labels.slice();if(e.config.xaxis.convertedCatToNumeric&&i.length===0&&(i=e.globals.categoryLabels),e.globals.timescaleLabels.length>0){var s=this.getxAxisTimeScaleLabelsCoords();t={width:s.width,height:s.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=e.config.legend.position!=="left"&&e.config.legend.position!=="right"||e.config.legend.floating?0:this.dCtx.lgRect.width;var n=e.globals.xLabelFormatter,o=F.getLargestStringFromArr(i),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,i);e.globals.isBarHorizontal&&(a=o=e.globals.yAxisScale[0].result.reduce(function(g,p){return g.length>p.length?g:p},0));var l=new Wa(this.dCtx.ctx),c=o;o=l.xLabelFormat(n,o,c,{i:void 0,dateFormatter:new fe(this.dCtx.ctx).formatDate,w:e}),a=l.xLabelFormat(n,a,c,{i:void 0,dateFormatter:new fe(this.dCtx.ctx).formatDate,w:e}),(e.config.xaxis.convertedCatToNumeric&&o===void 0||String(o).trim()==="")&&(a=o="1");var h=new U(this.dCtx.ctx),u=h.getTextRects(o,e.config.xaxis.labels.style.fontSize),d=u;if(o!==a&&(d=h.getTextRects(a,e.config.xaxis.labels.style.fontSize)),(t={width:u.width>=d.width?u.width:d.width,height:u.height>=d.height?u.height:d.height}).width*i.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&e.config.xaxis.labels.rotate!==0||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;var f=function(g){return h.getTextRects(g,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,"rotate(".concat(e.config.xaxis.labels.rotate," 0 0)"),!1)};u=f(o),o!==a&&(d=f(a)),t.height=(u.height>d.height?u.height:d.height)/1.5,t.width=u.width>d.width?u.width:d.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var t,e=this.w;if(!e.globals.hasXaxisGroups)return{width:0,height:0};var i,s=((t=e.config.xaxis.group.style)===null||t===void 0?void 0:t.fontSize)||e.config.xaxis.labels.style.fontSize,n=e.globals.groups.map(function(u){return u.title}),o=F.getLargestStringFromArr(n),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,n),l=new U(this.dCtx.ctx),c=l.getTextRects(o,s),h=c;return o!==a&&(h=l.getTextRects(a,s)),i={width:c.width>=h.width?c.width:h.width,height:c.height>=h.height?c.height:h.height},e.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,i=0;if(t.config.xaxis.title.text!==void 0){var s=new U(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);e=s.width,i=s.height}return{width:e,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,e=this.w;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map(function(n){return n.value}),s=i.reduce(function(n,o){return n===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):n.length>o.length?n:o},0);return 1.05*(t=new U(this.dCtx.ctx).getTextRects(s,e.config.xaxis.labels.style.fontSize)).width*i.length>e.globals.gridWidth&&e.config.xaxis.labels.rotate!==0&&(e.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var e=this,i=this.w,s=i.globals,n=i.config,o=n.xaxis.type,a=t.width;s.skipLastTimelinelabel=!1,s.skipFirstTimelinelabel=!1;var l=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,c=function(h,u){n.yaxis.length>1&&function(d){return s.collapsedSeriesIndices.indexOf(d)!==-1}(u)||function(d){if(e.dCtx.timescaleLabels&&e.dCtx.timescaleLabels.length){var f=e.dCtx.timescaleLabels[0],g=e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length-1].position+a/1.75-e.dCtx.yAxisWidthRight,p=f.position-a/1.75+e.dCtx.yAxisWidthLeft,b=i.config.legend.position==="right"&&e.dCtx.lgRect.width>0?e.dCtx.lgRect.width:0;g>s.svgWidth-s.translateX-b&&(s.skipLastTimelinelabel=!0),p<-(d.show&&!d.floating||n.chart.type!=="bar"&&n.chart.type!=="candlestick"&&n.chart.type!=="rangeBar"&&n.chart.type!=="boxPlot"?10:a/1.75)&&(s.skipFirstTimelinelabel=!0)}else o==="datetime"?e.dCtx.gridPad.right<a&&!s.rotateXLabels&&(s.skipLastTimelinelabel=!0):o!=="datetime"&&e.dCtx.gridPad.right<a/2-e.dCtx.yAxisWidthRight&&!s.rotateXLabels&&!i.config.xaxis.labels.trim&&(e.dCtx.xPadRight=a/2+1)}(h)};n.yaxis.forEach(function(h,u){l?(e.dCtx.gridPad.left<a&&(e.dCtx.xPadLeft=a/2+1),e.dCtx.xPadRight=a/2+1):c(h,u)})}}]),r}(),YD=function(){function r(t){Q(this,r),this.w=t.w,this.dCtx=t}return tt(r,[{key:"getyAxisLabelsCoords",value:function(){var t=this,e=this.w,i=[],s=10,n=new ss(this.dCtx.ctx);return e.config.yaxis.map(function(o,a){var l={seriesIndex:a,dataPointIndex:-1,w:e},c=e.globals.yAxisScale[a],h=0;if(!n.isYAxisHidden(a)&&o.labels.show&&o.labels.minWidth!==void 0&&(h=o.labels.minWidth),!n.isYAxisHidden(a)&&o.labels.show&&c.result.length){var u=e.globals.yLabelFormatters[a],d=c.niceMin===Number.MIN_VALUE?0:c.niceMin,f=c.result.reduce(function(w,y){var A,C;return((A=String(u(w,l)))===null||A===void 0?void 0:A.length)>((C=String(u(y,l)))===null||C===void 0?void 0:C.length)?w:y},d),g=f=u(f,l);if(f!==void 0&&f.length!==0||(f=c.niceMax),e.globals.isBarHorizontal){s=0;var p=e.globals.labels.slice();f=F.getLargestStringFromArr(p),f=u(f,{seriesIndex:a,dataPointIndex:-1,w:e}),g=t.dCtx.dimHelpers.getLargestStringFromMultiArr(f,p)}var b=new U(t.dCtx.ctx),m="rotate(".concat(o.labels.rotate," 0 0)"),x=b.getTextRects(f,o.labels.style.fontSize,o.labels.style.fontFamily,m,!1),v=x;f!==g&&(v=b.getTextRects(g,o.labels.style.fontSize,o.labels.style.fontFamily,m,!1)),i.push({width:(h>v.width||h>x.width?h:v.width>x.width?v.width:x.width)+s,height:v.height>x.height?v.height:x.height})}else i.push({width:0,height:0})}),i}},{key:"getyAxisTitleCoords",value:function(){var t=this,e=this.w,i=[];return e.config.yaxis.map(function(s,n){if(s.show&&s.title.text!==void 0){var o=new U(t.dCtx.ctx),a="rotate(".concat(s.title.rotate," 0 0)"),l=o.getTextRects(s.title.text,s.title.style.fontSize,s.title.style.fontFamily,a,!1);i.push({width:l.width,height:l.height})}else i.push({width:0,height:0})}),i}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,e=0,i=0,s=0,n=t.globals.yAxisScale.length>1?10:0,o=new ss(this.dCtx.ctx),a=function(l,c){var h=t.config.yaxis[c].floating,u=0;l.width>0&&!h?(u=l.width+n,function(d){return t.globals.ignoreYAxisIndexes.indexOf(d)>-1}(c)&&(u=u-l.width-n)):u=h||o.isYAxisHidden(c)?0:5,t.config.yaxis[c].opposite?s+=u:i+=u,e+=u};return t.globals.yLabelsCoords.map(function(l,c){a(l,c)}),t.globals.yTitleCoords.map(function(l,c){a(l,c)}),t.globals.isBarHorizontal&&!t.config.yaxis[0].floating&&(e=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=s,e}}]),r}(),VD=function(){function r(t){Q(this,r),this.w=t.w,this.dCtx=t}return tt(r,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w,i=e.config,s=e.globals;if(s.noData||s.collapsedSeries.length+s.ancillaryCollapsedSeries.length===i.series.length)return 0;var n=function(f){return["bar","rangeBar","candlestick","boxPlot"].includes(f)},o=i.chart.type,a=0,l=n(o)?i.series.length:1;s.comboBarCount>0&&(l=s.comboBarCount),s.collapsedSeries.forEach(function(f){n(f.type)&&(l-=1)}),i.chart.stacked&&(l=1);var c=n(o)||s.comboBarCount>0,h=Math.abs(s.initialMaxX-s.initialMinX);if(c&&s.isXNumeric&&!s.isBarHorizontal&&l>0&&h!==0){h<=3&&(h=s.dataPoints);var u=h/t,d=s.minXDiff&&s.minXDiff/u>0?s.minXDiff/u:0;d>t/2&&(d/=2),(a=d*parseInt(i.plotOptions.bar.columnWidth,10)/100)<1&&(a=1),s.barPadForNumericAxis=a}return a}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,e=this.w,i=e.globals,s=this.dCtx.isSparkline||!i.axisCharts?0:10;["title","subtitle"].forEach(function(a){e.config[a].text!==void 0?s+=e.config[a].margin:s+=t.dCtx.isSparkline||!i.axisCharts?0:5}),!e.config.legend.show||e.config.legend.position!=="bottom"||e.config.legend.floating||i.axisCharts||(s+=10);var n=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),o=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight-=n.height+o.height+s,i.translateY+=n.height+o.height+s}},{key:"setGridXPosForDualYAxis",value:function(t,e){var i=this.w,s=new ss(this.dCtx.ctx);i.config.yaxis.forEach(function(n,o){i.globals.ignoreYAxisIndexes.indexOf(o)!==-1||n.floating||s.isYAxisHidden(o)||(n.opposite&&(i.globals.translateX-=e[o].width+t[o].width+parseInt(n.labels.style.fontSize,10)/1.2+12),i.globals.translateX<2&&(i.globals.translateX=2))})}}]),r}(),jh=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new jD(this),this.dimYAxis=new YD(this),this.dimXAxis=new XD(this),this.dimGrid=new VD(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return tt(r,[{key:"plotCoords",value:function(){var t=this,e=this.w,i=e.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var s=Array.isArray(e.config.stroke.width)?Math.max.apply(Math,se(e.config.stroke.width)):e.config.stroke.width;this.isSparkline&&((e.config.markers.discrete.length>0||e.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(o){var a=X1(o,2),l=a[0],c=a[1];t.gridPad[l]=Math.max(c,t.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(s/2,this.gridPad.top),this.gridPad.bottom=Math.max(s/2,this.gridPad.bottom)),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var n=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*n,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(n>0?n:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,e=this.w,i=e.globals,s=this.dimYAxis.getyAxisLabelsCoords(),n=this.dimYAxis.getyAxisTitleCoords();i.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map(function(f,g){e.globals.yLabelsCoords.push({width:s[g].width,index:g}),e.globals.yTitleCoords.push({width:n[g].width,index:g})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var o=this.dimXAxis.getxAxisLabelsCoords(),a=this.dimXAxis.getxAxisGroupLabelsCoords(),l=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(o,l,a),i.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+e.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+e.config.xaxis.labels.offsetX;var c=this.yAxisWidth,h=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-l.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-o.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var u=10;(e.config.chart.type==="radar"||this.isSparkline)&&(c=0,h=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||e.config.chart.type==="treemap")&&(c=0,h=0,u=0),this.isSparkline||e.config.chart.type==="treemap"||this.dimXAxis.additionalPaddingXLabels(o);var d=function(){i.translateX=c+t.datalabelsCoords.width,i.gridHeight=i.svgHeight-t.lgRect.height-h-(t.isSparkline||e.config.chart.type==="treemap"?0:e.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-c-2*t.datalabelsCoords.width};switch(e.config.xaxis.position==="top"&&(u=i.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":i.translateY=u,d();break;case"top":i.translateY=this.lgRect.height+u,d();break;case"left":i.translateY=u,i.translateX=this.lgRect.width+c+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-h-12,i.gridWidth=i.svgWidth-this.lgRect.width-c-2*this.datalabelsCoords.width;break;case"right":i.translateY=u,i.translateX=c+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-h-12,i.gridWidth=i.svgWidth-this.lgRect.width-c-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(n,s),new sm(this.ctx).setYAxisXPosition(s,n)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=t.config,s=0;t.config.legend.show&&!t.config.legend.floating&&(s=20);var n=i.chart.type==="pie"||i.chart.type==="polarArea"||i.chart.type==="donut"?"pie":"radialBar",o=i.plotOptions[n].offsetY,a=i.plotOptions[n].offsetX;if(!i.legend.show||i.legend.floating){e.gridHeight=e.svgHeight;var l=e.dom.elWrap.getBoundingClientRect().width;return e.gridWidth=Math.min(l,e.gridHeight),e.translateY=o,void(e.translateX=a+(e.svgWidth-e.gridWidth)/2)}switch(i.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height,e.gridWidth=e.svgWidth,e.translateY=o-10,e.translateX=a+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height,e.gridWidth=e.svgWidth,e.translateY=this.lgRect.height+o+10,e.translateX=a+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-s,e.gridHeight=i.chart.height!=="auto"?e.svgHeight:e.gridWidth,e.translateY=o,e.translateX=a+this.lgRect.width+s;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-s-5,e.gridHeight=i.chart.height!=="auto"?e.svgHeight:e.gridWidth,e.translateY=o,e.translateX=a+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e,i){var s=this.w,n=s.globals.hasXaxisGroups?2:1,o=i.height+t.height+e.height,a=s.globals.isMultiLineX?1.2:s.globals.LINE_HEIGHT_RATIO,l=s.globals.rotateXLabels?22:10,c=s.globals.rotateXLabels&&s.config.legend.position==="bottom"?10:0;this.xAxisHeight=o*a+n*l+c,this.xAxisWidth=t.width,this.xAxisHeight-e.height>s.config.xaxis.labels.maxHeight&&(this.xAxisHeight=s.config.xaxis.labels.maxHeight),s.config.xaxis.labels.minHeight&&this.xAxisHeight<s.config.xaxis.labels.minHeight&&(this.xAxisHeight=s.config.xaxis.labels.minHeight),s.config.xaxis.floating&&(this.xAxisHeight=0);var h=0,u=0;s.config.yaxis.forEach(function(d){h+=d.labels.minWidth,u+=d.labels.maxWidth}),this.yAxisWidth<h&&(this.yAxisWidth=h),this.yAxisWidth>u&&(this.yAxisWidth=u)}}]),r}(),UD=function(){function r(t){Q(this,r),this.w=t.w,this.lgCtx=t}return tt(r,[{key:"getLegendStyles",value:function(){var t,e,i,s=document.createElement("style");s.setAttribute("type","text/css");var n=((t=this.lgCtx.ctx)===null||t===void 0||(e=t.opts)===null||e===void 0||(i=e.chart)===null||i===void 0?void 0:i.nonce)||this.w.config.chart.nonce;n&&s.setAttribute("nonce",n);var o=document.createTextNode(`
      .apexcharts-flip-y {
        transform: scaleY(-1) translateY(-100%);
        transform-origin: top;
        transform-box: fill-box;
      }
      .apexcharts-flip-x {
        transform: scaleX(-1);
        transform-origin: center;
        transform-box: fill-box;
      }
      .apexcharts-legend {
        display: flex;
        overflow: auto;
        padding: 0 10px;
      }
      .apexcharts-legend.apexcharts-legend-group-horizontal {
        flex-direction: column;
      }
      .apexcharts-legend-group {
        display: flex;
      }
      .apexcharts-legend-group-vertical {
        flex-direction: column-reverse;
      }
      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
        flex-wrap: wrap
      }
      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        flex-direction: column;
        bottom: 0;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        justify-content: flex-start;
        align-items: flex-start;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
        justify-content: center;
        align-items: center;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
        justify-content: flex-end;
        align-items: flex-end;
      }
      .apexcharts-legend-series {
        cursor: pointer;
        line-height: normal;
        display: flex;
        align-items: center;
      }
      .apexcharts-legend-text {
        position: relative;
        font-size: 14px;
      }
      .apexcharts-legend-text *, .apexcharts-legend-marker * {
        pointer-events: none;
      }
      .apexcharts-legend-marker {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-right: 1px;
      }

      .apexcharts-legend-series.apexcharts-no-click {
        cursor: auto;
      }
      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
        display: none !important;
      }
      .apexcharts-inactive-legend {
        opacity: 0.45;
      }

    `);return s.appendChild(o),s}},{key:"getLegendDimensions",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),e=t.width;return{clwh:t.height,clww:e}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(t,e){var i=this,s=this.w;if(s.globals.axisCharts||s.config.chart.type==="radialBar"){s.globals.resized=!0;var n=null,o=null;s.globals.risingSeries=[],s.globals.axisCharts?(n=s.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),o=parseInt(n.getAttribute("data:realIndex"),10)):(n=s.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),o=parseInt(n.getAttribute("rel"),10)-1),e?[{cs:s.globals.collapsedSeries,csi:s.globals.collapsedSeriesIndices},{cs:s.globals.ancillaryCollapsedSeries,csi:s.globals.ancillaryCollapsedSeriesIndices}].forEach(function(h){i.riseCollapsedSeries(h.cs,h.csi,o)}):this.hideSeries({seriesEl:n,realIndex:o})}else{var a=s.globals.dom.Paper.findOne(" .apexcharts-series[rel='".concat(t+1,"'] path")),l=s.config.chart.type;if(l==="pie"||l==="polarArea"||l==="donut"){var c=s.config.plotOptions.pie.donut.labels;new U(this.lgCtx.ctx).pathMouseDown(a,null),this.lgCtx.ctx.pie.printDataLabelsInner(a.node,c)}a.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(t){var e=t.realIndex,i=this.w,s=i.globals,n=F.clone(i.config.series);if(s.axisCharts){var o=i.config.yaxis[s.seriesYAxisReverseMap[e]],a={index:e,data:n[e].data.slice(),type:n[e].type||i.config.chart.type};if(o&&o.show&&o.showAlways)s.ancillaryCollapsedSeriesIndices.indexOf(e)<0&&(s.ancillaryCollapsedSeries.push(a),s.ancillaryCollapsedSeriesIndices.push(e));else if(s.collapsedSeriesIndices.indexOf(e)<0){s.collapsedSeries.push(a),s.collapsedSeriesIndices.push(e);var l=s.risingSeries.indexOf(e);s.risingSeries.splice(l,1)}}else s.collapsedSeries.push({index:e,data:n[e]}),s.collapsedSeriesIndices.push(e);return s.allSeriesCollapsed=s.collapsedSeries.length+s.ancillaryCollapsedSeries.length===i.config.series.length,this._getSeriesBasedOnCollapsedState(n)}},{key:"hideSeries",value:function(t){for(var e=t.seriesEl,i=t.realIndex,s=this.w,n=this.getSeriesAfterCollapsing({realIndex:i}),o=e.childNodes,a=0;a<o.length;a++)o[a].classList.contains("apexcharts-series-markers-wrap")&&(o[a].classList.contains("apexcharts-hide")?o[a].classList.remove("apexcharts-hide"):o[a].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,i){var s=this.w,n=F.clone(s.config.series);if(t.length>0){for(var o=0;o<t.length;o++)t[o].index===i&&(s.globals.axisCharts?n[i].data=t[o].data.slice():n[i]=t[o].data,typeof n[i]!="number"&&(n[i].hidden=!1),t.splice(o,1),e.splice(o,1),s.globals.risingSeries.push(i));n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(t){var e=this.w,i=0;return e.globals.axisCharts?t.forEach(function(s,n){e.globals.collapsedSeriesIndices.indexOf(n)<0&&e.globals.ancillaryCollapsedSeriesIndices.indexOf(n)<0||(t[n].data=[],i++)}):t.forEach(function(s,n){!e.globals.collapsedSeriesIndices.indexOf(n)<0&&(t[n]=0,i++)}),e.globals.allSeriesCollapsed=i===t.length,t}}]),r}(),wA=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new UD(this)}return tt(r,[{key:"init",value:function(){var t=this.w,e=t.globals,i=t.config,s=i.legend.showForSingleSeries&&e.series.length===1||this.isBarsDistributed||e.series.length>1;if(this.legendHelpers.appendToForeignObject(),(s||!e.axisCharts)&&i.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),i.legend.position==="bottom"||i.legend.position==="top"?this.legendAlignHorizontal():i.legend.position!=="right"&&i.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(t){var e=t.i,i=t.fillcolor,s=this.w,n=document.createElement("span");n.classList.add("apexcharts-legend-marker");var o=s.config.legend.markers.shape||s.config.markers.shape,a=o;Array.isArray(o)&&(a=o[e]);var l=Array.isArray(s.config.legend.markers.size)?parseFloat(s.config.legend.markers.size[e]):parseFloat(s.config.legend.markers.size),c=Array.isArray(s.config.legend.markers.offsetX)?parseFloat(s.config.legend.markers.offsetX[e]):parseFloat(s.config.legend.markers.offsetX),h=Array.isArray(s.config.legend.markers.offsetY)?parseFloat(s.config.legend.markers.offsetY[e]):parseFloat(s.config.legend.markers.offsetY),u=Array.isArray(s.config.legend.markers.strokeWidth)?parseFloat(s.config.legend.markers.strokeWidth[e]):parseFloat(s.config.legend.markers.strokeWidth),d=n.style;if(d.height=2*(l+u)+"px",d.width=2*(l+u)+"px",d.left=c+"px",d.top=h+"px",s.config.legend.markers.customHTML)d.background="transparent",d.color=i[e],Array.isArray(s.config.legend.markers.customHTML)?s.config.legend.markers.customHTML[e]&&(n.innerHTML=s.config.legend.markers.customHTML[e]()):n.innerHTML=s.config.legend.markers.customHTML();else{var f=new po(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(a),seriesIndex:e,strokeWidth:u,size:l}),g=window.SVG().addTo(n).size("100%","100%"),p=new U(this.ctx).drawMarker(0,0,K(K({},f),{},{pointFillColor:Array.isArray(i)?i[e]:f.pointFillColor,shape:a}));s.globals.dom.Paper.find(".apexcharts-legend-marker.apexcharts-marker").forEach(function(b){b.node.classList.contains("apexcharts-marker-triangle")?b.node.style.transform="translate(50%, 45%)":b.node.style.transform="translate(50%, 50%)"}),g.add(p)}return n}},{key:"drawLegends",value:function(){var t=this,e=this,i=this.w,s=i.config.legend.fontFamily,n=i.globals.seriesNames,o=i.config.legend.markers.fillColors?i.config.legend.markers.fillColors.slice():i.globals.colors.slice();if(i.config.chart.type==="heatmap"){var a=i.config.plotOptions.heatmap.colorScale.ranges;n=a.map(function(f){return f.name?f.name:f.from+" - "+f.to}),o=a.map(function(f){return f.color})}else this.isBarsDistributed&&(n=i.globals.labels.slice());i.config.legend.customLegendItems.length&&(n=i.config.legend.customLegendItems);var l=i.globals.legendFormatter,c=i.config.legend.inverseOrder,h=[];i.globals.seriesGroups.length>1&&i.config.legend.clusterGroupedSeries&&i.globals.seriesGroups.forEach(function(f,g){h[g]=document.createElement("div"),h[g].classList.add("apexcharts-legend-group","apexcharts-legend-group-".concat(g)),i.config.legend.clusterGroupedSeriesOrientation==="horizontal"?i.globals.dom.elLegendWrap.classList.add("apexcharts-legend-group-horizontal"):h[g].classList.add("apexcharts-legend-group-vertical")});for(var u=function(f){var g,p=l(n[f],{seriesIndex:f,w:i}),b=!1,m=!1;if(i.globals.collapsedSeries.length>0)for(var x=0;x<i.globals.collapsedSeries.length;x++)i.globals.collapsedSeries[x].index===f&&(b=!0);if(i.globals.ancillaryCollapsedSeriesIndices.length>0)for(var v=0;v<i.globals.ancillaryCollapsedSeriesIndices.length;v++)i.globals.ancillaryCollapsedSeriesIndices[v]===f&&(m=!0);var w=t.createLegendMarker({i:f,fillcolor:o});U.setAttrs(w,{rel:f+1,"data:collapsed":b||m}),(b||m)&&w.classList.add("apexcharts-inactive-legend");var y=document.createElement("div"),A=document.createElement("span");A.classList.add("apexcharts-legend-text"),A.innerHTML=Array.isArray(p)?p.join(" "):p;var C=i.config.legend.labels.useSeriesColors?i.globals.colors[f]:Array.isArray(i.config.legend.labels.colors)?(g=i.config.legend.labels.colors)===null||g===void 0?void 0:g[f]:i.config.legend.labels.colors;C||(C=i.config.chart.foreColor),A.style.color=C,A.style.fontSize=parseFloat(i.config.legend.fontSize)+"px",A.style.fontWeight=i.config.legend.fontWeight,A.style.fontFamily=s||i.config.chart.fontFamily,U.setAttrs(A,{rel:f+1,i:f,"data:default-text":encodeURIComponent(p),"data:collapsed":b||m}),y.appendChild(w),y.appendChild(A);var M=new Yt(t.ctx);i.config.legend.showForZeroSeries||M.getSeriesTotalByIndex(f)===0&&M.seriesHaveSameValues(f)&&!M.isSeriesNull(f)&&i.globals.collapsedSeriesIndices.indexOf(f)===-1&&i.globals.ancillaryCollapsedSeriesIndices.indexOf(f)===-1&&y.classList.add("apexcharts-hidden-zero-series"),i.config.legend.showForNullSeries||M.isSeriesNull(f)&&i.globals.collapsedSeriesIndices.indexOf(f)===-1&&i.globals.ancillaryCollapsedSeriesIndices.indexOf(f)===-1&&y.classList.add("apexcharts-hidden-null-series"),h.length?i.globals.seriesGroups.forEach(function(O,B){var _;O.includes((_=i.config.series[f])===null||_===void 0?void 0:_.name)&&(i.globals.dom.elLegendWrap.appendChild(h[B]),h[B].appendChild(y))}):i.globals.dom.elLegendWrap.appendChild(y),i.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(i.config.legend.horizontalAlign)),i.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+i.config.legend.position),y.classList.add("apexcharts-legend-series"),y.style.margin="".concat(i.config.legend.itemMargin.vertical,"px ").concat(i.config.legend.itemMargin.horizontal,"px"),i.globals.dom.elLegendWrap.style.width=i.config.legend.width?i.config.legend.width+"px":"",i.globals.dom.elLegendWrap.style.height=i.config.legend.height?i.config.legend.height+"px":"",U.setAttrs(y,{rel:f+1,seriesName:F.escapeString(n[f]),"data:collapsed":b||m}),(b||m)&&y.classList.add("apexcharts-inactive-legend"),i.config.legend.onItemClick.toggleDataSeries||y.classList.add("apexcharts-no-click")},d=c?n.length-1:0;c?d>=0:d<=n.length-1;c?d--:d++)u(d);i.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),i.config.legend.onItemHover.highlightDataSeries&&i.config.legend.customLegendItems.length===0&&(i.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),i.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var i=this.w,s=i.globals.dom.elLegendWrap,n=s.clientHeight,o=0,a=0;if(i.config.legend.position==="bottom")a=i.globals.svgHeight-Math.min(n,i.globals.svgHeight/2)-5;else if(i.config.legend.position==="top"){var l=new jh(this.ctx),c=l.dimHelpers.getTitleSubtitleCoords("title").height,h=l.dimHelpers.getTitleSubtitleCoords("subtitle").height;a=(c>0?c-10:0)+(h>0?h-10:0)}s.style.position="absolute",o=o+t+i.config.legend.offsetX,a=a+e+i.config.legend.offsetY,s.style.left=o+"px",s.style.top=a+"px",i.config.legend.position==="right"&&(s.style.left="auto",s.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach(function(u){s.style[u]&&(s.style[u]=parseInt(i.config.legend[u],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.elLegendWrap.style.right=0;var e=new jh(this.ctx),i=e.dimHelpers.getTitleSubtitleCoords("title"),s=e.dimHelpers.getTitleSubtitleCoords("subtitle"),n=0;t.config.legend.position==="top"&&(n=i.height+s.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,n)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendDimensions(),i=0;t.config.legend.position==="left"&&(i=20),t.config.legend.position==="right"&&(i=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,i=t.target.classList.contains("apexcharts-legend-series")||t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if(e.config.chart.type==="heatmap"||this.isBarsDistributed){if(i){var s=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,s,this.w]),new fi(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&i&&new fi(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){var e=this.w;if(!e.config.legend.customLegendItems.length&&(t.target.classList.contains("apexcharts-legend-series")||t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(t.target.getAttribute("rel"),10)-1,s=t.target.getAttribute("data:collapsed")==="true",n=this.w.config.chart.events.legendClick;typeof n=="function"&&n(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var o=this.w.config.legend.markers.onClick;typeof o=="function"&&t.target.classList.contains("apexcharts-legend-marker")&&(o(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),e.config.chart.type!=="treemap"&&e.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&e.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,s)}}}]),r}(),AA=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w;var e=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=e.globals.minX,this.maxX=e.globals.maxX}return tt(r,[{key:"createToolbar",value:function(){var t=this,e=this.w,i=function(){return document.createElement("div")},s=i();if(s.setAttribute("class","apexcharts-toolbar"),s.style.top=e.config.chart.toolbar.offsetY+"px",s.style.right=3-e.config.chart.toolbar.offsetX+"px",e.globals.dom.elWrap.appendChild(s),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var n=0;n<this.t.customIcons.length;n++)this.elCustomIcons.push(i());var o=[],a=function(u,d,f){var g=u.toLowerCase();t.t[g]&&e.config.chart.zoom.enabled&&o.push({el:d,icon:typeof t.t[g]=="string"?t.t[g]:f,title:t.localeValues[u],class:"apexcharts-".concat(g,"-icon")})};a("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),a("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var l=function(u){t.t[u]&&e.config.chart[u].enabled&&o.push({el:u==="zoom"?t.elZoom:t.elSelection,icon:typeof t.t[u]=="string"?t.t[u]:u==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:t.localeValues[u==="zoom"?"selectionZoom":"selection"],class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(u,"-icon")})};l("zoom"),l("selection"),this.t.pan&&e.config.chart.zoom.enabled&&o.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),a("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&o.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var c=0;c<this.elCustomIcons.length;c++)o.push({el:this.elCustomIcons[c],icon:this.t.customIcons[c].icon,title:this.t.customIcons[c].title,index:this.t.customIcons[c].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[c].class});o.forEach(function(u,d){u.index&&F.moveIndexInArray(o,d,u.index)});for(var h=0;h<o.length;h++)U.setAttrs(o[h].el,{class:o[h].class,title:o[h].title}),o[h].el.innerHTML=o[h].icon,s.appendChild(o[h].el);this._createHamburgerMenu(s),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),U.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],i=0;i<e.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=e[i].title,U.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(e[i].name),title:e[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(i){i.classList.contains("exportSVG")?i.addEventListener("click",t.handleDownload.bind(t,"svg")):i.classList.contains("exportPNG")?i.addEventListener("click",t.handleDownload.bind(t,"png")):i.classList.contains("exportCSV")&&i.addEventListener("click",t.handleDownload.bind(t,"csv"))});for(var e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.ctx.getSyncedCharts().forEach(function(e){e.ctx.toolbar.toggleOtherControls();var i=t==="selection"?e.ctx.toolbar.elSelection:e.ctx.toolbar.elZoom,s=t==="selection"?"selectionEnabled":"zoomEnabled";e.w.globals[s]=!e.w.globals[s],i.classList.contains(e.ctx.toolbar.selectedClass)?i.classList.remove(e.ctx.toolbar.selectedClass):i.classList.add(e.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),t==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e=t==="pan"?this.elPan:this.elZoom,i=t==="pan"?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var t=this,e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(i){i&&i.classList.remove(t.selectedClass)})}},{key:"handleZoomIn",value:function(){var t=this.w;t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY);var e=(this.minX+this.maxX)/2,i=(this.minX+e)/2,s=(this.maxX+e)/2,n=this._getNewMinXMaxX(i,s);t.globals.disableZoomIn||this.zoomUpdateOptions(n.minX,n.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY),!(t.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var e=(this.minX+this.maxX)/2,i=this.minX-(e-this.minX),s=this.maxX-(e-this.maxX),n=this._getNewMinXMaxX(i,s);t.globals.disableZoomOut||this.zoomUpdateOptions(n.minX,n.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,e){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(t):t,maxX:i?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var i=this.w;if(t!==void 0||e!==void 0){if(!(i.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=i.globals.dataPoints),e-t<2))){var s={min:t,max:e},n=this.getBeforeZoomRange(s);n&&(s=n.xaxis);var o={xaxis:s},a=F.clone(i.globals.initialConfig.yaxis);i.config.chart.group||(o.yaxis=a),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(o,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(s,a)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(t,e){typeof this.ev.zoomed=="function"&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e})}},{key:"getBeforeZoomRange",value:function(t,e){var i=null;return typeof this.ev.beforeZoom=="function"&&(i=this.ev.beforeZoom(this,{xaxis:t,yaxis:e})),i}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout(function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(t){var e=this.w,i=new Wh(this.ctx);switch(t){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:e.config.series,columnDelimiter:e.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach(function(e){var i=e.w;if(i.globals.lastXAxis.min=i.globals.initialConfig.xaxis.min,i.globals.lastXAxis.max=i.globals.initialConfig.xaxis.max,e.updateHelpers.revertDefaultAxisMinMax(),typeof i.config.chart.events.beforeResetZoom=="function"){var s=i.config.chart.events.beforeResetZoom(e,i);s&&e.updateHelpers.revertDefaultAxisMinMax(s)}typeof i.config.chart.events.zoomed=="function"&&e.ctx.toolbar.zoomCallback({min:i.config.xaxis.min,max:i.config.xaxis.max}),i.globals.zoomed=!1;var n=e.ctx.series.emptyCollapsedSeries(F.clone(i.globals.initialSeries));e.updateHelpers._updateSeries(n,i.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),r}(),GD=function(r){za(e,AA);var t=_a(e);function e(i){var s;return Q(this,e),(s=t.call(this,i)).ctx=i,s.w=i.w,s.dragged=!1,s.graphics=new U(s.ctx),s.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],s.clientX=0,s.clientY=0,s.startX=0,s.endX=0,s.dragX=0,s.startY=0,s.endY=0,s.dragY=0,s.moveDirection="none",s.debounceTimer=null,s.debounceDelay=100,s.wheelDelay=400,s}return tt(e,[{key:"init",value:function(i){var s=this,n=i.xyRatios,o=this.w,a=this;this.xyRatios=n,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=o.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.constraints=new Qt(0,0,o.globals.gridWidth,o.globals.gridHeight),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),o.globals.dom.Paper.add(this.zoomRect),o.globals.dom.Paper.add(this.selectionRect),o.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:o.globals.gridWidth,maxY:o.globals.gridHeight}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):o.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:o.globals.gridWidth}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=o.globals.dom.baseEl.querySelector("".concat(o.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(l){s.hoverArea.addEventListener(l,a.svgMouseEvents.bind(a,n),{capture:!1,passive:!0})}),o.config.chart.zoom.enabled&&o.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",a.mouseWheelEvent.bind(a),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(i,s){var n=this.w,o=this.ctx.toolbar,a=n.globals.zoomEnabled?n.config.chart.zoom.type:n.config.chart.selection.type,l=n.config.chart.toolbar.autoSelected;if(s.shiftKey?(this.shiftWasPressed=!0,o.enableZoomPanFromToolbar(l==="pan"?"zoom":"pan")):this.shiftWasPressed&&(o.enableZoomPanFromToolbar(l),this.shiftWasPressed=!1),s.target){var c,h=s.target.classList;if(s.target.parentNode&&s.target.parentNode!==null&&(c=s.target.parentNode.classList),!(h.contains("apexcharts-legend-marker")||h.contains("apexcharts-legend-text")||c&&c.contains("apexcharts-toolbar"))){if(this.clientX=s.type==="touchmove"||s.type==="touchstart"?s.touches[0].clientX:s.type==="touchend"?s.changedTouches[0].clientX:s.clientX,this.clientY=s.type==="touchmove"||s.type==="touchstart"?s.touches[0].clientY:s.type==="touchend"?s.changedTouches[0].clientY:s.clientY,s.type==="mousedown"&&s.which===1||s.type==="touchstart"){var u=this.gridRect.getBoundingClientRect();this.startX=this.clientX-u.left-n.globals.barPadForNumericAxis,this.startY=this.clientY-u.top,this.dragged=!1,this.w.globals.mousedown=!0}(s.type==="mousemove"&&s.which===1||s.type==="touchmove")&&(this.dragged=!0,n.globals.panEnabled?(n.globals.selection=null,this.w.globals.mousedown&&this.panDragging({context:this,zoomtype:a,xyRatios:i})):(this.w.globals.mousedown&&n.globals.zoomEnabled||this.w.globals.mousedown&&n.globals.selectionEnabled)&&(this.selection=this.selectionDrawing({context:this,zoomtype:a}))),s.type!=="mouseup"&&s.type!=="touchend"&&s.type!=="mouseleave"||this.handleMouseUp({zoomtype:a}),this.makeSelectionRectDraggable()}}}},{key:"handleMouseUp",value:function(i){var s,n=i.zoomtype,o=i.isResized,a=this.w,l=(s=this.gridRect)===null||s===void 0?void 0:s.getBoundingClientRect();l&&(this.w.globals.mousedown||o)&&(this.endX=this.clientX-l.left-a.globals.barPadForNumericAxis,this.endY=this.clientY-l.top,this.dragX=Math.abs(this.endX-this.startX),this.dragY=Math.abs(this.endY-this.startY),(a.globals.zoomEnabled||a.globals.selectionEnabled)&&this.selectionDrawn({context:this,zoomtype:n}),a.globals.panEnabled&&a.config.xaxis.convertedCatToNumeric&&this.delayedPanScrolled()),a.globals.zoomEnabled&&this.hideSelectionRect(this.selectionRect),this.dragged=!1,this.w.globals.mousedown=!1}},{key:"mouseWheelEvent",value:function(i){var s=this,n=this.w;i.preventDefault();var o=Date.now();o-n.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(i),n.globals.lastWheelExecution=o),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){o-n.globals.lastWheelExecution>s.wheelDelay&&(s.executeMouseWheelZoom(i),n.globals.lastWheelExecution=o)},this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(i){var s,n=this.w;this.minX=n.globals.isRangeBar?n.globals.minY:n.globals.minX,this.maxX=n.globals.isRangeBar?n.globals.maxY:n.globals.maxX;var o=(s=this.gridRect)===null||s===void 0?void 0:s.getBoundingClientRect();if(o){var a,l,c,h=(i.clientX-o.left)/o.width,u=this.minX,d=this.maxX,f=d-u;if(i.deltaY<0){var g=u+h*f;l=g-(a=.5*f)/2,c=g+a/2}else l=u-(a=1.5*f)/2,c=d+a/2;if(!n.globals.isRangeBar){l=Math.max(l,n.globals.initialMinX),c=Math.min(c,n.globals.initialMaxX);var p=.01*(n.globals.initialMaxX-n.globals.initialMinX);if(c-l<p){var b=(l+c)/2;l=b-p/2,c=b+p/2}}var m=this._getNewMinXMaxX(l,c);isNaN(m.minX)||isNaN(m.maxX)||this.zoomUpdateOptions(m.minX,m.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){var i=this,s=this.w;if(this.selectionRect){var n=this.selectionRect.node.getBoundingClientRect();n.width>0&&n.height>0&&(this.selectionRect.select(!1).resize(!1),this.selectionRect.select({createRot:function(){},updateRot:function(){},createHandle:function(o,a,l,c,h){return h==="l"||h==="r"?o.circle(8).css({"stroke-width":1,stroke:"#333",fill:"#fff"}):o.circle(0)},updateHandle:function(o,a){return o.center(a[0],a[1])}}).resize().on("resize",function(){var o=s.globals.zoomEnabled?s.config.chart.zoom.type:s.config.chart.selection.type;i.handleMouseUp({zoomtype:o,isResized:!0})}))}}},{key:"preselectedSelection",value:function(){var i=this.w,s=this.xyRatios;if(!i.globals.zoomEnabled){if(i.globals.selection!==void 0&&i.globals.selection!==null)this.drawSelectionRect(K(K({},i.globals.selection),{},{translateX:i.globals.translateX,translateY:i.globals.translateY}));else if(i.config.chart.selection.xaxis.min!==void 0&&i.config.chart.selection.xaxis.max!==void 0){var n=(i.config.chart.selection.xaxis.min-i.globals.minX)/s.xRatio,o=i.globals.gridWidth-(i.globals.maxX-i.config.chart.selection.xaxis.max)/s.xRatio-n;i.globals.isRangeBar&&(n=(i.config.chart.selection.xaxis.min-i.globals.yAxisScale[0].niceMin)/s.invertedYRatio,o=(i.config.chart.selection.xaxis.max-i.config.chart.selection.xaxis.min)/s.invertedYRatio);var a={x:n,y:0,width:o,height:i.globals.gridHeight,translateX:i.globals.translateX,translateY:i.globals.translateY,selectionEnabled:!0};this.drawSelectionRect(a),this.makeSelectionRectDraggable(),typeof i.config.chart.events.selection=="function"&&i.config.chart.events.selection(this.ctx,{xaxis:{min:i.config.chart.selection.xaxis.min,max:i.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(i){var s=i.x,n=i.y,o=i.width,a=i.height,l=i.translateX,c=l===void 0?0:l,h=i.translateY,u=h===void 0?0:h,d=this.w,f=this.zoomRect,g=this.selectionRect;if(this.dragged||d.globals.selection!==null){var p={transform:"translate("+c+", "+u+")"};d.globals.zoomEnabled&&this.dragged&&(o<0&&(o=1),f.attr({x:s,y:n,width:o,height:a,fill:d.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":d.config.chart.zoom.zoomedArea.fill.opacity,stroke:d.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":d.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":d.config.chart.zoom.zoomedArea.stroke.opacity}),U.setAttrs(f.node,p)),d.globals.selectionEnabled&&(g.attr({x:s,y:n,width:o>0?o:0,height:a>0?a:0,fill:d.config.chart.selection.fill.color,"fill-opacity":d.config.chart.selection.fill.opacity,stroke:d.config.chart.selection.stroke.color,"stroke-width":d.config.chart.selection.stroke.width,"stroke-dasharray":d.config.chart.selection.stroke.dashArray,"stroke-opacity":d.config.chart.selection.stroke.opacity}),U.setAttrs(g.node,p))}}},{key:"hideSelectionRect",value:function(i){i&&i.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(i){var s=i.context,n=i.zoomtype,o=this.w,a=s,l=this.gridRect.getBoundingClientRect(),c=a.startX-1,h=a.startY,u=!1,d=!1,f=a.clientX-l.left-o.globals.barPadForNumericAxis,g=a.clientY-l.top,p=f-c,b=g-h,m={translateX:o.globals.translateX,translateY:o.globals.translateY};return Math.abs(p+c)>o.globals.gridWidth?p=o.globals.gridWidth-c:f<0&&(p=c),c>f&&(u=!0,p=Math.abs(p)),h>g&&(d=!0,b=Math.abs(b)),m=K(K({},m=n==="x"?{x:u?c-p:c,y:0,width:p,height:o.globals.gridHeight}:n==="y"?{x:0,y:d?h-b:h,width:o.globals.gridWidth,height:b}:{x:u?c-p:c,y:d?h-b:h,width:p,height:b}),{},{translateX:o.globals.translateX,translateY:o.globals.translateY}),a.drawSelectionRect(m),a.selectionDragging("resizing"),m}},{key:"selectionDragging",value:function(i,s){var n=this,o=this.w;if(s){s.preventDefault();var a=s.detail,l=a.handler,c=a.box,h=c.x,u=c.y;h<this.constraints.x&&(h=this.constraints.x),u<this.constraints.y&&(u=this.constraints.y),c.x2>this.constraints.x2&&(h=this.constraints.x2-c.w),c.y2>this.constraints.y2&&(u=this.constraints.y2-c.h),l.move(h,u);var d=this.xyRatios,f=this.selectionRect,g=0;i==="resizing"&&(g=30);var p=function(m){return parseFloat(f.node.getAttribute(m))},b={x:p("x"),y:p("y"),width:p("width"),height:p("height")};o.globals.selection=b,typeof o.config.chart.events.selection=="function"&&o.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var m,x,v,w,y=n.gridRect.getBoundingClientRect(),A=f.node.getBoundingClientRect();o.globals.isRangeBar?(m=o.globals.yAxisScale[0].niceMin+(A.left-y.left)*d.invertedYRatio,x=o.globals.yAxisScale[0].niceMin+(A.right-y.left)*d.invertedYRatio,v=0,w=1):(m=o.globals.xAxisScale.niceMin+(A.left-y.left)*d.xRatio,x=o.globals.xAxisScale.niceMin+(A.right-y.left)*d.xRatio,v=o.globals.yAxisScale[0].niceMin+(y.bottom-A.bottom)*d.yRatio[0],w=o.globals.yAxisScale[0].niceMax-(A.top-y.top)*d.yRatio[0]);var C={xaxis:{min:m,max:x},yaxis:{min:v,max:w}};o.config.chart.events.selection(n.ctx,C),o.config.chart.brush.enabled&&o.config.chart.events.brushScrolled!==void 0&&o.config.chart.events.brushScrolled(n.ctx,C)},g))}}},{key:"selectionDrawn",value:function(i){var s,n,o=i.context,a=i.zoomtype,l=this.w,c=o,h=this.xyRatios,u=this.ctx.toolbar,d=l.globals.zoomEnabled?c.zoomRect.node.getBoundingClientRect():c.selectionRect.node.getBoundingClientRect(),f=c.gridRect.getBoundingClientRect(),g=d.left-f.left-l.globals.barPadForNumericAxis,p=d.right-f.left-l.globals.barPadForNumericAxis,b=d.top-f.top,m=d.bottom-f.top;l.globals.isRangeBar?(s=l.globals.yAxisScale[0].niceMin+g*h.invertedYRatio,n=l.globals.yAxisScale[0].niceMin+p*h.invertedYRatio):(s=l.globals.xAxisScale.niceMin+g*h.xRatio,n=l.globals.xAxisScale.niceMin+p*h.xRatio);var x=[],v=[];if(l.config.yaxis.forEach(function(B,_){var z=l.globals.seriesYAxisMap[_][0],N=l.globals.yAxisScale[_].niceMax-h.yRatio[z]*b,E=l.globals.yAxisScale[_].niceMax-h.yRatio[z]*m;x.push(N),v.push(E)}),c.dragged&&(c.dragX>10||c.dragY>10)&&s!==n){if(l.globals.zoomEnabled){var w=F.clone(l.globals.initialConfig.yaxis),y=F.clone(l.globals.initialConfig.xaxis);if(l.globals.zoomed=!0,l.config.xaxis.convertedCatToNumeric&&(s=Math.floor(s),n=Math.floor(n),s<1&&(s=1,n=l.globals.dataPoints),n-s<2&&(n=s+1)),a!=="xy"&&a!=="x"||(y={min:s,max:n}),a!=="xy"&&a!=="y"||w.forEach(function(B,_){w[_].min=v[_],w[_].max=x[_]}),u){var A=u.getBeforeZoomRange(y,w);A&&(y=A.xaxis?A.xaxis:y,w=A.yaxis?A.yaxis:w)}var C={xaxis:y};l.config.chart.group||(C.yaxis=w),c.ctx.updateHelpers._updateOptions(C,!1,c.w.config.chart.animations.dynamicAnimation.enabled),typeof l.config.chart.events.zoomed=="function"&&u.zoomCallback(y,w)}else if(l.globals.selectionEnabled){var M,O=null;M={min:s,max:n},a!=="xy"&&a!=="y"||(O=F.clone(l.config.yaxis)).forEach(function(B,_){O[_].min=v[_],O[_].max=x[_]}),l.globals.selection=c.selection,typeof l.config.chart.events.selection=="function"&&l.config.chart.events.selection(c.ctx,{xaxis:M,yaxis:O})}}}},{key:"panDragging",value:function(i){var s=i.context,n=this.w,o=s;if(n.globals.lastClientPosition.x!==void 0){var a=n.globals.lastClientPosition.x-o.clientX,l=n.globals.lastClientPosition.y-o.clientY;Math.abs(a)>Math.abs(l)&&a>0?this.moveDirection="left":Math.abs(a)>Math.abs(l)&&a<0?this.moveDirection="right":Math.abs(l)>Math.abs(a)&&l>0?this.moveDirection="up":Math.abs(l)>Math.abs(a)&&l<0&&(this.moveDirection="down")}n.globals.lastClientPosition={x:o.clientX,y:o.clientY};var c=n.globals.isRangeBar?n.globals.minY:n.globals.minX,h=n.globals.isRangeBar?n.globals.maxY:n.globals.maxX;n.config.xaxis.convertedCatToNumeric||o.panScrolled(c,h)}},{key:"delayedPanScrolled",value:function(){var i=this.w,s=i.globals.minX,n=i.globals.maxX,o=(i.globals.maxX-i.globals.minX)/2;this.moveDirection==="left"?(s=i.globals.minX+o,n=i.globals.maxX+o):this.moveDirection==="right"&&(s=i.globals.minX-o,n=i.globals.maxX-o),s=Math.floor(s),n=Math.floor(n),this.updateScrolledChart({xaxis:{min:s,max:n}},s,n)}},{key:"panScrolled",value:function(i,s){var n=this.w,o=this.xyRatios,a=F.clone(n.globals.initialConfig.yaxis),l=o.xRatio,c=n.globals.minX,h=n.globals.maxX;n.globals.isRangeBar&&(l=o.invertedYRatio,c=n.globals.minY,h=n.globals.maxY),this.moveDirection==="left"?(i=c+n.globals.gridWidth/15*l,s=h+n.globals.gridWidth/15*l):this.moveDirection==="right"&&(i=c-n.globals.gridWidth/15*l,s=h-n.globals.gridWidth/15*l),n.globals.isRangeBar||(i<n.globals.initialMinX||s>n.globals.initialMaxX)&&(i=c,s=h);var u={xaxis:{min:i,max:s}};n.config.chart.group||(u.yaxis=a),this.updateScrolledChart(u,i,s)}},{key:"updateScrolledChart",value:function(i,s,n){var o=this.w;this.ctx.updateHelpers._updateOptions(i,!1,!1),typeof o.config.chart.events.scrolled=="function"&&o.config.chart.events.scrolled(this.ctx,{xaxis:{min:s,max:n}})}}]),e}(),kA=function(){function r(t){Q(this,r),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx}return tt(r,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,i=t.elGrid,s=t.clientX,n=t.clientY,o=this.w,a=i.getBoundingClientRect(),l=a.width,c=a.height,h=l/(o.globals.dataPoints-1),u=c/o.globals.dataPoints,d=this.hasBars();!o.globals.comboCharts&&!d||o.config.xaxis.convertedCatToNumeric||(h=l/o.globals.dataPoints);var f=s-a.left-o.globals.barPadForNumericAxis,g=n-a.top;f<0||g<0||f>l||g>c?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):o.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):o.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));var p=Math.round(f/h),b=Math.floor(g/u);d&&!o.config.xaxis.convertedCatToNumeric&&(p=Math.ceil(f/h),p-=1);var m=null,x=null,v=o.globals.seriesXvalues.map(function(M){return M.filter(function(O){return F.isNumber(O)})}),w=o.globals.seriesYvalues.map(function(M){return M.filter(function(O){return F.isNumber(O)})});if(o.globals.isXNumeric){var y=this.ttCtx.getElGrid().getBoundingClientRect(),A=f*(y.width/l),C=g*(y.height/c);m=(x=this.closestInMultiArray(A,C,v,w)).index,p=x.j,m!==null&&o.globals.hasNullValues&&(v=o.globals.seriesXvalues[m],p=(x=this.closestInArray(A,v)).j)}return o.globals.capturedSeriesIndex=m===null?-1:m,(!p||p<1)&&(p=0),o.globals.isBarHorizontal?o.globals.capturedDataPointIndex=b:o.globals.capturedDataPointIndex=p,{capturedSeries:m,j:o.globals.isBarHorizontal?b:p,hoverX:f,hoverY:g}}},{key:"getFirstActiveXArray",value:function(t){for(var e=this.w,i=0,s=t.map(function(o,a){return o.length>0?a:-1}),n=0;n<s.length;n++)if(s[n]!==-1&&e.globals.collapsedSeriesIndices.indexOf(n)===-1&&e.globals.ancillaryCollapsedSeriesIndices.indexOf(n)===-1){i=s[n];break}return i}},{key:"closestInMultiArray",value:function(t,e,i,s){for(var n,o=this.w,a=1/0,l=null,c=null,h=0;h<i.length;h++)if(n=h,o.globals.collapsedSeriesIndices.indexOf(n)===-1&&o.globals.ancillaryCollapsedSeriesIndices.indexOf(n)===-1)for(var u=i[h],d=s[h],f=Math.min(u.length,d.length),g=0;g<f;g++){var p=t-u[g],b=Math.sqrt(p*p);if(!o.globals.allSeriesHasEqualX){var m=e-d[g];b=Math.sqrt(p*p+m*m)}b<a&&(a=b,l=h,c=g)}return{index:l,j:c}}},{key:"closestInArray",value:function(t,e){for(var i=e[0],s=null,n=Math.abs(t-i),o=0;o<e.length;o++){var a=Math.abs(t-e[o]);a<n&&(n=a,s=o)}return{j:s}}},{key:"isXoverlap",value:function(t){var e=[],i=this.w.globals.seriesX.filter(function(n){return n[0]!==void 0});if(i.length>0)for(var s=0;s<i.length-1;s++)i[s][t]!==void 0&&i[s+1][t]!==void 0&&i[s][t]!==i[s+1][t]&&e.push("unEqual");return e.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,i=0;i<e.length-1;i++)if(e[i].data.length!==e[i+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return se(t).reduce(function(e,i){return e+i.getBBox().height},0)}},{key:"getElMarkers",value:function(t){return typeof t=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");i=se(i),e&&(i=i.filter(function(n){var o=Number(n.getAttribute("data:realIndex"));return t.w.globals.collapsedSeriesIndices.indexOf(o)===-1})),i.sort(function(n,o){var a=Number(n.getAttribute("data:realIndex")),l=Number(o.getAttribute("data:realIndex"));return l<a?1:l>a?-1:0});var s=[];return i.forEach(function(n){s.push(n.querySelector(".apexcharts-marker"))}),s}},{key:"hasMarkers",value:function(t){return this.getElMarkers(t).length>0}},{key:"getPathFromPoint",value:function(t,e){var i=Number(t.getAttribute("cx")),s=Number(t.getAttribute("cy")),n=t.getAttribute("shape");return new U(this.ctx).getMarkerPath(i,s,n,e)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,i=e.config.markers.hover.size;return i===void 0&&(i=e.globals.markers.size[t]+e.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,i=this.ttCtx;i.allTooltipSeriesGroups.length===0&&(i.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var s=i.allTooltipSeriesGroups,n=0;n<s.length;n++)t==="enable"?(s[n].classList.add("apexcharts-active"),s[n].style.display=e.config.tooltip.items.display):(s[n].classList.remove("apexcharts-active"),s[n].style.display="none")}}]),r}(),$D=function(){function r(t){Q(this,r),this.w=t.w,this.ctx=t.ctx,this.ttCtx=t,this.tooltipUtil=new kA(t)}return tt(r,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,i=e===void 0||e,s=t.ttItems,n=t.i,o=n===void 0?0:n,a=t.j,l=a===void 0?null:a,c=t.y1,h=t.y2,u=t.e,d=this.w;d.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:o,j:l,y1:c,y2:h,w:d}):this.toggleActiveInactiveSeries(i,o);var f=this.getValuesToPrint({i:o,j:l});this.printLabels({i:o,j:l,values:f,ttItems:s,shared:i,e:u});var g=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=g.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=g.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var e,i=this,s=t.i,n=t.j,o=t.values,a=t.ttItems,l=t.shared,c=t.e,h=this.w,u=[],d=function(y){return h.globals.seriesGoals[y]&&h.globals.seriesGoals[y][n]&&Array.isArray(h.globals.seriesGoals[y][n])},f=o.xVal,g=o.zVal,p=o.xAxisTTVal,b="",m=h.globals.colors[s];n!==null&&h.config.plotOptions.bar.distributed&&(m=h.globals.colors[n]);for(var x=function(y,A){var C=i.getFormatters(s);b=i.getSeriesName({fn:C.yLbTitleFormatter,index:s,seriesIndex:s,j:n}),h.config.chart.type==="treemap"&&(b=C.yLbTitleFormatter(String(h.config.series[s].data[n].x),{series:h.globals.series,seriesIndex:s,dataPointIndex:n,w:h}));var M=h.config.tooltip.inverseOrder?A:y;if(h.globals.axisCharts){var O=function(z){var N,E,I,S;return h.globals.isRangeData?C.yLbFormatter((N=h.globals.seriesRangeStart)===null||N===void 0||(E=N[z])===null||E===void 0?void 0:E[n],{series:h.globals.seriesRangeStart,seriesIndex:z,dataPointIndex:n,w:h})+" - "+C.yLbFormatter((I=h.globals.seriesRangeEnd)===null||I===void 0||(S=I[z])===null||S===void 0?void 0:S[n],{series:h.globals.seriesRangeEnd,seriesIndex:z,dataPointIndex:n,w:h}):C.yLbFormatter(h.globals.series[z][n],{series:h.globals.series,seriesIndex:z,dataPointIndex:n,w:h})};if(l)C=i.getFormatters(M),b=i.getSeriesName({fn:C.yLbTitleFormatter,index:M,seriesIndex:s,j:n}),m=h.globals.colors[M],e=O(M),d(M)&&(u=h.globals.seriesGoals[M][n].map(function(z){return{attrs:z,val:C.yLbFormatter(z.value,{seriesIndex:M,dataPointIndex:n,w:h})}}));else{var B,_=c==null||(B=c.target)===null||B===void 0?void 0:B.getAttribute("fill");_&&(_.indexOf("url")!==-1?_.indexOf("Pattern")!==-1&&(m=h.globals.dom.baseEl.querySelector(_.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):m=_),e=O(s),d(s)&&Array.isArray(h.globals.seriesGoals[s][n])&&(u=h.globals.seriesGoals[s][n].map(function(z){return{attrs:z,val:C.yLbFormatter(z.value,{seriesIndex:s,dataPointIndex:n,w:h})}}))}}n===null&&(e=C.yLbFormatter(h.globals.series[s],K(K({},h),{},{seriesIndex:s,dataPointIndex:s}))),i.DOMHandling({i:s,t:M,j:n,ttItems:a,values:{val:e,goalVals:u,xVal:f,xAxisTTVal:p,zVal:g},seriesName:b,shared:l,pColor:m})},v=0,w=h.globals.series.length-1;v<h.globals.series.length;v++,w--)x(v,w)}},{key:"getFormatters",value:function(t){var e,i=this.w,s=i.globals.yLabelFormatters[t];return i.globals.ttVal!==void 0?Array.isArray(i.globals.ttVal)?(s=i.globals.ttVal[t]&&i.globals.ttVal[t].formatter,e=i.globals.ttVal[t]&&i.globals.ttVal[t].title&&i.globals.ttVal[t].title.formatter):(s=i.globals.ttVal.formatter,typeof i.globals.ttVal.title.formatter=="function"&&(e=i.globals.ttVal.title.formatter)):e=i.config.tooltip.y.title.formatter,typeof s!="function"&&(s=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(n){return n}),typeof e!="function"&&(e=function(n){return n?n+": ":""}),{yLbFormatter:s,yLbTitleFormatter:e}}},{key:"getSeriesName",value:function(t){var e=t.fn,i=t.index,s=t.seriesIndex,n=t.j,o=this.w;return e(String(o.globals.seriesNames[i]),{series:o.globals.series,seriesIndex:s,dataPointIndex:n,w:o})}},{key:"DOMHandling",value:function(t){t.i;var e=t.t,i=t.j,s=t.ttItems,n=t.values,o=t.seriesName,a=t.shared,l=t.pColor,c=this.w,h=this.ttCtx,u=n.val,d=n.goalVals,f=n.xVal,g=n.xAxisTTVal,p=n.zVal,b=null;b=s[e].children,c.config.tooltip.fillSeriesColor&&(s[e].style.color=l,b[0].style.display="none"),h.showTooltipTitle&&(h.tooltipTitle===null&&(h.tooltipTitle=c.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),h.tooltipTitle.innerHTML=f),h.isXAxisTooltipEnabled&&(h.xaxisTooltipText.innerHTML=g!==""?g:f);var m=s[e].querySelector(".apexcharts-tooltip-text-y-label");m&&(m.innerHTML=o||"");var x=s[e].querySelector(".apexcharts-tooltip-text-y-value");x&&(x.innerHTML=u!==void 0?u:""),b[0]&&b[0].classList.contains("apexcharts-tooltip-marker")&&(c.config.tooltip.marker.fillColors&&Array.isArray(c.config.tooltip.marker.fillColors)&&(l=c.config.tooltip.marker.fillColors[e]),b[0].style.color=l),c.config.tooltip.marker.show||(b[0].style.display="none");var v=s[e].querySelector(".apexcharts-tooltip-text-goals-label"),w=s[e].querySelector(".apexcharts-tooltip-text-goals-value");if(d.length&&c.globals.seriesGoals[e]){var y=function(){var M="<div>",O="<div>";d.forEach(function(B,_){M+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(B.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(B.attrs.name,"</div>"),O+="<div>".concat(B.val,"</div>")}),v.innerHTML=M+"</div>",w.innerHTML=O+"</div>"};a?c.globals.seriesGoals[e][i]&&Array.isArray(c.globals.seriesGoals[e][i])?y():(v.innerHTML="",w.innerHTML=""):y()}else v.innerHTML="",w.innerHTML="";if(p!==null&&(s[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=c.config.tooltip.z.title,s[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=p!==void 0?p:""),a&&b[0]){if(c.config.tooltip.hideEmptySeries){var A=s[e].querySelector(".apexcharts-tooltip-marker"),C=s[e].querySelector(".apexcharts-tooltip-text");parseFloat(u)==0?(A.style.display="none",C.style.display="none"):(A.style.display="block",C.style.display="block")}u==null||c.globals.ancillaryCollapsedSeriesIndices.indexOf(e)>-1||c.globals.collapsedSeriesIndices.indexOf(e)>-1||Array.isArray(h.tConfig.enabledOnSeries)&&h.tConfig.enabledOnSeries.indexOf(e)===-1?b[0].parentNode.style.display="none":b[0].parentNode.style.display=c.config.tooltip.items.display}else Array.isArray(h.tConfig.enabledOnSeries)&&h.tConfig.enabledOnSeries.indexOf(e)===-1&&(b[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(t,e){var i=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var s=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(e));s&&(s.classList.add("apexcharts-active"),s.style.display=i.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var e=t.i,i=t.j,s=this.w,n=this.ctx.series.filteredSeriesX(),o="",a="",l=null,c=null,h={series:s.globals.series,seriesIndex:e,dataPointIndex:i,w:s},u=s.globals.ttZFormatter;i===null?c=s.globals.series[e]:s.globals.isXNumeric&&s.config.chart.type!=="treemap"?(o=n[e][i],n[e].length===0&&(o=n[this.tooltipUtil.getFirstActiveXArray(n)][i])):o=new rm(this.ctx).isFormatXY()?s.config.series[e].data[i]!==void 0?s.config.series[e].data[i].x:"":s.globals.labels[i]!==void 0?s.globals.labels[i]:"";var d=o;return s.globals.isXNumeric&&s.config.xaxis.type==="datetime"?o=new Wa(this.ctx).xLabelFormat(s.globals.ttKeyFormatter,d,d,{i:void 0,dateFormatter:new fe(this.ctx).formatDate,w:this.w}):o=s.globals.isBarHorizontal?s.globals.yLabelFormatters[0](d,h):s.globals.xLabelFormatter(d,h),s.config.tooltip.x.formatter!==void 0&&(o=s.globals.ttKeyFormatter(d,h)),s.globals.seriesZ.length>0&&s.globals.seriesZ[e].length>0&&(l=u(s.globals.seriesZ[e][i],s)),a=typeof s.config.xaxis.tooltip.formatter=="function"?s.globals.xaxisTooltipFormatter(d,h):o,{val:Array.isArray(c)?c.join(" "):c,xVal:Array.isArray(o)?o.join(" "):o,xAxisTTVal:Array.isArray(a)?a.join(" "):a,zVal:l}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,i=t.j,s=t.y1,n=t.y2,o=t.w,a=this.ttCtx.getElTooltip(),l=o.config.tooltip.custom;Array.isArray(l)&&l[e]&&(l=l[e]);var c=l({ctx:this.ctx,series:o.globals.series,seriesIndex:e,dataPointIndex:i,y1:s,y2:n,w:o});typeof c=="string"?a.innerHTML=c:(c instanceof Element||typeof c.nodeName=="string")&&(a.innerHTML="",a.appendChild(c.cloneNode(!0)))}}]),r}(),SA=function(){function r(t){Q(this,r),this.ttCtx=t,this.ctx=t.ctx,this.w=t.w}return tt(r,[{key:"moveXCrosshairs",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this.ttCtx,s=this.w,n=i.getElXCrosshairs(),o=t-i.xcrosshairsWidth/2,a=s.globals.labels.slice().length;if(e!==null&&(o=s.globals.gridWidth/a*e),n===null||s.globals.isBarHorizontal||(n.setAttribute("x",o),n.setAttribute("x1",o),n.setAttribute("x2",o),n.setAttribute("y2",s.globals.gridHeight),n.classList.add("apexcharts-active")),o<0&&(o=0),o>s.globals.gridWidth&&(o=s.globals.gridWidth),i.isXAxisTooltipEnabled){var l=o;s.config.xaxis.crosshairs.width!=="tickWidth"&&s.config.xaxis.crosshairs.width!=="barWidth"||(l=o+i.xcrosshairsWidth/2),this.moveXAxisTooltip(l)}}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;e.ycrosshairs!==null&&U.setAttrs(e.ycrosshairs,{y1:t,y2:t}),e.ycrosshairsHidden!==null&&U.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;if(i.xaxisTooltip!==null&&i.xcrosshairsWidth!==0){i.xaxisTooltip.classList.add("apexcharts-active");var s=i.xaxisOffY+e.config.xaxis.tooltip.offsetY+e.globals.translateY+1+e.config.xaxis.offsetY;if(t-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(t)){t+=e.globals.translateX;var n;n=new U(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=n.width+"px",i.xaxisTooltip.style.left=t+"px",i.xaxisTooltip.style.top=s+"px"}}}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;i.yaxisTTEls===null&&(i.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var s=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),n=e.globals.translateY+s,o=i.yaxisTTEls[t].getBoundingClientRect().height,a=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(a-=26),n-=o/2,e.globals.ignoreYAxisIndexes.indexOf(t)===-1?(i.yaxisTTEls[t].classList.add("apexcharts-active"),i.yaxisTTEls[t].style.top=n+"px",i.yaxisTTEls[t].style.left=a+e.config.yaxis[t].tooltip.offsetX+"px"):i.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=this.w,n=this.ttCtx,o=n.getElTooltip(),a=n.tooltipRect,l=i!==null?parseFloat(i):1,c=parseFloat(t)+l+5,h=parseFloat(e)+l/2;if(c>s.globals.gridWidth/2&&(c=c-a.ttWidth-l-10),c>s.globals.gridWidth-a.ttWidth-10&&(c=s.globals.gridWidth-a.ttWidth),c<-20&&(c=-20),s.config.tooltip.followCursor){var u=n.getElGrid().getBoundingClientRect();(c=n.e.clientX-u.left)>s.globals.gridWidth/2&&(c-=n.tooltipRect.ttWidth),(h=n.e.clientY+s.globals.translateY-u.top)>s.globals.gridHeight/2&&(h-=n.tooltipRect.ttHeight)}else s.globals.isBarHorizontal||a.ttHeight/2+h>s.globals.gridHeight&&(h=s.globals.gridHeight-a.ttHeight+s.globals.translateY);isNaN(c)||(c+=s.globals.translateX,o.style.left=c+"px",o.style.top=h+"px")}},{key:"moveMarkers",value:function(t,e){var i=this.w,s=this.ttCtx;if(i.globals.markers.size[t]>0)for(var n=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),o=0;o<n.length;o++)parseInt(n[o].getAttribute("rel"),10)===e&&(s.marker.resetPointsSize(),s.marker.enlargeCurrentPoint(e,n[o]));else s.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var i,s,n,o,a=this.w,l=this.ttCtx,c=new U(this.ctx),h=a.globals.pointsArray,u=l.tooltipUtil.getHoverMarkerSize(e),d=a.config.series[e].type;if(!d||d!=="column"&&d!=="candlestick"&&d!=="boxPlot"){n=(i=h[e][t])===null||i===void 0?void 0:i[0],o=((s=h[e][t])===null||s===void 0?void 0:s[1])||0;var f=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers path"));if(f&&o<a.globals.gridHeight&&o>0){var g=f.getAttribute("shape"),p=c.getMarkerPath(n,o,g,1.5*u);f.setAttribute("d",p)}this.moveXCrosshairs(n),l.fixedTooltip||this.moveTooltip(n,o,u)}}},{key:"moveDynamicPointsOnHover",value:function(t){var e,i=this.ttCtx,s=i.w,n=0,o=0,a=s.globals.pointsArray,l=new fi(this.ctx),c=new U(this.ctx);e=l.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var h=i.tooltipUtil.getHoverMarkerSize(e);if(a[e]&&(n=a[e][t][0],o=a[e][t][1]),!isNaN(n)){var u=i.tooltipUtil.getAllMarkers();if(u.length)for(var d=0;d<s.globals.series.length;d++){var f=a[d];if(s.globals.comboCharts&&f===void 0&&u.splice(d,0,null),f&&f.length){var g=a[d][t][1],p=void 0;u[d].setAttribute("cx",n);var b=u[d].getAttribute("shape");if(s.config.chart.type==="rangeArea"&&!s.globals.comboCharts){var m=t+s.globals.series[d].length;p=a[d][m][1],g-=Math.abs(g-p)/2}if(g!==null&&!isNaN(g)&&g<s.globals.gridHeight+h&&g+h>0){var x=c.getMarkerPath(n,g,b,h);u[d].setAttribute("d",x)}else u[d].setAttribute("d","")}}this.moveXCrosshairs(n),i.fixedTooltip||this.moveTooltip(n,o||s.globals.gridHeight,h)}}},{key:"moveStickyTooltipOverBars",value:function(t,e){var i=this.w,s=this.ttCtx,n=i.globals.columnSeries?i.globals.columnSeries.length:i.globals.series.length;i.config.chart.stacked&&(n=i.globals.barGroups.length);var o=n>=2&&n%2==0?Math.floor(n/2):Math.floor(n/2)+1;i.globals.isBarHorizontal&&(o=new fi(this.ctx).getActiveConfigSeriesIndex("desc")+1);var a=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(o,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(t,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(t,"']"));a||typeof e!="number"||(a=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(e,"'] path[j='").concat(t,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(e,"'] path[j='").concat(t,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(e,"'] path[j='").concat(t,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(e,"'] path[j='").concat(t,"']")));var l=a?parseFloat(a.getAttribute("cx")):0,c=a?parseFloat(a.getAttribute("cy")):0,h=a?parseFloat(a.getAttribute("barWidth")):0,u=s.getElGrid().getBoundingClientRect(),d=a&&(a.classList.contains("apexcharts-candlestick-area")||a.classList.contains("apexcharts-boxPlot-area"));i.globals.isXNumeric?(a&&!d&&(l-=n%2!=0?h/2:0),a&&d&&(l-=h/2)):i.globals.isBarHorizontal||(l=s.xAxisTicksPositions[t-1]+s.dataPointsDividedWidth/2,isNaN(l)&&(l=s.xAxisTicksPositions[t]-s.dataPointsDividedWidth/2)),i.globals.isBarHorizontal?c-=s.tooltipRect.ttHeight:i.config.tooltip.followCursor?c=s.e.clientY-u.top-s.tooltipRect.ttHeight/2:c+s.tooltipRect.ttHeight+15>i.globals.gridHeight&&(c=i.globals.gridHeight),i.globals.isBarHorizontal||this.moveXCrosshairs(l),s.fixedTooltip||this.moveTooltip(l,c||i.globals.gridHeight)}}]),r}(),KD=function(){function r(t){Q(this,r),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx,this.tooltipPosition=new SA(t)}return tt(r,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new U(this.ctx),i=new po(this.ctx),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");s=se(s),t.config.chart.stacked&&s.sort(function(u,d){return parseFloat(u.getAttribute("data:realIndex"))-parseFloat(d.getAttribute("data:realIndex"))});for(var n=0;n<s.length;n++){var o=s[n].querySelector(".apexcharts-series-markers-wrap");if(o!==null){var a=void 0,l="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));t.config.chart.type!=="line"&&t.config.chart.type!=="area"||t.globals.comboCharts||t.config.tooltip.intersect||(l+=" no-pointer-events");var c=i.getMarkerConfig({cssClass:l,seriesIndex:Number(o.getAttribute("data:realIndex"))});(a=e.drawMarker(0,0,c)).node.setAttribute("default-marker-size",0);var h=document.createElementNS(t.globals.SVGNS,"g");h.classList.add("apexcharts-series-markers"),h.appendChild(a.node),o.appendChild(h)}}}},{key:"enlargeCurrentPoint",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,n=this.w;n.config.chart.type!=="bubble"&&this.newPointSize(t,e);var o=e.getAttribute("cx"),a=e.getAttribute("cy");if(i!==null&&s!==null&&(o=i,a=s),this.tooltipPosition.moveXCrosshairs(o),!this.fixedTooltip){if(n.config.chart.type==="radar"){var l=this.ttCtx.getElGrid().getBoundingClientRect();o=this.ttCtx.e.clientX-l.left}this.tooltipPosition.moveTooltip(o,a,n.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var e=this.w,i=this,s=this.ttCtx,n=t,o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=e.config.markers.hover.size,l=0;l<o.length;l++){var c=o[l].getAttribute("rel"),h=o[l].getAttribute("index");if(a===void 0&&(a=e.globals.markers.size[h]+e.config.markers.hover.sizeOffset),n===parseInt(c,10)){i.newPointSize(n,o[l]);var u=o[l].getAttribute("cx"),d=o[l].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(u),s.fixedTooltip||i.tooltipPosition.moveTooltip(u,d,a)}else i.oldPointSize(o[l])}}},{key:"newPointSize",value:function(t,e){var i=this.w,s=i.config.markers.hover.size,n=t===0?e.parentNode.firstChild:e.parentNode.lastChild;if(n.getAttribute("default-marker-size")!=="0"){var o=parseInt(n.getAttribute("index"),10);s===void 0&&(s=i.globals.markers.size[o]+i.config.markers.hover.sizeOffset),s<0&&(s=0);var a=this.ttCtx.tooltipUtil.getPathFromPoint(e,s);e.setAttribute("d",a)}}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size")),i=this.ttCtx.tooltipUtil.getPathFromPoint(t,e);t.setAttribute("d",i)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var i=parseFloat(t[e].getAttribute("default-marker-size"));if(F.isNumber(i)&&i>0){var s=this.ttCtx.tooltipUtil.getPathFromPoint(t[e],i);t[e].setAttribute("d",s)}else t[e].setAttribute("d","M0,0")}}}]),r}(),ZD=function(){function r(t){Q(this,r),this.w=t.w;var e=this.w;this.ttCtx=t,this.isVerticalGroupedRangeBar=!e.globals.isBarHorizontal&&e.config.chart.type==="rangeBar"&&e.config.plotOptions.bar.rangeBarGroupRows}return tt(r,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTreeTooltip",value:function(t){var e=t.e,i=t.opt,s=t.x,n=t.y,o=t.type,a=this.ttCtx,l=this.w;if(e.target.classList.contains("apexcharts-".concat(o,"-rect"))){var c=this.getAttr(e,"i"),h=this.getAttr(e,"j"),u=this.getAttr(e,"cx"),d=this.getAttr(e,"cy"),f=this.getAttr(e,"width"),g=this.getAttr(e,"height");if(a.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:c,j:h,shared:!1,e}),l.globals.capturedSeriesIndex=c,l.globals.capturedDataPointIndex=h,s=u+a.tooltipRect.ttWidth/2+f,n=d+a.tooltipRect.ttHeight/2-g/2,a.tooltipPosition.moveXCrosshairs(u+f/2),s>l.globals.gridWidth/2&&(s=u-a.tooltipRect.ttWidth/2+f),a.w.config.tooltip.followCursor){var p=l.globals.dom.elWrap.getBoundingClientRect();s=l.globals.clientX-p.left-(s>l.globals.gridWidth/2?a.tooltipRect.ttWidth:0),n=l.globals.clientY-p.top-(n>l.globals.gridHeight/2?a.tooltipRect.ttHeight:0)}}return{x:s,y:n}}},{key:"handleMarkerTooltip",value:function(t){var e,i,s=t.e,n=t.opt,o=t.x,a=t.y,l=this.w,c=this.ttCtx;if(s.target.classList.contains("apexcharts-marker")){var h=parseInt(n.paths.getAttribute("cx"),10),u=parseInt(n.paths.getAttribute("cy"),10),d=parseFloat(n.paths.getAttribute("val"));if(i=parseInt(n.paths.getAttribute("rel"),10),e=parseInt(n.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,c.intersect){var f=F.findAncestor(n.paths,"apexcharts-series");f&&(e=parseInt(f.getAttribute("data:realIndex"),10))}if(c.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:e,j:i,shared:!c.showOnIntersect&&l.config.tooltip.shared,e:s}),s.type==="mouseup"&&c.markerClick(s,e,i),l.globals.capturedSeriesIndex=e,l.globals.capturedDataPointIndex=i,o=h,a=u+l.globals.translateY-1.4*c.tooltipRect.ttHeight,c.w.config.tooltip.followCursor){var g=c.getElGrid().getBoundingClientRect();a=c.e.clientY+l.globals.translateY-g.top}d<0&&(a=u),c.marker.enlargeCurrentPoint(i,n.paths,o,a)}return{x:o,y:a}}},{key:"handleBarTooltip",value:function(t){var e,i,s=t.e,n=t.opt,o=this.w,a=this.ttCtx,l=a.getElTooltip(),c=0,h=0,u=0,d=this.getBarTooltipXY({e:s,opt:n});if(d.j!==null||d.barHeight!==0||d.barWidth!==0){e=d.i;var f=d.j;if(o.globals.capturedSeriesIndex=e,o.globals.capturedDataPointIndex=f,o.globals.isBarHorizontal&&a.tooltipUtil.hasBars()||!o.config.tooltip.shared?(h=d.x,u=d.y,i=Array.isArray(o.config.stroke.width)?o.config.stroke.width[e]:o.config.stroke.width,c=h):o.globals.comboCharts||o.config.tooltip.shared||(c/=2),isNaN(u)&&(u=o.globals.svgHeight-a.tooltipRect.ttHeight),parseInt(n.paths.parentNode.getAttribute("data:realIndex"),10),h+a.tooltipRect.ttWidth>o.globals.gridWidth?h-=a.tooltipRect.ttWidth:h<0&&(h=0),a.w.config.tooltip.followCursor){var g=a.getElGrid().getBoundingClientRect();u=a.e.clientY-g.top}a.tooltip===null&&(a.tooltip=o.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),o.config.tooltip.shared||(o.globals.comboBarCount>0?a.tooltipPosition.moveXCrosshairs(c+i/2):a.tooltipPosition.moveXCrosshairs(c)),!a.fixedTooltip&&(!o.config.tooltip.shared||o.globals.isBarHorizontal&&a.tooltipUtil.hasBars())&&(u=u+o.globals.translateY-a.tooltipRect.ttHeight/2,l.style.left=h+o.globals.translateX+"px",l.style.top=u+"px")}}},{key:"getBarTooltipXY",value:function(t){var e=this,i=t.e,s=t.opt,n=this.w,o=null,a=this.ttCtx,l=0,c=0,h=0,u=0,d=0,f=i.target.classList;if(f.contains("apexcharts-bar-area")||f.contains("apexcharts-candlestick-area")||f.contains("apexcharts-boxPlot-area")||f.contains("apexcharts-rangebar-area")){var g=i.target,p=g.getBoundingClientRect(),b=s.elGrid.getBoundingClientRect(),m=p.height;d=p.height;var x=p.width,v=parseInt(g.getAttribute("cx"),10),w=parseInt(g.getAttribute("cy"),10);u=parseFloat(g.getAttribute("barWidth"));var y=i.type==="touchmove"?i.touches[0].clientX:i.clientX;o=parseInt(g.getAttribute("j"),10),l=parseInt(g.parentNode.getAttribute("rel"),10)-1;var A=g.getAttribute("data-range-y1"),C=g.getAttribute("data-range-y2");n.globals.comboCharts&&(l=parseInt(g.parentNode.getAttribute("data:realIndex"),10));var M=function(B){return n.globals.isXNumeric?v-x/2:e.isVerticalGroupedRangeBar?v+x/2:v-a.dataPointsDividedWidth+x/2},O=function(){return w-a.dataPointsDividedHeight+m/2-a.tooltipRect.ttHeight/2};a.tooltipLabels.drawSeriesTexts({ttItems:s.ttItems,i:l,j:o,y1:A?parseInt(A,10):null,y2:C?parseInt(C,10):null,shared:!a.showOnIntersect&&n.config.tooltip.shared,e:i}),n.config.tooltip.followCursor?n.globals.isBarHorizontal?(c=y-b.left+15,h=O()):(c=M(),h=i.clientY-b.top-a.tooltipRect.ttHeight/2-15):n.globals.isBarHorizontal?((c=v)<a.xyRatios.baseLineInvertedY&&(c=v-a.tooltipRect.ttWidth),h=O()):(c=M(),h=w)}return{x:c,y:h,barHeight:d,barWidth:u,i:l,j:o}}}]),r}(),JD=function(){function r(t){Q(this,r),this.w=t.w,this.ttCtx=t}return tt(r,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,i=t.config.xaxis.position==="bottom";e.xaxisOffY=i?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var s=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",n=t.globals.dom.elWrap;e.isXAxisTooltipEnabled&&t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",s+" apexcharts-theme-"+t.config.tooltip.theme),n.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,e=this.ttCtx,i=0;i<t.config.yaxis.length;i++){var s=t.config.yaxis[i].opposite||t.config.yaxis[i].crosshairs.opposite;e.yaxisOffX=s?t.globals.gridWidth+1:1;var n="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,s?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),o=t.globals.dom.elWrap;t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))===null&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+t.config.tooltip.theme),o.appendChild(e.yaxisTooltip),i===0&&(e.yaxisTooltipText=[]),e.yaxisTooltipText[i]=document.createElement("div"),e.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[i]))}}},{key:"setXCrosshairWidth",value:function(){var t=this.w,e=this.ttCtx,i=e.getElXCrosshairs();if(e.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var s=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(s!==null&&t.config.xaxis.crosshairs.width==="barWidth"){var n=parseFloat(s.getAttribute("barWidth"));e.xcrosshairsWidth=n}else if(t.config.xaxis.crosshairs.width==="tickWidth"){var o=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/o}}else if(t.config.xaxis.crosshairs.width==="tickWidth"){var a=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/a}else if(t.config.xaxis.crosshairs.width==="barWidth"){var l=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(l!==null){var c=parseFloat(l.getAttribute("barWidth"));e.xcrosshairsWidth=c}else e.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(e.xcrosshairsWidth=0),i!==null&&e.xcrosshairsWidth>0&&i.setAttribute("width",e.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,i){var s=this.ttCtx,n=this.w,o=n.globals,a=o.seriesYAxisMap[t];if(s.yaxisTooltips[t]&&a.length>0){var l=o.yLabelFormatters[t],c=s.getElGrid().getBoundingClientRect(),h=a[0],u=0;i.yRatio.length>1&&(u=h);var d=(e-c.top)*i.yRatio[u],f=o.maxYArr[h]-o.minYArr[h],g=o.minYArr[h]+(f-d);n.config.yaxis[t].reversed&&(g=o.maxYArr[h]-(f-d)),s.tooltipPosition.moveYCrosshairs(e-c.top),s.yaxisTooltipText[t].innerHTML=l(g),s.tooltipPosition.moveYAxisTooltip(t)}}}]),r}(),N1=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w;var e=this.w;this.tConfig=e.config.tooltip,this.tooltipUtil=new kA(this),this.tooltipLabels=new $D(this),this.tooltipPosition=new SA(this),this.marker=new KD(this),this.intersect=new ZD(this),this.axesTooltip=new JD(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!e.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return tt(r,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl?t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var e=this.w;this.xyRatios=t,this.isXAxisTooltipEnabled=e.config.xaxis.tooltip.enabled&&e.globals.axisCharts,this.yaxisTooltips=e.config.yaxis.map(function(o,a){return!!(o.show&&o.tooltip.enabled&&e.globals.axisCharts)}),this.allTooltipSeriesGroups=[],e.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),e.config.tooltip.cssClass&&i.classList.add(e.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),e.globals.dom.elWrap.appendChild(i),e.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var s=new Ba(this.ctx);this.xAxisTicksPositions=s.getXAxisTicksPositions()}if(!e.globals.comboCharts&&!this.tConfig.intersect&&e.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),e.config.markers.size!==0&&e.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),e.globals.collapsedSeries.length!==e.globals.series.length){this.dataPointsDividedHeight=e.globals.gridHeight/e.globals.dataPoints,this.dataPointsDividedWidth=e.globals.gridWidth/e.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var n=e.globals.series.length;(e.globals.xyCharts||e.globals.comboCharts)&&this.tConfig.shared&&(n=this.showOnIntersect?1:e.globals.series.length),this.legendLabels=e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(n),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var e=this,i=this.w,s=[],n=this.getElTooltip(),o=function(l){var c=document.createElement("div");c.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(l)),c.style.order=i.config.tooltip.inverseOrder?t-l:l+1;var h=document.createElement("span");h.classList.add("apexcharts-tooltip-marker"),h.style.color=i.globals.colors[l];var u=i.config.markers.shape,d=u;Array.isArray(u)&&(d=u[l]),h.setAttribute("shape",d),c.appendChild(h);var f=document.createElement("div");f.classList.add("apexcharts-tooltip-text"),f.style.fontFamily=e.tConfig.style.fontFamily||i.config.chart.fontFamily,f.style.fontSize=e.tConfig.style.fontSize,["y","goals","z"].forEach(function(g){var p=document.createElement("div");p.classList.add("apexcharts-tooltip-".concat(g,"-group"));var b=document.createElement("span");b.classList.add("apexcharts-tooltip-text-".concat(g,"-label")),p.appendChild(b);var m=document.createElement("span");m.classList.add("apexcharts-tooltip-text-".concat(g,"-value")),p.appendChild(m),f.appendChild(p)}),c.appendChild(f),n.appendChild(c),s.push(c)},a=0;a<t;a++)o(a);return s}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,i=this.getElTooltip(),s=!(e!=="bar"&&e!=="candlestick"&&e!=="boxPlot"&&e!=="rangeBar"),n=e==="area"||e==="line"||e==="scatter"||e==="bubble"||e==="radar",o=t.globals.dom.Paper.node,a=this.getElGrid();a&&(this.seriesBound=a.getBoundingClientRect());var l,c=[],h=[],u={hoverArea:o,elGrid:a,tooltipEl:i,tooltipY:c,tooltipX:h,ttItems:this.ttItems};if(t.globals.axisCharts&&(n?l=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):s?l=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):e!=="heatmap"&&e!=="treemap"||(l=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),l&&l.length))for(var d=0;d<l.length;d++)c.push(l[d].getAttribute("cy")),h.push(l[d].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||s&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([o],u);else if(s&&!t.globals.comboCharts||n&&this.showOnIntersect)this.addDatapointEventsListeners(u);else if(!t.globals.axisCharts||e==="heatmap"||e==="treemap"){var f=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(f,u)}if(this.showOnIntersect){var g=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");g.length>0&&this.addPathsEventListeners(g,u),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(u)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),i=e.getBoundingClientRect(),s=i.width+10,n=i.height+10,o=this.tConfig.fixed.offsetX,a=this.tConfig.fixed.offsetY,l=this.tConfig.fixed.position.toLowerCase();return l.indexOf("right")>-1&&(o=o+t.globals.svgWidth-s+10),l.indexOf("bottom")>-1&&(a=a+t.globals.svgHeight-n-10),e.style.left=o+"px",e.style.top=a+"px",{x:o,y:a,ttWidth:s,ttHeight:n}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(t,e){for(var i=this,s=function(o){var a={paths:t[o],tooltipEl:e.tooltipEl,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:e.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(l){return t[o].addEventListener(l,i.onSeriesHover.bind(i,a),{capture:!1,passive:!0})})},n=0;n<t.length;n++)s(n)}},{key:"onSeriesHover",value:function(t,e){var i=this,s=Date.now()-this.lastHoverTime;s>=20?this.seriesHover(t,e):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){i.seriesHover(t,e)},20-s))}},{key:"seriesHover",value:function(t,e){var i=this;this.lastHoverTime=Date.now();var s=[],n=this.w;n.config.chart.group&&(s=this.ctx.getGroupedCharts()),n.globals.axisCharts&&(n.globals.minX===-1/0&&n.globals.maxX===1/0||n.globals.dataPoints===0)||(s.length?s.forEach(function(o){var a=i.getElTooltip(o),l={paths:t.paths,tooltipEl:a,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:o.w.globals.tooltip.ttItems};o.w.globals.minX===i.w.globals.minX&&o.w.globals.maxX===i.w.globals.maxX&&o.w.globals.tooltip.seriesHoverByContext({chartCtx:o,ttCtx:o.w.globals.tooltip,opt:l,e})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,i=t.ttCtx,s=t.opt,n=t.e,o=e.w,a=this.getElTooltip(e);a&&(i.tooltipRect={x:0,y:0,ttWidth:a.getBoundingClientRect().width,ttHeight:a.getBoundingClientRect().height},i.e=n,i.tooltipUtil.hasBars()&&!o.globals.comboCharts&&!i.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new fi(e).toggleSeriesOnHover(n,n.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),o.globals.axisCharts?i.axisChartsTooltips({e:n,opt:s,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:n,opt:s,tooltipRect:i.tooltipRect}))}},{key:"axisChartsTooltips",value:function(t){var e,i,s=t.e,n=t.opt,o=this.w,a=n.elGrid.getBoundingClientRect(),l=s.type==="touchmove"?s.touches[0].clientX:s.clientX,c=s.type==="touchmove"?s.touches[0].clientY:s.clientY;if(this.clientY=c,this.clientX=l,o.globals.capturedSeriesIndex=-1,o.globals.capturedDataPointIndex=-1,c<a.top||c>a.top+a.height)this.handleMouseOut(n);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!o.config.tooltip.shared){var h=parseInt(n.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(h)<0)return void this.handleMouseOut(n)}var u=this.getElTooltip(),d=this.getElXCrosshairs(),f=[];o.config.chart.group&&(f=this.ctx.getSyncedCharts());var g=o.globals.xyCharts||o.config.chart.type==="bar"&&!o.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||o.globals.comboCharts&&this.tooltipUtil.hasBars();if(s.type==="mousemove"||s.type==="touchmove"||s.type==="mouseup"){if(o.globals.collapsedSeries.length+o.globals.ancillaryCollapsedSeries.length===o.globals.series.length)return;d!==null&&d.classList.add("apexcharts-active");var p=this.yaxisTooltips.filter(function(x){return x===!0});if(this.ycrosshairs!==null&&p.length&&this.ycrosshairs.classList.add("apexcharts-active"),g&&!this.showOnIntersect||f.length>1)this.handleStickyTooltip(s,l,c,n);else if(o.config.chart.type==="heatmap"||o.config.chart.type==="treemap"){var b=this.intersect.handleHeatTreeTooltip({e:s,opt:n,x:e,y:i,type:o.config.chart.type});e=b.x,i=b.y,u.style.left=e+"px",u.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:s,opt:n}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:s,opt:n,x:e,y:i});if(this.yaxisTooltips.length)for(var m=0;m<o.config.yaxis.length;m++)this.axesTooltip.drawYaxisTooltipText(m,c,this.xyRatios);o.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),n.tooltipEl.classList.add("apexcharts-active")}else s.type!=="mouseout"&&s.type!=="touchend"||this.handleMouseOut(n)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,i=t.opt,s=t.tooltipRect,n=this.w,o=i.paths.getAttribute("rel"),a=this.getElTooltip(),l=n.globals.dom.elWrap.getBoundingClientRect();if(e.type==="mousemove"||e.type==="touchmove"){n.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),a.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(o,10)-1,shared:!1});var c=n.globals.clientX-l.left-s.ttWidth/2,h=n.globals.clientY-l.top-s.ttHeight-10;if(a.style.left=c+"px",a.style.top=h+"px",n.config.legend.tooltipHoverFormatter){var u=o-1,d=(0,n.config.legend.tooltipHoverFormatter)(this.legendLabels[u].getAttribute("data:default-text"),{seriesIndex:u,dataPointIndex:u,w:n});this.legendLabels[u].innerHTML=d}}else e.type!=="mouseout"&&e.type!=="touchend"||(a.classList.remove("apexcharts-active"),n.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),n.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(f){var g=f.getAttribute("data:default-text");f.innerHTML=decodeURIComponent(g)}))}},{key:"handleStickyTooltip",value:function(t,e,i,s){var n=this.w,o=this.tooltipUtil.getNearestValues({context:this,hoverArea:s.hoverArea,elGrid:s.elGrid,clientX:e,clientY:i}),a=o.j,l=o.capturedSeries;n.globals.collapsedSeriesIndices.includes(l)&&(l=null);var c=s.elGrid.getBoundingClientRect();if(o.hoverX<0||o.hoverX>c.width)this.handleMouseOut(s);else if(l!==null)this.handleStickyCapturedSeries(t,l,s,a);else if(this.tooltipUtil.isXoverlap(a)||n.globals.isBarHorizontal){var h=n.globals.series.findIndex(function(u,d){return!n.globals.collapsedSeriesIndices.includes(d)});this.create(t,this,h,a,s.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(t,e,i,s){var n=this.w;if(!this.tConfig.shared&&n.globals.series[e][s]===null)return void this.handleMouseOut(i);if(n.globals.series[e][s]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(s)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,s,i.ttItems):this.create(t,this,e,s,i.ttItems,!1);else if(this.tooltipUtil.isXoverlap(s)){var o=n.globals.series.findIndex(function(a,l){return!n.globals.collapsedSeriesIndices.includes(l)});this.create(t,this,o,s,i.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new U(this.ctx),i=t.globals.dom.Paper.find(".apexcharts-bar-area"),s=0;s<i.length;s++)e.pathMouseLeave(i[s])}},{key:"handleMouseOut",value:function(t){var e=this.w,i=this.getElXCrosshairs();if(e.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),e.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),i!==null&&i.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var s=0;s<this.yaxisTTEls.length;s++)this.yaxisTTEls[s].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(n){var o=n.getAttribute("data:default-text");n.innerHTML=decodeURIComponent(o)})}},{key:"markerClick",value:function(t,e,i){var s=this.w;typeof s.config.chart.events.markerClick=="function"&&s.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:s}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:s}])}},{key:"create",value:function(t,e,i,s,n){var o,a,l,c,h,u,d,f,g,p,b,m,x,v,w,y,A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,C=this.w,M=e;t.type==="mouseup"&&this.markerClick(t,i,s),A===null&&(A=this.tConfig.shared);var O=this.tooltipUtil.hasMarkers(i),B=this.tooltipUtil.getElBars(),_=function(){C.globals.markers.largestSize>0?M.marker.enlargePoints(s):M.tooltipPosition.moveDynamicPointsOnHover(s)};if(C.config.legend.tooltipHoverFormatter){var z=C.config.legend.tooltipHoverFormatter,N=Array.from(this.legendLabels);N.forEach(function(X){var H=X.getAttribute("data:default-text");X.innerHTML=decodeURIComponent(H)});for(var E=0;E<N.length;E++){var I=N[E],S=parseInt(I.getAttribute("i"),10),R=decodeURIComponent(I.getAttribute("data:default-text")),L=z(R,{seriesIndex:A?S:i,dataPointIndex:s,w:C});if(A)I.innerHTML=C.globals.collapsedSeriesIndices.indexOf(S)<0?L:R;else if(I.innerHTML=S===i?L:R,i===S)break}}var q=K(K({ttItems:n,i,j:s},((o=C.globals.seriesRange)===null||o===void 0||(a=o[i])===null||a===void 0||(l=a[s])===null||l===void 0||(c=l.y[0])===null||c===void 0?void 0:c.y1)!==void 0&&{y1:(h=C.globals.seriesRange)===null||h===void 0||(u=h[i])===null||u===void 0||(d=u[s])===null||d===void 0||(f=d.y[0])===null||f===void 0?void 0:f.y1}),((g=C.globals.seriesRange)===null||g===void 0||(p=g[i])===null||p===void 0||(b=p[s])===null||b===void 0||(m=b.y[0])===null||m===void 0?void 0:m.y2)!==void 0&&{y2:(x=C.globals.seriesRange)===null||x===void 0||(v=x[i])===null||v===void 0||(w=v[s])===null||w===void 0||(y=w.y[0])===null||y===void 0?void 0:y.y2});if(A){if(M.tooltipLabels.drawSeriesTexts(K(K({},q),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),O)_();else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(B),this.barSeriesHeight>0)){var T=new U(this.ctx),k=C.globals.dom.Paper.find(".apexcharts-bar-area[j='".concat(s,"']"));this.deactivateHoverFilter(),M.tooltipPosition.moveStickyTooltipOverBars(s,i),M.tooltipUtil.getAllMarkers(!0).length&&_();for(var D=0;D<k.length;D++)T.pathMouseEnter(k[D])}}else M.tooltipLabels.drawSeriesTexts(K({shared:!1},q)),this.tooltipUtil.hasBars()&&M.tooltipPosition.moveStickyTooltipOverBars(s,i),O&&M.tooltipPosition.moveMarkers(i,s)}}]),r}(),QD=function(){function r(t){Q(this,r),this.w=t.w,this.barCtx=t,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return tt(r,[{key:"handleBarDataLabels",value:function(t){var e,i,s=t.x,n=t.y,o=t.y1,a=t.y2,l=t.i,c=t.j,h=t.realIndex,u=t.columnGroupIndex,d=t.series,f=t.barHeight,g=t.barWidth,p=t.barXPosition,b=t.barYPosition,m=t.visibleSeries,x=t.renderedPath,v=this.w,w=new U(this.barCtx.ctx),y=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[h]:this.barCtx.strokeWidth;v.globals.isXNumeric&&!v.globals.isBarHorizontal?(e=s+parseFloat(g*(m+1)),i=n+parseFloat(f*(m+1))-y):(e=s+parseFloat(g*m),i=n+parseFloat(f*m));var A,C=null,M=s,O=n,B={},_=v.config.dataLabels,z=this.barCtx.barOptions.dataLabels,N=this.barCtx.barOptions.dataLabels.total;b!==void 0&&this.barCtx.isRangeBar&&(i=b,O=b),p!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(e=p,M=p);var E=_.offsetX,I=_.offsetY,S={width:0,height:0};if(v.config.dataLabels.enabled){var R=v.globals.series[l][c];S=w.getTextRects(v.config.dataLabels.formatter?v.config.dataLabels.formatter(R,K(K({},v),{},{seriesIndex:l,dataPointIndex:c,w:v})):v.globals.yLabelFormatters[0](R),parseFloat(_.style.fontSize))}var L={x:s,y:n,i:l,j:c,realIndex:h,columnGroupIndex:u,renderedPath:x,bcx:e,bcy:i,barHeight:f,barWidth:g,textRects:S,strokeWidth:y,dataLabelsX:M,dataLabelsY:O,dataLabelsConfig:_,barDataLabelsConfig:z,barTotalDataLabelsConfig:N,offX:E,offY:I};return B=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(L):this.calculateColumnsDataLabelsPosition(L),x.attr({cy:B.bcy,cx:B.bcx,j:c,val:v.globals.series[l][c],barHeight:f,barWidth:g}),A=this.drawCalculatedDataLabels({x:B.dataLabelsX,y:B.dataLabelsY,val:this.barCtx.isRangeBar?[o,a]:v.config.chart.stackType==="100%"?d[h][c]:v.globals.series[h][c],i:h,j:c,barWidth:g,barHeight:f,textRects:S,dataLabelsConfig:_}),v.config.chart.stacked&&N.enabled&&(C=this.drawTotalDataLabels({x:B.totalDataLabelsX,y:B.totalDataLabelsY,barWidth:g,barHeight:f,realIndex:h,textAnchor:B.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:h,j:c}),dataLabelsConfig:_,barTotalDataLabelsConfig:N})),{dataLabels:A,totalDataLabels:C}}},{key:"getStackedTotalDataLabel",value:function(t){var e=t.realIndex,i=t.j,s=this.w,n=this.barCtx.stackedSeriesTotals[i];return this.totalFormatter&&(n=this.totalFormatter(n,K(K({},s),{},{seriesIndex:e,dataPointIndex:i,w:s}))),n}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var e=this,i=this.w,s=t.i,n=t.j,o=t.realIndex;t.columnGroupIndex;var a,l,c=t.y,h=t.bcx,u=t.barWidth,d=t.barHeight,f=t.textRects,g=t.dataLabelsX,p=t.dataLabelsY,b=t.dataLabelsConfig,m=t.barDataLabelsConfig,x=t.barTotalDataLabelsConfig,v=t.strokeWidth,w=t.offX,y=t.offY,A=h;d=Math.abs(d);var C=i.config.plotOptions.bar.dataLabels.orientation==="vertical",M=this.barCtx.barHelpers.getZeroValueEncounters({i:s,j:n}).zeroEncounters;h-=v/2;var O=i.globals.gridWidth/i.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?g+=u/2:(g=i.globals.isXNumeric?h-u/2+w:h-O+u/2+w,M>0&&i.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(g-=u*M)),C&&(g=g+f.height/2-v/2-2);var B=i.globals.series[s][n]<0,_=c;switch(this.barCtx.isReversed&&(_=c+(B?d:-d)),m.position){case"center":p=C?B?_-d/2+y:_+d/2-y:B?_-d/2+f.height/2+y:_+d/2+f.height/2-y;break;case"bottom":p=C?B?_-d+y:_+d-y:B?_-d+f.height+v+y:_+d-f.height/2+v-y;break;case"top":p=C?B?_+y:_-y:B?_-f.height/2-y:_+f.height+y}var z=_;if(i.globals.seriesGroups.forEach(function(I){var S;(S=e.barCtx[I.join(",")])===null||S===void 0||S.prevY.forEach(function(R){z=B?Math.max(R[n],z):Math.min(R[n],z)})}),this.barCtx.lastActiveBarSerieIndex===o&&x.enabled){var N=new U(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:o,j:n}),b.fontSize);a=B?z-N.height/2-y-x.offsetY+18:z+N.height+y+x.offsetY-18;var E=O;l=A+(i.globals.isXNumeric?-u*i.globals.barGroups.length/2:i.globals.barGroups.length*u/2-(i.globals.barGroups.length-1)*u-E)+x.offsetX}return i.config.chart.stacked||(p<0?p=0+v:p+f.height/3>i.globals.gridHeight&&(p=i.globals.gridHeight-v)),{bcx:h,bcy:c,dataLabelsX:g,dataLabelsY:p,totalDataLabelsX:l,totalDataLabelsY:a,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this,i=this.w,s=t.x,n=t.i,o=t.j,a=t.realIndex,l=t.bcy,c=t.barHeight,h=t.barWidth,u=t.textRects,d=t.dataLabelsX,f=t.strokeWidth,g=t.dataLabelsConfig,p=t.barDataLabelsConfig,b=t.barTotalDataLabelsConfig,m=t.offX,x=t.offY,v=i.globals.gridHeight/i.globals.dataPoints;h=Math.abs(h);var w,y,A=l-(this.barCtx.isRangeBar?0:v)+c/2+u.height/2+x-3,C="start",M=i.globals.series[n][o]<0,O=s;switch(this.barCtx.isReversed&&(O=s+(M?-h:h),C=M?"start":"end"),p.position){case"center":d=M?O+h/2-m:Math.max(u.width/2,O-h/2)+m;break;case"bottom":d=M?O+h-f-m:O-h+f+m;break;case"top":d=M?O-f-m:O-f+m}var B=O;if(i.globals.seriesGroups.forEach(function(z){var N;(N=e.barCtx[z.join(",")])===null||N===void 0||N.prevX.forEach(function(E){B=M?Math.min(E[o],B):Math.max(E[o],B)})}),this.barCtx.lastActiveBarSerieIndex===a&&b.enabled){var _=new U(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:a,j:o}),g.fontSize);M?(w=B-f-m-b.offsetX,C="end"):w=B+m+b.offsetX+(this.barCtx.isReversed?-(h+f):f),y=A-u.height/2+_.height/2+b.offsetY+f,i.globals.barGroups.length>1&&(y-=i.globals.barGroups.length/2*(c/2))}return i.config.chart.stacked||(g.textAnchor==="start"?d-u.width<0?d=M?u.width+f:f:d+u.width>i.globals.gridWidth&&(d=M?i.globals.gridWidth-f:i.globals.gridWidth-u.width-f):g.textAnchor==="middle"?d-u.width/2<0?d=u.width/2+f:d+u.width/2>i.globals.gridWidth&&(d=i.globals.gridWidth-u.width/2-f):g.textAnchor==="end"&&(d<1?d=u.width+f:d+1>i.globals.gridWidth&&(d=i.globals.gridWidth-u.width-f))),{bcx:s,bcy:l,dataLabelsX:d,dataLabelsY:A,totalDataLabelsX:w,totalDataLabelsY:y,totalDataLabelsAnchor:C}}},{key:"drawCalculatedDataLabels",value:function(t){var e=t.x,i=t.y,s=t.val,n=t.i,o=t.j,a=t.textRects,l=t.barHeight,c=t.barWidth,h=t.dataLabelsConfig,u=this.w,d="rotate(0)";u.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(d="rotate(-90, ".concat(e,", ").concat(i,")"));var f=new ao(this.barCtx.ctx),g=new U(this.barCtx.ctx),p=h.formatter,b=null,m=u.globals.collapsedSeriesIndices.indexOf(n)>-1;if(h.enabled&&!m){b=g.group({class:"apexcharts-data-labels",transform:d});var x="";s!==void 0&&(x=p(s,K(K({},u),{},{seriesIndex:n,dataPointIndex:o,w:u}))),!s&&u.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(x="");var v=u.globals.series[n][o]<0,w=u.config.plotOptions.bar.dataLabels.position;u.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(w==="top"&&(h.textAnchor=v?"end":"start"),w==="center"&&(h.textAnchor="middle"),w==="bottom"&&(h.textAnchor=v?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<g.getTextRects(x,parseFloat(h.style.fontSize)).width&&(x=""),u.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?a.width/1.6>Math.abs(c)&&(x=""):a.height/1.6>Math.abs(l)&&(x=""));var y=K({},h);this.barCtx.isHorizontal&&s<0&&(h.textAnchor==="start"?y.textAnchor="end":h.textAnchor==="end"&&(y.textAnchor="start")),f.plotDataLabelsText({x:e,y:i,text:x,i:n,j:o,parent:b,dataLabelsConfig:y,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return b}},{key:"drawTotalDataLabels",value:function(t){var e=t.x,i=t.y,s=t.val,n=t.realIndex,o=t.textAnchor,a=t.barTotalDataLabelsConfig;this.w;var l,c=new U(this.barCtx.ctx);return a.enabled&&e!==void 0&&i!==void 0&&this.barCtx.lastActiveBarSerieIndex===n&&(l=c.drawText({x:e,y:i,foreColor:a.style.color,text:s,textAnchor:o,fontFamily:a.style.fontFamily,fontSize:a.style.fontSize,fontWeight:a.style.fontWeight})),l}}]),r}(),tF=function(){function r(t){Q(this,r),this.w=t.w,this.barCtx=t}return tt(r,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<t.length;i++)if(t[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[i].length),e.globals.isXNumeric)for(var s=0;s<t[i].length;s++)e.globals.seriesX[i][s]>e.globals.minX&&e.globals.seriesX[i][s]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(e.globals.series),this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],e.globals.comboCharts||this.checkZeroSeries({series:t})}},{key:"initialPositions",value:function(t){var e,i,s,n,o,a,l,c,h=this.w,u=h.globals.dataPoints;this.barCtx.isRangeBar&&(u=h.globals.labels.length);var d=this.barCtx.seriesLen;if(h.config.plotOptions.bar.rangeBarGroupRows&&(d=1),this.barCtx.isHorizontal)o=(s=h.globals.gridHeight/u)/d,h.globals.isXNumeric&&(o=(s=h.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),o=o*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(o=parseInt(this.barCtx.barOptions.barHeight,10)),c=this.barCtx.baseLineInvertedY+h.globals.padHorizontal+(this.barCtx.isReversed?h.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(c=h.globals.gridWidth/2),i=(s-o*this.barCtx.seriesLen)/2;else{if(n=h.globals.gridWidth/this.barCtx.visibleItems,h.config.xaxis.convertedCatToNumeric&&(n=h.globals.gridWidth/h.globals.dataPoints),a=n/d*parseInt(this.barCtx.barOptions.columnWidth,10)/100,h.globals.isXNumeric){var f=this.barCtx.xRatio;h.globals.minXDiff&&h.globals.minXDiff!==.5&&h.globals.minXDiff/f>0&&(n=h.globals.minXDiff/f),(a=n/d*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(a=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(a=parseInt(this.barCtx.barOptions.columnWidth,10)),l=h.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?h.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),h.globals.isXNumeric?e=this.barCtx.getBarXForNumericXAxis({x:e,j:0,realIndex:t,barWidth:a}).x:e=h.globals.padHorizontal+F.noExponents(n-a*this.barCtx.seriesLen)/2}return h.globals.barHeight=o,h.globals.barWidth=a,{x:e,y:i,yDivision:s,xDivision:n,barHeight:o,barWidth:a,zeroH:l,zeroW:c}}},{key:"initializeStackedPrevVars",value:function(t){t.w.globals.seriesGroups.forEach(function(e){t[e]||(t[e]={}),t[e].prevY=[],t[e].prevX=[],t[e].prevYF=[],t[e].prevXF=[],t[e].prevYVal=[],t[e].prevXVal=[]})}},{key:"initializeStackedXYVars",value:function(t){t.w.globals.seriesGroups.forEach(function(e){t[e]||(t[e]={}),t[e].xArrj=[],t[e].xArrjF=[],t[e].xArrjVal=[],t[e].yArrj=[],t[e].yArrjF=[],t[e].yArrjVal=[]})}},{key:"getPathFillColor",value:function(t,e,i,s){var n,o,a,l,c=this.w,h=this.barCtx.ctx.fill,u=null,d=this.barCtx.barOptions.distributed?i:e,f=!1;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(g){t[e][i]>=g.from&&t[e][i]<=g.to&&(u=g.color,f=!0)}),{color:h.fillPath({seriesNumber:this.barCtx.barOptions.distributed?d:s,dataPointIndex:i,color:u,value:t[e][i],fillConfig:(n=c.config.series[e].data[i])===null||n===void 0?void 0:n.fill,fillType:(o=c.config.series[e].data[i])!==null&&o!==void 0&&(a=o.fill)!==null&&a!==void 0&&a.type?(l=c.config.series[e].data[i])===null||l===void 0?void 0:l.fill.type:Array.isArray(c.config.fill.type)?c.config.fill.type[s]:c.config.fill.type}),useRangeColor:f}}},{key:"getStrokeWidth",value:function(t,e,i){var s=0,n=this.w;return this.barCtx.series[t][e]?this.barCtx.isNullValue=!1:this.barCtx.isNullValue=!0,n.config.stroke.show&&(this.barCtx.isNullValue||(s=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),s}},{key:"createBorderRadiusArr",value:function(t){var e,i=this.w,s=!this.w.config.chart.stacked||i.config.plotOptions.bar.borderRadius<=0,n=t.length,o=0|((e=t[0])===null||e===void 0?void 0:e.length),a=Array.from({length:n},function(){return Array(o).fill(s?"top":"none")});if(s)return a;for(var l=0;l<o;l++){for(var c=[],h=[],u=0,d=0;d<n;d++){var f=t[d][l];f>0?(c.push(d),u++):f<0&&(h.push(d),u++)}if(c.length>0&&h.length===0)if(c.length===1)a[c[0]][l]="both";else{var g,p=c[0],b=c[c.length-1],m=Aa(c);try{for(m.s();!(g=m.n()).done;){var x=g.value;a[x][l]=x===p?"bottom":x===b?"top":"none"}}catch(S){m.e(S)}finally{m.f()}}else if(h.length>0&&c.length===0)if(h.length===1)a[h[0]][l]="both";else{var v,w=Math.max.apply(Math,h),y=Math.min.apply(Math,h),A=Aa(h);try{for(A.s();!(v=A.n()).done;){var C=v.value;a[C][l]=C===w?"bottom":C===y?"top":"none"}}catch(S){A.e(S)}finally{A.f()}}else if(c.length>0&&h.length>0){var M,O=c[c.length-1],B=Aa(c);try{for(B.s();!(M=B.n()).done;){var _=M.value;a[_][l]=_===O?"top":"none"}}catch(S){B.e(S)}finally{B.f()}var z,N=Math.max.apply(Math,h),E=Aa(h);try{for(E.s();!(z=E.n()).done;){var I=z.value;a[I][l]=I===N?"bottom":"none"}}catch(S){E.e(S)}finally{E.f()}}else u===1&&(a[c[0]||h[0]][l]="both")}return a}},{key:"barBackground",value:function(t){var e=t.j,i=t.i,s=t.x1,n=t.x2,o=t.y1,a=t.y2,l=t.elSeries,c=this.w,h=new U(this.barCtx.ctx),u=new fi(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&u===i){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e%=this.barCtx.barOptions.colors.backgroundBarColors.length);var d=this.barCtx.barOptions.colors.backgroundBarColors[e],f=h.drawRect(s!==void 0?s:0,o!==void 0?o:0,n!==void 0?n:c.globals.gridWidth,a!==void 0?a:c.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,d,this.barCtx.barOptions.colors.backgroundBarOpacity);l.add(f),f.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var e,i=t.barWidth,s=t.barXPosition,n=t.y1,o=t.y2,a=t.strokeWidth,l=t.isReversed,c=t.series,h=t.seriesGroup,u=t.realIndex,d=t.i,f=t.j,g=t.w,p=new U(this.barCtx.ctx);(a=Array.isArray(a)?a[u]:a)||(a=0);var b=i,m=s;(e=g.config.series[u].data[f])!==null&&e!==void 0&&e.columnWidthOffset&&(m=s-g.config.series[u].data[f].columnWidthOffset/2,b=i+g.config.series[u].data[f].columnWidthOffset);var x=a/2,v=m+x,w=m+b-x,y=(c[d][f]>=0?1:-1)*(l?-1:1);n+=.001-x*y,o+=.001+x*y;var A=p.move(v,n),C=p.move(v,n),M=p.line(w,n);if(g.globals.previousPaths.length>0&&(C=this.barCtx.getPreviousPath(u,f,!1)),A=A+p.line(v,o)+p.line(w,o)+M+(g.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[u][f]==="both"?" Z":" z"),C=C+p.line(v,n)+M+M+M+M+M+p.line(v,n)+(g.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[u][f]==="both"?" Z":" z"),this.arrBorderRadius[u][f]!=="none"&&(A=p.roundPathCorners(A,g.config.plotOptions.bar.borderRadius)),g.config.chart.stacked){var O=this.barCtx;(O=this.barCtx[h]).yArrj.push(o-x*y),O.yArrjF.push(Math.abs(n-o+a*y)),O.yArrjVal.push(this.barCtx.series[d][f])}return{pathTo:A,pathFrom:C}}},{key:"getBarpaths",value:function(t){var e,i=t.barYPosition,s=t.barHeight,n=t.x1,o=t.x2,a=t.strokeWidth,l=t.isReversed,c=t.series,h=t.seriesGroup,u=t.realIndex,d=t.i,f=t.j,g=t.w,p=new U(this.barCtx.ctx);(a=Array.isArray(a)?a[u]:a)||(a=0);var b=i,m=s;(e=g.config.series[u].data[f])!==null&&e!==void 0&&e.barHeightOffset&&(b=i-g.config.series[u].data[f].barHeightOffset/2,m=s+g.config.series[u].data[f].barHeightOffset);var x=a/2,v=b+x,w=b+m-x,y=(c[d][f]>=0?1:-1)*(l?-1:1);n+=.001+x*y,o+=.001-x*y;var A=p.move(n,v),C=p.move(n,v);g.globals.previousPaths.length>0&&(C=this.barCtx.getPreviousPath(u,f,!1));var M=p.line(n,w);if(A=A+p.line(o,v)+p.line(o,w)+M+(g.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[u][f]==="both"?" Z":" z"),C=C+p.line(n,v)+M+M+M+M+M+p.line(n,v)+(g.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[u][f]==="both"?" Z":" z"),this.arrBorderRadius[u][f]!=="none"&&(A=p.roundPathCorners(A,g.config.plotOptions.bar.borderRadius)),g.config.chart.stacked){var O=this.barCtx;(O=this.barCtx[h]).xArrj.push(o+x*y),O.xArrjF.push(Math.abs(n-o-a*y)),O.xArrjVal.push(this.barCtx.series[d][f])}return{pathTo:A,pathFrom:C}}},{key:"checkZeroSeries",value:function(t){for(var e=t.series,i=this.w,s=0;s<e.length;s++){for(var n=0,o=0;o<e[i.globals.maxValsInArrayIndex].length;o++)n+=e[s][o];n===0&&this.barCtx.zeroSerieses.push(s)}}},{key:"getXForValue",value:function(t,e){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?e:null;return t!=null&&(i=e+t/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?t/this.barCtx.invertedYRatio:0)),i}},{key:"getYForValue",value:function(t,e,i){var s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?e:null;return t!=null&&(s=e-t/this.barCtx.yRatio[i]+2*(this.barCtx.isReversed?t/this.barCtx.yRatio[i]:0)),s}},{key:"getGoalValues",value:function(t,e,i,s,n,o){var a=this,l=this.w,c=[],h=function(f,g){var p;c.push((Ph(p={},t,t==="x"?a.getXForValue(f,e,!1):a.getYForValue(f,i,o,!1)),Ph(p,"attrs",g),p))};if(l.globals.seriesGoals[s]&&l.globals.seriesGoals[s][n]&&Array.isArray(l.globals.seriesGoals[s][n])&&l.globals.seriesGoals[s][n].forEach(function(f){h(f.value,f)}),this.barCtx.barOptions.isDumbbell&&l.globals.seriesRange.length){var u=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:l.globals.colors,d={strokeHeight:t==="x"?0:l.globals.markers.size[s],strokeWidth:t==="x"?l.globals.markers.size[s]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(u[s])?u[s][0]:u[s]};h(l.globals.seriesRangeStart[s][n],d),h(l.globals.seriesRangeEnd[s][n],K(K({},d),{},{strokeColor:Array.isArray(u[s])?u[s][1]:u[s]}))}return c}},{key:"drawGoalLine",value:function(t){var e=t.barXPosition,i=t.barYPosition,s=t.goalX,n=t.goalY,o=t.barWidth,a=t.barHeight,l=new U(this.barCtx.ctx),c=l.group({className:"apexcharts-bar-goals-groups"});c.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:c.node}),c.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var h=null;return this.barCtx.isHorizontal?Array.isArray(s)&&s.forEach(function(u){if(u.x>=-1&&u.x<=l.w.globals.gridWidth+1){var d=u.attrs.strokeHeight!==void 0?u.attrs.strokeHeight:a/2,f=i+d+a/2;h=l.drawLine(u.x,f-2*d,u.x,f,u.attrs.strokeColor?u.attrs.strokeColor:void 0,u.attrs.strokeDashArray,u.attrs.strokeWidth?u.attrs.strokeWidth:2,u.attrs.strokeLineCap),c.add(h)}}):Array.isArray(n)&&n.forEach(function(u){if(u.y>=-1&&u.y<=l.w.globals.gridHeight+1){var d=u.attrs.strokeWidth!==void 0?u.attrs.strokeWidth:o/2,f=e+d+o/2;h=l.drawLine(f-2*d,u.y,f,u.y,u.attrs.strokeColor?u.attrs.strokeColor:void 0,u.attrs.strokeDashArray,u.attrs.strokeHeight?u.attrs.strokeHeight:2,u.attrs.strokeLineCap),c.add(h)}}),c}},{key:"drawBarShadow",value:function(t){var e=t.prevPaths,i=t.currPaths,s=t.color,n=this.w,o=e.x,a=e.x1,l=e.barYPosition,c=i.x,h=i.x1,u=i.barYPosition,d=l+i.barHeight,f=new U(this.barCtx.ctx),g=new F,p=f.move(a,d)+f.line(o,d)+f.line(c,u)+f.line(h,u)+f.line(a,d)+(n.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[realIndex][j]==="both"?" Z":" z");return f.drawPath({d:p,fill:g.shadeColor(.5,F.rgb2hex(s)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadow apexcharts-decoration-element"})}},{key:"getZeroValueEncounters",value:function(t){var e,i=t.i,s=t.j,n=this.w,o=0,a=0;return(n.config.plotOptions.bar.horizontal?n.globals.series.map(function(l,c){return c}):((e=n.globals.columnSeries)===null||e===void 0?void 0:e.i.map(function(l){return l}))||[]).forEach(function(l){var c=n.globals.seriesPercent[l][s];c&&o++,l<i&&c===0&&a++}),{nonZeroColumns:o,zeroEncounters:a}}},{key:"getGroupIndex",value:function(t){var e=this.w,i=e.globals.seriesGroups.findIndex(function(o){return o.indexOf(e.globals.seriesNames[t])>-1}),s=this.barCtx.columnGroupIndices,n=s.indexOf(i);return n<0&&(s.push(i),n=s.length-1),{groupIndex:i,columnGroupIndex:n}}}]),r}(),lo=function(){function r(t,e){Q(this,r),this.ctx=t,this.w=t.w;var i=this.w;this.barOptions=i.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=i.config.stroke.width,this.isNullValue=!1,this.isRangeBar=i.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!i.globals.isBarHorizontal&&i.globals.seriesRange.length&&i.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=e,this.xyRatios!==null&&(this.xRatio=e.xRatio,this.yRatio=e.yRatio,this.invertedXRatio=e.invertedXRatio,this.invertedYRatio=e.invertedYRatio,this.baseLineY=e.baseLineY,this.baseLineInvertedY=e.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var s=new fi(this.ctx);this.lastActiveBarSerieIndex=s.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var n=s.getBarSeriesIndices(),o=new Yt(this.ctx);this.stackedSeriesTotals=o.getStackedSeriesTotals(this.w.config.series.map(function(a,l){return n.indexOf(l)===-1?l:-1}).filter(function(a){return a!==-1})),this.barHelpers=new tF(this)}return tt(r,[{key:"draw",value:function(t,e){var i=this.w,s=new U(this.ctx),n=new Yt(this.ctx,i);t=n.getLogSeries(t),this.series=t,this.yRatio=n.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var o=s.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var a=0,l=0;a<t.length;a++,l++){var c,h,u,d,f=void 0,g=void 0,p=[],b=[],m=i.globals.comboCharts?e[a]:a,x=this.barHelpers.getGroupIndex(m).columnGroupIndex,v=s.group({class:"apexcharts-series",rel:a+1,seriesName:F.escapeString(i.globals.seriesNames[m]),"data:realIndex":m});this.ctx.series.addCollapsedClassToSeries(v,m),t[a].length>0&&(this.visibleI=this.visibleI+1);var w=0,y=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[m],this.translationsIndex=m);var A=this.translationsIndex;this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var C=this.barHelpers.initialPositions(m);g=C.y,w=C.barHeight,h=C.yDivision,d=C.zeroW,f=C.x,y=C.barWidth,c=C.xDivision,u=C.zeroH,this.isHorizontal||b.push(f+y/2);var M=s.group({class:"apexcharts-datalabels","data:realIndex":m});i.globals.delayedElements.push({el:M.node}),M.node.classList.add("apexcharts-element-hidden");var O=s.group({class:"apexcharts-bar-goals-markers"}),B=s.group({class:"apexcharts-bar-shadows"});i.globals.delayedElements.push({el:B.node}),B.node.classList.add("apexcharts-element-hidden");for(var _=0;_<t[a].length;_++){var z=this.barHelpers.getStrokeWidth(a,_,m),N=null,E={indexes:{i:a,j:_,realIndex:m,translationsIndex:A,bc:l},x:f,y:g,strokeWidth:z,elSeries:v};this.isHorizontal?(N=this.drawBarPaths(K(K({},E),{},{barHeight:w,zeroW:d,yDivision:h})),y=this.series[a][_]/this.invertedYRatio):(N=this.drawColumnPaths(K(K({},E),{},{xDivision:c,barWidth:y,zeroH:u})),w=this.series[a][_]/this.yRatio[A]);var I=this.barHelpers.getPathFillColor(t,a,_,m);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&_>0){var S,R=this.barHelpers.drawBarShadow({color:typeof I.color=="string"&&((S=I.color)===null||S===void 0?void 0:S.indexOf("url"))===-1?I.color:F.hexToRgba(i.globals.colors[a]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:N});B.add(R),i.config.chart.dropShadow.enabled&&new pe(this.ctx).dropShadow(R,i.config.chart.dropShadow,m)}this.pathArr.push(N);var L=this.barHelpers.drawGoalLine({barXPosition:N.barXPosition,barYPosition:N.barYPosition,goalX:N.goalX,goalY:N.goalY,barHeight:w,barWidth:y});L&&O.add(L),g=N.y,f=N.x,_>0&&b.push(f+y/2),p.push(g),this.renderSeries(K(K({realIndex:m,pathFill:I.color},I.useRangeColor?{lineFill:I.color}:{}),{},{j:_,i:a,columnGroupIndex:x,pathFrom:N.pathFrom,pathTo:N.pathTo,strokeWidth:z,elSeries:v,x:f,y:g,series:t,barHeight:Math.abs(N.barHeight?N.barHeight:w),barWidth:Math.abs(N.barWidth?N.barWidth:y),elDataLabelsWrap:M,elGoalsMarkers:O,elBarShadows:B,visibleSeries:this.visibleI,type:"bar"}))}i.globals.seriesXvalues[m]=b,i.globals.seriesYvalues[m]=p,o.add(v)}return o}},{key:"renderSeries",value:function(t){var e=t.realIndex,i=t.pathFill,s=t.lineFill,n=t.j,o=t.i,a=t.columnGroupIndex,l=t.pathFrom,c=t.pathTo,h=t.strokeWidth,u=t.elSeries,d=t.x,f=t.y,g=t.y1,p=t.y2,b=t.series,m=t.barHeight,x=t.barWidth,v=t.barXPosition,w=t.barYPosition,y=t.elDataLabelsWrap,A=t.elGoalsMarkers,C=t.elBarShadows,M=t.visibleSeries,O=t.type,B=t.classes,_=this.w,z=new U(this.ctx);if(!s){var N=typeof _.globals.stroke.colors[e]=="function"?function(L){var q,T=_.config.stroke.colors;return Array.isArray(T)&&T.length>0&&((q=T[L])||(q=""),typeof q=="function")?q({value:_.globals.series[L][n],dataPointIndex:n,w:_}):q}(e):_.globals.stroke.colors[e];s=this.barOptions.distributed?_.globals.stroke.colors[n]:N}_.config.series[o].data[n]&&_.config.series[o].data[n].strokeColor&&(s=_.config.series[o].data[n].strokeColor),this.isNullValue&&(i="none");var E=n/_.config.chart.animations.animateGradually.delay*(_.config.chart.animations.speed/_.globals.dataPoints)/2.4,I=z.renderPaths({i:o,j:n,realIndex:e,pathFrom:l,pathTo:c,stroke:s,strokeWidth:h,strokeLineCap:_.config.stroke.lineCap,fill:i,animationDelay:E,initialSpeed:_.config.chart.animations.speed,dataChangeSpeed:_.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(O,"-area ").concat(B),chartType:O});I.attr("clip-path","url(#gridRectBarMask".concat(_.globals.cuid,")"));var S=_.config.forecastDataPoints;S.count>0&&n>=_.globals.dataPoints-S.count&&(I.node.setAttribute("stroke-dasharray",S.dashArray),I.node.setAttribute("stroke-width",S.strokeWidth),I.node.setAttribute("fill-opacity",S.fillOpacity)),g!==void 0&&p!==void 0&&(I.attr("data-range-y1",g),I.attr("data-range-y2",p)),new pe(this.ctx).setSelectionFilter(I,e,n),u.add(I);var R=new QD(this).handleBarDataLabels({x:d,y:f,y1:g,y2:p,i:o,j:n,series:b,realIndex:e,columnGroupIndex:a,barHeight:m,barWidth:x,barXPosition:v,barYPosition:w,renderedPath:I,visibleSeries:M});return R.dataLabels!==null&&y.add(R.dataLabels),R.totalDataLabels&&y.add(R.totalDataLabels),u.add(y),A&&u.add(A),C&&u.add(C),u}},{key:"drawBarPaths",value:function(t){var e,i=t.indexes,s=t.barHeight,n=t.strokeWidth,o=t.zeroW,a=t.x,l=t.y,c=t.yDivision,h=t.elSeries,u=this.w,d=i.i,f=i.j;if(u.globals.isXNumeric)e=(l=(u.globals.seriesX[d][f]-u.globals.minX)/this.invertedXRatio-s)+s*this.visibleI;else if(u.config.plotOptions.bar.hideZeroBarsWhenGrouped){var g=0,p=0;u.globals.seriesPercent.forEach(function(m,x){m[f]&&g++,x<d&&m[f]===0&&p++}),g>0&&(s=this.seriesLen*s/g),e=l+s*this.visibleI,e-=s*p}else e=l+s*this.visibleI;this.isFunnel&&(o-=(this.barHelpers.getXForValue(this.series[d][f],o)-o)/2),a=this.barHelpers.getXForValue(this.series[d][f],o);var b=this.barHelpers.getBarpaths({barYPosition:e,barHeight:s,x1:o,x2:a,strokeWidth:n,isReversed:this.isReversed,series:this.series,realIndex:i.realIndex,i:d,j:f,w:u});return u.globals.isXNumeric||(l+=c),this.barHelpers.barBackground({j:f,i:d,y1:e-s*this.visibleI,y2:s*this.seriesLen,elSeries:h}),{pathTo:b.pathTo,pathFrom:b.pathFrom,x1:o,x:a,y:l,goalX:this.barHelpers.getGoalValues("x",o,null,d,f),barYPosition:e,barHeight:s}}},{key:"drawColumnPaths",value:function(t){var e,i=t.indexes,s=t.x,n=t.y,o=t.xDivision,a=t.barWidth,l=t.zeroH,c=t.strokeWidth,h=t.elSeries,u=this.w,d=i.realIndex,f=i.translationsIndex,g=i.i,p=i.j,b=i.bc;if(u.globals.isXNumeric){var m=this.getBarXForNumericXAxis({x:s,j:p,realIndex:d,barWidth:a});s=m.x,e=m.barXPosition}else if(u.config.plotOptions.bar.hideZeroBarsWhenGrouped){var x=this.barHelpers.getZeroValueEncounters({i:g,j:p}),v=x.nonZeroColumns,w=x.zeroEncounters;v>0&&(a=this.seriesLen*a/v),e=s+a*this.visibleI,e-=a*w}else e=s+a*this.visibleI;n=this.barHelpers.getYForValue(this.series[g][p],l,f);var y=this.barHelpers.getColumnPaths({barXPosition:e,barWidth:a,y1:l,y2:n,strokeWidth:c,isReversed:this.isReversed,series:this.series,realIndex:d,i:g,j:p,w:u});return u.globals.isXNumeric||(s+=o),this.barHelpers.barBackground({bc:b,j:p,i:g,x1:e-c/2-a*this.visibleI,x2:a*this.seriesLen+c/2,elSeries:h}),{pathTo:y.pathTo,pathFrom:y.pathFrom,x:s,y:n,goalY:this.barHelpers.getGoalValues("y",null,l,g,p,f),barXPosition:e,barWidth:a}}},{key:"getBarXForNumericXAxis",value:function(t){var e=t.x,i=t.barWidth,s=t.realIndex,n=t.j,o=this.w,a=s;return o.globals.seriesX[s].length||(a=o.globals.maxValsInArrayIndex),F.isNumber(o.globals.seriesX[a][n])&&(e=(o.globals.seriesX[a][n]-o.globals.minX)/this.xRatio-i*this.seriesLen/2),{barXPosition:e+i*this.visibleI,x:e}}},{key:"getPreviousPath",value:function(t,e){for(var i,s=this.w,n=0;n<s.globals.previousPaths.length;n++){var o=s.globals.previousPaths[n];o.paths&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(t,10)&&s.globals.previousPaths[n].paths[e]!==void 0&&(i=s.globals.previousPaths[n].paths[e].d)}return i}}]),r}(),P1=function(r){za(e,lo);var t=_a(e);function e(){return Q(this,e),t.apply(this,arguments)}return tt(e,[{key:"draw",value:function(i,s){var n=this,o=this.w;this.graphics=new U(this.ctx),this.bar=new lo(this.ctx,this.xyRatios);var a=new Yt(this.ctx,o);i=a.getLogSeries(i),this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i),o.config.chart.stackType==="100%"&&(i=o.globals.comboCharts?s.map(function(g){return o.globals.seriesPercent[g]}):o.globals.seriesPercent.slice()),this.series=i,this.barHelpers.initializeStackedPrevVars(this);for(var l=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),c=0,h=0,u=function(g,p){var b=void 0,m=void 0,x=void 0,v=void 0,w=o.globals.comboCharts?s[g]:g,y=n.barHelpers.getGroupIndex(w),A=y.groupIndex,C=y.columnGroupIndex;n.groupCtx=n[o.globals.seriesGroups[A]];var M=[],O=[],B=0;n.yRatio.length>1&&(n.yaxisIndex=o.globals.seriesYAxisReverseMap[w][0],B=w),n.isReversed=o.config.yaxis[n.yaxisIndex]&&o.config.yaxis[n.yaxisIndex].reversed;var _=n.graphics.group({class:"apexcharts-series",seriesName:F.escapeString(o.globals.seriesNames[w]),rel:g+1,"data:realIndex":w});n.ctx.series.addCollapsedClassToSeries(_,w);var z=n.graphics.group({class:"apexcharts-datalabels","data:realIndex":w}),N=n.graphics.group({class:"apexcharts-bar-goals-markers"}),E=0,I=0,S=n.initialPositions(c,h,b,m,x,v,B);h=S.y,E=S.barHeight,m=S.yDivision,v=S.zeroW,c=S.x,I=S.barWidth,b=S.xDivision,x=S.zeroH,o.globals.barHeight=E,o.globals.barWidth=I,n.barHelpers.initializeStackedXYVars(n),n.groupCtx.prevY.length===1&&n.groupCtx.prevY[0].every(function(G){return isNaN(G)})&&(n.groupCtx.prevY[0]=n.groupCtx.prevY[0].map(function(){return x}),n.groupCtx.prevYF[0]=n.groupCtx.prevYF[0].map(function(){return 0}));for(var R=0;R<o.globals.dataPoints;R++){var L=n.barHelpers.getStrokeWidth(g,R,w),q={indexes:{i:g,j:R,realIndex:w,translationsIndex:B,bc:p},strokeWidth:L,x:c,y:h,elSeries:_,columnGroupIndex:C,seriesGroup:o.globals.seriesGroups[A]},T=null;n.isHorizontal?(T=n.drawStackedBarPaths(K(K({},q),{},{zeroW:v,barHeight:E,yDivision:m})),I=n.series[g][R]/n.invertedYRatio):(T=n.drawStackedColumnPaths(K(K({},q),{},{xDivision:b,barWidth:I,zeroH:x})),E=n.series[g][R]/n.yRatio[B]);var k=n.barHelpers.drawGoalLine({barXPosition:T.barXPosition,barYPosition:T.barYPosition,goalX:T.goalX,goalY:T.goalY,barHeight:E,barWidth:I});k&&N.add(k),h=T.y,c=T.x,M.push(c),O.push(h);var D=n.barHelpers.getPathFillColor(i,g,R,w),X="",H=o.globals.isBarHorizontal?"apexcharts-flip-x":"apexcharts-flip-y";(n.barHelpers.arrBorderRadius[w][R]==="bottom"&&o.globals.series[w][R]>0||n.barHelpers.arrBorderRadius[w][R]==="top"&&o.globals.series[w][R]<0)&&(X=H),_=n.renderSeries(K(K({realIndex:w,pathFill:D.color},D.useRangeColor?{lineFill:D.color}:{}),{},{j:R,i:g,columnGroupIndex:C,pathFrom:T.pathFrom,pathTo:T.pathTo,strokeWidth:L,elSeries:_,x:c,y:h,series:i,barHeight:E,barWidth:I,elDataLabelsWrap:z,elGoalsMarkers:N,type:"bar",visibleSeries:C,classes:X}))}o.globals.seriesXvalues[w]=M,o.globals.seriesYvalues[w]=O,n.groupCtx.prevY.push(n.groupCtx.yArrj),n.groupCtx.prevYF.push(n.groupCtx.yArrjF),n.groupCtx.prevYVal.push(n.groupCtx.yArrjVal),n.groupCtx.prevX.push(n.groupCtx.xArrj),n.groupCtx.prevXF.push(n.groupCtx.xArrjF),n.groupCtx.prevXVal.push(n.groupCtx.xArrjVal),l.add(_)},d=0,f=0;d<i.length;d++,f++)u(d,f);return l}},{key:"initialPositions",value:function(i,s,n,o,a,l,c){var h,u,d=this.w;if(this.isHorizontal){o=d.globals.gridHeight/d.globals.dataPoints;var f=d.config.plotOptions.bar.barHeight;h=String(f).indexOf("%")===-1?parseInt(f,10):o*parseInt(f,10)/100,l=d.globals.padHorizontal+(this.isReversed?d.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),s=(o-h)/2}else{u=n=d.globals.gridWidth/d.globals.dataPoints;var g=d.config.plotOptions.bar.columnWidth;d.globals.isXNumeric&&d.globals.dataPoints>1?u=(n=d.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(g).indexOf("%")===-1?u=parseInt(g,10):u*=parseInt(g,10)/100,a=this.isReversed?this.baseLineY[c]:d.globals.gridHeight-this.baseLineY[c],i=d.globals.padHorizontal+(n-u)/2}var p=d.globals.barGroups.length||1;return{x:i,y:s,yDivision:o,xDivision:n,barHeight:h/p,barWidth:u/p,zeroH:a,zeroW:l}}},{key:"drawStackedBarPaths",value:function(i){for(var s,n=i.indexes,o=i.barHeight,a=i.strokeWidth,l=i.zeroW,c=i.x,h=i.y,u=i.columnGroupIndex,d=i.seriesGroup,f=i.yDivision,g=i.elSeries,p=this.w,b=h+u*o,m=n.i,x=n.j,v=n.realIndex,w=n.translationsIndex,y=0,A=0;A<this.groupCtx.prevXF.length;A++)y+=this.groupCtx.prevXF[A][x];var C;if((C=d.indexOf(p.config.series[v].name))>0){var M=l;this.groupCtx.prevXVal[C-1][x]<0?M=this.series[m][x]>=0?this.groupCtx.prevX[C-1][x]+y-2*(this.isReversed?y:0):this.groupCtx.prevX[C-1][x]:this.groupCtx.prevXVal[C-1][x]>=0&&(M=this.series[m][x]>=0?this.groupCtx.prevX[C-1][x]:this.groupCtx.prevX[C-1][x]-y+2*(this.isReversed?y:0)),s=M}else s=l;c=this.series[m][x]===null?s:s+this.series[m][x]/this.invertedYRatio-2*(this.isReversed?this.series[m][x]/this.invertedYRatio:0);var O=this.barHelpers.getBarpaths({barYPosition:b,barHeight:o,x1:s,x2:c,strokeWidth:a,isReversed:this.isReversed,series:this.series,realIndex:n.realIndex,seriesGroup:d,i:m,j:x,w:p});return this.barHelpers.barBackground({j:x,i:m,y1:b,y2:o,elSeries:g}),h+=f,{pathTo:O.pathTo,pathFrom:O.pathFrom,goalX:this.barHelpers.getGoalValues("x",l,null,m,x,w),barXPosition:s,barYPosition:b,x:c,y:h}}},{key:"drawStackedColumnPaths",value:function(i){var s=i.indexes,n=i.x,o=i.y,a=i.xDivision,l=i.barWidth,c=i.zeroH,h=i.columnGroupIndex,u=i.seriesGroup,d=i.elSeries,f=this.w,g=s.i,p=s.j,b=s.bc,m=s.realIndex,x=s.translationsIndex;if(f.globals.isXNumeric){var v=f.globals.seriesX[m][p];v||(v=0),n=(v-f.globals.minX)/this.xRatio-l/2*f.globals.barGroups.length}for(var w,y=n+h*l,A=0,C=0;C<this.groupCtx.prevYF.length;C++)A+=isNaN(this.groupCtx.prevYF[C][p])?0:this.groupCtx.prevYF[C][p];var M=g;if(u&&(M=u.indexOf(f.globals.seriesNames[m])),M>0&&!f.globals.isXNumeric||M>0&&f.globals.isXNumeric&&f.globals.seriesX[m-1][p]===f.globals.seriesX[m][p]){var O,B,_,z=Math.min(this.yRatio.length+1,m+1);if(this.groupCtx.prevY[M-1]!==void 0&&this.groupCtx.prevY[M-1].length)for(var N=1;N<z;N++){var E;if(!isNaN((E=this.groupCtx.prevY[M-N])===null||E===void 0?void 0:E[p])){_=this.groupCtx.prevY[M-N][p];break}}for(var I=1;I<z;I++){var S,R;if(((S=this.groupCtx.prevYVal[M-I])===null||S===void 0?void 0:S[p])<0){B=this.series[g][p]>=0?_-A+2*(this.isReversed?A:0):_;break}if(((R=this.groupCtx.prevYVal[M-I])===null||R===void 0?void 0:R[p])>=0){B=this.series[g][p]>=0?_:_+A-2*(this.isReversed?A:0);break}}B===void 0&&(B=f.globals.gridHeight),w=(O=this.groupCtx.prevYF[0])!==null&&O!==void 0&&O.every(function(q){return q===0})&&this.groupCtx.prevYF.slice(1,M).every(function(q){return q.every(function(T){return isNaN(T)})})?c:B}else w=c;o=this.series[g][p]?w-this.series[g][p]/this.yRatio[x]+2*(this.isReversed?this.series[g][p]/this.yRatio[x]:0):w;var L=this.barHelpers.getColumnPaths({barXPosition:y,barWidth:l,y1:w,y2:o,yRatio:this.yRatio[x],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:u,realIndex:s.realIndex,i:g,j:p,w:f});return this.barHelpers.barBackground({bc:b,j:p,i:g,x1:y,x2:l,elSeries:d}),{pathTo:L.pathTo,pathFrom:L.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,c,g,p),barXPosition:y,x:f.globals.isXNumeric?n:n+a,y:o}}}]),e}(),Cg=function(r){za(e,lo);var t=_a(e);function e(){return Q(this,e),t.apply(this,arguments)}return tt(e,[{key:"draw",value:function(i,s,n){var o=this,a=this.w,l=new U(this.ctx),c=a.globals.comboCharts?s:a.config.chart.type,h=new wi(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=a.config.plotOptions.bar.horizontal;var u=new Yt(this.ctx,a);i=u.getLogSeries(i),this.series=i,this.yRatio=u.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i);for(var d=l.group({class:"apexcharts-".concat(c,"-series apexcharts-plot-series")}),f=function(p){o.isBoxPlot=a.config.chart.type==="boxPlot"||a.config.series[p].type==="boxPlot";var b,m,x,v,w=void 0,y=void 0,A=[],C=[],M=a.globals.comboCharts?n[p]:p,O=o.barHelpers.getGroupIndex(M).columnGroupIndex,B=l.group({class:"apexcharts-series",seriesName:F.escapeString(a.globals.seriesNames[M]),rel:p+1,"data:realIndex":M});o.ctx.series.addCollapsedClassToSeries(B,M),i[p].length>0&&(o.visibleI=o.visibleI+1);var _,z,N=0;o.yRatio.length>1&&(o.yaxisIndex=a.globals.seriesYAxisReverseMap[M][0],N=M);var E=o.barHelpers.initialPositions(M);y=E.y,_=E.barHeight,m=E.yDivision,v=E.zeroW,w=E.x,z=E.barWidth,b=E.xDivision,x=E.zeroH,C.push(w+z/2);for(var I=l.group({class:"apexcharts-datalabels","data:realIndex":M}),S=l.group({class:"apexcharts-bar-goals-markers"}),R=function(q){var T=o.barHelpers.getStrokeWidth(p,q,M),k=null,D={indexes:{i:p,j:q,realIndex:M,translationsIndex:N},x:w,y,strokeWidth:T,elSeries:B};k=o.isHorizontal?o.drawHorizontalBoxPaths(K(K({},D),{},{yDivision:m,barHeight:_,zeroW:v})):o.drawVerticalBoxPaths(K(K({},D),{},{xDivision:b,barWidth:z,zeroH:x})),y=k.y,w=k.x;var X=o.barHelpers.drawGoalLine({barXPosition:k.barXPosition,barYPosition:k.barYPosition,goalX:k.goalX,goalY:k.goalY,barHeight:_,barWidth:z});X&&S.add(X),q>0&&C.push(w+z/2),A.push(y),k.pathTo.forEach(function(H,G){var W=!o.isBoxPlot&&o.candlestickOptions.wick.useFillColor?k.color[G]:a.globals.stroke.colors[p],Y=h.fillPath({seriesNumber:M,dataPointIndex:q,color:k.color[G],value:i[p][q]});o.renderSeries({realIndex:M,pathFill:Y,lineFill:W,j:q,i:p,pathFrom:k.pathFrom,pathTo:H,strokeWidth:T,elSeries:B,x:w,y,series:i,columnGroupIndex:O,barHeight:_,barWidth:z,elDataLabelsWrap:I,elGoalsMarkers:S,visibleSeries:o.visibleI,type:a.config.chart.type})})},L=0;L<a.globals.dataPoints;L++)R(L);a.globals.seriesXvalues[M]=C,a.globals.seriesYvalues[M]=A,d.add(B)},g=0;g<i.length;g++)f(g);return d}},{key:"drawVerticalBoxPaths",value:function(i){var s=i.indexes,n=i.x;i.y;var o=i.xDivision,a=i.barWidth,l=i.zeroH,c=i.strokeWidth,h=this.w,u=new U(this.ctx),d=s.i,f=s.j,g=h.config.plotOptions.candlestick.colors,p=this.boxOptions.colors,b=s.realIndex,m=function(I){return Array.isArray(I)?I[b]:I},x=m(g.upward),v=m(g.downward),w=this.yRatio[s.translationsIndex],y=this.getOHLCValue(b,f),A=l,C=l,M=y.o<y.c?[x]:[v];this.isBoxPlot&&(M=[m(p.lower),m(p.upper)]);var O=Math.min(y.o,y.c),B=Math.max(y.o,y.c),_=y.m;h.globals.isXNumeric&&(n=(h.globals.seriesX[b][f]-h.globals.minX)/this.xRatio-a/2);var z=n+a*this.visibleI;this.series[d][f]===void 0||this.series[d][f]===null?(O=l,B=l):(O=l-O/w,B=l-B/w,A=l-y.h/w,C=l-y.l/w,_=l-y.m/w);var N=u.move(z,l),E=u.move(z+a/2,O);return h.globals.previousPaths.length>0&&(E=this.getPreviousPath(b,f,!0)),N=this.isBoxPlot?[u.move(z,O)+u.line(z+a/2,O)+u.line(z+a/2,A)+u.line(z+a/4,A)+u.line(z+a-a/4,A)+u.line(z+a/2,A)+u.line(z+a/2,O)+u.line(z+a,O)+u.line(z+a,_)+u.line(z,_)+u.line(z,O+c/2),u.move(z,_)+u.line(z+a,_)+u.line(z+a,B)+u.line(z+a/2,B)+u.line(z+a/2,C)+u.line(z+a-a/4,C)+u.line(z+a/4,C)+u.line(z+a/2,C)+u.line(z+a/2,B)+u.line(z,B)+u.line(z,_)+"z"]:[u.move(z,B)+u.line(z+a/2,B)+u.line(z+a/2,A)+u.line(z+a/2,B)+u.line(z+a,B)+u.line(z+a,O)+u.line(z+a/2,O)+u.line(z+a/2,C)+u.line(z+a/2,O)+u.line(z,O)+u.line(z,B-c/2)],E+=u.move(z,O),h.globals.isXNumeric||(n+=o),{pathTo:N,pathFrom:E,x:n,y:B,goalY:this.barHelpers.getGoalValues("y",null,l,d,f,s.translationsIndex),barXPosition:z,color:M}}},{key:"drawHorizontalBoxPaths",value:function(i){var s=i.indexes;i.x;var n=i.y,o=i.yDivision,a=i.barHeight,l=i.zeroW,c=i.strokeWidth,h=this.w,u=new U(this.ctx),d=s.i,f=s.j,g=this.boxOptions.colors.lower;this.isBoxPlot&&(g=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var p=this.invertedYRatio,b=s.realIndex,m=this.getOHLCValue(b,f),x=l,v=l,w=Math.min(m.o,m.c),y=Math.max(m.o,m.c),A=m.m;h.globals.isXNumeric&&(n=(h.globals.seriesX[b][f]-h.globals.minX)/this.invertedXRatio-a/2);var C=n+a*this.visibleI;this.series[d][f]===void 0||this.series[d][f]===null?(w=l,y=l):(w=l+w/p,y=l+y/p,x=l+m.h/p,v=l+m.l/p,A=l+m.m/p);var M=u.move(l,C),O=u.move(w,C+a/2);return h.globals.previousPaths.length>0&&(O=this.getPreviousPath(b,f,!0)),M=[u.move(w,C)+u.line(w,C+a/2)+u.line(x,C+a/2)+u.line(x,C+a/2-a/4)+u.line(x,C+a/2+a/4)+u.line(x,C+a/2)+u.line(w,C+a/2)+u.line(w,C+a)+u.line(A,C+a)+u.line(A,C)+u.line(w+c/2,C),u.move(A,C)+u.line(A,C+a)+u.line(y,C+a)+u.line(y,C+a/2)+u.line(v,C+a/2)+u.line(v,C+a-a/4)+u.line(v,C+a/4)+u.line(v,C+a/2)+u.line(y,C+a/2)+u.line(y,C)+u.line(A,C)+"z"],O+=u.move(w,C),h.globals.isXNumeric||(n+=o),{pathTo:M,pathFrom:O,x:y,y:n,goalX:this.barHelpers.getGoalValues("x",l,null,d,f),barYPosition:C,color:g}}},{key:"getOHLCValue",value:function(i,s){var n=this.w,o=new Yt(this.ctx,n),a=o.getLogValAtSeriesIndex(n.globals.seriesCandleH[i][s],i),l=o.getLogValAtSeriesIndex(n.globals.seriesCandleO[i][s],i),c=o.getLogValAtSeriesIndex(n.globals.seriesCandleM[i][s],i),h=o.getLogValAtSeriesIndex(n.globals.seriesCandleC[i][s],i),u=o.getLogValAtSeriesIndex(n.globals.seriesCandleL[i][s],i);return{o:this.isBoxPlot?a:l,h:this.isBoxPlot?l:a,m:c,l:this.isBoxPlot?h:u,c:this.isBoxPlot?u:h}}}]),e}(),CA=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"checkColorRange",value:function(){var t=this.w,e=!1,i=t.config.plotOptions[t.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map(function(s,n){s.from<=0&&(e=!0)}),e}},{key:"getShadeColor",value:function(t,e,i,s){var n=this.w,o=1,a=n.config.plotOptions[t].shadeIntensity,l=this.determineColor(t,e,i);n.globals.hasNegs||s?o=n.config.plotOptions[t].reverseNegativeShade?l.percent<0?l.percent/100*(1.25*a):(1-l.percent/100)*(1.25*a):l.percent<=0?1-(1+l.percent/100)*a:(1-l.percent/100)*a:(o=1-l.percent/100,t==="treemap"&&(o=(1-l.percent/100)*(1.25*a)));var c=l.color,h=new F;if(n.config.plotOptions[t].enableShades)if(this.w.config.theme.mode==="dark"){var u=h.shadeColor(-1*o,l.color);c=F.hexToRgba(F.isColorHex(u)?u:F.rgb2hex(u),n.config.fill.opacity)}else{var d=h.shadeColor(o,l.color);c=F.hexToRgba(F.isColorHex(d)?d:F.rgb2hex(d),n.config.fill.opacity)}return{color:c,colorProps:l}}},{key:"determineColor",value:function(t,e,i){var s=this.w,n=s.globals.series[e][i],o=s.config.plotOptions[t],a=o.colorScale.inverse?i:e;o.distributed&&s.config.chart.type==="treemap"&&(a=i);var l=s.globals.colors[a],c=null,h=Math.min.apply(Math,se(s.globals.series[e])),u=Math.max.apply(Math,se(s.globals.series[e]));o.distributed||t!=="heatmap"||(h=s.globals.minY,u=s.globals.maxY),o.colorScale.min!==void 0&&(h=o.colorScale.min<s.globals.minY?o.colorScale.min:s.globals.minY,u=o.colorScale.max>s.globals.maxY?o.colorScale.max:s.globals.maxY);var d=Math.abs(u)+Math.abs(h),f=100*n/(d===0?d-1e-6:d);return o.colorScale.ranges.length>0&&o.colorScale.ranges.map(function(g,p){if(n>=g.from&&n<=g.to){l=g.color,c=g.foreColor?g.foreColor:null,h=g.from,u=g.to;var b=Math.abs(u)+Math.abs(h);f=100*n/(b===0?b-1e-6:b)}}),{color:l,foreColor:c,percent:f}}},{key:"calculateDataLabels",value:function(t){var e=t.text,i=t.x,s=t.y,n=t.i,o=t.j,a=t.colorProps,l=t.fontSize,c=this.w.config.dataLabels,h=new U(this.ctx),u=new ao(this.ctx),d=null;if(c.enabled){d=h.group({class:"apexcharts-data-labels"});var f=c.offsetX,g=c.offsetY,p=i+f,b=s+parseFloat(c.style.fontSize)/3+g;u.plotDataLabelsText({x:p,y:b,text:e,i:n,j:o,color:a.foreColor,parent:d,fontSize:l,dataLabelsConfig:c})}return d}},{key:"addListeners",value:function(t){var e=new U(this.ctx);t.node.addEventListener("mouseenter",e.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",e.pathMouseLeave.bind(this,t)),t.node.addEventListener("mousedown",e.pathMouseDown.bind(this,t))}}]),r}(),eF=function(){function r(t,e){Q(this,r),this.ctx=t,this.w=t.w,this.xRatio=e.xRatio,this.yRatio=e.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new CA(t),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return tt(r,[{key:"draw",value:function(t){var e=this.w,i=new U(this.ctx),s=i.group({class:"apexcharts-heatmap"});s.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var n=e.globals.gridWidth/e.globals.dataPoints,o=e.globals.gridHeight/e.globals.series.length,a=0,l=!1;this.negRange=this.helpers.checkColorRange();var c=t.slice();e.config.yaxis[0].reversed&&(l=!0,c.reverse());for(var h=l?0:c.length-1;l?h<c.length:h>=0;l?h++:h--){var u=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:F.escapeString(e.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});if(this.ctx.series.addCollapsedClassToSeries(u,h),e.config.chart.dropShadow.enabled){var d=e.config.chart.dropShadow;new pe(this.ctx).dropShadow(u,d,h)}for(var f=0,g=e.config.plotOptions.heatmap.shadeIntensity,p=0,b=0;b<e.globals.dataPoints;b++)if(e.globals.seriesX.length&&!e.globals.allSeriesHasEqualX&&e.globals.minX+e.globals.minXDiff*b<e.globals.seriesX[h][p])f+=n;else{if(p>=c[h].length)break;var m=this.helpers.getShadeColor(e.config.chart.type,h,p,this.negRange),x=m.color,v=m.colorProps;e.config.fill.type==="image"&&(x=new wi(this.ctx).fillPath({seriesNumber:h,dataPointIndex:p,opacity:e.globals.hasNegs?v.percent<0?1-(1+v.percent/100):g+v.percent/100:v.percent/100,patternID:F.randomId(),width:e.config.fill.image.width?e.config.fill.image.width:n,height:e.config.fill.image.height?e.config.fill.image.height:o}));var w=this.rectRadius,y=i.drawRect(f,a,n,o,w);if(y.attr({cx:f,cy:a}),y.node.classList.add("apexcharts-heatmap-rect"),u.add(y),y.attr({fill:x,i:h,index:h,j:p,val:t[h][p],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?x:e.globals.stroke.colors[0],color:x}),this.helpers.addListeners(y),e.config.chart.animations.enabled&&!e.globals.dataChanged){var A=1;e.globals.resized||(A=e.config.chart.animations.speed),this.animateHeatMap(y,f,a,n,o,A)}if(e.globals.dataChanged){var C=1;if(this.dynamicAnim.enabled&&e.globals.shouldAnimate){C=this.dynamicAnim.speed;var M=e.globals.previousPaths[h]&&e.globals.previousPaths[h][p]&&e.globals.previousPaths[h][p].color;M||(M="rgba(255, 255, 255, 0)"),this.animateHeatColor(y,F.isColorHex(M)?M:F.rgb2hex(M),F.isColorHex(x)?x:F.rgb2hex(x),C)}}var O=(0,e.config.dataLabels.formatter)(e.globals.series[h][p],{value:e.globals.series[h][p],seriesIndex:h,dataPointIndex:p,w:e}),B=this.helpers.calculateDataLabels({text:O,x:f+n/2,y:a+o/2,i:h,j:p,colorProps:v,series:c});B!==null&&u.add(B),f+=n,p++}a+=o,s.add(u)}var _=e.globals.yAxisScale[0].result.slice();return e.config.yaxis[0].reversed?_.unshift(""):_.push(""),e.globals.yAxisScale[0].result=_,s}},{key:"animateHeatMap",value:function(t,e,i,s,n,o){var a=new co(this.ctx);a.animateRect(t,{x:e+s/2,y:i+n/2,width:0,height:0},{x:e,y:i,width:s,height:n},o,function(){a.animationCompleted(t)})}},{key:"animateHeatColor",value:function(t,e,i,s){t.attr({fill:e}).animate(s).attr({fill:i})}}]),r}(),EA=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"drawYAxisTexts",value:function(t,e,i,s){var n=this.w,o=n.config.yaxis[0],a=n.globals.yLabelFormatters[0];return new U(this.ctx).drawText({x:t+o.labels.offsetX,y:e+o.labels.offsetY,text:a(s,i),textAnchor:"middle",fontSize:o.labels.style.fontSize,fontFamily:o.labels.style.fontFamily,foreColor:Array.isArray(o.labels.style.colors)?o.labels.style.colors[i]:o.labels.style.colors})}}]),r}(),TA=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w;var e=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=e.globals.stroke.colors!==void 0?e.globals.stroke.colors:e.globals.colors,this.defaultSize=Math.min(e.globals.gridWidth,e.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=e.globals.gridWidth/2,e.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(e.config.plotOptions.pie.endAngle-e.config.plotOptions.pie.startAngle),this.initialAngle=e.config.plotOptions.pie.startAngle%this.fullAngle,e.globals.radialSize=this.defaultSize/2.05-e.config.stroke.width-(e.config.chart.sparkline.enabled?0:e.config.chart.dropShadow.blur),this.donutSize=e.globals.radialSize*parseInt(e.config.plotOptions.pie.donut.size,10)/100;var i=e.config.plotOptions.pie.customScale,s=e.globals.gridWidth/2,n=e.globals.gridHeight/2;this.translateX=s-s*i,this.translateY=n-n*i,this.dataLabelsGroup=new U(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return tt(r,[{key:"draw",value:function(t){var e=this,i=this.w,s=new U(this.ctx),n=s.group({class:"apexcharts-pie"});if(i.globals.noData)return n;for(var o=0,a=0;a<t.length;a++)o+=F.negToZero(t[a]);var l=[],c=s.group();o===0&&(o=1e-5),t.forEach(function(v){e.maxY=Math.max(e.maxY,v)}),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),i.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(n);for(var h=0;h<t.length;h++){var u=this.fullAngle*F.negToZero(t[h])/o;l.push(u),this.chartType==="polarArea"?(l[h]=this.fullAngle/t.length,this.sliceSizes.push(i.globals.radialSize*t[h]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var d,f=0,g=0;g<i.globals.previousPaths.length;g++)f+=F.negToZero(i.globals.previousPaths[g]);for(var p=0;p<i.globals.previousPaths.length;p++)d=this.fullAngle*F.negToZero(i.globals.previousPaths[p])/f,this.prevSectorAngleArr.push(d)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var b=s.drawCircle(this.donutSize);b.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),c.add(b)}var m=this.drawArcs(l,t);if(this.sliceLabels.forEach(function(v){m.add(v)}),c.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),c.add(m),n.add(c),this.donutDataLabels.show){var x=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});n.add(x)}return i.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(n),n}},{key:"drawArcs",value:function(t,e){var i=this.w,s=new pe(this.ctx),n=new U(this.ctx),o=new wi(this.ctx),a=n.group({class:"apexcharts-slices"}),l=this.initialAngle,c=this.initialAngle,h=this.initialAngle,u=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var d=0;d<t.length;d++){var f=n.group({class:"apexcharts-series apexcharts-pie-series",seriesName:F.escapeString(i.globals.seriesNames[d]),rel:d+1,"data:realIndex":d});a.add(f),c=u,h=(l=h)+t[d],u=c+this.prevSectorAngleArr[d];var g=h<l?this.fullAngle+h-l:h-l,p=o.fillPath({seriesNumber:d,size:this.sliceSizes[d],value:e[d]}),b=this.getChangedPath(c,u),m=n.drawPath({d:b,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[d]:this.lineColorArr,strokeWidth:0,fill:p,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(d)});if(m.attr({index:0,j:d}),s.setSelectionFilter(m,0,d),i.config.chart.dropShadow.enabled){var x=i.config.chart.dropShadow;s.dropShadow(m,x,d)}this.addListeners(m,this.donutDataLabels),U.setAttrs(m.node,{"data:angle":g,"data:startAngle":l,"data:strokeWidth":this.strokeWidth,"data:value":e[d]});var v={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?v=F.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(l+g/2)%this.fullAngle):this.chartType==="donut"&&(v=F.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(l+g/2)%this.fullAngle)),f.add(m);var w=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):((w=g/this.fullAngle*i.config.chart.animations.speed)===0&&(w=1),this.animDur=w+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(m,{size:this.sliceSizes[d],endAngle:h,startAngle:l,prevStartAngle:c,prevEndAngle:u,animateStartingPos:!0,i:d,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(m,{size:this.sliceSizes[d],endAngle:h,startAngle:l,i:d,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:w}),i.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&m.node.addEventListener("mouseup",this.pieClicked.bind(this,d)),i.globals.selectedDataPoints[0]!==void 0&&i.globals.selectedDataPoints[0].indexOf(d)>-1&&this.pieClicked(d),i.config.dataLabels.enabled){var y=v.x,A=v.y,C=100*g/this.fullAngle+"%";if(g!==0&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[d]){var M=i.config.dataLabels.formatter;M!==void 0&&(C=M(i.globals.seriesPercent[d][0],{seriesIndex:d,w:i}));var O=i.globals.dataLabels.style.colors[d],B=n.group({class:"apexcharts-datalabels"}),_=n.drawText({x:y,y:A,text:C,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:O});if(B.add(_),i.config.dataLabels.dropShadow.enabled){var z=i.config.dataLabels.dropShadow;s.dropShadow(_,z)}_.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&i.globals.resized===!1&&(_.node.classList.add("apexcharts-pie-label-delay"),_.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(B)}}}return a}},{key:"addListeners",value:function(t,e){var i=new U(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var i=this.w,s=e.endAngle<e.startAngle?this.fullAngle+e.endAngle-e.startAngle:e.endAngle-e.startAngle,n=s,o=e.startAngle,a=e.startAngle;e.prevStartAngle!==void 0&&e.prevEndAngle!==void 0&&(o=e.prevEndAngle,n=e.prevEndAngle<e.prevStartAngle?this.fullAngle+e.prevEndAngle-e.prevStartAngle:e.prevEndAngle-e.prevStartAngle),e.i===i.config.series.length-1&&(s+a>this.fullAngle?e.endAngle=e.endAngle-(s+a):s+a<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(s+a)))),s===this.fullAngle&&(s=this.fullAngle-.01),this.animateArc(t,o,a,s,n,e)}},{key:"animateArc",value:function(t,e,i,s,n,o){var a,l=this,c=this.w,h=new co(this.ctx),u=o.size;(isNaN(e)||isNaN(n))&&(e=i,n=s,o.dur=0);var d=s,f=i,g=e<i?this.fullAngle+e-i:e-i;c.globals.dataChanged&&o.shouldSetPrevPaths&&o.prevEndAngle&&(a=l.getPiePath({me:l,startAngle:o.prevStartAngle,angle:o.prevEndAngle<o.prevStartAngle?this.fullAngle+o.prevEndAngle-o.prevStartAngle:o.prevEndAngle-o.prevStartAngle,size:u}),t.attr({d:a})),o.dur!==0?t.animate(o.dur,o.animBeginArr[o.i]).after(function(){l.chartType!=="pie"&&l.chartType!=="donut"&&l.chartType!=="polarArea"||this.animate(c.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":l.strokeWidth}),o.i===c.config.series.length-1&&h.animationCompleted(t)}).during(function(p){d=g+(s-g)*p,o.animateStartingPos&&(d=n+(s-n)*p,f=e-n+(i-(e-n))*p),a=l.getPiePath({me:l,startAngle:f,angle:d,size:u}),t.node.setAttribute("data:pathOrig",a),t.attr({d:a})}):(a=l.getPiePath({me:l,startAngle:f,angle:s,size:u}),o.isTrack||(c.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",a),t.attr({d:a,"stroke-width":l.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,i=this.w,s=this,n=s.sliceSizes[t]+(i.config.plotOptions.pie.expandOnClick?4:0),o=i.globals.dom.Paper.findOne(".apexcharts-".concat(s.chartType.toLowerCase(),"-slice-").concat(t));if(o.attr("data:pieClicked")!=="true"){var a=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(a,function(u){u.setAttribute("data:pieClicked","false");var d=u.getAttribute("data:pathOrig");d&&u.setAttribute("d",d)}),i.globals.capturedDataPointIndex=t,o.attr("data:pieClicked","true");var l=parseInt(o.attr("data:startAngle"),10),c=parseInt(o.attr("data:angle"),10);e=s.getPiePath({me:s,startAngle:l,angle:c,size:n}),c!==360&&o.plot(e)}else{o.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(o.node,this.donutDataLabels);var h=o.attr("data:pathOrig");o.attr({d:h})}}},{key:"getChangedPath",value:function(t,e){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size})),i}},{key:"getPiePath",value:function(t){var e,i=t.me,s=t.startAngle,n=t.angle,o=t.size,a=new U(this.ctx),l=s,c=Math.PI*(l-90)/180,h=n+s;Math.ceil(h)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(h=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(h)>this.fullAngle&&(h-=this.fullAngle);var u=Math.PI*(h-90)/180,d=i.centerX+o*Math.cos(c),f=i.centerY+o*Math.sin(c),g=i.centerX+o*Math.cos(u),p=i.centerY+o*Math.sin(u),b=F.polarToCartesian(i.centerX,i.centerY,i.donutSize,h),m=F.polarToCartesian(i.centerX,i.centerY,i.donutSize,l),x=n>180?1:0,v=["M",d,f,"A",o,o,0,x,1,g,p];return e=i.chartType==="donut"?[].concat(v,["L",b.x,b.y,"A",i.donutSize,i.donutSize,0,x,0,m.x,m.y,"L",d,f,"z"]).join(" "):i.chartType==="pie"||i.chartType==="polarArea"?[].concat(v,["L",i.centerX,i.centerY,"L",d,f]).join(" "):[].concat(v).join(" "),a.roundPathCorners(e,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(t){var e=this.w,i=new yA(this.ctx),s=new U(this.ctx),n=new EA(this.ctx),o=s.group(),a=s.group(),l=i.niceScale(0,Math.ceil(this.maxY),0),c=l.result.reverse(),h=l.result.length;this.maxY=l.niceMax;for(var u=e.globals.radialSize,d=u/(h-1),f=0;f<h-1;f++){var g=s.drawCircle(u);if(g.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":e.config.plotOptions.polarArea.rings.strokeWidth,stroke:e.config.plotOptions.polarArea.rings.strokeColor}),e.config.yaxis[0].show){var p=n.drawYAxisTexts(this.centerX,this.centerY-u+parseInt(e.config.yaxis[0].labels.style.fontSize,10)/2,f,c[f]);a.add(p)}o.add(g),u-=d}this.drawSpokes(t),t.add(o),t.add(a)}},{key:"renderInnerDataLabels",value:function(t,e,i){var s=this.w,n=new U(this.ctx),o=e.total.show;t.node.innerHTML="",t.node.style.opacity=i.opacity;var a,l,c=i.centerX,h=this.donutDataLabels.total.label?i.centerY:i.centerY-i.centerY/6;a=e.name.color===void 0?s.globals.colors[0]:e.name.color;var u=e.name.fontSize,d=e.name.fontFamily,f=e.name.fontWeight;l=e.value.color===void 0?s.config.chart.foreColor:e.value.color;var g=e.value.formatter,p="",b="";if(o?(a=e.total.color,u=e.total.fontSize,d=e.total.fontFamily,f=e.total.fontWeight,b=this.donutDataLabels.total.label?e.total.label:"",p=e.total.formatter(s)):s.globals.series.length===1&&(p=g(s.globals.series[0],s),b=s.globals.seriesNames[0]),b&&(b=e.name.formatter(b,e.total.show,s)),e.name.show){var m=n.drawText({x:c,y:h+parseFloat(e.name.offsetY),text:b,textAnchor:"middle",foreColor:a,fontSize:u,fontWeight:f,fontFamily:d});m.node.classList.add("apexcharts-datalabel-label"),t.add(m)}if(e.value.show){var x=e.name.show?parseFloat(e.value.offsetY)+16:e.value.offsetY,v=n.drawText({x:c,y:h+x,text:p,textAnchor:"middle",foreColor:l,fontWeight:e.value.fontWeight,fontSize:e.value.fontSize,fontFamily:e.value.fontFamily});v.node.classList.add("apexcharts-datalabel-value"),t.add(v)}return t}},{key:"printInnerLabels",value:function(t,e,i,s){var n,o=this.w;s?n=t.name.color===void 0?o.globals.colors[parseInt(s.parentNode.getAttribute("rel"),10)-1]:t.name.color:o.globals.series.length>1&&t.total.show&&(n=t.total.color);var a=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),l=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,t.value.formatter)(i,o),s||typeof t.total.formatter!="function"||(i=t.total.formatter(o));var c=e===t.total.label;e=this.donutDataLabels.total.label?t.name.formatter(e,c,o):"",a!==null&&(a.textContent=e),l!==null&&(l.textContent=i),a!==null&&(a.style.fill=n)}},{key:"printDataLabelsInner",value:function(t,e){var i=this.w,s=t.getAttribute("data:value"),n=i.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(e,n,s,t);var o=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");o!==null&&(o.style.opacity=1)}},{key:"drawSpokes",value:function(t){var e=this,i=this.w,s=new U(this.ctx),n=i.config.plotOptions.polarArea.spokes;if(n.strokeWidth!==0){for(var o=[],a=360/i.globals.series.length,l=0;l<i.globals.series.length;l++)o.push(F.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+a*l));o.forEach(function(c,h){var u=s.drawLine(c.x,c.y,e.centerX,e.centerY,Array.isArray(n.connectorColors)?n.connectorColors[h]:n.connectorColors);t.add(u)})}}},{key:"revertDataLabelsInner",value:function(){var t=this.w;if(this.donutDataLabels.show){var e=t.globals.dom.Paper.findOne(".apexcharts-datalabels-group"),i=this.renderInnerDataLabels(e,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});t.globals.dom.Paper.findOne(".apexcharts-radialbar, .apexcharts-pie").add(i)}}}]),r}(),iF=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var e=this.w;this.graphics=new U(this.ctx),this.lineColorArr=e.globals.stroke.colors!==void 0?e.globals.stroke.colors:e.globals.colors,this.defaultSize=e.globals.svgHeight<e.globals.svgWidth?e.globals.gridHeight:e.globals.gridWidth,this.isLog=e.config.yaxis[0].logarithmic,this.logBase=e.config.yaxis[0].logBase,this.coreUtils=new Yt(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,e.globals.maxY,0):e.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):e.globals.minY,this.polygons=e.config.plotOptions.radar.polygons,this.strokeWidth=e.config.stroke.show?e.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-e.config.chart.dropShadow.blur,e.config.xaxis.labels.show&&(this.size=this.size-e.globals.xAxisLabelsWidth/1.75),e.config.plotOptions.radar.size!==void 0&&(this.size=e.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return tt(r,[{key:"draw",value:function(t){var e=this,i=this.w,s=new wi(this.ctx),n=[],o=new ao(this.ctx);t.length&&(this.dataPointsLen=t[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var a=i.globals.gridWidth/2,l=i.globals.gridHeight/2,c=a+i.config.plotOptions.radar.offsetX,h=l+i.config.plotOptions.radar.offsetY,u=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c||0,", ").concat(h||0,")")}),d=[],f=null,g=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach(function(b,m){var x=b.length===i.globals.dataPoints,v=e.graphics.group().attr({class:"apexcharts-series","data:longestSeries":x,seriesName:F.escapeString(i.globals.seriesNames[m]),rel:m+1,"data:realIndex":m});e.dataRadiusOfPercent[m]=[],e.dataRadius[m]=[],e.angleArr[m]=[],b.forEach(function(N,E){var I=Math.abs(e.maxValue-e.minValue);N-=e.minValue,e.isLog&&(N=e.coreUtils.getLogVal(e.logBase,N,0)),e.dataRadiusOfPercent[m][E]=N/I,e.dataRadius[m][E]=e.dataRadiusOfPercent[m][E]*e.size,e.angleArr[m][E]=E*e.disAngle}),d=e.getDataPointsPos(e.dataRadius[m],e.angleArr[m]);var w=e.createPaths(d,{x:0,y:0});f=e.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),g=e.graphics.group({class:"apexcharts-datalabels","data:realIndex":m}),i.globals.delayedElements.push({el:f.node,index:m});var y={i:m,realIndex:m,animationDelay:m,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[m],strokeLineCap:i.config.stroke.lineCap},A=null;i.globals.previousPaths.length>0&&(A=e.getPreviousPath(m));for(var C=0;C<w.linePathsTo.length;C++){var M=e.graphics.renderPaths(K(K({},y),{},{pathFrom:A===null?w.linePathsFrom[C]:A,pathTo:w.linePathsTo[C],strokeWidth:Array.isArray(e.strokeWidth)?e.strokeWidth[m]:e.strokeWidth,fill:"none",drawShadow:!1}));v.add(M);var O=s.fillPath({seriesNumber:m}),B=e.graphics.renderPaths(K(K({},y),{},{pathFrom:A===null?w.areaPathsFrom[C]:A,pathTo:w.areaPathsTo[C],strokeWidth:0,fill:O,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var _=new pe(e.ctx),z=i.config.chart.dropShadow;_.dropShadow(B,Object.assign({},z,{noUserSpaceOnUse:!0}),m)}v.add(B)}b.forEach(function(N,E){var I=new po(e.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:m,dataPointIndex:E}),S=e.graphics.drawMarker(d[E].x,d[E].y,I);S.attr("rel",E),S.attr("j",E),S.attr("index",m),S.node.setAttribute("default-marker-size",I.pSize);var R=e.graphics.group({class:"apexcharts-series-markers"});R&&R.add(S),f.add(R),v.add(f);var L=i.config.dataLabels;if(L.enabled){var q=L.formatter(i.globals.series[m][E],{seriesIndex:m,dataPointIndex:E,w:i});o.plotDataLabelsText({x:d[E].x,y:d[E].y,text:q,textAnchor:"middle",i:m,j:m,parent:g,offsetCorrection:!1,dataLabelsConfig:K({},L)})}v.add(g)}),n.push(v)}),this.drawPolygons({parent:u}),i.config.xaxis.labels.show){var p=this.drawXAxisTexts();u.add(p)}return n.forEach(function(b){u.add(b)}),u.add(this.yaxisLabels),u}},{key:"drawPolygons",value:function(t){for(var e=this,i=this.w,s=t.parent,n=new EA(this.ctx),o=i.globals.yAxisScale[0].result.reverse(),a=o.length,l=[],c=this.size/(a-1),h=0;h<a;h++)l[h]=c*h;l.reverse();var u=[],d=[];l.forEach(function(f,g){var p=F.getPolygonPos(f,e.dataPointsLen),b="";p.forEach(function(m,x){if(g===0){var v=e.graphics.drawLine(m.x,m.y,0,0,Array.isArray(e.polygons.connectorColors)?e.polygons.connectorColors[x]:e.polygons.connectorColors);d.push(v)}x===0&&e.yaxisLabelsTextsPos.push({x:m.x,y:m.y}),b+=m.x+","+m.y+" "}),u.push(b)}),u.forEach(function(f,g){var p=e.polygons.strokeColors,b=e.polygons.strokeWidth,m=e.graphics.drawPolygon(f,Array.isArray(p)?p[g]:p,Array.isArray(b)?b[g]:b,i.globals.radarPolygons.fill.colors[g]);s.add(m)}),d.forEach(function(f){s.add(f)}),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(f,g){var p=n.drawYAxisTexts(f.x,f.y,g,o[g]);e.yaxisLabels.add(p)})}},{key:"drawXAxisTexts",value:function(){var t=this,e=this.w,i=e.config.xaxis.labels,s=this.graphics.group({class:"apexcharts-xaxis"}),n=F.getPolygonPos(this.size,this.dataPointsLen);return e.globals.labels.forEach(function(o,a){var l=e.config.xaxis.labels.formatter,c=new ao(t.ctx);if(n[a]){var h=t.getTextPos(n[a],t.size),u=l(o,{seriesIndex:-1,dataPointIndex:a,w:e});c.plotDataLabelsText({x:h.newX,y:h.newY,text:u,textAnchor:h.textAnchor,i:a,j:a,parent:s,className:"apexcharts-xaxis-label",color:Array.isArray(i.style.colors)&&i.style.colors[a]?i.style.colors[a]:"#a8a8a8",dataLabelsConfig:K({textAnchor:h.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1}).on("click",function(d){if(typeof e.config.chart.events.xAxisLabelClick=="function"){var f=Object.assign({},e,{labelIndex:a});e.config.chart.events.xAxisLabelClick(d,t.ctx,f)}})}}),s}},{key:"createPaths",value:function(t,e){var i=this,s=[],n=[],o=[],a=[];if(t.length){n=[this.graphics.move(e.x,e.y)],a=[this.graphics.move(e.x,e.y)];var l=this.graphics.move(t[0].x,t[0].y),c=this.graphics.move(t[0].x,t[0].y);t.forEach(function(h,u){l+=i.graphics.line(h.x,h.y),c+=i.graphics.line(h.x,h.y),u===t.length-1&&(l+="Z",c+="Z")}),s.push(l),o.push(c)}return{linePathsFrom:n,linePathsTo:s,areaPathsFrom:a,areaPathsTo:o}}},{key:"getTextPos",value:function(t,e){var i="middle",s=t.x,n=t.y;return Math.abs(t.x)>=10?t.x>0?(i="start",s+=10):t.x<0&&(i="end",s-=10):i="middle",Math.abs(t.y)>=e-10&&(t.y<0?n-=10:t.y>0&&(n+=10)),{textAnchor:i,newX:s,newY:n}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,i=null,s=0;s<e.globals.previousPaths.length;s++){var n=e.globals.previousPaths[s];n.paths.length>0&&parseInt(n.realIndex,10)===parseInt(t,10)&&e.globals.previousPaths[s].paths[0]!==void 0&&(i=e.globals.previousPaths[s].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var s=[],n=0;n<i;n++){var o={};o.x=t[n]*Math.sin(e[n]),o.y=-t[n]*Math.cos(e[n]),s.push(o)}return s}}]),r}(),rF=function(r){za(e,TA);var t=_a(e);function e(i){var s;Q(this,e),(s=t.call(this,i)).ctx=i,s.w=i.w,s.animBeginArr=[0],s.animDur=0;var n=s.w;return s.startAngle=n.config.plotOptions.radialBar.startAngle,s.endAngle=n.config.plotOptions.radialBar.endAngle,s.totalAngle=Math.abs(n.config.plotOptions.radialBar.endAngle-n.config.plotOptions.radialBar.startAngle),s.trackStartAngle=n.config.plotOptions.radialBar.track.startAngle,s.trackEndAngle=n.config.plotOptions.radialBar.track.endAngle,s.barLabels=s.w.config.plotOptions.radialBar.barLabels,s.donutDataLabels=s.w.config.plotOptions.radialBar.dataLabels,s.radialDataLabels=s.donutDataLabels,s.trackStartAngle||(s.trackStartAngle=s.startAngle),s.trackEndAngle||(s.trackEndAngle=s.endAngle),s.endAngle===360&&(s.endAngle=359.99),s.margin=parseInt(n.config.plotOptions.radialBar.track.margin,10),s.onBarLabelClick=s.onBarLabelClick.bind(W1(s)),s}return tt(e,[{key:"draw",value:function(i){var s=this.w,n=new U(this.ctx),o=n.group({class:"apexcharts-radialbar"});if(s.globals.noData)return o;var a=n.group(),l=this.defaultSize/2,c=s.globals.gridWidth/2,h=this.defaultSize/2.05;s.config.chart.sparkline.enabled||(h=h-s.config.stroke.width-s.config.chart.dropShadow.blur);var u=s.globals.fill.colors;if(s.config.plotOptions.radialBar.track.show){var d=this.drawTracks({size:h,centerX:c,centerY:l,colorArr:u,series:i});a.add(d)}var f=this.drawArcs({size:h,centerX:c,centerY:l,colorArr:u,series:i}),g=360;s.config.plotOptions.radialBar.startAngle<0&&(g=this.totalAngle);var p=(360-g)/360;if(s.globals.radialSize=h-h*p,this.radialDataLabels.value.show){var b=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);s.globals.radialSize+=b*p}return a.add(f.g),s.config.plotOptions.radialBar.hollow.position==="front"&&(f.g.add(f.elHollow),f.dataLabels&&f.g.add(f.dataLabels)),o.add(a),o}},{key:"drawTracks",value:function(i){var s=this.w,n=new U(this.ctx),o=n.group({class:"apexcharts-tracks"}),a=new pe(this.ctx),l=new wi(this.ctx),c=this.getStrokeWidth(i);i.size=i.size-c/2;for(var h=0;h<i.series.length;h++){var u=n.group({class:"apexcharts-radialbar-track apexcharts-track"});o.add(u),u.attr({rel:h+1}),i.size=i.size-c-this.margin;var d=s.config.plotOptions.radialBar.track,f=l.fillPath({seriesNumber:0,size:i.size,fillColors:Array.isArray(d.background)?d.background[h]:d.background,solid:!0}),g=this.trackStartAngle,p=this.trackEndAngle;Math.abs(p)+Math.abs(g)>=360&&(p=360-Math.abs(this.startAngle)-.1);var b=n.drawPath({d:"",stroke:f,strokeWidth:c*parseInt(d.strokeWidth,10)/100,fill:"none",strokeOpacity:d.opacity,classes:"apexcharts-radialbar-area"});if(d.dropShadow.enabled){var m=d.dropShadow;a.dropShadow(b,m)}u.add(b),b.attr("id","apexcharts-radialbarTrack-"+h),this.animatePaths(b,{centerX:i.centerX,centerY:i.centerY,endAngle:p,startAngle:g,size:i.size,i:h,totalItems:2,animBeginArr:0,dur:0,isTrack:!0})}return o}},{key:"drawArcs",value:function(i){var s=this.w,n=new U(this.ctx),o=new wi(this.ctx),a=new pe(this.ctx),l=n.group(),c=this.getStrokeWidth(i);i.size=i.size-c/2;var h=s.config.plotOptions.radialBar.hollow.background,u=i.size-c*i.series.length-this.margin*i.series.length-c*parseInt(s.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,d=u-s.config.plotOptions.radialBar.hollow.margin;s.config.plotOptions.radialBar.hollow.image!==void 0&&(h=this.drawHollowImage(i,l,u,h));var f=this.drawHollow({size:d,centerX:i.centerX,centerY:i.centerY,fill:h||"transparent"});if(s.config.plotOptions.radialBar.hollow.dropShadow.enabled){var g=s.config.plotOptions.radialBar.hollow.dropShadow;a.dropShadow(f,g)}var p=1;!this.radialDataLabels.total.show&&s.globals.series.length>1&&(p=0);var b=null;if(this.radialDataLabels.show){var m=s.globals.dom.Paper.findOne(".apexcharts-datalabels-group");b=this.renderInnerDataLabels(m,this.radialDataLabels,{hollowSize:u,centerX:i.centerX,centerY:i.centerY,opacity:p})}s.config.plotOptions.radialBar.hollow.position==="back"&&(l.add(f),b&&l.add(b));var x=!1;s.config.plotOptions.radialBar.inverseOrder&&(x=!0);for(var v=x?i.series.length-1:0;x?v>=0:v<i.series.length;x?v--:v++){var w=n.group({class:"apexcharts-series apexcharts-radial-series",seriesName:F.escapeString(s.globals.seriesNames[v])});l.add(w),w.attr({rel:v+1,"data:realIndex":v}),this.ctx.series.addCollapsedClassToSeries(w,v),i.size=i.size-c-this.margin;var y=o.fillPath({seriesNumber:v,size:i.size,value:i.series[v]}),A=this.startAngle,C=void 0,M=F.negToZero(i.series[v]>100?100:i.series[v])/100,O=Math.round(this.totalAngle*M)+this.startAngle,B=void 0;s.globals.dataChanged&&(C=this.startAngle,B=Math.round(this.totalAngle*F.negToZero(s.globals.previousPaths[v])/100)+C),Math.abs(O)+Math.abs(A)>360&&(O-=.01),Math.abs(B)+Math.abs(C)>360&&(B-=.01);var _=O-A,z=Array.isArray(s.config.stroke.dashArray)?s.config.stroke.dashArray[v]:s.config.stroke.dashArray,N=n.drawPath({d:"",stroke:y,strokeWidth:c,fill:"none",fillOpacity:s.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+v,strokeDashArray:z});if(U.setAttrs(N.node,{"data:angle":_,"data:value":i.series[v]}),s.config.chart.dropShadow.enabled){var E=s.config.chart.dropShadow;a.dropShadow(N,E,v)}if(a.setSelectionFilter(N,0,v),this.addListeners(N,this.radialDataLabels),w.add(N),N.attr({index:0,j:v}),this.barLabels.enabled){var I=F.polarToCartesian(i.centerX,i.centerY,i.size,A),S=this.barLabels.formatter(s.globals.seriesNames[v],{seriesIndex:v,w:s}),R=["apexcharts-radialbar-label"];this.barLabels.onClick||R.push("apexcharts-no-click");var L=this.barLabels.useSeriesColors?s.globals.colors[v]:s.config.chart.foreColor;L||(L=s.config.chart.foreColor);var q=I.x+this.barLabels.offsetX,T=I.y+this.barLabels.offsetY,k=n.drawText({x:q,y:T,text:S,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:L,cssClass:R.join(" ")});k.on("click",this.onBarLabelClick),k.attr({rel:v+1}),A!==0&&k.attr({"transform-origin":"".concat(q," ").concat(T),transform:"rotate(".concat(A," 0 0)")}),w.add(k)}var D=0;!this.initialAnim||s.globals.resized||s.globals.dataChanged||(D=s.config.chart.animations.speed),s.globals.dataChanged&&(D=s.config.chart.animations.dynamicAnimation.speed),this.animDur=D/(1.2*i.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(N,{centerX:i.centerX,centerY:i.centerY,endAngle:O,startAngle:A,prevEndAngle:B,prevStartAngle:C,size:i.size,i:v,totalItems:2,animBeginArr:this.animBeginArr,dur:D,shouldSetPrevPaths:!0})}return{g:l,elHollow:f,dataLabels:b}}},{key:"drawHollow",value:function(i){var s=new U(this.ctx).drawCircle(2*i.size);return s.attr({class:"apexcharts-radialbar-hollow",cx:i.centerX,cy:i.centerY,r:i.size,fill:i.fill}),s}},{key:"drawHollowImage",value:function(i,s,n,o){var a=this.w,l=new wi(this.ctx),c=F.randomId(),h=a.config.plotOptions.radialBar.hollow.image;if(a.config.plotOptions.radialBar.hollow.imageClipped)l.clippedImgArea({width:n,height:n,image:h,patternID:"pattern".concat(a.globals.cuid).concat(c)}),o="url(#pattern".concat(a.globals.cuid).concat(c,")");else{var u=a.config.plotOptions.radialBar.hollow.imageWidth,d=a.config.plotOptions.radialBar.hollow.imageHeight;if(u===void 0&&d===void 0){var f=a.globals.dom.Paper.image(h,function(p){this.move(i.centerX-p.width/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-p.height/2+a.config.plotOptions.radialBar.hollow.imageOffsetY)});s.add(f)}else{var g=a.globals.dom.Paper.image(h,function(p){this.move(i.centerX-u/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-d/2+a.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(u,d)});s.add(g)}}return o}},{key:"getStrokeWidth",value:function(i){var s=this.w;return i.size*(100-parseInt(s.config.plotOptions.radialBar.hollow.size,10))/100/(i.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(i){var s=parseInt(i.target.getAttribute("rel"),10)-1,n=this.barLabels.onClick,o=this.w;n&&n(o.globals.seriesNames[s],{w:o,seriesIndex:s})}}]),e}(),sF=function(r){za(e,lo);var t=_a(e);function e(){return Q(this,e),t.apply(this,arguments)}return tt(e,[{key:"draw",value:function(i,s){var n=this.w,o=new U(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=i,this.seriesRangeStart=n.globals.seriesRangeStart,this.seriesRangeEnd=n.globals.seriesRangeEnd,this.barHelpers.initVariables(i);for(var a=o.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),l=0;l<i.length;l++){var c,h,u,d,f=void 0,g=void 0,p=n.globals.comboCharts?s[l]:l,b=this.barHelpers.getGroupIndex(p).columnGroupIndex,m=o.group({class:"apexcharts-series",seriesName:F.escapeString(n.globals.seriesNames[p]),rel:l+1,"data:realIndex":p});this.ctx.series.addCollapsedClassToSeries(m,p),i[l].length>0&&(this.visibleI=this.visibleI+1);var x=0,v=0,w=0;this.yRatio.length>1&&(this.yaxisIndex=n.globals.seriesYAxisReverseMap[p][0],w=p);var y=this.barHelpers.initialPositions(p);g=y.y,d=y.zeroW,f=y.x,v=y.barWidth,x=y.barHeight,c=y.xDivision,h=y.yDivision,u=y.zeroH;for(var A=o.group({class:"apexcharts-datalabels","data:realIndex":p}),C=o.group({class:"apexcharts-rangebar-goals-markers"}),M=0;M<n.globals.dataPoints;M++){var O=this.barHelpers.getStrokeWidth(l,M,p),B=this.seriesRangeStart[l][M],_=this.seriesRangeEnd[l][M],z=null,N=null,E=null,I={x:f,y:g,strokeWidth:O,elSeries:m},S=this.seriesLen;if(n.config.plotOptions.bar.rangeBarGroupRows&&(S=1),n.config.series[l].data[M]===void 0)break;if(this.isHorizontal){E=g+x*this.visibleI;var R=(h-x*S)/2;if(n.config.series[l].data[M].x){var L=this.detectOverlappingBars({i:l,j:M,barYPosition:E,srty:R,barHeight:x,yDivision:h,initPositions:y});x=L.barHeight,E=L.barYPosition}v=(z=this.drawRangeBarPaths(K({indexes:{i:l,j:M,realIndex:p},barHeight:x,barYPosition:E,zeroW:d,yDivision:h,y1:B,y2:_},I))).barWidth}else{n.globals.isXNumeric&&(f=(n.globals.seriesX[l][M]-n.globals.minX)/this.xRatio-v/2),N=f+v*this.visibleI;var q=(c-v*S)/2;if(n.config.series[l].data[M].x){var T=this.detectOverlappingBars({i:l,j:M,barXPosition:N,srtx:q,barWidth:v,xDivision:c,initPositions:y});v=T.barWidth,N=T.barXPosition}x=(z=this.drawRangeColumnPaths(K({indexes:{i:l,j:M,realIndex:p,translationsIndex:w},barWidth:v,barXPosition:N,zeroH:u,xDivision:c},I))).barHeight}var k=this.barHelpers.drawGoalLine({barXPosition:z.barXPosition,barYPosition:E,goalX:z.goalX,goalY:z.goalY,barHeight:x,barWidth:v});k&&C.add(k),g=z.y,f=z.x;var D=this.barHelpers.getPathFillColor(i,l,M,p);this.renderSeries({realIndex:p,pathFill:D.color,lineFill:D.useRangeColor?D.color:n.globals.stroke.colors[p],j:M,i:l,x:f,y:g,y1:B,y2:_,pathFrom:z.pathFrom,pathTo:z.pathTo,strokeWidth:O,elSeries:m,series:i,barHeight:x,barWidth:v,barXPosition:N,barYPosition:E,columnGroupIndex:b,elDataLabelsWrap:A,elGoalsMarkers:C,visibleSeries:this.visibleI,type:"rangebar"})}a.add(m)}return a}},{key:"detectOverlappingBars",value:function(i){var s=i.i,n=i.j,o=i.barYPosition,a=i.barXPosition,l=i.srty,c=i.srtx,h=i.barHeight,u=i.barWidth,d=i.yDivision,f=i.xDivision,g=i.initPositions,p=this.w,b=[],m=p.config.series[s].data[n].rangeName,x=p.config.series[s].data[n].x,v=Array.isArray(x)?x.join(" "):x,w=p.globals.labels.map(function(A){return Array.isArray(A)?A.join(" "):A}).indexOf(v),y=p.globals.seriesRange[s].findIndex(function(A){return A.x===v&&A.overlaps.length>0});return this.isHorizontal?(o=p.config.plotOptions.bar.rangeBarGroupRows?l+d*w:l+h*this.visibleI+d*w,y>-1&&!p.config.plotOptions.bar.rangeBarOverlap&&(b=p.globals.seriesRange[s][y].overlaps).indexOf(m)>-1&&(o=(h=g.barHeight/b.length)*this.visibleI+d*(100-parseInt(this.barOptions.barHeight,10))/100/2+h*(this.visibleI+b.indexOf(m))+d*w)):(w>-1&&!p.globals.timescaleLabels.length&&(a=p.config.plotOptions.bar.rangeBarGroupRows?c+f*w:c+u*this.visibleI+f*w),y>-1&&!p.config.plotOptions.bar.rangeBarOverlap&&(b=p.globals.seriesRange[s][y].overlaps).indexOf(m)>-1&&(a=(u=g.barWidth/b.length)*this.visibleI+f*(100-parseInt(this.barOptions.barWidth,10))/100/2+u*(this.visibleI+b.indexOf(m))+f*w)),{barYPosition:o,barXPosition:a,barHeight:h,barWidth:u}}},{key:"drawRangeColumnPaths",value:function(i){var s=i.indexes,n=i.x,o=i.xDivision,a=i.barWidth,l=i.barXPosition,c=i.zeroH,h=this.w,u=s.i,d=s.j,f=s.realIndex,g=s.translationsIndex,p=this.yRatio[g],b=this.getRangeValue(f,d),m=Math.min(b.start,b.end),x=Math.max(b.start,b.end);this.series[u][d]===void 0||this.series[u][d]===null?m=c:(m=c-m/p,x=c-x/p);var v=Math.abs(x-m),w=this.barHelpers.getColumnPaths({barXPosition:l,barWidth:a,y1:m,y2:x,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:f,i:f,j:d,w:h});if(h.globals.isXNumeric){var y=this.getBarXForNumericXAxis({x:n,j:d,realIndex:f,barWidth:a});n=y.x,l=y.barXPosition}else n+=o;return{pathTo:w.pathTo,pathFrom:w.pathFrom,barHeight:v,x:n,y:b.start<0&&b.end<0?m:x,goalY:this.barHelpers.getGoalValues("y",null,c,u,d,g),barXPosition:l}}},{key:"preventBarOverflow",value:function(i){var s=this.w;return i<0&&(i=0),i>s.globals.gridWidth&&(i=s.globals.gridWidth),i}},{key:"drawRangeBarPaths",value:function(i){var s=i.indexes,n=i.y,o=i.y1,a=i.y2,l=i.yDivision,c=i.barHeight,h=i.barYPosition,u=i.zeroW,d=this.w,f=s.realIndex,g=s.j,p=this.preventBarOverflow(u+o/this.invertedYRatio),b=this.preventBarOverflow(u+a/this.invertedYRatio),m=this.getRangeValue(f,g),x=Math.abs(b-p),v=this.barHelpers.getBarpaths({barYPosition:h,barHeight:c,x1:p,x2:b,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:f,realIndex:f,j:g,w:d});return d.globals.isXNumeric||(n+=l),{pathTo:v.pathTo,pathFrom:v.pathFrom,barWidth:x,x:m.start<0&&m.end<0?p:b,goalX:this.barHelpers.getGoalValues("x",u,null,f,g),y:n}}},{key:"getRangeValue",value:function(i,s){var n=this.w;return{start:n.globals.seriesRangeStart[i][s],end:n.globals.seriesRangeEnd[i][s]}}}]),e}(),nF=function(){function r(t){Q(this,r),this.w=t.w,this.lineCtx=t}return tt(r,[{key:"sameValueSeriesFix",value:function(t,e){var i=this.w;if((i.config.fill.type==="gradient"||i.config.fill.type[t]==="gradient")&&new Yt(this.lineCtx.ctx,i).seriesHaveSameValues(t)){var s=e[t].slice();s[s.length-1]=s[s.length-1]+1e-6,e[t]=s}return e}},{key:"calculatePoints",value:function(t){var e=t.series,i=t.realIndex,s=t.x,n=t.y,o=t.i,a=t.j,l=t.prevY,c=this.w,h=[],u=[],d=this.lineCtx.categoryAxisCorrection+c.config.markers.offsetX;return c.globals.isXNumeric&&(d=(c.globals.seriesX[i][0]-c.globals.minX)/this.lineCtx.xRatio+c.config.markers.offsetX),a===0&&(h.push(d),u.push(F.isNumber(e[o][0])?l+c.config.markers.offsetY:null)),h.push(s+c.config.markers.offsetX),u.push(F.isNumber(e[o][a+1])?n+c.config.markers.offsetY:null),{x:h,y:u}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,i=t.pathFromArea,s=t.realIndex,n=this.w,o=0;o<n.globals.previousPaths.length;o++){var a=n.globals.previousPaths[o];(a.type==="line"||a.type==="area")&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(s,10)&&(a.type==="line"?(this.lineCtx.appendPathFrom=!1,e=n.globals.previousPaths[o].paths[0].d):a.type==="area"&&(this.lineCtx.appendPathFrom=!1,i=n.globals.previousPaths[o].paths[0].d,n.config.stroke.show&&n.globals.previousPaths[o].paths[1]&&(e=n.globals.previousPaths[o].paths[1].d)))}return{pathFromLine:e,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(t){var e,i,s,n=t.i,o=t.realIndex,a=t.series,l=t.prevY,c=t.lineYPosition,h=t.translationsIndex,u=this.w,d=u.config.chart.stacked&&!u.globals.comboCharts||u.config.chart.stacked&&u.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((e=this.w.config.series[o])===null||e===void 0?void 0:e.type)==="bar"||((i=this.w.config.series[o])===null||i===void 0?void 0:i.type)==="column");if(((s=a[n])===null||s===void 0?void 0:s[0])!==void 0)l=(c=d&&n>0?this.lineCtx.prevSeriesY[n-1][0]:this.lineCtx.zeroY)-a[n][0]/this.lineCtx.yRatio[h]+2*(this.lineCtx.isReversed?a[n][0]/this.lineCtx.yRatio[h]:0);else if(d&&n>0&&a[n][0]===void 0){for(var f=n-1;f>=0;f--)if(a[f][0]!==null&&a[f][0]!==void 0){l=c=this.lineCtx.prevSeriesY[f][0];break}}return{prevY:l,lineYPosition:c}}}]),r}(),oF=function(r){for(var t,e,i,s,n=function(h){for(var u=[],d=h[0],f=h[1],g=u[0]=Eg(d,f),p=1,b=h.length-1;p<b;p++)d=f,f=h[p+1],u[p]=.5*(g+(g=Eg(d,f)));return u[p]=g,u}(r),o=r.length-1,a=[],l=0;l<o;l++)i=Eg(r[l],r[l+1]),Math.abs(i)<1e-6?n[l]=n[l+1]=0:(s=(t=n[l]/i)*t+(e=n[l+1]/i)*e)>9&&(s=3*i/Math.sqrt(s),n[l]=s*t,n[l+1]=s*e);for(var c=0;c<=o;c++)s=(r[Math.min(o,c+1)][0]-r[Math.max(0,c-1)][0])/(6*(1+n[c]*n[c])),a.push([s||0,n[c]*s||0]);return a},aF=function(r){var t=oF(r),e=r[1],i=r[0],s=[],n=t[1],o=t[0];s.push(i,[i[0]+o[0],i[1]+o[1],e[0]-n[0],e[1]-n[1],e[0],e[1]]);for(var a=2,l=t.length;a<l;a++){var c=r[a],h=t[a];s.push([c[0]-h[0],c[1]-h[1],c[0],c[1]])}return s},lF=function(r,t,e){var i=r.slice(t,e);if(t){if(e-t>1&&i[1].length<6){var s=i[0].length;i[1]=[2*i[0][s-2]-i[0][s-4],2*i[0][s-1]-i[0][s-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i};function Eg(r,t){return(t[1]-r[1])/(t[0]-r[0])}var Tg=function(){function r(t,e,i){Q(this,r),this.ctx=t,this.w=t.w,this.xyRatios=e,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||i,this.scatter=new vA(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new nF(this),this.markers=new po(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return tt(r,[{key:"draw",value:function(t,e,i,s){var n,o=this.w,a=new U(this.ctx),l=o.globals.comboCharts?e:o.config.chart.type,c=a.group({class:"apexcharts-".concat(l,"-series apexcharts-plot-series")}),h=new Yt(this.ctx,o);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=h.getLogSeries(t),this.yRatio=h.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var u=[],d=0;d<t.length;d++){t=this.lineHelpers.sameValueSeriesFix(d,t);var f=o.globals.comboCharts?i[d]:d,g=this.yRatio.length>1?f:0;this._initSerieVariables(t,d,f);var p=[],b=[],m=[],x=o.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,f),o.globals.isXNumeric&&o.globals.seriesX.length>0&&(x=(o.globals.seriesX[f][0]-o.globals.minX)/this.xRatio),m.push(x);var v,w=x,y=void 0,A=w,C=this.zeroY,M=this.zeroY;C=this.lineHelpers.determineFirstPrevY({i:d,realIndex:f,series:t,prevY:C,lineYPosition:0,translationsIndex:g}).prevY,o.config.stroke.curve==="monotoneCubic"&&t[d][0]===null?p.push(null):p.push(C),v=C,l==="rangeArea"&&(y=M=this.lineHelpers.determineFirstPrevY({i:d,realIndex:f,series:s,prevY:M,lineYPosition:0,translationsIndex:g}).prevY,b.push(p[0]!==null?M:null));var O=this._calculatePathsFrom({type:l,series:t,i:d,realIndex:f,translationsIndex:g,prevX:A,prevY:C,prevY2:M}),B=[p[0]],_=[b[0]],z={type:l,series:t,realIndex:f,translationsIndex:g,i:d,x,y:1,pX:w,pY:v,pathsFrom:O,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:m,yArrj:p,y2Arrj:b,seriesRangeEnd:s},N=this._iterateOverDataPoints(K(K({},z),{},{iterations:l==="rangeArea"?t[d].length-1:void 0,isRangeStart:!0}));if(l==="rangeArea"){for(var E=this._calculatePathsFrom({series:s,i:d,realIndex:f,prevX:A,prevY:M}),I=this._iterateOverDataPoints(K(K({},z),{},{series:s,xArrj:[x],yArrj:B,y2Arrj:_,pY:y,areaPaths:N.areaPaths,pathsFrom:E,iterations:s[d].length-1,isRangeStart:!1})),S=N.linePaths.length/2,R=0;R<S;R++)N.linePaths[R]=I.linePaths[R+S]+N.linePaths[R];N.linePaths.splice(S),N.pathFromLine=I.pathFromLine+N.pathFromLine}else N.pathFromArea+="z";this._handlePaths({type:l,realIndex:f,i:d,paths:N}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),u.push(this.elSeries)}if(((n=o.config.series[0])===null||n===void 0?void 0:n.zIndex)!==void 0&&u.sort(function(T,k){return Number(T.node.getAttribute("zIndex"))-Number(k.node.getAttribute("zIndex"))}),o.config.chart.stacked)for(var L=u.length-1;L>=0;L--)c.add(u[L]);else for(var q=0;q<u.length;q++)c.add(u[q]);return c}},{key:"_initSerieVariables",value:function(t,e,i){var s=this.w,n=new U(this.ctx);this.xDivision=s.globals.gridWidth/(s.globals.dataPoints-(s.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(s.config.stroke.width)?s.config.stroke.width[i]:s.config.stroke.width;var o=0;if(this.yRatio.length>1&&(this.yaxisIndex=s.globals.seriesYAxisReverseMap[i],o=i),this.isReversed=s.config.yaxis[this.yaxisIndex]&&s.config.yaxis[this.yaxisIndex].reversed,this.zeroY=s.globals.gridHeight-this.baseLineY[o]-(this.isReversed?s.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[o]:0),this.areaBottomY=this.zeroY,(this.zeroY>s.globals.gridHeight||s.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=s.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=n.group({class:"apexcharts-series",zIndex:s.config.series[i].zIndex!==void 0?s.config.series[i].zIndex:i,seriesName:F.escapeString(s.globals.seriesNames[i])}),this.elPointsMain=n.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),s.globals.hasNullValues){var a=this.markers.plotChartMarkers({pointsPos:{x:[0],y:[s.globals.gridHeight+s.globals.markers.largestSize]},seriesIndex:e,j:0,pSize:.1,alwaysDrawMarker:!0,isVirtualPoint:!0});a!==null&&this.elPointsMain.add(a)}this.elDataLabelsWrap=n.group({class:"apexcharts-datalabels","data:realIndex":i});var l=t[e].length===s.globals.dataPoints;this.elSeries.attr({"data:longestSeries":l,rel:e+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,i,s,n,o=t.type,a=t.series,l=t.i,c=t.realIndex,h=t.translationsIndex,u=t.prevX,d=t.prevY,f=t.prevY2,g=this.w,p=new U(this.ctx);if(a[l][0]===null){for(var b=0;b<a[l].length;b++)if(a[l][b]!==null){u=this.xDivision*b,d=this.zeroY-a[l][b]/this.yRatio[h],e=p.move(u,d),i=p.move(u,this.areaBottomY);break}}else e=p.move(u,d),o==="rangeArea"&&(e=p.move(u,f)+p.line(u,d)),i=p.move(u,this.areaBottomY)+p.line(u,d);if(s=p.move(0,this.areaBottomY)+p.line(0,this.areaBottomY),n=p.move(0,this.areaBottomY)+p.line(0,this.areaBottomY),g.globals.previousPaths.length>0){var m=this.lineHelpers.checkPreviousPaths({pathFromLine:s,pathFromArea:n,realIndex:c});s=m.pathFromLine,n=m.pathFromArea}return{prevX:u,prevY:d,linePath:e,areaPath:i,pathFromLine:s,pathFromArea:n}}},{key:"_handlePaths",value:function(t){var e=t.type,i=t.realIndex,s=t.i,n=t.paths,o=this.w,a=new U(this.ctx),l=new wi(this.ctx);this.prevSeriesY.push(n.yArrj),o.globals.seriesXvalues[i]=n.xArrj,o.globals.seriesYvalues[i]=n.yArrj;var c=o.config.forecastDataPoints;if(c.count>0&&e!=="rangeArea"){var h=o.globals.seriesXvalues[i][o.globals.seriesXvalues[i].length-c.count-1],u=a.drawRect(h,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(u.node);var d=a.drawRect(0,0,h,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(d.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var f={i:s,realIndex:i,animationDelay:s,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(e)};if(e==="area")for(var g=l.fillPath({seriesNumber:i}),p=0;p<n.areaPaths.length;p++){var b=a.renderPaths(K(K({},f),{},{pathFrom:n.pathFromArea,pathTo:n.areaPaths[p],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:g}));this.elSeries.add(b)}if(o.config.stroke.show&&!this.pointsChart){var m=null;if(e==="line")m=l.fillPath({seriesNumber:i,i:s});else if(o.config.stroke.fill.type==="solid")m=o.globals.stroke.colors[i];else{var x=o.config.fill;o.config.fill=o.config.stroke.fill,m=l.fillPath({seriesNumber:i,i:s}),o.config.fill=x}for(var v=0;v<n.linePaths.length;v++){var w=m;e==="rangeArea"&&(w=l.fillPath({seriesNumber:i}));var y=K(K({},f),{},{pathFrom:n.pathFromLine,pathTo:n.linePaths[v],stroke:m,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:e==="rangeArea"?w:"none"}),A=a.renderPaths(y);if(this.elSeries.add(A),A.attr("fill-rule","evenodd"),c.count>0&&e!=="rangeArea"){var C=a.renderPaths(y);C.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&C.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(C),C.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),A.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(t){var e,i,s=this,n=t.type,o=t.series,a=t.iterations,l=t.realIndex,c=t.translationsIndex,h=t.i,u=t.x,d=t.y,f=t.pX,g=t.pY,p=t.pathsFrom,b=t.linePaths,m=t.areaPaths,x=t.seriesIndex,v=t.lineYPosition,w=t.xArrj,y=t.yArrj,A=t.y2Arrj,C=t.isRangeStart,M=t.seriesRangeEnd,O=this.w,B=new U(this.ctx),_=this.yRatio,z=p.prevY,N=p.linePath,E=p.areaPath,I=p.pathFromLine,S=p.pathFromArea,R=F.isNumber(O.globals.minYArr[l])?O.globals.minYArr[l]:O.globals.minY;a||(a=O.globals.dataPoints>1?O.globals.dataPoints-1:O.globals.dataPoints);var L=function(rt,nt){return nt-rt/_[c]+2*(s.isReversed?rt/_[c]:0)},q=d,T=O.config.chart.stacked&&!O.globals.comboCharts||O.config.chart.stacked&&O.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((e=this.w.config.series[l])===null||e===void 0?void 0:e.type)==="bar"||((i=this.w.config.series[l])===null||i===void 0?void 0:i.type)==="column"),k=O.config.stroke.curve;Array.isArray(k)&&(k=Array.isArray(x)?k[x[h]]:k[h]);for(var D,X=0,H=0;H<a&&o[h].length!==0;H++){var G=o[h][H+1]===void 0||o[h][H+1]===null;if(O.globals.isXNumeric){var W=O.globals.seriesX[l][H+1];O.globals.seriesX[l][H+1]===void 0&&(W=O.globals.seriesX[l][a-1]),u=(W-O.globals.minX)/this.xRatio}else u+=this.xDivision;T?h>0&&O.globals.collapsedSeries.length<O.config.series.length-1?v=this.prevSeriesY[function(rt){for(var nt=rt;nt>0;nt--){if(!(O.globals.collapsedSeriesIndices.indexOf(x?.[nt]||nt)>-1))return nt;nt--}return 0}(h-1)][H+1]:v=this.zeroY:v=this.zeroY,G?d=L(R,v):(d=L(o[h][H+1],v),n==="rangeArea"&&(q=L(M[h][H+1],v))),w.push(o[h][H+1]===null?null:u),!G||O.config.stroke.curve!=="smooth"&&O.config.stroke.curve!=="monotoneCubic"?(y.push(d),A.push(q)):(y.push(null),A.push(null));var Y=this.lineHelpers.calculatePoints({series:o,x:u,y:d,realIndex:l,i:h,j:H,prevY:z}),$=this._createPaths({type:n,series:o,i:h,realIndex:l,j:H,x:u,y:d,y2:q,xArrj:w,yArrj:y,y2Arrj:A,pX:f,pY:g,pathState:X,segmentStartX:D,linePath:N,areaPath:E,linePaths:b,areaPaths:m,curve:k,isRangeStart:C});m=$.areaPaths,b=$.linePaths,f=$.pX,g=$.pY,X=$.pathState,D=$.segmentStartX,E=$.areaPath,N=$.linePath,!this.appendPathFrom||O.globals.hasNullValues||k==="monotoneCubic"&&n==="rangeArea"||(I+=B.line(u,this.areaBottomY),S+=B.line(u,this.areaBottomY)),this.handleNullDataPoints(o,Y,h,H,l),this._handleMarkersAndLabels({type:n,pointsPos:Y,i:h,j:H,realIndex:l,isRangeStart:C})}return{yArrj:y,xArrj:w,pathFromArea:S,areaPaths:m,pathFromLine:I,linePaths:b,linePath:N,areaPath:E}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.type,i=t.pointsPos,s=t.isRangeStart,n=t.i,o=t.j,a=t.realIndex,l=this.w,c=new ao(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,o,{realIndex:a,pointsPos:i,zRatio:this.zRatio,elParent:this.elPointsMain});else{l.globals.series[n].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var h=this.markers.plotChartMarkers({pointsPos:i,seriesIndex:a,j:o+1});h!==null&&this.elPointsMain.add(h)}var u=c.drawDataLabel({type:e,isRangeStart:s,pos:i,i:a,j:o+1});u!==null&&this.elDataLabelsWrap.add(u)}},{key:"_createPaths",value:function(t){var e=t.type,i=t.series,s=t.i;t.realIndex;var n,o=t.j,a=t.x,l=t.y,c=t.xArrj,h=t.yArrj,u=t.y2,d=t.y2Arrj,f=t.pX,g=t.pY,p=t.pathState,b=t.segmentStartX,m=t.linePath,x=t.areaPath,v=t.linePaths,w=t.areaPaths,y=t.curve,A=t.isRangeStart,C=new U(this.ctx),M=this.areaBottomY,O=e==="rangeArea",B=e==="rangeArea"&&A;switch(y){case"monotoneCubic":var _=A?h:d;switch(p){case 0:if(_[o+1]===null)break;p=1;case 1:if(!(O?c.length===i[s].length:o===i[s].length-2))break;case 2:var z=A?c:c.slice().reverse(),N=A?_:_.slice().reverse(),E=(n=N,z.map(function(W,Y){return[W,n[Y]]}).filter(function(W){return W[1]!==null})),I=E.length>1?aF(E):E,S=[];O&&(B?w=E:S=w.reverse());var R=0,L=0;if(function(W,Y){for(var $=function(ct){var ot=[],ht=0;return ct.forEach(function(qt){qt!==null?ht++:ht>0&&(ot.push(ht),ht=0)}),ht>0&&ot.push(ht),ot}(W),rt=[],nt=0,lt=0;nt<$.length;lt+=$[nt++])rt[nt]=lF(Y,lt,lt+$[nt]);return rt}(N,I).forEach(function(W){R++;var Y=function(nt){for(var lt="",ct=0;ct<nt.length;ct++){var ot=nt[ct],ht=ot.length;ht>4?(lt+="C".concat(ot[0],", ").concat(ot[1]),lt+=", ".concat(ot[2],", ").concat(ot[3]),lt+=", ".concat(ot[4],", ").concat(ot[5])):ht>2&&(lt+="S".concat(ot[0],", ").concat(ot[1]),lt+=", ".concat(ot[2],", ").concat(ot[3]))}return lt}(W),$=L,rt=(L+=W.length)-1;B?m=C.move(E[$][0],E[$][1])+Y:O?m=C.move(S[$][0],S[$][1])+C.line(E[$][0],E[$][1])+Y+C.line(S[rt][0],S[rt][1]):(m=C.move(E[$][0],E[$][1])+Y,x=m+C.line(E[rt][0],M)+C.line(E[$][0],M)+"z",w.push(x)),v.push(m)}),O&&R>1&&!B){var q=v.slice(R).reverse();v.splice(R),q.forEach(function(W){return v.push(W)})}p=0}break;case"smooth":var T=.35*(a-f);if(i[s][o]===null)p=0;else switch(p){case 0:if(b=f,m=B?C.move(f,d[o])+C.line(f,g):C.move(f,g),x=C.move(f,g),i[s][o+1]===null||i[s][o+1]===void 0){v.push(m),w.push(x);break}if(p=1,o<i[s].length-2){var k=C.curve(f+T,g,a-T,l,a,l);m+=k,x+=k;break}case 1:if(i[s][o+1]===null)m+=B?C.line(f,u):C.move(f,g),x+=C.line(f,M)+C.line(b,M)+"z",v.push(m),w.push(x),p=-1;else{var D=C.curve(f+T,g,a-T,l,a,l);m+=D,x+=D,o>=i[s].length-2&&(B&&(m+=C.curve(a,l,a,l,a,u)+C.move(a,u)),x+=C.curve(a,l,a,l,a,M)+C.line(b,M)+"z",v.push(m),w.push(x),p=-1)}}f=a,g=l;break;default:var X=function(W,Y,$){var rt=[];switch(W){case"stepline":rt=C.line(Y,null,"H")+C.line(null,$,"V");break;case"linestep":rt=C.line(null,$,"V")+C.line(Y,null,"H");break;case"straight":rt=C.line(Y,$)}return rt};if(i[s][o]===null)p=0;else switch(p){case 0:if(b=f,m=B?C.move(f,d[o])+C.line(f,g):C.move(f,g),x=C.move(f,g),i[s][o+1]===null||i[s][o+1]===void 0){v.push(m),w.push(x);break}if(p=1,o<i[s].length-2){var H=X(y,a,l);m+=H,x+=H;break}case 1:if(i[s][o+1]===null)m+=B?C.line(f,u):C.move(f,g),x+=C.line(f,M)+C.line(b,M)+"z",v.push(m),w.push(x),p=-1;else{var G=X(y,a,l);m+=G,x+=G,o>=i[s].length-2&&(B&&(m+=C.line(a,u)),x+=C.line(a,M)+C.line(b,M)+"z",v.push(m),w.push(x),p=-1)}}f=a,g=l}return{linePaths:v,areaPaths:w,pX:f,pY:g,pathState:p,segmentStartX:b,linePath:m,areaPath:x}}},{key:"handleNullDataPoints",value:function(t,e,i,s,n){var o=this.w;if(t[i][s]===null&&o.config.markers.showNullDataPoints||t[i].length===1){var a=this.strokeWidth-o.config.markers.strokeWidth/2;a>0||(a=0);var l=this.markers.plotChartMarkers({pointsPos:e,seriesIndex:n,j:s+1,pSize:a,alwaysDrawMarker:!0});l!==null&&this.elPointsMain.add(l)}}}]),r}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function r(a,l,c,h){this.xoffset=a,this.yoffset=l,this.height=h,this.width=c,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(u){var d,f=[],g=this.xoffset,p=this.yoffset,b=n(u)/this.height,m=n(u)/this.width;if(this.width>=this.height)for(d=0;d<u.length;d++)f.push([g,p,g+b,p+u[d]/b]),p+=u[d]/b;else for(d=0;d<u.length;d++)f.push([g,p,g+u[d]/m,p+m]),g+=u[d]/m;return f},this.cutArea=function(u){var d;if(this.width>=this.height){var f=u/this.height,g=this.width-f;d=new r(this.xoffset+f,this.yoffset,g,this.height)}else{var p=u/this.width,b=this.height-p;d=new r(this.xoffset,this.yoffset+p,this.width,b)}return d}}function t(a,l,c,h,u){h=h===void 0?0:h,u=u===void 0?0:u;var d=e(function(f,g){var p,b=[],m=g/n(f);for(p=0;p<f.length;p++)b[p]=f[p]*m;return b}(a,l*c),[],new r(h,u,l,c),[]);return function(f){var g,p,b=[];for(g=0;g<f.length;g++)for(p=0;p<f[g].length;p++)b.push(f[g][p]);return b}(d)}function e(a,l,c,h){var u,d,f;if(a.length!==0)return u=c.shortestEdge(),function(g,p,b){var m;if(g.length===0)return!0;(m=g.slice()).push(p);var x=i(g,b),v=i(m,b);return x>=v}(l,d=a[0],u)?(l.push(d),e(a.slice(1),l,c,h)):(f=c.cutArea(n(l),h),h.push(c.getCoordinates(l)),e(a,[],f,h)),h;h.push(c.getCoordinates(l))}function i(a,l){var c=Math.min.apply(Math,a),h=Math.max.apply(Math,a),u=n(a);return Math.max(Math.pow(l,2)*h/Math.pow(u,2),Math.pow(u,2)/(Math.pow(l,2)*c))}function s(a){return a&&a.constructor===Array}function n(a){var l,c=0;for(l=0;l<a.length;l++)c+=a[l];return c}function o(a){var l,c=0;if(s(a[0]))for(l=0;l<a.length;l++)c+=o(a[l]);else c=n(a);return c}return function a(l,c,h,u,d){u=u===void 0?0:u,d=d===void 0?0:d;var f,g,p=[],b=[];if(s(l[0])){for(g=0;g<l.length;g++)p[g]=o(l[g]);for(f=t(p,c,h,u,d),g=0;g<l.length;g++)b.push(a(l[g],f[g][2]-f[g][0],f[g][3]-f[g][1],f[g][0],f[g][1]))}else b=t(l,c,h,u,d);return b}}();var cF=function(){function r(t,e){Q(this,r),this.ctx=t,this.w=t.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new CA(t),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return tt(r,[{key:"draw",value:function(t){var e=this,i=this.w,s=new U(this.ctx),n=new wi(this.ctx),o=s.group({class:"apexcharts-treemap"});if(i.globals.noData)return o;var a=[];return t.forEach(function(l){var c=l.map(function(h){return Math.abs(h)});a.push(c)}),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach(function(l,c){l.data.forEach(function(h){Array.isArray(e.labels[c])||(e.labels[c]=[]),e.labels[c].push(h.x)})}),window.TreemapSquared.generate(a,i.globals.gridWidth,i.globals.gridHeight).forEach(function(l,c){var h=s.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:F.escapeString(i.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(i.config.chart.dropShadow.enabled){var u=i.config.chart.dropShadow;new pe(e.ctx).dropShadow(o,u,c)}var d=s.group({class:"apexcharts-data-labels"}),f={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0};l.forEach(function(I,S){var R=I[0],L=I[1],q=I[2],T=I[3];f.xMin=Math.min(f.xMin,R),f.yMin=Math.min(f.yMin,L),f.xMax=Math.max(f.xMax,q),f.yMax=Math.max(f.yMax,T);var k=e.helpers.getShadeColor(i.config.chart.type,c,S,e.negRange),D=k.color,X=n.fillPath({color:D,seriesNumber:c,dataPointIndex:S}),H=s.drawRect(R,L,q-R,T-L,i.config.plotOptions.treemap.borderRadius,"#fff",1,e.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?D:i.globals.stroke.colors[c]);H.attr({cx:R,cy:L,index:c,i:c,j:S,width:q-R,height:T-L,fill:X}),H.node.classList.add("apexcharts-treemap-rect"),e.helpers.addListeners(H);var G={x:R+(q-R)/2,y:L+(T-L)/2,width:0,height:0},W={x:R,y:L,width:q-R,height:T-L};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var Y=1;i.globals.resized||(Y=i.config.chart.animations.speed),e.animateTreemap(H,G,W,Y)}if(i.globals.dataChanged){var $=1;e.dynamicAnim.enabled&&i.globals.shouldAnimate&&($=e.dynamicAnim.speed,i.globals.previousPaths[c]&&i.globals.previousPaths[c][S]&&i.globals.previousPaths[c][S].rect&&(G=i.globals.previousPaths[c][S].rect),e.animateTreemap(H,G,W,$))}var rt=e.getFontSize(I),nt=i.config.dataLabels.formatter(e.labels[c][S],{value:i.globals.series[c][S],seriesIndex:c,dataPointIndex:S,w:i});i.config.plotOptions.treemap.dataLabels.format==="truncate"&&(rt=parseInt(i.config.dataLabels.style.fontSize,10),nt=e.truncateLabels(nt,rt,R,L,q,T));var lt=null;i.globals.series[c][S]&&(lt=e.helpers.calculateDataLabels({text:nt,x:(R+q)/2,y:(L+T)/2+e.strokeWidth/2+rt/3,i:c,j:S,colorProps:k,fontSize:rt,series:t})),i.config.dataLabels.enabled&&lt&&e.rotateToFitLabel(lt,rt,nt,R,L,q,T),h.add(H),lt!==null&&h.add(lt)});var g=i.config.plotOptions.treemap.seriesTitle;if(i.config.series.length>1&&g&&g.show){var p=i.config.series[c].name||"";if(p&&f.xMin<1/0&&f.yMin<1/0){var b=g.offsetX,m=g.offsetY,x=g.borderColor,v=g.borderWidth,w=g.borderRadius,y=g.style,A=y.color||i.config.chart.foreColor,C={left:y.padding.left,right:y.padding.right,top:y.padding.top,bottom:y.padding.bottom},M=s.getTextRects(p,y.fontSize,y.fontFamily),O=M.width+C.left+C.right,B=M.height+C.top+C.bottom,_=f.xMin+(b||0),z=f.yMin+(m||0),N=s.drawRect(_,z,O,B,w,y.background,1,v,x),E=s.drawText({x:_+C.left,y:z+C.top+.75*M.height,text:p,fontSize:y.fontSize,fontFamily:y.fontFamily,fontWeight:y.fontWeight,foreColor:A,cssClass:y.cssClass||""});h.add(N),h.add(E)}}h.add(d),o.add(h)}),o}},{key:"getFontSize",value:function(t){var e=this.w,i=function s(n){var o,a=0;if(Array.isArray(n[0]))for(o=0;o<n.length;o++)a+=s(n[o]);else for(o=0;o<n.length;o++)a+=n[o].length;return a}(this.labels)/function s(n){var o,a=0;if(Array.isArray(n[0]))for(o=0;o<n.length;o++)a+=s(n[o]);else for(o=0;o<n.length;o++)a+=1;return a}(this.labels);return function(s,n){var o=s*n,a=Math.pow(o,.5);return Math.min(a/i,parseInt(e.config.dataLabels.style.fontSize,10))}(t[2]-t[0],t[3]-t[1])}},{key:"rotateToFitLabel",value:function(t,e,i,s,n,o,a){var l=new U(this.ctx),c=l.getTextRects(i,e);if(c.width+this.w.config.stroke.width+5>o-s&&c.width<=a-n){var h=l.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(-90 ".concat(h.x," ").concat(h.y,") translate(").concat(c.height/3,")"))}}},{key:"truncateLabels",value:function(t,e,i,s,n,o){var a=new U(this.ctx),l=a.getTextRects(t,e).width+this.w.config.stroke.width+5>n-i&&o-s>n-i?o-s:n-i,c=a.getTextBasedOnMaxWidth({text:t,maxWidth:l,fontSize:e});return t.length!==c.length&&l/e<5?"":c}},{key:"animateTreemap",value:function(t,e,i,s){var n=new co(this.ctx);n.animateRect(t,e,i,s,function(){n.animationCompleted(t)})}}]),r}(),LA=86400,hF=10/LA,uF=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return tt(r,[{key:"calculateTimeScaleTicks",value:function(t,e){var i=this,s=this.w;if(s.globals.allSeriesCollapsed)return s.globals.labels=[],s.globals.timescaleLabels=[],[];var n=new fe(this.ctx),o=(e-t)/864e5;this.determineInterval(o),s.globals.disableZoomIn=!1,s.globals.disableZoomOut=!1,o<hF?s.globals.disableZoomIn=!0:o>5e4&&(s.globals.disableZoomOut=!0);var a=n.getTimeUnitsfromTimestamp(t,e,this.utc),l=s.globals.gridWidth/o,c=l/24,h=c/60,u=h/60,d=Math.floor(24*o),f=Math.floor(1440*o),g=Math.floor(o*LA),p=Math.floor(o),b=Math.floor(o/30),m=Math.floor(o/365),x={minMillisecond:a.minMillisecond,minSecond:a.minSecond,minMinute:a.minMinute,minHour:a.minHour,minDate:a.minDate,minMonth:a.minMonth,minYear:a.minYear},v={firstVal:x,currentMillisecond:x.minMillisecond,currentSecond:x.minSecond,currentMinute:x.minMinute,currentHour:x.minHour,currentMonthDate:x.minDate,currentDate:x.minDate,currentMonth:x.minMonth,currentYear:x.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:h,secondsWidthOnXAxis:u,numberOfSeconds:g,numberOfMinutes:f,numberOfHours:d,numberOfDays:p,numberOfMonths:b,numberOfYears:m};switch(this.tickInterval){case"years":this.generateYearScale(v);break;case"months":case"half_year":this.generateMonthScale(v);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(v);break;case"hours":this.generateHourScale(v);break;case"minutes_fives":case"minutes":this.generateMinuteScale(v);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(v)}var w=this.timeScaleArray.map(function(y){var A={position:y.position,unit:y.unit,year:y.year,day:y.day?y.day:1,hour:y.hour?y.hour:0,month:y.month+1};return y.unit==="month"?K(K({},A),{},{day:1,value:y.value+1}):y.unit==="day"||y.unit==="hour"?K(K({},A),{},{value:y.value}):y.unit==="minute"?K(K({},A),{},{value:y.value,minute:y.value}):y.unit==="second"?K(K({},A),{},{value:y.value,minute:y.minute,second:y.second}):y});return w.filter(function(y){var A=1,C=Math.ceil(s.globals.gridWidth/120),M=y.value;s.config.xaxis.tickAmount!==void 0&&(C=s.config.xaxis.tickAmount),w.length>C&&(A=Math.floor(w.length/C));var O=!1,B=!1;switch(i.tickInterval){case"years":y.unit==="year"&&(O=!0);break;case"half_year":A=7,y.unit==="year"&&(O=!0);break;case"months":A=1,y.unit==="year"&&(O=!0);break;case"months_fortnight":A=15,y.unit!=="year"&&y.unit!=="month"||(O=!0),M===30&&(B=!0);break;case"months_days":A=10,y.unit==="month"&&(O=!0),M===30&&(B=!0);break;case"week_days":A=8,y.unit==="month"&&(O=!0);break;case"days":A=1,y.unit==="month"&&(O=!0);break;case"hours":y.unit==="day"&&(O=!0);break;case"minutes_fives":case"seconds_fives":M%5!=0&&(B=!0);break;case"seconds_tens":M%10!=0&&(B=!0)}if(i.tickInterval==="hours"||i.tickInterval==="minutes_fives"||i.tickInterval==="seconds_tens"||i.tickInterval==="seconds_fives"){if(!B)return!0}else if((M%A==0||O)&&!B)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var i=this.w,s=this.formatDates(t),n=this.removeOverlappingTS(s);i.globals.timescaleLabels=n.slice(),new jh(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){var e=24*t,i=60*e;switch(!0){case t/365>5:this.tickInterval="years";break;case t>800:this.tickInterval="half_year";break;case t>180:this.tickInterval="months";break;case t>90:this.tickInterval="months_fortnight";break;case t>60:this.tickInterval="months_days";break;case t>30:this.tickInterval="week_days";break;case t>2:this.tickInterval="days";break;case e>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,i=t.currentMonth,s=t.currentYear,n=t.daysWidthOnXAxis,o=t.numberOfYears,a=e.minYear,l=0,c=new fe(this.ctx),h="year";if(e.minDate>1||e.minMonth>0){var u=c.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);l=(c.determineDaysOfYear(e.minYear)-u+1)*n,a=e.minYear+1,this.timeScaleArray.push({position:l,value:a,unit:h,year:a,month:F.monthMod(i+1)})}else e.minDate===1&&e.minMonth===0&&this.timeScaleArray.push({position:l,value:a,unit:h,year:s,month:F.monthMod(i+1)});for(var d=a,f=l,g=0;g<o;g++)d++,f=c.determineDaysOfYear(d-1)*n+f,this.timeScaleArray.push({position:f,value:d,unit:h,year:d,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,i=t.currentMonthDate,s=t.currentMonth,n=t.currentYear,o=t.daysWidthOnXAxis,a=t.numberOfMonths,l=s,c=0,h=new fe(this.ctx),u="month",d=0;if(e.minDate>1){c=(h.determineDaysOfMonths(s+1,e.minYear)-i+1)*o,l=F.monthMod(s+1);var f=n+d,g=F.monthMod(l),p=l;l===0&&(u="year",p=f,g=1,f+=d+=1),this.timeScaleArray.push({position:c,value:p,unit:u,year:f,month:g})}else this.timeScaleArray.push({position:c,value:l,unit:u,year:n,month:F.monthMod(s)});for(var b=l+1,m=c,x=0,v=1;x<a;x++,v++){(b=F.monthMod(b))===0?(u="year",d+=1):u="month";var w=this._getYear(n,b,d);m=h.determineDaysOfMonths(b,w)*o+m;var y=b===0?w:b;this.timeScaleArray.push({position:m,value:y,unit:u,year:w,month:b===0?1:b}),b++}}},{key:"generateDayScale",value:function(t){var e=t.firstVal,i=t.currentMonth,s=t.currentYear,n=t.hoursWidthOnXAxis,o=t.numberOfDays,a=new fe(this.ctx),l="day",c=e.minDate+1,h=c,u=function(v,w,y){return v>a.determineDaysOfMonths(w+1,y)&&(h=1,l="month",f=w+=1),w},d=(24-e.minHour)*n,f=c,g=u(h,i,s);e.minHour===0&&e.minDate===1?(d=0,f=F.monthMod(e.minMonth),l="month",h=e.minDate):e.minDate!==1&&e.minHour===0&&e.minMinute===0&&(d=0,c=e.minDate,f=c,g=u(h=c,i,s),f!==1&&(l="day")),this.timeScaleArray.push({position:d,value:f,unit:l,year:this._getYear(s,g,0),month:F.monthMod(g),day:h});for(var p=d,b=0;b<o;b++){l="day",g=u(h+=1,g,this._getYear(s,g,0));var m=this._getYear(s,g,0);p=24*n+p;var x=h===1?F.monthMod(g):h;this.timeScaleArray.push({position:p,value:x,unit:l,year:m,month:F.monthMod(g),day:x})}}},{key:"generateHourScale",value:function(t){var e=t.firstVal,i=t.currentDate,s=t.currentMonth,n=t.currentYear,o=t.minutesWidthOnXAxis,a=t.numberOfHours,l=new fe(this.ctx),c="hour",h=function(A,C){return A>l.determineDaysOfMonths(C+1,n)&&(b=1,C+=1),{month:C,date:b}},u=function(A,C){return A>l.determineDaysOfMonths(C+1,n)?C+=1:C},d=60-(e.minMinute+e.minSecond/60),f=d*o,g=e.minHour+1,p=g;d===60&&(f=0,p=g=e.minHour);var b=i;p>=24&&(p=0,c="day",g=b+=1);var m=h(b,s).month;m=u(b,m),g>31&&(g=b=1),this.timeScaleArray.push({position:f,value:g,unit:c,day:b,hour:p,year:n,month:F.monthMod(m)}),p++;for(var x=f,v=0;v<a;v++){c="hour",p>=24&&(p=0,c="day",m=h(b+=1,m).month,m=u(b,m));var w=this._getYear(n,m,0);x=60*o+x;var y=p===0?b:p;this.timeScaleArray.push({position:x,value:y,unit:c,hour:p,day:b,year:w,month:F.monthMod(m)}),p++}}},{key:"generateMinuteScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,s=t.currentMinute,n=t.currentHour,o=t.currentDate,a=t.currentMonth,l=t.currentYear,c=t.minutesWidthOnXAxis,h=t.secondsWidthOnXAxis,u=t.numberOfMinutes,d=s+1,f=o,g=a,p=l,b=n,m=(60-i-e/1e3)*h,x=0;x<u;x++)d>=60&&(d=0,(b+=1)===24&&(b=0)),this.timeScaleArray.push({position:m,value:d,unit:"minute",hour:b,minute:d,day:f,year:this._getYear(p,g,0),month:F.monthMod(g)}),m+=c,d++}},{key:"generateSecondScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,s=t.currentMinute,n=t.currentHour,o=t.currentDate,a=t.currentMonth,l=t.currentYear,c=t.secondsWidthOnXAxis,h=t.numberOfSeconds,u=i+1,d=s,f=o,g=a,p=l,b=n,m=(1e3-e)/1e3*c,x=0;x<h;x++)u>=60&&(u=0,++d>=60&&(d=0,++b===24&&(b=0))),this.timeScaleArray.push({position:m,value:u,unit:"second",hour:b,minute:d,second:u,day:f,year:this._getYear(p,g,0),month:F.monthMod(g)}),m+=c,u++}},{key:"createRawDateString",value:function(t,e){var i=t.year;return t.month===0&&(t.month=1),i+="-"+("0"+t.month.toString()).slice(-2),t.unit==="day"?i+=t.unit==="day"?"-"+("0"+e).slice(-2):"-01":i+="-"+("0"+(t.day?t.day:"1")).slice(-2),t.unit==="hour"?i+=t.unit==="hour"?"T"+("0"+e).slice(-2):"T00":i+="T"+("0"+(t.hour?t.hour:"0")).slice(-2),t.unit==="minute"?i+=":"+("0"+e).slice(-2):i+=":"+(t.minute?("0"+t.minute).slice(-2):"00"),t.unit==="second"?i+=":"+("0"+e).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(t){var e=this,i=this.w;return t.map(function(s){var n=s.value.toString(),o=new fe(e.ctx),a=e.createRawDateString(s,n),l=o.getDate(o.parseDate(a));if(e.utc||(l=o.getDate(o.parseDateWithTimezone(a))),i.config.xaxis.labels.format===void 0){var c="dd MMM",h=i.config.xaxis.labels.datetimeFormatter;s.unit==="year"&&(c=h.year),s.unit==="month"&&(c=h.month),s.unit==="day"&&(c=h.day),s.unit==="hour"&&(c=h.hour),s.unit==="minute"&&(c=h.minute),s.unit==="second"&&(c=h.second),n=o.formatDate(l,c)}else n=o.formatDate(l,i.config.xaxis.labels.format);return{dateString:a,position:s.position,value:n,unit:s.unit,year:s.year,month:s.month}})}},{key:"removeOverlappingTS",value:function(t){var e,i=this,s=new U(this.ctx),n=!1;t.length>0&&t[0].value&&t.every(function(l){return l.value.length===t[0].value.length})&&(n=!0,e=s.getTextRects(t[0].value).width);var o=0,a=t.map(function(l,c){if(c>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var h=n?e:s.getTextRects(t[o].value).width,u=t[o].position;return l.position>u+h+10?(o=c,l):null}return l});return a=a.filter(function(l){return l!==null})}},{key:"_getYear",value:function(t,e,i){return t+Math.floor(e/12)+i}}]),r}(),dF=function(){function r(t,e){Q(this,r),this.ctx=e,this.w=e.w,this.el=t}return tt(r,[{key:"setupElements",value:function(){var t=this.w,e=t.globals,i=t.config,s=i.chart.type;e.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(s),e.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(s),e.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(s)&&i.plotOptions.bar.horizontal,e.chartClass=".apexcharts".concat(e.chartID),e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),U.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas ".concat(e.chartClass.substring(1))}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=window.SVG().addTo(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(i.chart.offsetX,", ").concat(i.chart.offsetY,")")}),e.dom.Paper.node.style.background=i.theme.mode!=="dark"||i.chart.background?i.theme.mode!=="light"||i.chart.background?i.chart.background:"#fff":"#424242",this.setSVGDimensions(),e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject"),U.setAttrs(e.dom.elLegendForeign,{x:0,y:0,width:e.svgWidth,height:e.svgHeight}),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.dom.elLegendForeign.appendChild(e.dom.elLegendWrap),e.dom.Paper.node.appendChild(e.dom.elLegendForeign),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}},{key:"plotChartType",value:function(t,e){var i=this.w,s=this.ctx,n=i.config,o=i.globals,a={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},column:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},l=n.chart.type||"line",c=null,h=0;o.series.forEach(function(A,C){var M=t[C].type||l;a[M]?(M==="rangeArea"?(a[M].series.push(o.seriesRangeStart[C]),a[M].seriesRangeEnd.push(o.seriesRangeEnd[C])):a[M].series.push(A),a[M].i.push(C),M!=="column"&&M!=="bar"||(i.globals.columnSeries=a.column)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(M)?c=M:M==="bar"?(a.column.series.push(A),a.column.i.push(C)):console.warn("You have specified an unrecognized series type (".concat(M,").")),l!==M&&M!=="scatter"&&h++}),h>0&&(c&&console.warn("Chart or series type ".concat(c," cannot appear with other chart or series types.")),a.column.series.length>0&&n.plotOptions.bar.horizontal&&(h-=a.column.series.length,a.column={series:[],i:[]},i.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),o.comboCharts||(o.comboCharts=h>0);var u=new Tg(s,e),d=new Cg(s,e);s.pie=new TA(s);var f=new rF(s);s.rangeBar=new sF(s,e);var g=new iF(s),p=[];if(o.comboCharts){var b,m,x=new Yt(s);if(a.area.series.length>0&&(b=p).push.apply(b,se(x.drawSeriesByGroup(a.area,o.areaGroups,"area",u))),a.column.series.length>0)if(n.chart.stacked){var v=new P1(s,e);p.push(v.draw(a.column.series,a.column.i))}else s.bar=new lo(s,e),p.push(s.bar.draw(a.column.series,a.column.i));if(a.rangeArea.series.length>0&&p.push(u.draw(a.rangeArea.series,"rangeArea",a.rangeArea.i,a.rangeArea.seriesRangeEnd)),a.line.series.length>0&&(m=p).push.apply(m,se(x.drawSeriesByGroup(a.line,o.lineGroups,"line",u))),a.candlestick.series.length>0&&p.push(d.draw(a.candlestick.series,"candlestick",a.candlestick.i)),a.boxPlot.series.length>0&&p.push(d.draw(a.boxPlot.series,"boxPlot",a.boxPlot.i)),a.rangeBar.series.length>0&&p.push(s.rangeBar.draw(a.rangeBar.series,a.rangeBar.i)),a.scatter.series.length>0){var w=new Tg(s,e,!0);p.push(w.draw(a.scatter.series,"scatter",a.scatter.i))}if(a.bubble.series.length>0){var y=new Tg(s,e,!0);p.push(y.draw(a.bubble.series,"bubble",a.bubble.i))}}else switch(n.chart.type){case"line":p=u.draw(o.series,"line");break;case"area":p=u.draw(o.series,"area");break;case"bar":n.chart.stacked?p=new P1(s,e).draw(o.series):(s.bar=new lo(s,e),p=s.bar.draw(o.series));break;case"candlestick":p=new Cg(s,e).draw(o.series,"candlestick");break;case"boxPlot":p=new Cg(s,e).draw(o.series,n.chart.type);break;case"rangeBar":p=s.rangeBar.draw(o.series);break;case"rangeArea":p=u.draw(o.seriesRangeStart,"rangeArea",void 0,o.seriesRangeEnd);break;case"heatmap":p=new eF(s,e).draw(o.series);break;case"treemap":p=new cF(s,e).draw(o.series);break;case"pie":case"donut":case"polarArea":p=s.pie.draw(o.series);break;case"radialBar":p=f.draw(o.series);break;case"radar":p=g.draw(o.series);break;default:p=u.draw(o.series)}return p}},{key:"setSVGDimensions",value:function(){var t=this.w,e=t.globals,i=t.config;i.chart.width=i.chart.width||"100%",i.chart.height=i.chart.height||"auto",e.svgWidth=i.chart.width,e.svgHeight=i.chart.height;var s=F.getDimensions(this.el),n=i.chart.width.toString().split(/[0-9]+/g).pop();n==="%"?F.isNumber(s[0])&&(s[0].width===0&&(s=F.getDimensions(this.el.parentNode)),e.svgWidth=s[0]*parseInt(i.chart.width,10)/100):n!=="px"&&n!==""||(e.svgWidth=parseInt(i.chart.width,10));var o=String(i.chart.height).toString().split(/[0-9]+/g).pop();if(e.svgHeight!=="auto"&&e.svgHeight!=="")if(o==="%"){var a=F.getDimensions(this.el.parentNode);e.svgHeight=a[1]*parseInt(i.chart.height,10)/100}else e.svgHeight=parseInt(i.chart.height,10);else e.svgHeight=e.axisCharts?e.svgWidth/1.61:e.svgWidth/1.2;if(e.svgWidth=Math.max(e.svgWidth,0),e.svgHeight=Math.max(e.svgHeight,0),U.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),o!=="%"){var l=i.chart.sparkline.enabled?0:e.axisCharts?i.chart.parentHeightOffset:0;e.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(e.svgHeight+l,"px")}e.dom.elWrap.style.width="".concat(e.svgWidth,"px"),e.dom.elWrap.style.height="".concat(e.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals,e=t.translateY,i=t.translateX;U.setAttrs(t.dom.elGraphical.node,{transform:"translate(".concat(i,", ").concat(e,")")})}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=0,s=t.config.chart.sparkline.enabled?1:15;s+=t.config.grid.padding.bottom,["top","bottom"].includes(t.config.legend.position)&&t.config.legend.show&&!t.config.legend.floating&&(i=new wA(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var n=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),o=2.05*t.globals.radialSize;if(n&&!t.config.chart.sparkline.enabled&&t.config.plotOptions.radialBar.startAngle!==0){var a=F.getBoundingClientRect(n);o=a.bottom;var l=a.bottom-a.top;o=Math.max(2.05*t.globals.radialSize,l)}var c=Math.ceil(o+e.translateY+i+s);e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",c),t.config.chart.height&&String(t.config.chart.height).includes("%")||(e.dom.elWrap.style.height="".concat(c,"px"),U.setAttrs(e.dom.Paper.node,{height:c}),e.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(c,"px"))}},{key:"coreCalculations",value:function(){new zg(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,e=function(){return t.w.config.series.map(function(){return[]})},i=new bA,s=this.w.globals;i.initGlobalVars(s),s.seriesXvalues=e(),s.seriesYvalues=e()}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var t=this.w,e=null;if(t.globals.axisCharts){if(t.config.xaxis.crosshairs.position==="back"&&new Hg(this.ctx).drawXCrosshairs(),t.config.yaxis[0].crosshairs.position==="back"&&new Hg(this.ctx).drawYCrosshairs(),t.config.xaxis.type==="datetime"&&t.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new uF(this.ctx);var i=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}e=new Yt(this.ctx).getCalculatedRatios()}return e}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var t=this,e=this.ctx,i=this.w;if(i.config.chart.brush.enabled&&typeof i.config.chart.events.selection!="function"){var s=Array.isArray(i.config.chart.brush.targets)?i.config.chart.brush.targets:[i.config.chart.brush.target];s.forEach(function(n){var o=e.constructor.getChartByID(n);o.w.globals.brushSource=t.ctx,typeof o.w.config.chart.events.zoomed!="function"&&(o.w.config.chart.events.zoomed=function(){return t.updateSourceChart(o)}),typeof o.w.config.chart.events.scrolled!="function"&&(o.w.config.chart.events.scrolled=function(){return t.updateSourceChart(o)})}),i.config.chart.events.selection=function(n,o){s.forEach(function(a){e.constructor.getChartByID(a).ctx.updateHelpers._updateOptions({xaxis:{min:o.xaxis.min,max:o.xaxis.max}},!1,!1,!1,!1)})}}}}]),r}(),fF=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"_updateOptions",value:function(t){var e=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(a){var l=[e.ctx];n&&(l=e.ctx.getSyncedCharts()),e.ctx.w.globals.isExecCalled&&(l=[e.ctx],e.ctx.w.globals.isExecCalled=!1),l.forEach(function(c,h){var u=c.w;if(u.globals.shouldAnimate=s,i||(u.globals.resized=!0,u.globals.dataChanged=!0,s&&c.series.getPreviousPaths()),t&&ro(t)==="object"&&(c.config=new Fa(t),t=Yt.extendArrayProps(c.config,t,u),c.w.globals.chartID!==e.ctx.w.globals.chartID&&delete t.series,u.config=F.extend(u.config,t),o&&(u.globals.lastXAxis=t.xaxis?F.clone(t.xaxis):[],u.globals.lastYAxis=t.yaxis?F.clone(t.yaxis):[],u.globals.initialConfig=F.extend({},u.config),u.globals.initialSeries=F.clone(u.config.series),t.series))){for(var d=0;d<u.globals.collapsedSeriesIndices.length;d++){var f=u.config.series[u.globals.collapsedSeriesIndices[d]];u.globals.collapsedSeries[d].data=u.globals.axisCharts?f.data.slice():f}for(var g=0;g<u.globals.ancillaryCollapsedSeriesIndices.length;g++){var p=u.config.series[u.globals.ancillaryCollapsedSeriesIndices[g]];u.globals.ancillaryCollapsedSeries[g].data=u.globals.axisCharts?p.data.slice():p}c.series.emptyCollapsedSeries(u.config.series)}return c.update(t).then(function(){h===l.length-1&&a(c)})})})}},{key:"_updateSeries",value:function(t,e){var i=this,s=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(n){var o,a=i.w;return a.globals.shouldAnimate=e,a.globals.dataChanged=!0,e&&i.ctx.series.getPreviousPaths(),a.globals.axisCharts?((o=t.map(function(l,c){return i._extendSeries(l,c)})).length===0&&(o=[{data:[]}]),a.config.series=o):a.config.series=t.slice(),s&&(a.globals.initialConfig.series=F.clone(a.config.series),a.globals.initialSeries=F.clone(a.config.series)),i.ctx.update().then(function(){n(i.ctx)})})}},{key:"_extendSeries",value:function(t,e){var i=this.w,s=i.config.series[e];return K(K({},i.config.series[e]),{},{name:t.name?t.name:s?.name,color:t.color?t.color:s?.color,type:t.type?t.type:s?.type,group:t.group?t.group:s?.group,hidden:t.hidden!==void 0?t.hidden:s?.hidden,data:t.data?t.data:s?.data,zIndex:t.zIndex!==void 0?t.zIndex:e})}},{key:"toggleDataPointSelection",value:function(t,e){var i=this.w,s=null,n=".apexcharts-series[data\\:realIndex='".concat(t,"']");return i.globals.axisCharts?s=i.globals.dom.Paper.findOne("".concat(n," path[j='").concat(e,"'], ").concat(n," circle[j='").concat(e,"'], ").concat(n," rect[j='").concat(e,"']")):e===void 0&&(s=i.globals.dom.Paper.findOne("".concat(n," path[j='").concat(t,"']")),i.config.chart.type!=="pie"&&i.config.chart.type!=="polarArea"&&i.config.chart.type!=="donut"||this.ctx.pie.pieClicked(t)),s?(new U(this.ctx).pathMouseDown(s,null),s.node?s.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(t){var e=this.w;if(["min","max"].forEach(function(s){t.xaxis[s]!==void 0&&(e.config.xaxis[s]=t.xaxis[s],e.globals.lastXAxis[s]=t.xaxis[s])}),t.xaxis.categories&&t.xaxis.categories.length&&(e.config.xaxis.categories=t.xaxis.categories),e.config.xaxis.convertedCatToNumeric){var i=new Da(t);t=i.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){return t.chart&&t.chart.stacked&&t.chart.stackType==="100%"&&(Array.isArray(t.yaxis)?t.yaxis.forEach(function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100}):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(t){var e=this,i=this.w,s=i.globals.lastXAxis,n=i.globals.lastYAxis;t&&t.xaxis&&(s=t.xaxis),t&&t.yaxis&&(n=t.yaxis),i.config.xaxis.min=s.min,i.config.xaxis.max=s.max;var o=function(a){n[a]!==void 0&&(i.config.yaxis[a].min=n[a].min,i.config.yaxis[a].max=n[a].max)};i.config.yaxis.map(function(a,l){i.globals.zoomed||n[l]!==void 0?o(l):e.ctx.opts.yaxis[l]!==void 0&&(a.min=e.ctx.opts.yaxis[l].min,a.max=e.ctx.opts.yaxis[l].max)})}}]),r}();(function(){function r(){for(var n=arguments.length>0&&arguments[0]!==u?arguments[0]:[],o=arguments.length>1?arguments[1]:u,a=arguments.length>2?arguments[2]:u,l=arguments.length>3?arguments[3]:u,c=arguments.length>4?arguments[4]:u,h=arguments.length>5?arguments[5]:u,u=arguments.length>6?arguments[6]:u,d=n.slice(o,a||u),f=l.slice(c,h||u),g=0,p={pos:[0,0],start:[0,0]},b={pos:[0,0],start:[0,0]};d[g]=t.call(p,d[g]),f[g]=t.call(b,f[g]),d[g][0]!=f[g][0]||d[g][0]=="M"||d[g][0]=="A"&&(d[g][4]!=f[g][4]||d[g][5]!=f[g][5])?(Array.prototype.splice.apply(d,[g,1].concat(i.call(p,d[g]))),Array.prototype.splice.apply(f,[g,1].concat(i.call(b,f[g])))):(d[g]=e.call(p,d[g]),f[g]=e.call(b,f[g])),!(++g==d.length&&g==f.length);)g==d.length&&d.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]),g==f.length&&f.push(["C",b.pos[0],b.pos[1],b.pos[0],b.pos[1],b.pos[0],b.pos[1]]);return{start:d,dest:f}}function t(n){switch(n[0]){case"z":case"Z":n[0]="L",n[1]=this.start[0],n[2]=this.start[1];break;case"H":n[0]="L",n[2]=this.pos[1];break;case"V":n[0]="L",n[2]=n[1],n[1]=this.pos[0];break;case"T":n[0]="Q",n[3]=n[1],n[4]=n[2],n[1]=this.reflection[1],n[2]=this.reflection[0];break;case"S":n[0]="C",n[6]=n[4],n[5]=n[3],n[4]=n[2],n[3]=n[1],n[2]=this.reflection[1],n[1]=this.reflection[0]}return n}function e(n){var o=n.length;return this.pos=[n[o-2],n[o-1]],"SCQT".indexOf(n[0])!=-1&&(this.reflection=[2*this.pos[0]-n[o-4],2*this.pos[1]-n[o-3]]),n}function i(n){var o=[n];switch(n[0]){case"M":return this.pos=this.start=[n[1],n[2]],o;case"L":n[5]=n[3]=n[1],n[6]=n[4]=n[2],n[1]=this.pos[0],n[2]=this.pos[1];break;case"Q":n[6]=n[4],n[5]=n[3],n[4]=1*n[4]/3+2*n[2]/3,n[3]=1*n[3]/3+2*n[1]/3,n[2]=1*this.pos[1]/3+2*n[2]/3,n[1]=1*this.pos[0]/3+2*n[1]/3;break;case"A":o=function(a,l){var c,h,u,d,f,g,p,b,m,x,v,w,y,A,C,M,O,B,_,z,N,E,I,S,R,L,q=Math.abs(l[1]),T=Math.abs(l[2]),k=l[3]%360,D=l[4],X=l[5],H=l[6],G=l[7],W=new St(a),Y=new St(H,G),$=[];if(q===0||T===0||W.x===Y.x&&W.y===Y.y)return[["C",W.x,W.y,Y.x,Y.y,Y.x,Y.y]];for(c=new St((W.x-Y.x)/2,(W.y-Y.y)/2).transform(new ft().rotate(k)),h=c.x*c.x/(q*q)+c.y*c.y/(T*T),h>1&&(q*=h=Math.sqrt(h),T*=h),u=new ft().rotate(k).scale(1/q,1/T).rotate(-k),W=W.transform(u),Y=Y.transform(u),d=[Y.x-W.x,Y.y-W.y],g=d[0]*d[0]+d[1]*d[1],f=Math.sqrt(g),d[0]/=f,d[1]/=f,p=g<4?Math.sqrt(1-g/4):0,D===X&&(p*=-1),b=new St((Y.x+W.x)/2+p*-d[1],(Y.y+W.y)/2+p*d[0]),m=new St(W.x-b.x,W.y-b.y),x=new St(Y.x-b.x,Y.y-b.y),v=Math.acos(m.x/Math.sqrt(m.x*m.x+m.y*m.y)),m.y<0&&(v*=-1),w=Math.acos(x.x/Math.sqrt(x.x*x.x+x.y*x.y)),x.y<0&&(w*=-1),X&&v>w&&(w+=2*Math.PI),!X&&v<w&&(w-=2*Math.PI),A=Math.ceil(2*Math.abs(v-w)/Math.PI),M=[],O=v,y=(w-v)/A,C=4*Math.tan(y/4)/3,N=0;N<=A;N++)_=Math.cos(O),B=Math.sin(O),z=new St(b.x+_,b.y+B),M[N]=[new St(z.x+C*B,z.y-C*_),z,new St(z.x-C*B,z.y+C*_)],O+=y;for(M[0][0]=M[0][1].clone(),M[M.length-1][2]=M[M.length-1][1].clone(),u=new ft().rotate(k).scale(q,T).rotate(-k),N=0,E=M.length;N<E;N++)M[N][0]=M[N][0].transform(u),M[N][1]=M[N][1].transform(u),M[N][2]=M[N][2].transform(u);for(N=1,E=M.length;N<E;N++)I=(z=M[N-1][2]).x,S=z.y,R=(z=M[N][0]).x,L=z.y,H=(z=M[N][1]).x,G=z.y,$.push(["C",I,S,R,L,H,G]);return $}(this.pos,n),n=o[0]}return n[0]="C",this.pos=[n[5],n[6]],this.reflection=[2*n[5]-n[3],2*n[6]-n[4]],o}function s(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0;if(o===!1)return!1;for(var a=o,l=n.length;a<l;++a)if(n[a][0]=="M")return a;return!1}at(Je,{morph:function(n,o,a,l,c){for(var h=this.parse(n),u=this.parse(o),d=0,f=0,g=!1,p=!1;d!==!1||f!==!1;){var b;g=s(h,d!==!1&&d+1),p=s(u,f!==!1&&f+1),d===!1&&(d=(b=new Je(m.start).bbox()).height==0||b.width==0?h.push(h[0])-1:h.push(["M",b.x+b.width/2,b.y+b.height/2])-1),f===!1&&(f=(b=new Je(m.dest).bbox()).height==0||b.width==0?u.push(u[0])-1:u.push(["M",b.x+b.width/2,b.y+b.height/2])-1);var m=r(h,d,g,u,f,p);h=h.slice(0,d).concat(m.start,g===!1?[]:h.slice(g)),u=u.slice(0,f).concat(m.dest,p===!1?[]:u.slice(p)),d=g!==!1&&d+m.start.length,f=p!==!1&&f+m.dest.length}this._array=h,this.destination=new Je,this.destination._array=u;var x=this.fromArray(h.map(function(v,w){var y=u[w].map(function(A,C){return C===0?A:l.step(v[C],u[w][C],a,c[w],c)});return y}));return x}})})();var D1=r=>(r.changedTouches&&(r=r.changedTouches[0]),{x:r.clientX,y:r.clientY}),Wg=class{constructor(t){t.remember("_draggable",this),this.el=t,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(t){t?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(t){let e=!t.type.indexOf("mouse");if(e&&t.which!==1&&t.buttons!==0||this.el.dispatch("beforedrag",{event:t,handler:this}).defaultPrevented)return;t.preventDefault(),t.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(D1(t));let i=(e?"mouseup":"touchend")+".drag";dr(window,(e?"mousemove":"touchmove")+".drag",this.drag,this,{passive:!1}),dr(window,i,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:t,handler:this,box:this.box})}drag(t){let{box:e,lastClick:i}=this,s=this.el.point(D1(t)),n=s.x-i.x,o=s.y-i.y;if(!n&&!o)return e;let a=e.x+n,l=e.y+o;this.box=new Qt(a,l,e.w,e.h),this.lastClick=s,this.el.dispatch("dragmove",{event:t,handler:this,box:this.box}).defaultPrevented||this.move(a,l)}move(t,e){this.el.type==="svg"?Di.prototype.move.call(this.el,t,e):this.el.move(t,e)}endDrag(t){this.drag(t),this.el.fire("dragend",{event:t,handler:this,box:this.box}),di(window,"mousemove.drag"),di(window,"touchmove.drag"),di(window,"mouseup.drag"),di(window,"touchend.drag"),this.init(!0)}};function jg(r,t,e,i=null){return function(s){s.preventDefault(),s.stopPropagation();var n=s.pageX||s.touches[0].pageX,o=s.pageY||s.touches[0].pageY;t.fire(r,{x:n,y:o,event:s,index:i,points:e})}}function Xg([r,t],{a:e,b:i,c:s,d:n,e:o,f:a}){return[r*e+t*s+o,r*i+t*n+a]}at(ge,{draggable(r=!0){return(this.remember("_draggable")||new Wg(this)).init(r),this}});var MA=class{constructor(r){this.el=r,r.remember("_selectHandler",this),this.selection=new Di,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);let t=Ha();this.observer=new t.MutationObserver(this.mutationHandler)}init(r){this.createHandle=r.createHandle||this.createHandleFn,this.createRot=r.createRot||this.createRotFn,this.updateHandle=r.updateHandle||this.updateHandleFn,this.updateRot=r.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(r,t){if(!r)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((r,t,e)=>{let i=this.order[t];this.createHandle.call(this,this.selection,r,t,e,i),this.selection.get(t+1).addClass("svg_select_handle svg_select_handle_"+i).on("mousedown.selection touchstart.selection",jg(i,this.el,this.handlePoints,t))})}createHandleFn(r){r.polyline()}updateHandleFn(r,t,e,i){let s=i.at(e-1),n=i[(e+1)%i.length],o=t,a=[o[0]-s[0],o[1]-s[1]],l=[o[0]-n[0],o[1]-n[1]],c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),h=Math.sqrt(l[0]*l[0]+l[1]*l[1]),u=[a[0]/c,a[1]/c],d=[l[0]/h,l[1]/h],f=[o[0]-10*u[0],o[1]-10*u[1]],g=[o[0]-10*d[0],o[1]-10*d[1]];r.plot([f,o,g])}updateResizeHandles(){this.handlePoints.forEach((r,t,e)=>{let i=this.order[t];this.updateHandle.call(this,this.selection.get(t+1),r,t,e,i)})}createRotFn(r){r.line(),r.circle(5)}getPoint(r){return this.handlePoints[this.order.indexOf(r)]}getPointHandle(r){return this.selection.get(this.order.indexOf(r)+1)}updateRotFn(r,t){let e=this.getPoint("t");r.get(0).plot(e[0],e[1],t[0],t[1]),r.get(1).center(t[0],t[1])}createRotationHandle(){let r=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",jg("rot",this.el,this.handlePoints));this.createRot.call(this,r)}updateRotationHandle(){let r=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(r,this.rotationPoint,this.handlePoints)}updatePoints(){let r=this.el.bbox(),t=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(r).map(e=>Xg(e,t)),this.rotationPoint=Xg(this.getRotationPoint(r),t)}getHandlePoints({x:r,x2:t,y:e,y2:i,cx:s,cy:n}=this.el.bbox()){return[[r,e],[s,e],[t,e],[t,n],[t,i],[s,i],[r,i],[r,n]]}getRotationPoint({y:r,cx:t}=this.el.bbox()){return[t,r-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}},F1=r=>function(t=!0,e={}){typeof t=="object"&&(e=t,t=!0);let i=this.remember("_"+r.name);return i||(t.prototype instanceof MA?(i=new t(this),t=!0):i=new r(this),this.remember("_"+r.name,i)),i.active(t,e),this};function Yg(r,t,e,i=null){return function(s){s.preventDefault(),s.stopPropagation();var n=s.pageX||s.touches[0].pageX,o=s.pageY||s.touches[0].pageY;t.fire(r,{x:n,y:o,event:s,index:i,points:e})}}function Vg([r,t],{a:e,b:i,c:s,d:n,e:o,f:a}){return[r*e+t*s+o,r*i+t*n+a]}at(ge,{select:F1(MA)}),at([fr,pr,Ds],{pointSelect:F1(class{constructor(r){this.el=r,r.remember("_pointSelectHandler",this),this.selection=new Di,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);let t=Ha();this.observer=new t.MutationObserver(this.mutationHandler)}init(r){this.createHandle=r.createHandle||this.createHandleFn,this.updateHandle=r.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(r,t){if(!r)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((r,t,e)=>{this.createHandle.call(this,this.selection,r,t,e),this.selection.get(t+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",jg("point",this.el,this.points,t))})}createHandleFn(r){r.circle(5)}updateHandleFn(r,t){r.center(t[0],t[1])}updatePointHandles(){this.points.forEach((r,t,e)=>{this.updateHandle.call(this,this.selection.get(t+1),r,t,e)})}updatePoints(){let r=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(t=>Xg(t,r))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});var Xh=class{constructor(t){this.el=t,t.remember("_selectHandler",this),this.selection=new Di,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);let e=Ha();this.observer=new e.MutationObserver(this.mutationHandler)}init(t){this.createHandle=t.createHandle||this.createHandleFn,this.createRot=t.createRot||this.createRotFn,this.updateHandle=t.updateHandle||this.updateHandleFn,this.updateRot=t.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(t,e){if(!t)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((t,e,i)=>{let s=this.order[e];this.createHandle.call(this,this.selection,t,e,i,s),this.selection.get(e+1).addClass("svg_select_handle svg_select_handle_"+s).on("mousedown.selection touchstart.selection",Yg(s,this.el,this.handlePoints,e))})}createHandleFn(t){t.polyline()}updateHandleFn(t,e,i,s){let n=s.at(i-1),o=s[(i+1)%s.length],a=e,l=[a[0]-n[0],a[1]-n[1]],c=[a[0]-o[0],a[1]-o[1]],h=Math.sqrt(l[0]*l[0]+l[1]*l[1]),u=Math.sqrt(c[0]*c[0]+c[1]*c[1]),d=[l[0]/h,l[1]/h],f=[c[0]/u,c[1]/u],g=[a[0]-10*d[0],a[1]-10*d[1]],p=[a[0]-10*f[0],a[1]-10*f[1]];t.plot([g,a,p])}updateResizeHandles(){this.handlePoints.forEach((t,e,i)=>{let s=this.order[e];this.updateHandle.call(this,this.selection.get(e+1),t,e,i,s)})}createRotFn(t){t.line(),t.circle(5)}getPoint(t){return this.handlePoints[this.order.indexOf(t)]}getPointHandle(t){return this.selection.get(this.order.indexOf(t)+1)}updateRotFn(t,e){let i=this.getPoint("t");t.get(0).plot(i[0],i[1],e[0],e[1]),t.get(1).center(e[0],e[1])}createRotationHandle(){let t=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",Yg("rot",this.el,this.handlePoints));this.createRot.call(this,t)}updateRotationHandle(){let t=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(t,this.rotationPoint,this.handlePoints)}updatePoints(){let t=this.el.bbox(),e=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(t).map(i=>Vg(i,e)),this.rotationPoint=Vg(this.getRotationPoint(t),e)}getHandlePoints({x:t,x2:e,y:i,y2:s,cx:n,cy:o}=this.el.bbox()){return[[t,i],[n,i],[e,i],[e,o],[e,s],[n,s],[t,s],[t,o]]}getRotationPoint({y:t,cx:e}=this.el.bbox()){return[e,t-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}},B1=r=>function(t=!0,e={}){typeof t=="object"&&(e=t,t=!0);let i=this.remember("_"+r.name);return i||(t.prototype instanceof Xh?(i=new t(this),t=!0):i=new r(this),this.remember("_"+r.name,i)),i.active(t,e),this};at(ge,{select:B1(Xh)}),at([fr,pr,Ds],{pointSelect:B1(class{constructor(r){this.el=r,r.remember("_pointSelectHandler",this),this.selection=new Di,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);let t=Ha();this.observer=new t.MutationObserver(this.mutationHandler)}init(r){this.createHandle=r.createHandle||this.createHandleFn,this.updateHandle=r.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(r,t){if(!r)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((r,t,e)=>{this.createHandle.call(this,this.selection,r,t,e),this.selection.get(t+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",Yg("point",this.el,this.points,t))})}createHandleFn(r){r.circle(5)}updateHandleFn(r,t){r.center(t[0],t[1])}updatePointHandles(){this.points.forEach((r,t,e)=>{this.updateHandle.call(this,this.selection.get(t+1),r,t,e)})}updatePoints(){let r=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(t=>Vg(t,r))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});var qh=r=>(r.changedTouches&&(r=r.changedTouches[0]),{x:r.clientX,y:r.clientY}),_1=r=>{let t=1/0,e=1/0,i=-1/0,s=-1/0;for(let n=0;n<r.length;n++){let o=r[n];t=Math.min(t,o[0]),e=Math.min(e,o[1]),i=Math.max(i,o[0]),s=Math.max(s,o[1])}return new Qt(t,e,i-t,s-e)},Yh=class{constructor(t){this.el=t,t.remember("_ResizeHandler",this),this.lastCoordinates=null,this.eventType="",this.lastEvent=null,this.handleResize=this.handleResize.bind(this),this.resize=this.resize.bind(this),this.endResize=this.endResize.bind(this),this.rotate=this.rotate.bind(this),this.movePoint=this.movePoint.bind(this)}active(t,e){this.preserveAspectRatio=e.preserveAspectRatio??!1,this.aroundCenter=e.aroundCenter??!1,this.grid=e.grid??0,this.degree=e.degree??0,this.el.off(".resize"),t&&(this.el.on(["lt.resize","rt.resize","rb.resize","lb.resize","t.resize","r.resize","b.resize","l.resize","rot.resize","point.resize"],this.handleResize),this.lastEvent&&(this.eventType==="rot"?this.rotate(this.lastEvent):this.eventType==="point"?this.movePoint(this.lastEvent):this.resize(this.lastEvent)))}handleResize(t){this.eventType=t.type;let{event:e,index:i,points:s}=t.detail,n=!e.type.indexOf("mouse");if(n&&(e.which||e.buttons)!==1||this.el.dispatch("beforeresize",{event:t,handler:this}).defaultPrevented)return;this.box=this.el.bbox(),this.startPoint=this.el.point(qh(e)),this.index=i,this.points=s.slice();let o=(n?"mousemove":"touchmove")+".resize",a=(n?"mouseup":"touchcancel.resize touchend")+".resize";t.type==="point"?dr(window,o,this.movePoint):t.type==="rot"?dr(window,o,this.rotate):dr(window,o,this.resize),dr(window,a,this.endResize)}resize(t){this.lastEvent=t;let e=this.snapToGrid(this.el.point(qh(t))),i=e.x-this.startPoint.x,s=e.y-this.startPoint.y;this.preserveAspectRatio&&this.aroundCenter&&(i*=2,s*=2);let n=this.box.x+i,o=this.box.y+s,a=this.box.x2+i,l=this.box.y2+s,c=new Qt(this.box);if(this.eventType.includes("l")&&(c.x=Math.min(n,this.box.x2),c.x2=Math.max(n,this.box.x2)),this.eventType.includes("r")&&(c.x=Math.min(a,this.box.x),c.x2=Math.max(a,this.box.x)),this.eventType.includes("t")&&(c.y=Math.min(o,this.box.y2),c.y2=Math.max(o,this.box.y2)),this.eventType.includes("b")&&(c.y=Math.min(l,this.box.y),c.y2=Math.max(l,this.box.y)),c.width=c.x2-c.x,c.height=c.y2-c.y,this.preserveAspectRatio){let h=c.width/this.box.width,u=c.height/this.box.height,d=["lt","t","rt","r","rb","b","lb","l"],f=(d.indexOf(this.eventType)+4)%d.length,g=this.aroundCenter?[this.box.cx,this.box.cy]:this.points[f],p=this.eventType.includes("t")||this.eventType.includes("b")?u:h;p=this.eventType.length===2?Math.max(h,u):p,c=function(b,m,x){let v=[[b.x,b.y],[b.x+b.width,b.y],[b.x+b.width,b.y+b.height],[b.x,b.y+b.height]].map(([w,y])=>{let A=w-m[0],C=(y-m[1])*x;return[A*x+m[0],C+m[1]]});return _1(v)}(this.box,g,p)}this.el.dispatch("resize",{box:new Qt(c),angle:0,eventType:this.eventType,event:t,handler:this}).defaultPrevented||this.el.size(c.width,c.height).move(c.x,c.y)}movePoint(t){this.lastEvent=t;let{x:e,y:i}=this.snapToGrid(this.el.point(qh(t))),s=this.el.array().slice();s[this.index]=[e,i],this.el.dispatch("resize",{box:_1(s),angle:0,eventType:this.eventType,event:t,handler:this}).defaultPrevented||this.el.plot(s)}rotate(t){this.lastEvent=t;let e=this.startPoint,i=this.el.point(qh(t)),{cx:s,cy:n}=this.box,o=e.x-s,a=e.y-n,l=i.x-s,c=i.y-n,h=Math.sqrt(o*o+a*a)*Math.sqrt(l*l+c*c);if(h===0)return;let u=Math.acos((o*l+a*c)/h)/Math.PI*180;if(!u)return;i.x<e.x&&(u=-u);let d=new ft(this.el),{x:f,y:g}=new St(s,n).transformO(d),{rotate:p}=d.decompose(),b=this.snapToAngle(p+u)-p;this.el.dispatch("resize",{box:this.box,angle:b,eventType:this.eventType,event:t,handler:this}).defaultPrevented||this.el.transform(d.rotateO(b,f,g))}endResize(t){this.eventType!=="rot"&&this.eventType!=="point"&&this.resize(t),this.lastEvent=null,this.eventType="",di(window,"mousemove.resize touchmove.resize"),di(window,"mouseup.resize touchend.resize")}snapToGrid(t){return this.grid&&(t.x=Math.round(t.x/this.grid)*this.grid,t.y=Math.round(t.y/this.grid)*this.grid),t}snapToAngle(t){return this.degree&&(t=Math.round(t/this.degree)*this.degree),t}};at(ge,{resize:function(r=!0,t={}){typeof r=="object"&&(t=r,r=!0);let e=this.remember("_ResizeHandler");return e||(r.prototype instanceof Yh?(e=new r(this),r=!0):e=new Yh(this),this.remember("_resizeHandler",e)),e.active(r,t),this}}),window.SVG===void 0&&(window.SVG=MD),window.Apex===void 0&&(window.Apex={});var z1=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new co(this.ctx),this.ctx.axes=new _D(this.ctx),this.ctx.core=new dF(this.ctx.el,this.ctx),this.ctx.config=new Fa({}),this.ctx.data=new rm(this.ctx),this.ctx.grid=new xA(this.ctx),this.ctx.graphics=new U(this.ctx),this.ctx.coreUtils=new Yt(this.ctx),this.ctx.crosshairs=new Hg(this.ctx),this.ctx.events=new FD(this.ctx),this.ctx.exports=new Wh(this.ctx),this.ctx.fill=new wi(this.ctx),this.ctx.localization=new BD(this.ctx),this.ctx.options=new Ps,this.ctx.responsive=new zD(this.ctx),this.ctx.series=new fi(this.ctx),this.ctx.theme=new HD(this.ctx),this.ctx.formatters=new Wa(this.ctx),this.ctx.titleSubtitle=new WD(this.ctx),this.ctx.legend=new wA(this.ctx),this.ctx.toolbar=new AA(this.ctx),this.ctx.tooltip=new N1(this.ctx),this.ctx.dimensions=new jh(this.ctx),this.ctx.updateHelpers=new fF(this.ctx),this.ctx.zoomPanSelection=new GD(this.ctx),this.ctx.w.globals.tooltip=new N1(this.ctx)}}]),r}(),H1=function(){function r(t){Q(this,r),this.ctx=t,this.w=t.w}return tt(r,[{key:"clear",value:function(t){var e=t.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:e})}},{key:"killSVG",value:function(t){t.each(function(){this.removeClass("*"),this.off()},!0),t.clear()}},{key:"clearDomElements",value:function(t){var e=this,i=t.isUpdating,s=this.w.globals.dom.Paper.node;s.parentNode&&s.parentNode.parentNode&&!i&&(s.parentNode.parentNode.style.minHeight="unset");var n=this.w.globals.dom.baseEl;n&&this.ctx.eventList.forEach(function(a){n.removeEventListener(a,e.ctx.events.documentEvent)});var o=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(o.Paper),o.Paper.remove(),o.elWrap=null,o.elGraphical=null,o.elLegendWrap=null,o.elLegendForeign=null,o.baseEl=null,o.elGridRect=null,o.elGridRectMask=null,o.elGridRectBarMask=null,o.elGridRectMarkerMask=null,o.elForecastMask=null,o.elNonForecastMask=null,o.elDefs=null}}]),r}(),Lg=new WeakMap,RA=function(){function r(t,e){Q(this,r),this.opts=e,this.ctx=this,this.w=new DD(e).init(),this.el=t,this.w.globals.cuid=F.randomId(),this.w.globals.chartID=this.w.config.chart.id?F.escapeString(this.w.config.chart.id):this.w.globals.cuid,new z1(this).initModules(),this.create=F.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return tt(r,[{key:"render",value:function(){var t=this;return new Promise(function(e,i){if(F.elementExists(t.el)){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var s=t.w.config.chart.events.beforeMount;typeof s=="function"&&s(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),function(d,f){var g=!1;if(d.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var p=d.getBoundingClientRect();d.style.display!=="none"&&p.width!==0||(g=!0)}var b=new ResizeObserver(function(m){g&&f.call(d,m),g=!0});d.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(d.children).forEach(function(m){return b.observe(m)}):b.observe(d),Lg.set(f,b)}(t.el.parentNode,t.parentResizeHandler);var n=t.el.getRootNode&&t.el.getRootNode(),o=F.is("ShadowRoot",n),a=t.el.ownerDocument,l=o?n.getElementById("apexcharts-css"):a.getElementById("apexcharts-css");if(!l){var c;(l=document.createElement("style")).id="apexcharts-css",l.textContent=`@keyframes opaque {
  0% {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes resizeanim {

  0%,
  to {
    opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  direction: ltr !important;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  box-shadow: 0 0 1px rgba(255, 255, 255, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

rect.legend-mouseover-inactive,
.legend-mouseover-inactive rect,
.legend-mouseover-inactive path,
.legend-mouseover-inactive circle,
.legend-mouseover-inactive line,
.legend-mouseover-inactive text.apexcharts-yaxis-title-text,
.legend-mouseover-inactive text.apexcharts-yaxis-label {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255, 255, 255, .96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30, 30, 30, .8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0, 0, 0, .7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,
.apexcharts-tooltip-text-y-value,
.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,
.apexcharts-tooltip-text-goals-value:empty,
.apexcharts-tooltip-text-y-label:empty,
.apexcharts-tooltip-text-y-value:empty,
.apexcharts-tooltip-text-z-value:empty,
.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,
.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),
.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  display: inline-block;
  position: relative;
  width: 16px;
  height: 16px;
  font-size: 16px;
  line-height: 16px;
  margin-right: 4px;
  text-align: center;
  vertical-align: middle;
  color: inherit;
}

.apexcharts-tooltip-marker::before {
  content: "";
  display: inline-block;
  width: 100%;
  text-align: center;
  color: currentcolor;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  font-size: 26px;
  line-height: 14px;
  font-weight: 900;
}

.apexcharts-tooltip-marker[shape="circle"]::before {
  content: "\\25CF";
}

.apexcharts-tooltip-marker[shape="square"]::before,
.apexcharts-tooltip-marker[shape="rect"]::before {
  content: "\\25A0";
  transform: translate(-1px, -2px);
}

.apexcharts-tooltip-marker[shape="line"]::before {
  content: "\\2500";
}

.apexcharts-tooltip-marker[shape="diamond"]::before {
  content: "\\25C6";
  font-size: 28px;
}

.apexcharts-tooltip-marker[shape="triangle"]::before {
  content: "\\25B2";
  font-size: 22px;
}

.apexcharts-tooltip-marker[shape="cross"]::before {
  content: "\\2715";
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="plus"]::before {
  content: "\\2715";
  transform: rotate(45deg) translate(-1px, -1px);
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="star"]::before {
  content: "\\2605";
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="sparkle"]::before {
  content: "\\2726";
  font-size: 20px;
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,
.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,
.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-xaxistooltip:after,
.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,
.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,
.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-yaxistooltip:after,
.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,
.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,
.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,
.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,
.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_shape {
  stroke-width: 1;
  stroke-dasharray: 10 10;
  stroke: black;
  stroke-opacity: 0.1;
  pointer-events: none;
  fill: none;
}

.svg_select_handle {
  stroke-width: 3;
  stroke: black;
  fill: none;
}

.svg_select_handle_r {
  cursor: e-resize;
}

.svg_select_handle_l {
  cursor: w-resize;
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,
.apexcharts-pan-icon,
.apexcharts-reset-icon,
.apexcharts-selection-icon,
.apexcharts-toolbar-custom-icon,
.apexcharts-zoom-icon,
.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,
.apexcharts-reset-icon svg,
.apexcharts-zoom-icon svg,
.apexcharts-zoomin-icon svg,
.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,
.apexcharts-theme-dark .apexcharts-pan-icon svg,
.apexcharts-theme-dark .apexcharts-reset-icon svg,
.apexcharts-theme-dark .apexcharts-selection-icon svg,
.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
.apexcharts-theme-dark .apexcharts-zoom-icon svg,
.apexcharts-theme-dark .apexcharts-zoomin-icon svg,
.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,
.apexcharts-theme-light .apexcharts-reset-icon:hover svg,
.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,
.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,
.apexcharts-reset-icon,
.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0, 0, 0, .7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
    opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,
.apexcharts-datalabel.apexcharts-element-hidden,
.apexcharts-hide .apexcharts-series-points {
  opacity: 0;
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}

.apexcharts-datalabel,
.apexcharts-datalabel-label,
.apexcharts-datalabel-value,
.apexcharts-datalabels,
.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,
.apexcharts-area-series .apexcharts-area,
.apexcharts-gridline,
.apexcharts-line,
.apexcharts-point-annotation-label,
.apexcharts-radar-series path:not(.apexcharts-marker),
.apexcharts-radar-series polygon,
.apexcharts-toolbar svg,
.apexcharts-tooltip .apexcharts-marker,
.apexcharts-xaxis-annotation-label,
.apexcharts-yaxis-annotation-label,
.apexcharts-zoom-rect,
.no-pointer-events {
  pointer-events: none
}

.apexcharts-tooltip-active .apexcharts-marker {
  transition: .15s ease all
}

.apexcharts-radar-series .apexcharts-yaxis {
  pointer-events: none;
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,
.resize-triggers,
.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers {
  pointer-events: none
}

.apexcharts-bar-shadows {
  pointer-events: none
}

.apexcharts-rangebar-goals-markers {
  pointer-events: none
}`;var h=((c=t.opts.chart)===null||c===void 0?void 0:c.nonce)||t.w.config.chart.nonce;h&&l.setAttribute("nonce",h),o?n.prepend(l):a.head.appendChild(l)}var u=t.create(t.w.config.series,{});if(!u)return e(t);t.mount(u).then(function(){typeof t.w.config.chart.events.mounted=="function"&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),e(u)}).catch(function(d){i(d)})}else i(new Error("Element not found"))})}},{key:"create",value:function(t,e){var i=this,s=this.w;new z1(this).initModules();var n=this.w.globals;if(n.noData=!1,n.animationEnded=!1,!F.elementExists(this.el))return n.animationEnded=!0,this.destroy(),null;if(this.responsive.checkResponsiveConfig(e),s.config.xaxis.convertedCatToNumeric&&new Da(s.config).convertCatToNumericXaxis(s.config,this.ctx),this.core.setupElements(),s.config.chart.type==="treemap"&&(s.config.grid.show=!1,s.config.yaxis[0].show=!1),n.svgWidth===0)return n.animationEnded=!0,null;var o=t;t.forEach(function(d,f){d.hidden&&(o=i.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:f}))});var a=Yt.checkComboSeries(o,s.config.chart.type);n.comboCharts=a.comboCharts,n.comboBarCount=a.comboBarCount;var l=o.every(function(d){return d.data&&d.data.length===0});(o.length===0||l&&n.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(o),this.theme.init(),new po(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),n.noData&&n.collapsedSeries.length!==n.series.length&&!s.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),n.axisCharts&&(this.core.coreCalculations(),s.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=s.globals.minX,this.ctx.toolbar.maxX=s.globals.maxX),this.formatters.heatmapLabelFormatters(),new Yt(this).getLargestMarkerSize(),this.dimensions.plotCoords();var c=this.core.xySettings();this.grid.createGridMask();var h=this.core.plotChartType(o,c),u=new ao(this);return u.bringForward(),s.config.dataLabels.background.enabled&&u.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:h,xyRatios:c,dimensions:{plot:{left:s.globals.translateX,top:s.globals.translateY,width:s.globals.gridWidth,height:s.globals.gridHeight}}}}},{key:"mount",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this,s=i.w;return new Promise(function(n,o){if(i.el===null)return o(new Error("Not enough data to display or target element not found"));(e===null||s.globals.allSeriesCollapsed)&&i.series.handleNoData(),i.grid=new xA(i);var a,l,c=i.grid.drawGrid();if(i.annotations=new PD(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),s.config.grid.position==="back"&&(c&&s.globals.dom.elGraphical.add(c.el),c!=null&&(a=c.elGridBorders)!==null&&a!==void 0&&a.node&&s.globals.dom.elGraphical.add(c.elGridBorders)),Array.isArray(e.elGraph))for(var h=0;h<e.elGraph.length;h++)s.globals.dom.elGraphical.add(e.elGraph[h]);else s.globals.dom.elGraphical.add(e.elGraph);s.config.grid.position==="front"&&(c&&s.globals.dom.elGraphical.add(c.el),c!=null&&(l=c.elGridBorders)!==null&&l!==void 0&&l.node&&s.globals.dom.elGraphical.add(c.elGridBorders)),s.config.xaxis.crosshairs.position==="front"&&i.crosshairs.drawXCrosshairs(),s.config.yaxis[0].crosshairs.position==="front"&&i.crosshairs.drawYCrosshairs(),s.config.chart.type!=="treemap"&&i.axes.drawAxis(s.config.chart.type,c);var u=new Ba(t.ctx,c),d=new sm(t.ctx,c);if(c!==null&&(u.xAxisLabelCorrections(c.xAxisTickWidth),d.setYAxisTextAlignments(),s.config.yaxis.map(function(g,p){s.globals.ignoreYAxisIndexes.indexOf(p)===-1&&d.yAxisTitleRotate(p,g.opposite)})),i.annotations.drawAxesAnnotations(),!s.globals.noData){if(s.config.tooltip.enabled&&!s.globals.noData&&i.w.globals.tooltip.drawTooltip(e.xyRatios),s.globals.axisCharts&&(s.globals.isXNumeric||s.config.xaxis.convertedCatToNumeric||s.globals.isRangeBar))(s.config.chart.zoom.enabled||s.config.chart.selection&&s.config.chart.selection.enabled||s.config.chart.pan&&s.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:e.xyRatios});else{var f=s.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(g){f[g]=!1})}s.config.chart.toolbar.show&&!s.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}s.globals.memory.methodsToExec.length>0&&s.globals.memory.methodsToExec.forEach(function(g){g.method(g.params,!1,g.context)}),s.globals.axisCharts||s.globals.noData||i.core.resizeNonAxisCharts(),n(i)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),function(e,i){var s=Lg.get(i);s&&(s.disconnect(),Lg.delete(i))}(this.el.parentNode,this.parentResizeHandler);var t=this.w.config.chart.id;t&&Apex._chartInstances.forEach(function(e,i){e.id===F.escapeString(t)&&Apex._chartInstances.splice(i,1)}),new H1(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(t){var e=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=this.w;return a.globals.selection=void 0,t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map(function(l,c){return e.updateHelpers._extendSeries(l,c)})),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),a.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,i,s,n,o)}},{key:"updateSeries",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,i)}},{key:"appendSeries",value:function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],s=this.w.config.series.slice();return s.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(s,e,i)}},{key:"appendData",value:function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var s=i.w.config.series.slice(),n=0;n<s.length;n++)if(t[n]!==null&&t[n]!==void 0)for(var o=0;o<t[n].data.length;o++)s[n].data.push(t[n].data[o]);return i.w.config.series=s,e&&(i.w.globals.initialSeries=F.clone(i.w.config.series)),this.update()}},{key:"update",value:function(t){var e=this;return new Promise(function(i,s){new H1(e.ctx).clear({isUpdating:!0});var n=e.create(e.w.config.series,t);if(!n)return i(e);e.mount(n).then(function(){typeof e.w.config.chart.events.updated=="function"&&e.w.config.chart.events.updated(e,e.w),e.events.fireEvent("updated",[e,e.w]),e.w.globals.isDirty=!0,i(e)}).catch(function(o){s(o)})})}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach(function(i){e.push(i)})),e}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter(function(e){if(e.group)return!0}).map(function(e){return t.w.config.chart.group===e.group?e.chart:t})}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"highlightSeriesOnLegendHover",value:function(t,e){return this.series.toggleSeriesOnHover(t,e)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"highlightSeries",value:function(t){this.series.highlightSeries(t)}},{key:"isSeriesHidden",value:function(t){this.series.isSeriesHidden(t)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(t,e)}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,s=this;i&&(s=i),s.annotations.addXaxisAnnotationExternal(t,e,s)}},{key:"addYaxisAnnotation",value:function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,s=this;i&&(s=i),s.annotations.addYaxisAnnotationExternal(t,e,s)}},{key:"addPointAnnotation",value:function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,s=this;i&&(s=i),s.annotations.addPointAnnotationExternal(t,e,s)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,e=this;t&&(e=t),e.annotations.clearAnnotations(e)}},{key:"removeAnnotation",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=this;e&&(i=e),i.annotations.removeAnnotation(i,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new zg(this.ctx).getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new zg(this.ctx).getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"zoomX",value:function(t,e){this.ctx.toolbar.zoomUpdateOptions(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(t){return new Wh(this.ctx).dataURI(t)}},{key:"exportToCSV",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Wh(this.ctx).exportToCSV(t)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var t=this.w.config.chart.redrawOnWindowResize;typeof t=="function"&&(t=t()),t&&this._windowResize()}}],[{key:"getChartByID",value:function(t){var e=F.escapeString(t);if(Apex._chartInstances){var i=Apex._chartInstances.filter(function(s){return s.id===e})[0];return i&&i.chart}}},{key:"initOnLoad",value:function(){for(var t=document.querySelectorAll("[data-apexcharts]"),e=0;e<t.length;e++)new r(t[e],JSON.parse(t[e].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var i=this.getChartByID(t);if(i){i.w.globals.isExecCalled=!0;var s=null;if(i.publicMethods.indexOf(e)!==-1){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];s=i[e].apply(i,o)}return s}}},{key:"merge",value:function(t,e){return F.extend(t,e)}}]),r}();var Uh=class extends J{static values={data:Array};connect(){this.initializeChart()}disconnect(){this.chart&&this.chart.destroy()}initializeChart(){let r=this.dataValue.filter(e=>e.visitors>0),t={series:[{name:"Visitors",data:r.map(e=>e.visitors)}],chart:{type:"bar",height:"70%",dropShadow:{enabled:!0}},plotOptions:{bar:{borderRadius:0,horizontal:!0,barHeight:"60%",isFunnel:!0}},dataLabels:{enabled:!0,formatter:function(e,i){return i.w.globals.labels[i.dataPointIndex]+":  "+e},dropShadow:{enabled:!0}},xaxis:{categories:r.map(e=>`Step ${e.step_number}`)},legend:{show:!1},theme:{palette:"palette3"}};this.chart=new RA(this.element,t),this.chart.render()}};var Gh=class extends J{select(r){this.element.querySelectorAll(".bg-orange-50").forEach(t=>{t.classList.remove("bg-orange-50","border-orange-500")}),r.currentTarget.classList.add("bg-orange-50","border-orange-500")}};var $h=class extends J{static targets=["notification"];connect(){setTimeout(()=>{this.close()},3e3)}close(){this.notificationTarget.classList.add("opacity-0"),setTimeout(()=>{this.notificationTarget.remove()},300)}};var Kh=class extends J{static values={quizId:Number,stepId:Number,currentStep:Number,totalSteps:Number,trackingEnabled:Boolean};failedRequests=[];isSubmitting=!1;maxRetries=3;retryDelay=5e3;connect(){this.trackingEnabledValue&&(this.cleanupOldVisits(),this.trackStepView(this.currentStepValue),this.startRetryInterval(),this.loadFailedRequestsFromStorage())}disconnect(){this.retryInterval&&clearInterval(this.retryInterval),this.saveFailedRequestsToStorage(),this.processFailedRequests()}startRetryInterval(){this.retryInterval=setInterval(()=>{this.processFailedRequests()},this.retryDelay)}trackStep(r){if(this.trackingEnabledValue){let t=r.detail.step;this.trackStepView(t)}}async trackStepView(r){if(!this.trackingEnabledValue)return;let t=this.element.querySelector(`[data-step-number="${r}"]`),e=t?t.dataset.stepId:null;if(this.hasRecentVisit(r))return;let i={quiz_id:this.quizIdValue,step_id:e,step_number:r,timestamp:Date.now(),retryCount:0};try{await this.submitTracking(i)?this.markStepVisited(r):(this.failedRequests.push(i),this.saveFailedRequestsToStorage())}catch(s){console.error("Failed to track step view:",s),this.failedRequests.push(i),this.saveFailedRequestsToStorage()}}hasRecentVisit(r){let t=this.getStorageKey(r),e=localStorage.getItem(t);if(!e)return!1;let i=new Date(parseInt(e)),s=new Date;return s.setDate(s.getDate()-30),i>s}markStepVisited(r){let t=this.getStorageKey(r);localStorage.setItem(t,Date.now().toString())}getStorageKey(r){return`quiz_${this.quizIdValue}_step_${r}_visit`}cleanupOldVisits(){let r=Date.now()-2592e6;for(let t=0;t<localStorage.length;t++){let e=localStorage.key(t);e&&e.startsWith(`quiz_${this.quizIdValue}_step_`)&&parseInt(localStorage.getItem(e))<r&&localStorage.removeItem(e)}}async submitTracking(r){try{let t=await fetch("/quiz_tracking",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector("[name='csrf-token']").content},body:JSON.stringify({quiz_tracking:{quiz_id:r.quiz_id,step_id:r.step_id,step_number:r.step_number}})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return!0}catch(t){if(r.retryCount<this.maxRetries)throw t;return console.error("Max retries reached for tracking request:",r),!1}}async processFailedRequests(){if(!(this.isSubmitting||this.failedRequests.length===0)){this.isSubmitting=!0;try{let r=[...this.failedRequests];this.failedRequests=[];for(let t of r){t.retryCount++;try{await this.submitTracking(t)?this.markStepVisited(t.step_number):t.retryCount<this.maxRetries&&this.failedRequests.push(t)}catch{this.failedRequests.push(t)}await new Promise(e=>setTimeout(e,1e3))}this.saveFailedRequestsToStorage()}finally{this.isSubmitting=!1}}}loadFailedRequestsFromStorage(){let r=localStorage.getItem(`quiz_${this.quizIdValue}_failed_requests`);if(r)try{this.failedRequests=JSON.parse(r)}catch(t){console.error("Error loading failed requests:",t),this.failedRequests=[]}}saveFailedRequestsToStorage(){try{localStorage.setItem(`quiz_${this.quizIdValue}_failed_requests`,JSON.stringify(this.failedRequests))}catch(r){console.error("Error saving failed requests:",r)}}};var pF="2.1.12",Vs="[data-trix-attachment]",$m={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},Oe={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(r){return IA(r.parentNode)===Oe[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(r){return IA(r.parentNode)===Oe[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},IA=r=>{var t;return r==null||(t=r.tagName)===null||t===void 0?void 0:t.toLowerCase()},qA=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),nm=qA&&parseInt(qA[1]),al={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:nm&&nm>12,samsungAndroid:nm&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:typeof InputEvent<"u"&&["data","getTargetRanges","inputType"].every(r=>r in InputEvent.prototype)},dk={ADD_ATTR:["language"],SAFE_FOR_XML:!1,RETURN_DOM:!0},ut={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"},gF=[ut.bytes,ut.KB,ut.MB,ut.GB,ut.TB,ut.PB],fk={prefix:"IEC",precision:2,formatter(r){switch(r){case 0:return"0 ".concat(ut.bytes);case 1:return"1 ".concat(ut.byte);default:let t;this.prefix==="SI"?t=1e3:this.prefix==="IEC"&&(t=1024);let e=Math.floor(Math.log(r)/Math.log(t)),i=(r/Math.pow(t,e)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(i," ").concat(gF[e])}}},Lu="\uFEFF",os="\xA0",pk=function(r){for(let t in r){let e=r[t];this[t]=e}return this},Km=document.documentElement,mF=Km.matches,Wt=function(r){let{onElement:t,matchingSelector:e,withCallback:i,inPhase:s,preventDefault:n,times:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t||Km,l=e,c=s==="capturing",h=function(u){o!=null&&--o==0&&h.destroy();let d=ls(u.target,{matchingSelector:l});d!=null&&(i?.call(d,u,d),n&&u.preventDefault())};return h.destroy=()=>a.removeEventListener(r,h,c),a.addEventListener(r,h,c),h},Za=function(r){let{onElement:t,bubbles:e,cancelable:i,attributes:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t??Km;e=e!==!1,i=i!==!1;let o=document.createEvent("Events");return o.initEvent(r,e,i),s!=null&&pk.call(o,s),n.dispatchEvent(o)},gk=function(r,t){if(r?.nodeType===1)return mF.call(r,t)},ls=function(r){let{matchingSelector:t,untilNode:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.parentNode;if(r!=null){if(t==null)return r;if(r.closest&&e==null)return r.closest(t);for(;r&&r!==e;){if(gk(r,t))return r;r=r.parentNode}}},Zm=r=>document.activeElement!==r&&Ys(r,document.activeElement),Ys=function(r,t){if(r&&t)for(;t;){if(t===r)return!0;t=t.parentNode}},om=function(r){var t;if((t=r)===null||t===void 0||!t.parentNode)return;let e=0;for(r=r.previousSibling;r;)e++,r=r.previousSibling;return e},cs=r=>{var t;return r==null||(t=r.parentNode)===null||t===void 0?void 0:t.removeChild(r)},ou=function(r){let{onlyNodesOfType:t,usingFilter:e,expandEntityReferences:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(()=>{switch(t){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(r,s,e??null,i===!0)},qe=r=>{var t;return r==null||(t=r.tagName)===null||t===void 0?void 0:t.toLowerCase()},pt=function(r){let t,e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof r=="object"?(i=r,r=i.tagName):i={attributes:i};let s=document.createElement(r);if(i.editable!=null&&(i.attributes==null&&(i.attributes={}),i.attributes.contenteditable=i.editable),i.attributes)for(t in i.attributes)e=i.attributes[t],s.setAttribute(t,e);if(i.style)for(t in i.style)e=i.style[t],s.style[t]=e;if(i.data)for(t in i.data)e=i.data[t],s.dataset[t]=e;return i.className&&i.className.split(" ").forEach(n=>{s.classList.add(n)}),i.textContent&&(s.textContent=i.textContent),i.childNodes&&[].concat(i.childNodes).forEach(n=>{s.appendChild(n)}),s},ja,Ja=function(){if(ja!=null)return ja;ja=[];for(let r in Oe){let t=Oe[r];t.tagName&&ja.push(t.tagName)}return ja},am=r=>mo(r?.firstChild),OA=function(r){let{strict:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return t?mo(r):mo(r)||!mo(r.firstChild)&&function(e){return Ja().includes(qe(e))&&!Ja().includes(qe(e.firstChild))}(r)},mo=r=>bF(r)&&r?.data==="block",bF=r=>r?.nodeType===Node.COMMENT_NODE,bo=function(r){let{name:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r)return Qa(r)?r.data===Lu?!t||r.parentNode.dataset.trixCursorTarget===t:void 0:bo(r.firstChild)},Us=r=>gk(r,Vs),mk=r=>Qa(r)&&r?.data==="",Qa=r=>r?.nodeType===Node.TEXT_NODE,Jm={level2Enabled:!0,getLevel(){return this.level2Enabled&&al.supportsInputEvents?2:0},pickFiles(r){let t=pt("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});t.addEventListener("change",()=>{r(t.files),cs(t)}),cs(document.getElementById(this.fileInputId)),document.body.appendChild(t),t.click()}},ru={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:`
`},Ks={bold:{tagName:"strong",inheritable:!0,parser(r){let t=window.getComputedStyle(r);return t.fontWeight==="bold"||t.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:r=>window.getComputedStyle(r).fontStyle==="italic"},href:{groupTagName:"a",parser(r){let t="a:not(".concat(Vs,")"),e=r.closest(t);if(e)return e.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},bk={getDefaultHTML:()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(ut.bold,'" tabindex="-1">').concat(ut.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(ut.italic,'" tabindex="-1">').concat(ut.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(ut.strike,'" tabindex="-1">').concat(ut.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(ut.link,'" tabindex="-1">').concat(ut.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(ut.heading1,'" tabindex="-1">').concat(ut.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(ut.quote,'" tabindex="-1">').concat(ut.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(ut.code,'" tabindex="-1">').concat(ut.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(ut.bullets,'" tabindex="-1">').concat(ut.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(ut.numbers,'" tabindex="-1">').concat(ut.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(ut.outdent,'" tabindex="-1">').concat(ut.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(ut.indent,'" tabindex="-1">').concat(ut.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(ut.attachFiles,'" tabindex="-1">').concat(ut.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(ut.undo,'" tabindex="-1">').concat(ut.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(ut.redo,'" tabindex="-1">').concat(ut.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(ut.urlPlaceholder,'" aria-label="').concat(ut.url,`" data-trix-validate-href required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(ut.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(ut.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)},Im={interval:5e3},ll=Object.freeze({__proto__:null,attachments:$m,blockAttributes:Oe,browser:al,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},dompurify:dk,fileSize:fk,input:Jm,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:ut,parser:ru,textAttributes:Ks,toolbar:bk,undo:Im}),Vt=class{static proxyMethod(t){let{name:e,toMethod:i,toProperty:s,optional:n}=vF(t);this.prototype[e]=function(){let o,a;var l,c;return i?a=n?(l=this[i])===null||l===void 0?void 0:l.call(this):this[i]():s&&(a=this[s]),n?(o=(c=a)===null||c===void 0?void 0:c[e],o?NA.call(o,a,arguments):void 0):(o=a[e],NA.call(o,a,arguments))}}},vF=function(r){let t=r.match(xF);if(!t)throw new Error("can't parse @proxyMethod expression: ".concat(r));let e={name:t[4]};return t[2]!=null?e.toMethod=t[1]:e.toProperty=t[1],t[3]!=null&&(e.optional=!0),e},{apply:NA}=Function.prototype,xF=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$"),lm,cm,hm,Zs=class extends Vt{static box(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t instanceof this?t:this.fromUCS2String(t?.toString())}static fromUCS2String(t){return new this(t,qm(t))}static fromCodepoints(t){return new this(Om(t),t)}constructor(t,e){super(...arguments),this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(t){return Om(this.codepoints.slice(0,Math.max(0,t))).length}offsetFromUCS2Offset(t){return qm(this.ucs2String.slice(0,Math.max(0,t))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(t){return this.slice(t,t+1)}isEqualTo(t){return this.constructor.box(t).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}},yF=((lm=Array.from)===null||lm===void 0?void 0:lm.call(Array,"\u{1F47C}").length)===1,wF=((cm=" ".codePointAt)===null||cm===void 0?void 0:cm.call(" ",0))!=null,AF=((hm=String.fromCodePoint)===null||hm===void 0?void 0:hm.call(String,32,128124))===" \u{1F47C}",qm,Om;qm=yF&&wF?r=>Array.from(r).map(t=>t.codePointAt(0)):function(r){let t=[],e=0,{length:i}=r;for(;e<i;){let s=r.charCodeAt(e++);if(55296<=s&&s<=56319&&e<i){let n=r.charCodeAt(e++);(64512&n)==56320?s=((1023&s)<<10)+(1023&n)+65536:e--}t.push(s)}return t},Om=AF?r=>String.fromCodePoint(...Array.from(r||[])):function(r){return(()=>{let t=[];return Array.from(r).forEach(e=>{let i="";e>65535&&(e-=65536,i+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t.push(i+String.fromCharCode(e))}),t})().join("")};var kF=0,wr=class extends Vt{static fromJSONString(t){return this.fromJSON(JSON.parse(t))}constructor(){super(...arguments),this.id=++kF}hasSameConstructorAs(t){return this.constructor===t?.constructor}isEqualTo(t){return this===t}inspect(){let t=[],e=this.contentsForInspection()||{};for(let i in e){let s=e[i];t.push("".concat(i,"=").concat(s))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(t.length?" ".concat(t.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return Zs.box(this)}getCacheKey(){return this.id.toString()}},Js=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0},Qm=function(r){let t=r.slice(0);for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return t.splice(...i),t},SF=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,CF=function(){let r=pt("input",{dir:"auto",name:"x",dirName:"x.dir"}),t=pt("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),e=pt("form");e.appendChild(r),e.appendChild(t);let i=function(){try{return new FormData(e).has(t.dirName)}catch{return!1}}(),s=function(){try{return r.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return i?function(n){return t.value=n,new FormData(e).get(t.dirName)}:s?function(n){return r.value=n,r.matches(":dir(rtl)")?"rtl":"ltr"}:function(n){let o=n.trim().charAt(0);return SF.test(o)?"rtl":"ltr"}}(),um=null,dm=null,fm=null,Zh=null,Nm=()=>(um||(um=TF().concat(EF())),um),Gt=r=>Oe[r],EF=()=>(dm||(dm=Object.keys(Oe)),dm),Pm=r=>Ks[r],TF=()=>(fm||(fm=Object.keys(Ks)),fm),vk=function(r,t){LF(r).textContent=t.replace(/%t/g,r)},LF=function(r){let t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("data-tag-name",r.toLowerCase());let e=MF();return e&&t.setAttribute("nonce",e),document.head.insertBefore(t,document.head.firstChild),t},MF=function(){let r=PA("trix-csp-nonce")||PA("csp-nonce");if(r){let{nonce:t,content:e}=r;return t==""?e:t}},PA=r=>document.head.querySelector("meta[name=".concat(r,"]")),DA={"application/x-trix-feature-detection":"test"},xk=function(r){let t=r.getData("text/plain"),e=r.getData("text/html");if(!t||!e)return t?.length;{let{body:i}=new DOMParser().parseFromString(e,"text/html");if(i.textContent===t)return!i.querySelector("*")}},yk=/Mac|^iP/.test(navigator.platform)?r=>r.metaKey:r=>r.ctrlKey,tb=r=>setTimeout(r,1),wk=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={};for(let e in r){let i=r[e];t[e]=i}return t},Co=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(r).length!==Object.keys(t).length)return!1;for(let e in r)if(r[e]!==t[e])return!1;return!0},Tt=function(r){if(r!=null)return Array.isArray(r)||(r=[r,r]),[FA(r[0]),FA(r[1]!=null?r[1]:r[0])]},yr=function(r){if(r==null)return;let[t,e]=Tt(r);return Dm(t,e)},au=function(r,t){if(r==null||t==null)return;let[e,i]=Tt(r),[s,n]=Tt(t);return Dm(e,s)&&Dm(i,n)},FA=function(r){return typeof r=="number"?r:wk(r)},Dm=function(r,t){return typeof r=="number"?r===t:Co(r,t)},lu=class extends Vt{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(t){if(!this.selectionManagers.includes(t))return this.selectionManagers.push(t),this.start()}unregisterSelectionManager(t){if(this.selectionManagers=this.selectionManagers.filter(e=>e!==t),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(t=>t.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}},Qs=new lu,Ak=function(){let r=window.getSelection();if(r.rangeCount>0)return r},tl=function(){var r;let t=(r=Ak())===null||r===void 0?void 0:r.getRangeAt(0);if(t&&!RF(t))return t},kk=function(r){let t=window.getSelection();return t.removeAllRanges(),t.addRange(r),Qs.update()},RF=r=>BA(r.startContainer)||BA(r.endContainer),BA=r=>!Object.getPrototypeOf(r),Ka=r=>r.replace(new RegExp("".concat(Lu),"g"),"").replace(new RegExp("".concat(os),"g")," "),eb=new RegExp("[^\\S".concat(os,"]")),ib=r=>r.replace(new RegExp("".concat(eb.source),"g")," ").replace(/\ {2,}/g," "),_A=function(r,t){if(r.isEqualTo(t))return["",""];let e=pm(r,t),{length:i}=e.utf16String,s;if(i){let{offset:n}=e,o=r.codepoints.slice(0,n).concat(r.codepoints.slice(n+i));s=pm(t,Zs.fromCodepoints(o))}else s=pm(t,r);return[e.utf16String.toString(),s.utf16String.toString()]},pm=function(r,t){let e=0,i=r.length,s=t.length;for(;e<i&&r.charAt(e).isEqualTo(t.charAt(e));)e++;for(;i>e+1&&r.charAt(i-1).isEqualTo(t.charAt(s-1));)i--,s--;return{utf16String:r.slice(e,i),offset:e}},Si=class r extends wr{static fromCommonAttributesOfObjects(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!t.length)return new this;let e=Xa(t[0]),i=e.getKeys();return t.slice(1).forEach(s=>{i=e.getKeysCommonToHash(Xa(s)),e=e.slice(i)}),e}static box(t){return Xa(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=su(t)}add(t,e){return this.merge(IF(t,e))}remove(t){return new r(su(this.values,t))}get(t){return this.values[t]}has(t){return t in this.values}merge(t){return new r(qF(this.values,OF(t)))}slice(t){let e={};return Array.from(t).forEach(i=>{this.has(i)&&(e[i]=this.values[i])}),new r(e)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(t){return t=Xa(t),this.getKeys().filter(e=>this.values[e]===t.values[e])}isEqualTo(t){return Js(this.toArray(),Xa(t).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){let t=[];for(let e in this.values){let i=this.values[e];t.push(t.push(e,i))}this.array=t.slice(0)}return this.array}toObject(){return su(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}},IF=function(r,t){let e={};return e[r]=t,e},qF=function(r,t){let e=su(r);for(let i in t){let s=t[i];e[i]=s}return e},su=function(r,t){let e={};return Object.keys(r).sort().forEach(i=>{i!==t&&(e[i]=r[i])}),e},Xa=function(r){return r instanceof Si?r:new Si(r)},OF=function(r){return r instanceof Si?r.values:r},il=class{static groupObjects(){let t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:i,asTree:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s&&i==null&&(i=0);let n=[];return Array.from(e).forEach(o=>{var a;if(t){var l,c,h;if((l=o.canBeGrouped)!==null&&l!==void 0&&l.call(o,i)&&(c=(h=t[t.length-1]).canBeGroupedWith)!==null&&c!==void 0&&c.call(h,o,i))return void t.push(o);n.push(new this(t,{depth:i,asTree:s})),t=null}(a=o.canBeGrouped)!==null&&a!==void 0&&a.call(o,i)?t=[o]:n.push(o)}),t&&n.push(new this(t,{depth:i,asTree:s})),n}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:e,asTree:i}=arguments.length>1?arguments[1]:void 0;this.objects=t,i&&(this.depth=e,this.objects=this.constructor.groupObjects(this.objects,{asTree:i,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){let t=["objectGroup"];return Array.from(this.getObjects()).forEach(e=>{t.push(e.getCacheKey())}),t.join("/")}},Fm=class extends Vt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(t).forEach(e=>{let i=JSON.stringify(e);this.objects[i]==null&&(this.objects[i]=e)})}find(t){let e=JSON.stringify(t);return this.objects[e]}},Bm=class{constructor(t){this.reset(t)}add(t){let e=zA(t);this.elements[e]=t}remove(t){let e=zA(t),i=this.elements[e];if(i)return delete this.elements[e],i}reset(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(t).forEach(e=>{this.add(e)}),t}},zA=r=>r.dataset.trixStoreKey,vo=class extends Vt{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((t,e)=>(this.performing=!0,this.perform((i,s)=>{this.succeeded=i,this.performing=!1,this.performed=!0,this.succeeded?t(s):e(s)})))),this.promise}perform(t){return t(!1)}release(){var t,e;(t=this.promise)===null||t===void 0||(e=t.cancel)===null||e===void 0||e.call(t),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}};vo.proxyMethod("getPromise().then"),vo.proxyMethod("getPromise().catch");var Ar=class extends Vt{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=t,this.options=e,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(t=>t.cloneNode(!0))}invalidate(){var t;return this.nodes=null,this.childViews=[],(t=this.parentView)===null||t===void 0?void 0:t.invalidate()}invalidateViewForObject(t){var e;return(e=this.findViewForObject(t))===null||e===void 0?void 0:e.invalidate()}findOrCreateCachedChildView(t,e,i){let s=this.getCachedViewForObject(e);return s?this.recordChildView(s):(s=this.createChildView(...arguments),this.cacheViewForObject(s,e)),s}createChildView(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e instanceof il&&(i.viewClass=t,t=_m);let s=new t(e,i);return this.recordChildView(s)}recordChildView(t){return t.parentView=this,t.rootView=this.rootView,this.childViews.push(t),t}getAllChildViews(){let t=[];return this.childViews.forEach(e=>{t.push(e),t=t.concat(e.getAllChildViews())}),t}findElement(){return this.findElementForObject(this.object)}findElementForObject(t){let e=t?.id;if(e)return this.rootView.element.querySelector("[data-trix-id='".concat(e,"']"))}findViewForObject(t){for(let e of this.getAllChildViews())if(e.object===t)return e}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(t){var e;return(e=this.getViewCache())===null||e===void 0?void 0:e[t.getCacheKey()]}cacheViewForObject(t,e){let i=this.getViewCache();i&&(i[e.getCacheKey()]=t)}garbageCollectCachedViews(){let t=this.getViewCache();if(t){let e=this.getAllChildViews().concat(this).map(i=>i.object.getCacheKey());for(let i in t)e.includes(i)||delete t[i]}}},_m=class extends Ar{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(t=>{this.findOrCreateCachedChildView(this.viewClass,t,this.options)}),this.childViews}createNodes(){let t=this.createContainerElement();return this.getChildViews().forEach(e=>{Array.from(e.getNodes()).forEach(i=>{t.appendChild(i)})}),[t]}createContainerElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(t)}};var{entries:Sk,setPrototypeOf:HA,isFrozen:NF,getPrototypeOf:PF,getOwnPropertyDescriptor:DF}=Object,{freeze:Ne,seal:gi,create:Ck}=Object,{apply:zm,construct:Hm}=typeof Reflect<"u"&&Reflect;Ne||(Ne=function(r){return r}),gi||(gi=function(r){return r}),zm||(zm=function(r,t,e){return r.apply(t,e)}),Hm||(Hm=function(r,t){return new r(...t)});var Jh=ei(Array.prototype.forEach),WA=ei(Array.prototype.pop),Ya=ei(Array.prototype.push),nu=ei(String.prototype.toLowerCase),gm=ei(String.prototype.toString),jA=ei(String.prototype.match),Va=ei(String.prototype.replace),FF=ei(String.prototype.indexOf),BF=ei(String.prototype.trim),Ai=ei(Object.prototype.hasOwnProperty),Ie=ei(RegExp.prototype.test),Ua=(XA=TypeError,function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return Hm(XA,t)}),XA;function ei(r){return function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return zm(r,t,i)}}function bt(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nu;HA&&HA(r,null);let i=t.length;for(;i--;){let s=t[i];if(typeof s=="string"){let n=e(s);n!==s&&(NF(t)||(t[i]=n),s=n)}r[s]=!0}return r}function _F(r){for(let t=0;t<r.length;t++)Ai(r,t)||(r[t]=null);return r}function Xs(r){let t=Ck(null);for(let[e,i]of Sk(r))Ai(r,e)&&(Array.isArray(i)?t[e]=_F(i):i&&typeof i=="object"&&i.constructor===Object?t[e]=Xs(i):t[e]=i);return t}function Ga(r,t){for(;r!==null;){let e=DF(r,t);if(e){if(e.get)return ei(e.get);if(typeof e.value=="function")return ei(e.value)}r=PF(r)}return function(){return null}}var YA=Ne(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mm=Ne(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),bm=Ne(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),zF=Ne(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vm=Ne(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),HF=Ne(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),VA=Ne(["#text"]),UA=Ne(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),xm=Ne(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),GA=Ne(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Qh=Ne(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),WF=gi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jF=gi(/<%[\w\W]*|[\w\W]*%>/gm),XF=gi(/\$\{[\w\W]*}/gm),YF=gi(/^data-[\-\w.\u00B7-\uFFFF]+$/),VF=gi(/^aria-[\-\w]+$/),Ek=gi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),UF=gi(/^(?:\w+script|data):/i),GF=gi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Tk=gi(/^html$/i),$F=gi(/^[a-z][.\w]*(-[.\w]+)+$/i),$A=Object.freeze({__proto__:null,ARIA_ATTR:VF,ATTR_WHITESPACE:GF,CUSTOM_ELEMENT:$F,DATA_ATTR:YF,DOCTYPE_NAME:Tk,ERB_EXPR:jF,IS_ALLOWED_URI:Ek,IS_SCRIPT_OR_DATA:UF,MUSTACHE_EXPR:WF,TMPLIT_EXPR:XF}),KF=1,ZF=3,JF=7,QF=8,tB=9,eB=function(){return typeof window>"u"?null:window},cu=function r(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:eB(),e=P=>r(P);if(e.version="3.2.3",e.removed=[],!t||!t.document||t.document.nodeType!==tB)return e.isSupported=!1,e;let{document:i}=t,s=i,n=s.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:h,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:g}=t,p=c.prototype,b=Ga(p,"cloneNode"),m=Ga(p,"remove"),x=Ga(p,"nextSibling"),v=Ga(p,"childNodes"),w=Ga(p,"parentNode");if(typeof a=="function"){let P=i.createElement("template");P.content&&P.content.ownerDocument&&(i=P.content.ownerDocument)}let y,A="",{implementation:C,createNodeIterator:M,createDocumentFragment:O,getElementsByTagName:B}=i,{importNode:_}=s,z={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};e.isSupported=typeof Sk=="function"&&typeof w=="function"&&C&&C.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:N,ERB_EXPR:E,TMPLIT_EXPR:I,DATA_ATTR:S,ARIA_ATTR:R,IS_SCRIPT_OR_DATA:L,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:T}=$A,{IS_ALLOWED_URI:k}=$A,D=null,X=bt({},[...YA,...mm,...bm,...vm,...VA]),H=null,G=bt({},[...UA,...xm,...GA,...Qh]),W=Object.seal(Ck(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Y=null,$=null,rt=!0,nt=!0,lt=!1,ct=!0,ot=!1,ht=!0,qt=!1,ce=!1,he=!1,ne=!1,Pe=!1,oe=!1,hs=!0,us=!1,Cr=!0,Ue=!1,Ae={},ue=null,zi=bt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Hi=null,Er=bt({},["audio","video","img","source","image","track"]),Ci=null,Tr=bt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Lr="http://www.w3.org/1998/Math/MathML",Mr="http://www.w3.org/2000/svg",mi="http://www.w3.org/1999/xhtml",Wi=mi,ji=!1,en=null,qu=bt({},[Lr,Mr,mi],gm),cl=bt({},["mi","mo","mn","ms","mtext"]),hl=bt({},["annotation-xml"]),Bk=bt({},["title","style","font","a","script"]),Eo=null,_k=["application/xhtml+xml","text/html"],ae=null,rn=null,zk=i.createElement("form"),sb=function(P){return P instanceof RegExp||P instanceof Function},Ou=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!rn||rn!==P){if(P&&typeof P=="object"||(P={}),P=Xs(P),Eo=_k.indexOf(P.PARSER_MEDIA_TYPE)===-1?"text/html":P.PARSER_MEDIA_TYPE,ae=Eo==="application/xhtml+xml"?gm:nu,D=Ai(P,"ALLOWED_TAGS")?bt({},P.ALLOWED_TAGS,ae):X,H=Ai(P,"ALLOWED_ATTR")?bt({},P.ALLOWED_ATTR,ae):G,en=Ai(P,"ALLOWED_NAMESPACES")?bt({},P.ALLOWED_NAMESPACES,gm):qu,Ci=Ai(P,"ADD_URI_SAFE_ATTR")?bt(Xs(Tr),P.ADD_URI_SAFE_ATTR,ae):Tr,Hi=Ai(P,"ADD_DATA_URI_TAGS")?bt(Xs(Er),P.ADD_DATA_URI_TAGS,ae):Er,ue=Ai(P,"FORBID_CONTENTS")?bt({},P.FORBID_CONTENTS,ae):zi,Y=Ai(P,"FORBID_TAGS")?bt({},P.FORBID_TAGS,ae):{},$=Ai(P,"FORBID_ATTR")?bt({},P.FORBID_ATTR,ae):{},Ae=!!Ai(P,"USE_PROFILES")&&P.USE_PROFILES,rt=P.ALLOW_ARIA_ATTR!==!1,nt=P.ALLOW_DATA_ATTR!==!1,lt=P.ALLOW_UNKNOWN_PROTOCOLS||!1,ct=P.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ot=P.SAFE_FOR_TEMPLATES||!1,ht=P.SAFE_FOR_XML!==!1,qt=P.WHOLE_DOCUMENT||!1,ne=P.RETURN_DOM||!1,Pe=P.RETURN_DOM_FRAGMENT||!1,oe=P.RETURN_TRUSTED_TYPE||!1,he=P.FORCE_BODY||!1,hs=P.SANITIZE_DOM!==!1,us=P.SANITIZE_NAMED_PROPS||!1,Cr=P.KEEP_CONTENT!==!1,Ue=P.IN_PLACE||!1,k=P.ALLOWED_URI_REGEXP||Ek,Wi=P.NAMESPACE||mi,cl=P.MATHML_TEXT_INTEGRATION_POINTS||cl,hl=P.HTML_INTEGRATION_POINTS||hl,W=P.CUSTOM_ELEMENT_HANDLING||{},P.CUSTOM_ELEMENT_HANDLING&&sb(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&sb(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(W.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ot&&(nt=!1),Pe&&(ne=!0),Ae&&(D=bt({},VA),H=[],Ae.html===!0&&(bt(D,YA),bt(H,UA)),Ae.svg===!0&&(bt(D,mm),bt(H,xm),bt(H,Qh)),Ae.svgFilters===!0&&(bt(D,bm),bt(H,xm),bt(H,Qh)),Ae.mathMl===!0&&(bt(D,vm),bt(H,GA),bt(H,Qh))),P.ADD_TAGS&&(D===X&&(D=Xs(D)),bt(D,P.ADD_TAGS,ae)),P.ADD_ATTR&&(H===G&&(H=Xs(H)),bt(H,P.ADD_ATTR,ae)),P.ADD_URI_SAFE_ATTR&&bt(Ci,P.ADD_URI_SAFE_ATTR,ae),P.FORBID_CONTENTS&&(ue===zi&&(ue=Xs(ue)),bt(ue,P.FORBID_CONTENTS,ae)),Cr&&(D["#text"]=!0),qt&&bt(D,["html","head","body"]),D.table&&(bt(D,["tbody"]),delete Y.tbody),P.TRUSTED_TYPES_POLICY){if(typeof P.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ua('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof P.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ua('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=P.TRUSTED_TYPES_POLICY,A=y.createHTML("")}else y===void 0&&(y=function(st,et){if(typeof st!="object"||typeof st.createPolicy!="function")return null;let vt=null,kt="data-tt-policy-suffix";et&&et.hasAttribute(kt)&&(vt=et.getAttribute(kt));let gt="dompurify"+(vt?"#"+vt:"");try{return st.createPolicy(gt,{createHTML:te=>te,createScriptURL:te=>te})}catch{return console.warn("TrustedTypes policy "+gt+" could not be created."),null}}(g,n)),y!==null&&typeof A=="string"&&(A=y.createHTML(""));Ne&&Ne(P),rn=P}},nb=bt({},[...mm,...bm,...zF]),ob=bt({},[...vm,...HF]),Ei=function(P){Ya(e.removed,{element:P});try{w(P).removeChild(P)}catch{m(P)}},ul=function(P,st){try{Ya(e.removed,{attribute:st.getAttributeNode(P),from:st})}catch{Ya(e.removed,{attribute:null,from:st})}if(st.removeAttribute(P),P==="is")if(ne||Pe)try{Ei(st)}catch{}else try{st.setAttribute(P,"")}catch{}},ab=function(P){let st=null,et=null;if(he)P="<remove></remove>"+P;else{let gt=jA(P,/^[\r\n\t ]+/);et=gt&&gt[0]}Eo==="application/xhtml+xml"&&Wi===mi&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");let vt=y?y.createHTML(P):P;if(Wi===mi)try{st=new f().parseFromString(vt,Eo)}catch{}if(!st||!st.documentElement){st=C.createDocument(Wi,"template",null);try{st.documentElement.innerHTML=ji?A:vt}catch{}}let kt=st.body||st.documentElement;return P&&et&&kt.insertBefore(i.createTextNode(et),kt.childNodes[0]||null),Wi===mi?B.call(st,qt?"html":"body")[0]:qt?st.documentElement:kt},lb=function(P){return M.call(P.ownerDocument||P,P,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Nu=function(P){return P instanceof d&&(typeof P.nodeName!="string"||typeof P.textContent!="string"||typeof P.removeChild!="function"||!(P.attributes instanceof u)||typeof P.removeAttribute!="function"||typeof P.setAttribute!="function"||typeof P.namespaceURI!="string"||typeof P.insertBefore!="function"||typeof P.hasChildNodes!="function")},cb=function(P){return typeof l=="function"&&P instanceof l};function Xi(P,st,et){Jh(P,vt=>{vt.call(e,st,et,rn)})}let hb=function(P){let st=null;if(Xi(z.beforeSanitizeElements,P,null),Nu(P))return Ei(P),!0;let et=ae(P.nodeName);if(Xi(z.uponSanitizeElement,P,{tagName:et,allowedTags:D}),P.hasChildNodes()&&!cb(P.firstElementChild)&&Ie(/<[/\w]/g,P.innerHTML)&&Ie(/<[/\w]/g,P.textContent)||P.nodeType===JF||ht&&P.nodeType===QF&&Ie(/<[/\w]/g,P.data))return Ei(P),!0;if(!D[et]||Y[et]){if(!Y[et]&&db(et)&&(W.tagNameCheck instanceof RegExp&&Ie(W.tagNameCheck,et)||W.tagNameCheck instanceof Function&&W.tagNameCheck(et)))return!1;if(Cr&&!ue[et]){let vt=w(P)||P.parentNode,kt=v(P)||P.childNodes;if(kt&&vt)for(let gt=kt.length-1;gt>=0;--gt){let te=b(kt[gt],!0);te.__removalCount=(P.__removalCount||0)+1,vt.insertBefore(te,x(P))}}return Ei(P),!0}return P instanceof c&&!function(vt){let kt=w(vt);kt&&kt.tagName||(kt={namespaceURI:Wi,tagName:"template"});let gt=nu(vt.tagName),te=nu(kt.tagName);return!!en[vt.namespaceURI]&&(vt.namespaceURI===Mr?kt.namespaceURI===mi?gt==="svg":kt.namespaceURI===Lr?gt==="svg"&&(te==="annotation-xml"||cl[te]):!!nb[gt]:vt.namespaceURI===Lr?kt.namespaceURI===mi?gt==="math":kt.namespaceURI===Mr?gt==="math"&&hl[te]:!!ob[gt]:vt.namespaceURI===mi?!(kt.namespaceURI===Mr&&!hl[te])&&!(kt.namespaceURI===Lr&&!cl[te])&&!ob[gt]&&(Bk[gt]||!nb[gt]):!(Eo!=="application/xhtml+xml"||!en[vt.namespaceURI]))}(P)?(Ei(P),!0):et!=="noscript"&&et!=="noembed"&&et!=="noframes"||!Ie(/<\/no(script|embed|frames)/i,P.innerHTML)?(ot&&P.nodeType===ZF&&(st=P.textContent,Jh([N,E,I],vt=>{st=Va(st,vt," ")}),P.textContent!==st&&(Ya(e.removed,{element:P.cloneNode()}),P.textContent=st)),Xi(z.afterSanitizeElements,P,null),!1):(Ei(P),!0)},ub=function(P,st,et){if(hs&&(st==="id"||st==="name")&&(et in i||et in zk))return!1;if(!(nt&&!$[st]&&Ie(S,st))){if(!(rt&&Ie(R,st))){if(!H[st]||$[st]){if(!(db(P)&&(W.tagNameCheck instanceof RegExp&&Ie(W.tagNameCheck,P)||W.tagNameCheck instanceof Function&&W.tagNameCheck(P))&&(W.attributeNameCheck instanceof RegExp&&Ie(W.attributeNameCheck,st)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(st))||st==="is"&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&Ie(W.tagNameCheck,et)||W.tagNameCheck instanceof Function&&W.tagNameCheck(et))))return!1}else if(!Ci[st]){if(!Ie(k,Va(et,q,""))){if((st!=="src"&&st!=="xlink:href"&&st!=="href"||P==="script"||FF(et,"data:")!==0||!Hi[P])&&!(lt&&!Ie(L,Va(et,q,"")))){if(et)return!1}}}}}return!0},db=function(P){return P!=="annotation-xml"&&jA(P,T)},fb=function(P){Xi(z.beforeSanitizeAttributes,P,null);let{attributes:st}=P;if(!st||Nu(P))return;let et={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0},vt=st.length;for(;vt--;){let kt=st[vt],{name:gt,namespaceURI:te,value:Yi}=kt,Ti=ae(gt),ke=gt==="value"?Yi:BF(Yi);if(et.attrName=Ti,et.attrValue=ke,et.keepAttr=!0,et.forceKeepAttr=void 0,Xi(z.uponSanitizeAttribute,P,et),ke=et.attrValue,!us||Ti!=="id"&&Ti!=="name"||(ul(gt,P),ke="user-content-"+ke),ht&&Ie(/((--!?|])>)|<\/(style|title)/i,ke)){ul(gt,P);continue}if(et.forceKeepAttr||(ul(gt,P),!et.keepAttr))continue;if(!ct&&Ie(/\/>/i,ke)){ul(gt,P);continue}ot&&Jh([N,E,I],gb=>{ke=Va(ke,gb," ")});let pb=ae(P.nodeName);if(ub(pb,Ti,ke)){if(y&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!te)switch(g.getAttributeType(pb,Ti)){case"TrustedHTML":ke=y.createHTML(ke);break;case"TrustedScriptURL":ke=y.createScriptURL(ke)}try{te?P.setAttributeNS(te,gt,ke):P.setAttribute(gt,ke),Nu(P)?Ei(P):WA(e.removed)}catch{}}}Xi(z.afterSanitizeAttributes,P,null)},Hk=function P(st){let et=null,vt=lb(st);for(Xi(z.beforeSanitizeShadowDOM,st,null);et=vt.nextNode();)Xi(z.uponSanitizeShadowNode,et,null),hb(et),fb(et),et.content instanceof o&&P(et.content);Xi(z.afterSanitizeShadowDOM,st,null)};return e.sanitize=function(P){let st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et=null,vt=null,kt=null,gt=null;if(ji=!P,ji&&(P="<!-->"),typeof P!="string"&&!cb(P)){if(typeof P.toString!="function")throw Ua("toString is not a function");if(typeof(P=P.toString())!="string")throw Ua("dirty is not a string, aborting")}if(!e.isSupported)return P;if(ce||Ou(st),e.removed=[],typeof P=="string"&&(Ue=!1),Ue){if(P.nodeName){let Ti=ae(P.nodeName);if(!D[Ti]||Y[Ti])throw Ua("root node is forbidden and cannot be sanitized in-place")}}else if(P instanceof l)et=ab("<!---->"),vt=et.ownerDocument.importNode(P,!0),vt.nodeType===KF&&vt.nodeName==="BODY"||vt.nodeName==="HTML"?et=vt:et.appendChild(vt);else{if(!ne&&!ot&&!qt&&P.indexOf("<")===-1)return y&&oe?y.createHTML(P):P;if(et=ab(P),!et)return ne?null:oe?A:""}et&&he&&Ei(et.firstChild);let te=lb(Ue?P:et);for(;kt=te.nextNode();)hb(kt),fb(kt),kt.content instanceof o&&Hk(kt.content);if(Ue)return P;if(ne){if(Pe)for(gt=O.call(et.ownerDocument);et.firstChild;)gt.appendChild(et.firstChild);else gt=et;return(H.shadowroot||H.shadowrootmode)&&(gt=_.call(s,gt,!0)),gt}let Yi=qt?et.outerHTML:et.innerHTML;return qt&&D["!doctype"]&&et.ownerDocument&&et.ownerDocument.doctype&&et.ownerDocument.doctype.name&&Ie(Tk,et.ownerDocument.doctype.name)&&(Yi="<!DOCTYPE "+et.ownerDocument.doctype.name+`>
`+Yi),ot&&Jh([N,E,I],Ti=>{Yi=Va(Yi,Ti," ")}),y&&oe?y.createHTML(Yi):Yi},e.setConfig=function(){Ou(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),ce=!0},e.clearConfig=function(){rn=null,ce=!1},e.isValidAttribute=function(P,st,et){rn||Ou({});let vt=ae(P),kt=ae(st);return ub(vt,kt,et)},e.addHook=function(P,st){typeof st=="function"&&Ya(z[P],st)},e.removeHook=function(P){return WA(z[P])},e.removeHooks=function(P){z[P]=[]},e.removeAllHooks=function(){z={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},e}();cu.addHook("uponSanitizeAttribute",function(r,t){/^data-trix-/.test(t.attrName)&&(t.forceKeepAttr=!0)});var iB="style href src width height language class".split(" "),rB="javascript:".split(" "),sB="script iframe form noscript".split(" "),xo=class extends Vt{static setHTML(t,e){let i=new this(e).sanitize(),s=i.getHTML?i.getHTML():i.outerHTML;t.innerHTML=s}static sanitize(t,e){let i=new this(t,e);return i.sanitize(),i}constructor(t){let{allowedAttributes:e,forbiddenProtocols:i,forbiddenElements:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=e||iB,this.forbiddenProtocols=i||rB,this.forbiddenElements=s||sB,this.body=nB(t)}sanitize(){return this.sanitizeElements(),this.normalizeListElementNesting(),cu.setConfig(dk),this.body=cu.sanitize(this.body),this.body}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){let t=ou(this.body),e=[];for(;t.nextNode();){let i=t.currentNode;switch(i.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(i)?e.push(i):this.sanitizeElement(i);break;case Node.COMMENT_NODE:e.push(i)}}return e.forEach(i=>cs(i)),this.body}sanitizeElement(t){return t.hasAttribute("href")&&this.forbiddenProtocols.includes(t.protocol)&&t.removeAttribute("href"),Array.from(t.attributes).forEach(e=>{let{name:i}=e;this.allowedAttributes.includes(i)||i.indexOf("data-trix")===0||t.removeAttribute(i)}),t}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(t=>{let e=t.previousElementSibling;e&&qe(e)==="li"&&e.appendChild(t)}),this.body}elementIsRemovable(t){if(t?.nodeType===Node.ELEMENT_NODE)return this.elementIsForbidden(t)||this.elementIsntSerializable(t)}elementIsForbidden(t){return this.forbiddenElements.includes(qe(t))}elementIsntSerializable(t){return t.getAttribute("data-trix-serialize")==="false"&&!Us(t)}},nB=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";r=r.replace(/<\/html[^>]*>[^]*$/i,"</html>");let t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=r,Array.from(t.head.querySelectorAll("style")).forEach(e=>{t.body.appendChild(e)}),t.body},{css:ns}=ll,rl=class extends Ar{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let t,e=t=pt({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),i=this.getHref();return i&&(t=pt({tagName:"a",editable:!1,attributes:{href:i,tabindex:-1}}),e.appendChild(t)),this.attachment.hasContent()?xo.setHTML(t,this.attachment.getContent()):this.createContentNodes().forEach(s=>{t.appendChild(s)}),t.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=pt({tagName:"progress",attributes:{class:ns.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),e.appendChild(this.progressElement)),[KA("left"),e,KA("right")]}createCaptionElement(){let t=pt({tagName:"figcaption",className:ns.attachmentCaption}),e=this.attachmentPiece.getCaption();if(e)t.classList.add("".concat(ns.attachmentCaption,"--edited")),t.textContent=e;else{let i,s,n=this.getCaptionConfig();if(n.name&&(i=this.attachment.getFilename()),n.size&&(s=this.attachment.getFormattedFilesize()),i){let o=pt({tagName:"span",className:ns.attachmentName,textContent:i});t.appendChild(o)}if(s){i&&t.appendChild(document.createTextNode(" "));let o=pt({tagName:"span",className:ns.attachmentSize,textContent:s});t.appendChild(o)}}return t}getClassName(){let t=[ns.attachment,"".concat(ns.attachment,"--").concat(this.attachment.getType())],e=this.attachment.getExtension();return e&&t.push("".concat(ns.attachment,"--").concat(e)),t.join(" ")}getData(){let t={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:e}=this.attachmentPiece;return e.isEmpty()||(t.trixAttributes=JSON.stringify(e)),this.attachment.isPending()&&(t.trixSerialize=!1),t}getHref(){if(!oB(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var t;let e=this.attachment.getType(),i=wk((t=$m[e])===null||t===void 0?void 0:t.caption);return e==="file"&&(i.name=!0),i}findProgressElement(){var t;return(t=this.findElement())===null||t===void 0?void 0:t.querySelector("progress")}attachmentDidChangeUploadProgress(){let t=this.attachment.getUploadProgress(),e=this.findProgressElement();e&&(e.value=t)}},KA=r=>pt({tagName:"span",textContent:Lu,data:{trixCursorTarget:r,trixSerialize:!1}}),oB=function(r,t){let e=pt("div");return xo.setHTML(e,r||""),e.querySelector(t)},hu=class extends rl{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=pt({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){let t=super.createCaptionElement(...arguments);return t.textContent||t.setAttribute("data-trix-placeholder",ut.captionPlaceholder),t}refresh(t){var e;if(t||(t=(e=this.findElement())===null||e===void 0?void 0:e.querySelector("img")),t)return this.updateAttributesForImage(t)}updateAttributesForImage(t){let e=this.attachment.getURL(),i=this.attachment.getPreviewURL();if(t.src=i||e,i===e)t.removeAttribute("data-trix-serialized-attributes");else{let a=JSON.stringify({src:e});t.setAttribute("data-trix-serialized-attributes",a)}let s=this.attachment.getWidth(),n=this.attachment.getHeight();s!=null&&(t.width=s),n!=null&&(t.height=n);let o=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/");t.dataset.trixStoreKey=o}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}},uu=class extends Ar{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let t=this.attachment?this.createAttachmentNodes():this.createStringNodes(),e=this.createElement();if(e){let i=function(s){for(;(n=s)!==null&&n!==void 0&&n.firstElementChild;){var n;s=s.firstElementChild}return s}(e);Array.from(t).forEach(s=>{i.appendChild(s)}),t=[e]}return t}createAttachmentNodes(){let t=this.attachment.isPreviewable()?hu:rl;return this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var t;if((t=this.textConfig)!==null&&t!==void 0&&t.plaintext)return[document.createTextNode(this.string)];{let e=[],i=this.string.split(`
`);for(let s=0;s<i.length;s++){let n=i[s];if(s>0){let o=pt("br");e.push(o)}if(n.length){let o=document.createTextNode(this.preserveSpaces(n));e.push(o)}}return e}}createElement(){let t,e,i,s={};for(e in this.attributes){i=this.attributes[e];let o=Pm(e);if(o){if(o.tagName){var n;let a=pt(o.tagName);n?(n.appendChild(a),n=a):t=n=a}if(o.styleProperty&&(s[o.styleProperty]=i),o.style)for(e in o.style)i=o.style[e],s[e]=i}}if(Object.keys(s).length)for(e in t||(t=pt("span")),s)i=s[e],t.style[e]=i;return t}createContainerElement(){for(let t in this.attributes){let e=this.attributes[t],i=Pm(t);if(i&&i.groupTagName){let s={};return s[t]=e,pt(i.groupTagName,s)}}}preserveSpaces(t){return this.context.isLast&&(t=t.replace(/\ $/,os)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(os," $2")).replace(/\ {2}/g,"".concat(os," ")).replace(/\ {2}/g," ".concat(os)),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,os)),t}},du=class extends Ar{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){let t=[],e=il.groupObjects(this.getPieces()),i=e.length-1;for(let n=0;n<e.length;n++){let o=e[n],a={};n===0&&(a.isFirst=!0),n===i&&(a.isLast=!0),aB(s)&&(a.followsWhitespace=!0);let l=this.findOrCreateCachedChildView(uu,o,{textConfig:this.textConfig,context:a});t.push(...Array.from(l.getNodes()||[]));var s=o}return t}getPieces(){return Array.from(this.text.getPieces()).filter(t=>!t.hasAttribute("blockBreak"))}},aB=r=>/\s$/.test(r?.toString()),{css:ZA}=ll,fu=class extends Ar{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){let t=[document.createComment("block")];if(this.block.isEmpty())t.push(pt("br"));else{var e;let i=(e=Gt(this.block.getLastAttribute()))===null||e===void 0?void 0:e.text,s=this.findOrCreateCachedChildView(du,this.block.text,{textConfig:i});t.push(...Array.from(s.getNodes()||[])),this.shouldAddExtraNewlineElement()&&t.push(pt("br"))}if(this.attributes.length)return t;{let i,{tagName:s}=Oe.default;this.block.isRTL()&&(i={dir:"rtl"});let n=pt({tagName:s,attributes:i});return t.forEach(o=>n.appendChild(o)),[n]}}createContainerElement(t){let e={},i,s=this.attributes[t],{tagName:n,htmlAttributes:o=[]}=Gt(s);if(t===0&&this.block.isRTL()&&Object.assign(e,{dir:"rtl"}),s==="attachmentGallery"){let a=this.block.getBlockBreakPosition();i="".concat(ZA.attachmentGallery," ").concat(ZA.attachmentGallery,"--").concat(a)}return Object.entries(this.block.htmlAttributes).forEach(a=>{let[l,c]=a;o.includes(l)&&(e[l]=c)}),pt({tagName:n,className:i,attributes:e})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}},yo=class extends Ar{static render(t){let e=pt("div"),i=new this(t,{element:e});return i.render(),i.sync(),e}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new Bm,this.setDocument(this.object)}setDocument(t){t.isEqualTo(this.document)||(this.document=this.object=t)}render(){if(this.childViews=[],this.shadowElement=pt("div"),!this.document.isEmpty()){let t=il.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(t).forEach(e=>{let i=this.findOrCreateCachedChildView(fu,e);Array.from(i.getNodes()).map(s=>this.shadowElement.appendChild(s))})}}isSynced(){return lB(this.shadowElement,this.element)}sync(){let t=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()}didSync(){return this.elementStore.reset(JA(this.element)),tb(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){let t=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(e=>{t.appendChild(e.cloneNode(!0))}),Array.from(JA(t)).forEach(e=>{let i=this.elementStore.remove(e);i&&e.parentNode.replaceChild(i,e)}),t}},JA=r=>r.querySelectorAll("[data-trix-store-key]"),lB=(r,t)=>QA(r.innerHTML)===QA(t.innerHTML),QA=r=>r.replace(/&nbsp;/g," ");function tu(r){var t,e;function i(n,o){try{var a=r[n](o),l=a.value,c=l instanceof cB;Promise.resolve(c?l.v:l).then(function(h){if(c){var u=n==="return"?"return":"next";if(!l.k||h.done)return i(u,h);h=r[u](h).value}s(a.done?"return":"normal",h)},function(h){i("throw",h)})}catch(h){s("throw",h)}}function s(n,o){switch(n){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?i(t.key,t.arg):e=null}this._invoke=function(n,o){return new Promise(function(a,l){var c={key:n,arg:o,resolve:a,reject:l,next:null};e?e=e.next=c:(t=e=c,i(n,o))})},typeof r.return!="function"&&(this.return=void 0)}function cB(r,t){this.v=r,this.k=t}function Ve(r,t,e){return(t=hB(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function hB(r){var t=function(e,i){if(typeof e!="object"||e===null)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,i||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}(r,"string");return typeof t=="symbol"?t:String(t)}tu.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},tu.prototype.next=function(r){return this._invoke("next",r)},tu.prototype.throw=function(r){return this._invoke("throw",r)},tu.prototype.return=function(r){return this._invoke("return",r)};function Pt(r,t){return uB(r,Lk(r,t,"get"))}function rb(r,t,e){return dB(r,Lk(r,t,"set"),e),e}function Lk(r,t,e){if(!t.has(r))throw new TypeError("attempted to "+e+" private field on non-instance");return t.get(r)}function uB(r,t){return t.get?t.get.call(r):t.value}function dB(r,t,e){if(t.set)t.set.call(r,e);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=e}}function eu(r,t,e){if(!t.has(r))throw new TypeError("attempted to get private field on non-instance");return e}function Mk(r,t){if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function el(r,t,e){Mk(r,t),t.set(r,e)}var kr=class extends wr{static registerType(t,e){e.type=t,this.types[t]=e}static fromJSON(t){let e=this.types[t.type];if(e)return e.fromJSON(t)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=Si.box(e)}copyWithAttributes(t){return new this.constructor(this.getValue(),t)}copyWithAdditionalAttributes(t){return this.copyWithAttributes(this.attributes.merge(t))}copyWithoutAttribute(t){return this.copyWithAttributes(this.attributes.remove(t))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(t){return this.attributes.get(t)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(t){return this.attributes.has(t)}hasSameStringValueAsPiece(t){return t&&this.toString()===t.toString()}hasSameAttributesAsPiece(t){return t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))}isBlockBreak(){return!1}isEqualTo(t){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(t){return this.getAttribute("href")===t.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(t){return!1}};Ve(kr,"types",{});var pu=class extends vo{constructor(t){super(...arguments),this.url=t}perform(t){let e=new Image;e.onload=()=>(e.width=this.width=e.naturalWidth,e.height=this.height=e.naturalHeight,t(!0,e)),e.onerror=()=>t(!1),e.src=this.url}},wo=class r extends wr{static attachmentForFile(t){let e=new this(this.attributesForFile(t));return e.setFile(t),e}static attributesForFile(t){return new Si({filename:t.name,filesize:t.size,contentType:t.type})}static fromJSON(t){return new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.releaseFile=this.releaseFile.bind(this),this.attributes=Si.box(t),this.didChangeAttributes()}getAttribute(t){return this.attributes.get(t)}hasAttribute(t){return this.attributes.has(t)}getAttributes(){return this.attributes.toObject()}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this.attributes.merge(t);var i,s,n,o;if(!this.attributes.isEqualTo(e))return this.attributes=e,this.didChangeAttributes(),(i=this.previewDelegate)===null||i===void 0||(s=i.attachmentDidChangeAttributes)===null||s===void 0||s.call(i,this),(n=this.delegate)===null||n===void 0||(o=n.attachmentDidChangeAttributes)===null||o===void 0?void 0:o.call(n,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):r.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){let t=this.attributes.get("filesize");return typeof t=="number"?fk.formatter(t):""}getExtension(){var t;return(t=this.getFilename().match(/\.(\w+)$/))===null||t===void 0?void 0:t[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(t){if(this.file=t,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(t){var e,i;if(this.uploadProgress!==t)return this.uploadProgress=t,(e=this.uploadProgressDelegate)===null||e===void 0||(i=e.attachmentDidChangeUploadProgress)===null||i===void 0?void 0:i.call(e,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(t){var e,i,s,n;if(t!==this.getPreviewURL())return this.previewURL=t,(e=this.previewDelegate)===null||e===void 0||(i=e.attachmentDidChangeAttributes)===null||i===void 0||i.call(e,this),(s=this.delegate)===null||s===void 0||(n=s.attachmentDidChangePreviewURL)===null||n===void 0?void 0:n.call(s,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(t,e){if(t&&t!==this.getPreviewURL())return this.preloadingURL=t,new pu(t).then(i=>{let{width:s,height:n}=i;return this.getWidth()&&this.getHeight()||this.setAttributes({width:s,height:n}),this.preloadingURL=null,this.setPreviewURL(t),e?.()}).catch(()=>(this.preloadingURL=null,e?.()))}};Ve(wo,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);var Ao=class r extends kr{static fromJSON(t){return new this(wo.fromJSON(t.attachment),t.attributes)}constructor(t){super(...arguments),this.attachment=t,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(t){this.hasAttribute(t)&&(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice([t])),this.attributes=this.attributes.remove(t))}removeProhibitedAttributes(){let t=this.attributes.slice(r.permittedAttributes);t.isEqualTo(this.attributes)||(this.attributes=t)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(t){var e;return super.isEqualTo(t)&&this.attachment.id===(t==null||(e=t.attachment)===null||e===void 0?void 0:e.id)}toString(){return"\uFFFC"}toJSON(){let t=super.toJSON(...arguments);return t.attachment=this.attachment,t}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}};Ve(Ao,"permittedAttributes",["caption","presentation"]),kr.registerType("attachment",Ao);var sl=class extends kr{static fromJSON(t){return new this(t.string,t.attributes)}constructor(t){super(...arguments),this.string=(e=>e.replace(/\r\n?/g,`
`))(t),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){let t=super.toJSON(...arguments);return t.string=this.string,t}canBeConsolidatedWith(t){return t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)}consolidateWith(t){return new this.constructor(this.toString()+t.toString(),this.attributes)}splitAtOffset(t){let e,i;return t===0?(e=null,i=this):t===this.length?(e=this,i=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),i=new this.constructor(this.string.slice(t),this.attributes)),[e,i]}toConsole(){let{string:t}=this;return t.length>15&&(t=t.slice(0,14)+"\u2026"),JSON.stringify(t.toString())}};kr.registerType("string",sl);var ko=class extends wr{static box(t){return t instanceof this?t:new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=t.slice(0),this.length=this.objects.length}indexOf(t){return this.objects.indexOf(t)}splice(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new this.constructor(Qm(this.objects,...e))}eachObject(t){return this.objects.map((e,i)=>t(e,i))}insertObjectAtIndex(t,e){return this.splice(e,0,t)}insertSplittableListAtIndex(t,e){return this.splice(e,0,...t.objects)}insertSplittableListAtPosition(t,e){let[i,s]=this.splitObjectAtPosition(e);return new this.constructor(i).insertSplittableListAtIndex(t,s)}editObjectAtIndex(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)}replaceObjectAtIndex(t,e){return this.splice(e,1,t)}removeObjectAtIndex(t){return this.splice(t,1)}getObjectAtIndex(t){return this.objects[t]}getSplittableListInRange(t){let[e,i,s]=this.splitObjectsAtRange(t);return new this.constructor(e.slice(i,s+1))}selectSplittableList(t){let e=this.objects.filter(i=>t(i));return new this.constructor(e)}removeObjectsInRange(t){let[e,i,s]=this.splitObjectsAtRange(t);return new this.constructor(e).splice(i,s-i+1)}transformObjectsInRange(t,e){let[i,s,n]=this.splitObjectsAtRange(t),o=i.map((a,l)=>s<=l&&l<=n?e(a):a);return new this.constructor(o)}splitObjectsAtRange(t){let e,[i,s,n]=this.splitObjectAtPosition(pB(t));return[i,e]=new this.constructor(i).splitObjectAtPosition(gB(t)+n),[i,s,e-1]}getObjectAtPosition(t){let{index:e}=this.findIndexAndOffsetAtPosition(t);return this.objects[e]}splitObjectAtPosition(t){let e,i,{index:s,offset:n}=this.findIndexAndOffsetAtPosition(t),o=this.objects.slice(0);if(s!=null)if(n===0)e=s,i=0;else{let a=this.getObjectAtIndex(s),[l,c]=a.splitAtOffset(n);o.splice(s,1,l,c),e=s+1,i=l.getLength()-n}else e=o.length,i=0;return[o,e,i]}consolidate(){let t=[],e=this.objects[0];return this.objects.slice(1).forEach(i=>{var s,n;(s=(n=e).canBeConsolidatedWith)!==null&&s!==void 0&&s.call(n,i)?e=e.consolidateWith(i):(t.push(e),e=i)}),e&&t.push(e),new this.constructor(t)}consolidateFromIndexToIndex(t,e){let i=this.objects.slice(0).slice(t,e+1),s=new this.constructor(i).consolidate().toArray();return this.splice(t,i.length,...s)}findIndexAndOffsetAtPosition(t){let e,i=0;for(e=0;e<this.objects.length;e++){let s=i+this.objects[e].getLength();if(i<=t&&t<s)return{index:e,offset:t-i};i=s}return{index:null,offset:null}}findPositionAtIndexAndOffset(t,e){let i=0;for(let s=0;s<this.objects.length;s++){let n=this.objects[s];if(s<t)i+=n.getLength();else if(s===t){i+=e;break}}return i}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(t=>this.endPosition+=t.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(t){return super.isEqualTo(...arguments)||fB(this.objects,t?.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(t=>t.inspect()).join(", "),"]")}}},fB=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(r.length!==t.length)return!1;let e=!0;for(let i=0;i<r.length;i++){let s=r[i];e&&!s.isEqualTo(t[i])&&(e=!1)}return e},pB=r=>r[0],gB=r=>r[1],ti=class extends wr{static textForAttachmentWithAttributes(t,e){return new this([new Ao(t,e)])}static textForStringWithAttributes(t,e){return new this([new sl(t,e)])}static fromJSON(t){return new this(Array.from(t).map(e=>kr.fromJSON(e)))}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);let e=t.filter(i=>!i.isEmpty());this.pieceList=new ko(e)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(t){return new this.constructor(t.consolidate().toArray())}copyUsingObjectMap(t){let e=this.getPieces().map(i=>t.find(i)||i);return new this.constructor(e)}appendText(t){return this.insertTextAtPosition(t,this.getLength())}insertTextAtPosition(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))}removeTextAtRange(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))}replaceTextAtRange(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])}moveTextFromRangeToPosition(t,e){if(t[0]<=e&&e<=t[1])return;let i=this.getTextAtRange(t),s=i.getLength();return t[0]<e&&(e-=s),this.removeTextAtRange(t).insertTextAtPosition(i,e)}addAttributeAtRange(t,e,i){let s={};return s[t]=e,this.addAttributesAtRange(s,i)}addAttributesAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,i=>i.copyWithAdditionalAttributes(t)))}removeAttributeAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,i=>i.copyWithoutAttribute(t)))}setAttributesAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,i=>i.copyWithAttributes(t)))}getAttributesAtPosition(t){var e;return((e=this.pieceList.getObjectAtPosition(t))===null||e===void 0?void 0:e.getAttributes())||{}}getCommonAttributes(){let t=Array.from(this.pieceList.toArray()).map(e=>e.getAttributes());return Si.fromCommonAttributesOfObjects(t).toObject()}getCommonAttributesAtRange(t){return this.getTextAtRange(t).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(t,e){let i,s=i=e,n=this.getLength();for(;s>0&&this.getCommonAttributesAtRange([s-1,i])[t];)s--;for(;i<n&&this.getCommonAttributesAtRange([e,i+1])[t];)i++;return[s,i]}getTextAtRange(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))}getStringAtRange(t){return this.pieceList.getSplittableListInRange(t).toString()}getStringAtPosition(t){return this.getStringAtRange([t,t+1])}startsWithString(t){return this.getStringAtRange([0,t.length])===t}endsWithString(t){let e=this.getLength();return this.getStringAtRange([e-t.length,e])===t}getAttachmentPieces(){return this.pieceList.toArray().filter(t=>!!t.attachment)}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getAttachmentAndPositionById(t){let e=0;for(let s of this.pieceList.toArray()){var i;if(((i=s.attachment)===null||i===void 0?void 0:i.id)===t)return{attachment:s.attachment,position:e};e+=s.length}return{attachment:null,position:null}}getAttachmentById(t){let{attachment:e}=this.getAttachmentAndPositionById(t);return e}getRangeOfAttachment(t){let e=this.getAttachmentAndPositionById(t.id),i=e.position;if(t=e.attachment)return[i,i+1]}updateAttributesForAttachment(t,e){let i=this.getRangeOfAttachment(e);return i?this.addAttributesAtRange(t,i):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(t){var e;return super.isEqualTo(t)||(t==null||(e=t.pieceList)===null||e===void 0?void 0:e.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(t){return this.pieceList.eachObject(t)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(t){return this.pieceList.getObjectAtPosition(t)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){let t=this.pieceList.selectSplittableList(e=>e.isSerializable());return this.copyWithPieceList(t)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(t=>JSON.parse(t.toConsole())))}getDirection(){return CF(this.toString())}isRTL(){return this.getDirection()==="rtl"}},as=class r extends wr{static fromJSON(t){return new this(ti.fromJSON(t.text),t.attributes,t.htmlAttributes)}constructor(t,e,i){super(...arguments),this.text=mB(t||new ti),this.attributes=e||[],this.htmlAttributes=i||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(t){return!!super.isEqualTo(t)||this.text.isEqualTo(t?.text)&&Js(this.attributes,t?.attributes)&&Co(this.htmlAttributes,t?.htmlAttributes)}copyWithText(t){return new r(t,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(t){return new r(this.text,t,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(t){let e=t.find(this.text);return e?this.copyWithText(e):this.copyWithText(this.text.copyUsingObjectMap(t))}addAttribute(t){let e=this.attributes.concat(tk(t));return this.copyWithAttributes(e)}addHTMLAttribute(t,e){let i=Object.assign({},this.htmlAttributes,{[t]:e});return new r(this.text,this.attributes,i)}removeAttribute(t){let{listAttribute:e}=Gt(t),i=ik(ik(this.attributes,t),e);return this.copyWithAttributes(i)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return ek(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(t){return this.attributes[t-1]}hasAttribute(t){return this.attributes.includes(t)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return ek(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(t=>Gt(t).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){let t=this.getLastNestableAttribute();return t?this.removeAttribute(t):this}increaseNestingLevel(){let t=this.getLastNestableAttribute();if(t){let e=this.attributes.lastIndexOf(t),i=Qm(this.attributes,e+1,0,...tk(t));return this.copyWithAttributes(i)}return this}getListItemAttributes(){return this.attributes.filter(t=>Gt(t).listAttribute)}isListItem(){var t;return(t=Gt(this.getLastAttribute()))===null||t===void 0?void 0:t.listAttribute}isTerminalBlock(){var t;return(t=Gt(this.getLastAttribute()))===null||t===void 0?void 0:t.terminal}breaksOnReturn(){var t;return(t=Gt(this.getLastAttribute()))===null||t===void 0?void 0:t.breakOnReturn}findLineBreakInDirectionFromPosition(t,e){let i=this.toString(),s;switch(t){case"forward":s=i.indexOf(`
`,e);break;case"backward":s=i.slice(0,e).lastIndexOf(`
`)}if(s!==-1)return s}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(t){return!this.hasAttributes()&&!t.hasAttributes()&&this.getDirection()===t.getDirection()}consolidateWith(t){let e=ti.textForStringWithAttributes(`
`),i=this.getTextWithoutBlockBreak().appendText(e);return this.copyWithText(i.appendText(t.text))}splitAtOffset(t){let e,i;return t===0?(e=null,i=this):t===this.getLength()?(e=this,i=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),i=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,i]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return Rk(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(t){return this.attributes[t]}canBeGroupedWith(t,e){let i=t.getAttributes(),s=i[e],n=this.attributes[e];return n===s&&!(Gt(n).group===!1&&!(()=>{if(!Zh){Zh=[];for(let o in Oe){let{listAttribute:a}=Oe[o];a!=null&&Zh.push(a)}}return Zh})().includes(i[e+1]))&&(this.getDirection()===t.getDirection()||t.isEmpty())}},mB=function(r){return r=bB(r),r=xB(r)},bB=function(r){let t=!1,e=r.getPieces(),i=e.slice(0,e.length-1),s=e[e.length-1];return s?(i=i.map(n=>n.isBlockBreak()?(t=!0,yB(n)):n),t?new ti([...i,s]):r):r},vB=ti.textForStringWithAttributes(`
`,{blockBreak:!0}),xB=function(r){return Rk(r)?r:r.appendText(vB)},Rk=function(r){let t=r.getLength();return t===0?!1:r.getTextAtRange([t-1,t]).isBlockBreak()},yB=r=>r.copyWithoutAttribute("blockBreak"),tk=function(r){let{listAttribute:t}=Gt(r);return t?[t,r]:[r]},ek=r=>r.slice(-1)[0],ik=function(r,t){let e=r.lastIndexOf(t);return e===-1?r:Qm(r,e,1)},Ye=class extends wr{static fromJSON(t){return new this(Array.from(t).map(e=>as.fromJSON(e)))}static fromString(t,e){let i=ti.textForStringWithAttributes(t,e);return new this([new as(i)])}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),t.length===0&&(t=[new as]),this.blockList=ko.box(t)}isEmpty(){let t=this.getBlockAtIndex(0);return this.blockList.length===1&&t.isEmpty()&&!t.hasAttributes()}copy(){let t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(t)}copyUsingObjectsFromDocument(t){let e=new Fm(t.getObjects());return this.copyUsingObjectMap(e)}copyUsingObjectMap(t){let e=this.getBlocks().map(i=>t.find(i)||i.copyUsingObjectMap(t));return new this.constructor(e)}copyWithBaseBlockAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=this.getBlocks().map(i=>{let s=t.concat(i.getAttributes());return i.copyWithAttributes(s)});return new this.constructor(e)}replaceBlock(t,e){let i=this.blockList.indexOf(t);return i===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,i))}insertDocumentAtRange(t,e){let{blockList:i}=t;e=Tt(e);let[s]=e,{index:n,offset:o}=this.locationFromPosition(s),a=this,l=this.getBlockAtPosition(s);return yr(e)&&l.isEmpty()&&!l.hasAttributes()?a=new this.constructor(a.blockList.removeObjectAtIndex(n)):l.getBlockBreakPosition()===o&&s++,a=a.removeTextAtRange(e),new this.constructor(a.blockList.insertSplittableListAtPosition(i,s))}mergeDocumentAtRange(t,e){let i,s;e=Tt(e);let[n]=e,o=this.locationFromPosition(n),a=this.getBlockAtIndex(o.index).getAttributes(),l=t.getBaseBlockAttributes(),c=a.slice(-l.length);if(Js(l,c)){let d=a.slice(0,-l.length);i=t.copyWithBaseBlockAttributes(d)}else i=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(a);let h=i.getBlockCount(),u=i.getBlockAtIndex(0);if(Js(a,u.getAttributes())){let d=u.getTextWithoutBlockBreak();if(s=this.insertTextAtRange(d,e),h>1){i=new this.constructor(i.getBlocks().slice(1));let f=n+d.getLength();s=s.insertDocumentAtRange(i,f)}}else s=this.insertDocumentAtRange(i,e);return s}insertTextAtRange(t,e){e=Tt(e);let[i]=e,{index:s,offset:n}=this.locationFromPosition(i),o=this.removeTextAtRange(e);return new this.constructor(o.blockList.editObjectAtIndex(s,a=>a.copyWithText(a.text.insertTextAtPosition(t,n))))}removeTextAtRange(t){let e;t=Tt(t);let[i,s]=t;if(yr(t))return this;let[n,o]=Array.from(this.locationRangeFromRange(t)),a=n.index,l=n.offset,c=this.getBlockAtIndex(a),h=o.index,u=o.offset,d=this.getBlockAtIndex(h);if(s-i==1&&c.getBlockBreakPosition()===l&&d.getBlockBreakPosition()!==u&&d.text.getStringAtPosition(u)===`
`)e=this.blockList.editObjectAtIndex(h,f=>f.copyWithText(f.text.removeTextAtRange([u,u+1])));else{let f,g=c.text.getTextAtRange([0,l]),p=d.text.getTextAtRange([u,d.getLength()]),b=g.appendText(p);f=a!==h&&l===0&&c.getAttributeLevel()>=d.getAttributeLevel()?d.copyWithText(b):c.copyWithText(b);let m=h+1-a;e=this.blockList.splice(a,m,f)}return new this.constructor(e)}moveTextFromRangeToPosition(t,e){let i;t=Tt(t);let[s,n]=t;if(s<=e&&e<=n)return this;let o=this.getDocumentAtRange(t),a=this.removeTextAtRange(t),l=s<e;l&&(e-=o.getLength());let[c,...h]=o.getBlocks();return h.length===0?(i=c.getTextWithoutBlockBreak(),l&&(e+=1)):i=c.text,a=a.insertTextAtRange(i,e),h.length===0?a:(o=new this.constructor(h),e+=i.getLength(),a.insertDocumentAtRange(o,e))}addAttributeAtRange(t,e,i){let{blockList:s}=this;return this.eachBlockAtRange(i,(n,o,a)=>s=s.editObjectAtIndex(a,function(){return Gt(t)?n.addAttribute(t,e):o[0]===o[1]?n:n.copyWithText(n.text.addAttributeAtRange(t,e,o))})),new this.constructor(s)}addAttribute(t,e){let{blockList:i}=this;return this.eachBlock((s,n)=>i=i.editObjectAtIndex(n,()=>s.addAttribute(t,e))),new this.constructor(i)}removeAttributeAtRange(t,e){let{blockList:i}=this;return this.eachBlockAtRange(e,function(s,n,o){Gt(t)?i=i.editObjectAtIndex(o,()=>s.removeAttribute(t)):n[0]!==n[1]&&(i=i.editObjectAtIndex(o,()=>s.copyWithText(s.text.removeAttributeAtRange(t,n))))}),new this.constructor(i)}updateAttributesForAttachment(t,e){let i=this.getRangeOfAttachment(e),[s]=Array.from(i),{index:n}=this.locationFromPosition(s),o=this.getTextAtIndex(n);return new this.constructor(this.blockList.editObjectAtIndex(n,a=>a.copyWithText(o.updateAttributesForAttachment(t,e))))}removeAttributeForAttachment(t,e){let i=this.getRangeOfAttachment(e);return this.removeAttributeAtRange(t,i)}setHTMLAttributeAtPosition(t,e,i){let s=this.getBlockAtPosition(t),n=s.addHTMLAttribute(e,i);return this.replaceBlock(s,n)}insertBlockBreakAtRange(t){let e;t=Tt(t);let[i]=t,{offset:s}=this.locationFromPosition(i),n=this.removeTextAtRange(t);return s===0&&(e=[new as]),new this.constructor(n.blockList.insertSplittableListAtPosition(new ko(e),i))}applyBlockAttributeAtRange(t,e,i){let s=this.expandRangeToLineBreaksAndSplitBlocks(i),n=s.document;i=s.range;let o=Gt(t);if(o.listAttribute){n=n.removeLastListAttributeAtRange(i,{exceptAttributeName:t});let a=n.convertLineBreaksToBlockBreaksInRange(i);n=a.document,i=a.range}else n=o.exclusive?n.removeBlockAttributesAtRange(i):o.terminal?n.removeLastTerminalAttributeAtRange(i):n.consolidateBlocksAtRange(i);return n.addAttributeAtRange(t,e,i)}removeLastListAttributeAtRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:i}=this;return this.eachBlockAtRange(t,function(s,n,o){let a=s.getLastAttribute();a&&Gt(a).listAttribute&&a!==e.exceptAttributeName&&(i=i.editObjectAtIndex(o,()=>s.removeAttribute(a)))}),new this.constructor(i)}removeLastTerminalAttributeAtRange(t){let{blockList:e}=this;return this.eachBlockAtRange(t,function(i,s,n){let o=i.getLastAttribute();o&&Gt(o).terminal&&(e=e.editObjectAtIndex(n,()=>i.removeAttribute(o)))}),new this.constructor(e)}removeBlockAttributesAtRange(t){let{blockList:e}=this;return this.eachBlockAtRange(t,function(i,s,n){i.hasAttributes()&&(e=e.editObjectAtIndex(n,()=>i.copyWithoutAttributes()))}),new this.constructor(e)}expandRangeToLineBreaksAndSplitBlocks(t){let e;t=Tt(t);let[i,s]=t,n=this.locationFromPosition(i),o=this.locationFromPosition(s),a=this,l=a.getBlockAtIndex(n.index);if(n.offset=l.findLineBreakInDirectionFromPosition("backward",n.offset),n.offset!=null&&(e=a.positionFromLocation(n),a=a.insertBlockBreakAtRange([e,e+1]),o.index+=1,o.offset-=a.getBlockAtIndex(n.index).getLength(),n.index+=1),n.offset=0,o.offset===0&&o.index>n.index)o.index-=1,o.offset=a.getBlockAtIndex(o.index).getBlockBreakPosition();else{let c=a.getBlockAtIndex(o.index);c.text.getStringAtRange([o.offset-1,o.offset])===`
`?o.offset-=1:o.offset=c.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==c.getBlockBreakPosition()&&(e=a.positionFromLocation(o),a=a.insertBlockBreakAtRange([e,e+1]))}return i=a.positionFromLocation(n),s=a.positionFromLocation(o),{document:a,range:t=Tt([i,s])}}convertLineBreaksToBlockBreaksInRange(t){t=Tt(t);let[e]=t,i=this.getStringAtRange(t).slice(0,-1),s=this;return i.replace(/.*?\n/g,function(n){e+=n.length,s=s.insertBlockBreakAtRange([e-1,e])}),{document:s,range:t}}consolidateBlocksAtRange(t){t=Tt(t);let[e,i]=t,s=this.locationFromPosition(e).index,n=this.locationFromPosition(i).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(s,n))}getDocumentAtRange(t){t=Tt(t);let e=this.blockList.getSplittableListInRange(t).toArray();return new this.constructor(e)}getStringAtRange(t){let e,i=t=Tt(t);return i[i.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)}getBlockAtIndex(t){return this.blockList.getObjectAtIndex(t)}getBlockAtPosition(t){let{index:e}=this.locationFromPosition(t);return this.getBlockAtIndex(e)}getTextAtIndex(t){var e;return(e=this.getBlockAtIndex(t))===null||e===void 0?void 0:e.text}getTextAtPosition(t){let{index:e}=this.locationFromPosition(t);return this.getTextAtIndex(e)}getPieceAtPosition(t){let{index:e,offset:i}=this.locationFromPosition(t);return this.getTextAtIndex(e).getPieceAtPosition(i)}getCharacterAtPosition(t){let{index:e,offset:i}=this.locationFromPosition(t);return this.getTextAtIndex(e).getStringAtRange([i,i+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(t){return this.blockList.eachObject(t)}eachBlockAtRange(t,e){let i,s;t=Tt(t);let[n,o]=t,a=this.locationFromPosition(n),l=this.locationFromPosition(o);if(a.index===l.index)return i=this.getBlockAtIndex(a.index),s=[a.offset,l.offset],e(i,s,a.index);for(let c=a.index;c<=l.index;c++)if(i=this.getBlockAtIndex(c),i){switch(c){case a.index:s=[a.offset,i.text.getLength()];break;case l.index:s=[0,l.offset];break;default:s=[0,i.text.getLength()]}e(i,s,c)}}getCommonAttributesAtRange(t){t=Tt(t);let[e]=t;if(yr(t))return this.getCommonAttributesAtPosition(e);{let i=[],s=[];return this.eachBlockAtRange(t,function(n,o){if(o[0]!==o[1])return i.push(n.text.getCommonAttributesAtRange(o)),s.push(rk(n))}),Si.fromCommonAttributesOfObjects(i).merge(Si.fromCommonAttributesOfObjects(s)).toObject()}}getCommonAttributesAtPosition(t){let e,i,{index:s,offset:n}=this.locationFromPosition(t),o=this.getBlockAtIndex(s);if(!o)return{};let a=rk(o),l=o.text.getAttributesAtPosition(n),c=o.text.getAttributesAtPosition(n-1),h=Object.keys(Ks).filter(u=>Ks[u].inheritable);for(e in c)i=c[e],(i===l[e]||h.includes(e))&&(a[e]=i);return a}getRangeOfCommonAttributeAtPosition(t,e){let{index:i,offset:s}=this.locationFromPosition(e),n=this.getTextAtIndex(i),[o,a]=Array.from(n.getExpandedRangeForAttributeAtOffset(t,s)),l=this.positionFromLocation({index:i,offset:o}),c=this.positionFromLocation({index:i,offset:a});return Tt([l,c])}getBaseBlockAttributes(){let t=this.getBlockAtIndex(0).getAttributes();for(let e=1;e<this.getBlockCount();e++){let i=this.getBlockAtIndex(e).getAttributes(),s=Math.min(t.length,i.length);t=(()=>{let n=[];for(let o=0;o<s&&i[o]===t[o];o++)n.push(i[o]);return n})()}return t}getAttachmentById(t){for(let e of this.getAttachments())if(e.id===t)return e}getAttachmentPieces(){let t=[];return this.blockList.eachObject(e=>{let{text:i}=e;return t=t.concat(i.getAttachmentPieces())}),t}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getRangeOfAttachment(t){let e=0,i=this.blockList.toArray();for(let s=0;s<i.length;s++){let{text:n}=i[s],o=n.getRangeOfAttachment(t);if(o)return Tt([e+o[0],e+o[1]]);e+=n.getLength()}}getLocationRangeOfAttachment(t){let e=this.getRangeOfAttachment(t);return this.locationRangeFromRange(e)}getAttachmentPieceForAttachment(t){for(let e of this.getAttachmentPieces())if(e.attachment===t)return e}findRangesForBlockAttribute(t){let e=0,i=[];return this.getBlocks().forEach(s=>{let n=s.getLength();s.hasAttribute(t)&&i.push([e,e+n]),e+=n}),i}findRangesForTextAttribute(t){let{withValue:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=0,s=[],n=[];return this.getPieces().forEach(o=>{let a=o.getLength();(function(l){return e?l.getAttribute(t)===e:l.hasAttribute(t)})(o)&&(s[1]===i?s[1]=i+a:n.push(s=[i,i+a])),i+=a}),n}locationFromPosition(t){let e=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t));if(e.index!=null)return e;{let i=this.getBlocks();return{index:i.length-1,offset:i[i.length-1].getLength()}}}positionFromLocation(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)}locationRangeFromPosition(t){return Tt(this.locationFromPosition(t))}locationRangeFromRange(t){if(!(t=Tt(t)))return;let[e,i]=Array.from(t),s=this.locationFromPosition(e),n=this.locationFromPosition(i);return Tt([s,n])}rangeFromLocationRange(t){let e;t=Tt(t);let i=this.positionFromLocation(t[0]);return yr(t)||(e=this.positionFromLocation(t[1])),Tt([i,e])}isEqualTo(t){return this.blockList.isEqualTo(t?.blockList)}getTexts(){return this.getBlocks().map(t=>t.text)}getPieces(){let t=[];return Array.from(this.getTexts()).forEach(e=>{t.push(...Array.from(e.getPieces()||[]))}),t}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){let t=[];return this.blockList.eachObject(e=>t.push(e.copyWithText(e.text.toSerializableText()))),new this.constructor(t)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(t=>JSON.parse(t.text.toConsole())))}},rk=function(r){let t={},e=r.getLastAttribute();return e&&(t[e]=!0),t},ym=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{string:r=Ka(r),attributes:t,type:"string"}},sk=(r,t)=>{try{return JSON.parse(r.getAttribute("data-trix-".concat(t)))}catch{return{}}},tn=class extends Vt{static parse(t,e){let i=new this(t,e);return i.parse(),i}constructor(t){let{referenceElement:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=t,this.referenceElement=e,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return Ye.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer(),xo.setHTML(this.containerElement,this.html);let t=ou(this.containerElement,{usingFilter:AB});for(;t.nextNode();)this.processNode(t.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=pt({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return cs(this.containerElement)}processNode(t){switch(t.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(t))return this.appendBlockForTextNode(t),this.processTextNode(t);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}}appendBlockForTextNode(t){let e=t.parentNode;if(e===this.currentBlockElement&&this.isBlockElement(t.previousSibling))return this.appendStringWithAttributes(`
`);if(e===this.containerElement||this.isBlockElement(e)){var i;let s=this.getBlockAttributes(e),n=this.getBlockHTMLAttributes(e);Js(s,(i=this.currentBlock)===null||i===void 0?void 0:i.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(s,e,n),this.currentBlockElement=e)}}appendBlockForElement(t){let e=this.isBlockElement(t),i=Ys(this.currentBlockElement,t);if(e&&!this.isBlockElement(t.firstChild)){if(!this.isInsignificantTextNode(t.firstChild)||!this.isBlockElement(t.firstElementChild)){let s=this.getBlockAttributes(t),n=this.getBlockHTMLAttributes(t);if(t.firstChild){if(i&&Js(s,this.currentBlock.attributes))return this.appendStringWithAttributes(`
`);this.currentBlock=this.appendBlockForAttributesWithElement(s,t,n),this.currentBlockElement=t}}}else if(this.currentBlockElement&&!i&&!e){let s=this.findParentBlockElement(t);if(s)return this.appendBlockForElement(s);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(t){let{parentElement:e}=t;for(;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&this.blockElements.includes(e))return e;e=e.parentElement}return null}processTextNode(t){let e=t.data;var i;return nk(t.parentNode)||(e=ib(e),Ik((i=t.previousSibling)===null||i===void 0?void 0:i.textContent)&&(e=kB(e))),this.appendStringWithAttributes(e,this.getTextAttributes(t.parentNode))}processElement(t){let e;if(Us(t)){if(e=sk(t,"attachment"),Object.keys(e).length){let i=this.getTextAttributes(t);this.appendAttachmentWithAttributes(e,i),t.innerHTML=""}return this.processedElements.push(t)}switch(qe(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes(`
`,this.getTextAttributes(t)),this.processedElements.push(t);case"img":e={url:t.getAttribute("src"),contentType:"image"};let i=(s=>{let n=s.getAttribute("width"),o=s.getAttribute("height"),a={};return n&&(a.width=parseInt(n,10)),o&&(a.height=parseInt(o,10)),a})(t);for(let s in i){let n=i[s];e[s]=n}return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(ru.tableRowSeparator);break;case"td":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(ru.tableCellSeparator)}}appendBlockForAttributesWithElement(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.blockElements.push(e);let s=function(){return{text:[],attributes:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},htmlAttributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}}}(t,i);return this.blocks.push(s),s}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(t,e){return this.appendPiece(ym(t,e))}appendAttachmentWithAttributes(t,e){return this.appendPiece(function(i){return{attachment:i,attributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},type:"attachment"}}(t,e))}appendPiece(t){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)}appendStringToTextAtIndex(t,e){let{text:i}=this.blocks[e],s=i[i.length-1];if(s?.type!=="string")return i.push(ym(t));s.string+=t}prependStringToTextAtIndex(t,e){let{text:i}=this.blocks[e],s=i[0];if(s?.type!=="string")return i.unshift(ym(t));s.string=t+s.string}getTextAttributes(t){let e,i={};for(let s in Ks){let n=Ks[s];if(n.tagName&&ls(t,{matchingSelector:n.tagName,untilNode:this.containerElement}))i[s]=!0;else if(n.parser){if(e=n.parser(t),e){let o=!1;for(let a of this.findBlockElementAncestors(t))if(n.parser(a)===e){o=!0;break}o||(i[s]=e)}}else n.styleProperty&&(e=t.style[n.styleProperty],e&&(i[s]=e))}if(Us(t)){let s=sk(t,"attributes");for(let n in s)e=s[n],i[n]=e}return i}getBlockAttributes(t){let e=[];for(;t&&t!==this.containerElement;){for(let s in Oe){let n=Oe[s];var i;n.parse!==!1&&qe(t)===n.tagName&&((i=n.test)!==null&&i!==void 0&&i.call(n,t)||!n.test)&&(e.push(s),n.listAttribute&&e.push(n.listAttribute))}t=t.parentNode}return e.reverse()}getBlockHTMLAttributes(t){let e={},i=Object.values(Oe).find(s=>s.tagName===qe(t));return(i?.htmlAttributes||[]).forEach(s=>{t.hasAttribute(s)&&(e[s]=t.getAttribute(s))}),e}findBlockElementAncestors(t){let e=[];for(;t&&t!==this.containerElement;){let i=qe(t);Ja().includes(i)&&e.push(t),t=t.parentNode}return e}isBlockElement(t){if(t?.nodeType===Node.ELEMENT_NODE&&!Us(t)&&!ls(t,{matchingSelector:"td",untilNode:this.containerElement}))return Ja().includes(qe(t))||window.getComputedStyle(t).display==="block"}isInsignificantTextNode(t){if(t?.nodeType!==Node.TEXT_NODE||!SB(t.data))return;let{parentNode:e,previousSibling:i,nextSibling:s}=t;return wB(e.previousSibling)&&!this.isBlockElement(e.previousSibling)||nk(e)?void 0:!i||this.isBlockElement(i)||!s||this.isBlockElement(s)}isExtraBR(t){return qe(t)==="br"&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t}needsTableSeparator(t){if(ru.removeBlankTableCells){var e;let i=(e=t.previousSibling)===null||e===void 0?void 0:e.textContent;return i&&/\S/.test(i)}return t.previousSibling}translateBlockElementMarginsToNewlines(){let t=this.getMarginOfDefaultBlockElement();for(let e=0;e<this.blocks.length;e++){let i=this.getMarginOfBlockElementAtIndex(e);i&&(i.top>2*t.top&&this.prependStringToTextAtIndex(`
`,e),i.bottom>2*t.bottom&&this.appendStringToTextAtIndex(`
`,e))}}getMarginOfBlockElementAtIndex(t){let e=this.blockElements[t];if(e&&e.textContent&&!Ja().includes(qe(e))&&!this.processedElements.includes(e))return ok(e)}getMarginOfDefaultBlockElement(){let t=pt(Oe.default.tagName);return this.containerElement.appendChild(t),ok(t)}},nk=function(r){let{whiteSpace:t}=window.getComputedStyle(r);return["pre","pre-wrap","pre-line"].includes(t)},wB=r=>r&&!Ik(r.textContent),ok=function(r){let t=window.getComputedStyle(r);if(t.display==="block")return{top:parseInt(t.marginTop),bottom:parseInt(t.marginBottom)}},AB=function(r){return qe(r)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},kB=r=>r.replace(new RegExp("^".concat(eb.source,"+")),""),SB=r=>new RegExp("^".concat(eb.source,"*$")).test(r),Ik=r=>/\s$/.test(r),CB=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],Wm="data-trix-serialized-attributes",EB="[".concat(Wm,"]"),TB=new RegExp("<!--block-->","g"),LB={"application/json":function(r){let t;if(r instanceof Ye)t=r;else{if(!(r instanceof HTMLElement))throw new Error("unserializable object");t=tn.parse(r.innerHTML).getDocument()}return t.toSerializableDocument().toJSONString()},"text/html":function(r){let t;if(r instanceof Ye)t=yo.render(r);else{if(!(r instanceof HTMLElement))throw new Error("unserializable object");t=r.cloneNode(!0)}return Array.from(t.querySelectorAll("[data-trix-serialize=false]")).forEach(e=>{cs(e)}),CB.forEach(e=>{Array.from(t.querySelectorAll("[".concat(e,"]"))).forEach(i=>{i.removeAttribute(e)})}),Array.from(t.querySelectorAll(EB)).forEach(e=>{try{let i=JSON.parse(e.getAttribute(Wm));e.removeAttribute(Wm);for(let s in i){let n=i[s];e.setAttribute(s,n)}}catch{}}),t.innerHTML.replace(TB,"")}},MB=Object.freeze({__proto__:null}),Ht=class extends Vt{constructor(t,e){super(...arguments),this.attachmentManager=t,this.attachment=e,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}};Ht.proxyMethod("attachment.getAttribute"),Ht.proxyMethod("attachment.hasAttribute"),Ht.proxyMethod("attachment.setAttribute"),Ht.proxyMethod("attachment.getAttributes"),Ht.proxyMethod("attachment.setAttributes"),Ht.proxyMethod("attachment.isPending"),Ht.proxyMethod("attachment.isPreviewable"),Ht.proxyMethod("attachment.getURL"),Ht.proxyMethod("attachment.getHref"),Ht.proxyMethod("attachment.getFilename"),Ht.proxyMethod("attachment.getFilesize"),Ht.proxyMethod("attachment.getFormattedFilesize"),Ht.proxyMethod("attachment.getExtension"),Ht.proxyMethod("attachment.getContentType"),Ht.proxyMethod("attachment.getFile"),Ht.proxyMethod("attachment.setFile"),Ht.proxyMethod("attachment.releaseFile"),Ht.proxyMethod("attachment.getUploadProgress"),Ht.proxyMethod("attachment.setUploadProgress");var gu=class extends Vt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(t).forEach(e=>{this.manageAttachment(e)})}getAttachments(){let t=[];for(let e in this.managedAttachments){let i=this.managedAttachments[e];t.push(i)}return t}manageAttachment(t){return this.managedAttachments[t.id]||(this.managedAttachments[t.id]=new Ht(this,t)),this.managedAttachments[t.id]}attachmentIsManaged(t){return t.id in this.managedAttachments}requestRemovalOfAttachment(t){var e,i;if(this.attachmentIsManaged(t))return(e=this.delegate)===null||e===void 0||(i=e.attachmentManagerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(e,t)}unmanageAttachment(t){let e=this.managedAttachments[t.id];return delete this.managedAttachments[t.id],e}},mu=class{constructor(t){this.composition=t,this.document=this.composition.document;let e=this.composition.getSelectedRange();this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}},_i=class extends Vt{constructor(){super(...arguments),this.document=new Ye,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(t){var e,i;if(!t.isEqualTo(this.document))return this.document=t,this.refreshAttachments(),this.revision++,(e=this.delegate)===null||e===void 0||(i=e.compositionDidChangeDocument)===null||i===void 0?void 0:i.call(e,t)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(t){var e,i,s,n;let{document:o,selectedRange:a}=t;return(e=this.delegate)===null||e===void 0||(i=e.compositionWillLoadSnapshot)===null||i===void 0||i.call(e),this.setDocument(o??new Ye),this.setSelection(a??[0,0]),(s=this.delegate)===null||s===void 0||(n=s.compositionDidLoadSnapshot)===null||n===void 0?void 0:n.call(s)}insertText(t){let{updatePosition:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0},i=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(t,i));let s=i[0],n=s+t.getLength();return e&&this.setSelection(n),this.notifyDelegateOfInsertionAtRange([s,n])}insertBlock(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new as,e=new Ye([t]);return this.insertDocument(e)}insertDocument(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Ye,e=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(t,e));let i=e[0],s=i+t.getLength();return this.setSelection(s),this.notifyDelegateOfInsertionAtRange([i,s])}insertString(t,e){let i=this.getCurrentTextAttributes(),s=ti.textForStringWithAttributes(t,i);return this.insertText(s,e)}insertBlockBreak(){let t=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(t));let e=t[0],i=e+1;return this.setSelection(i),this.notifyDelegateOfInsertionAtRange([e,i])}insertLineBreak(){let t=new mu(this);if(t.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(t.startPosition);if(t.shouldPrependListItem()){let e=new Ye([t.block.copyWithoutText()]);return this.insertDocument(e)}return t.shouldInsertBlockBreak()?this.insertBlockBreak():t.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():t.shouldBreakFormattedBlock()?this.breakFormattedBlock(t):this.insertString(`
`)}insertHTML(t){let e=tn.parse(t).getDocument(),i=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(e,i));let s=i[0],n=s+e.getLength()-1;return this.setSelection(n),this.notifyDelegateOfInsertionAtRange([s,n])}replaceHTML(t){let e=tn.parse(t).getDocument().copyUsingObjectsFromDocument(this.document),i=this.getLocationRange({strict:!1}),s=this.document.rangeFromLocationRange(i);return this.setDocument(e),this.setSelection(s)}insertFile(t){return this.insertFiles([t])}insertFiles(t){let e=[];return Array.from(t).forEach(i=>{var s;if((s=this.delegate)!==null&&s!==void 0&&s.compositionShouldAcceptFile(i)){let n=wo.attachmentForFile(i);e.push(n)}}),this.insertAttachments(e)}insertAttachment(t){return this.insertAttachments([t])}insertAttachments(t){let e=new ti;return Array.from(t).forEach(i=>{var s;let n=i.getType(),o=(s=$m[n])===null||s===void 0?void 0:s.presentation,a=this.getCurrentTextAttributes();o&&(a.presentation=o);let l=ti.textForAttachmentWithAttributes(i,a);e=e.appendText(l)}),this.insertText(e)}shouldManageDeletingInDirection(t){let e=this.getLocationRange();if(yr(e)){if(t==="backward"&&e[0].offset===0||this.shouldManageMovingCursorInDirection(t))return!0}else if(e[0].index!==e[1].index)return!0;return!1}deleteInDirection(t){let e,i,s,{length:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.getLocationRange(),a=this.getSelectedRange(),l=yr(a);if(l?i=t==="backward"&&o[0].offset===0:s=o[0].index!==o[1].index,i&&this.canDecreaseBlockAttributeLevel()){let c=this.getBlock();if(c.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(a[0]),c.isEmpty())return!1}return l&&(a=this.getExpandedRangeInDirection(t,{length:n}),t==="backward"&&(e=this.getAttachmentAtRange(a))),e?(this.editAttachment(e),!1):(this.setDocument(this.document.removeTextAtRange(a)),this.setSelection(a[0]),!i&&!s&&void 0)}moveTextFromRange(t){let[e]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)}removeAttachment(t){let e=this.document.getRangeOfAttachment(t);if(e)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])}removeLastBlockAttribute(){let[t,e]=Array.from(this.getSelectedRange()),i=this.document.getBlockAtPosition(e);return this.removeCurrentAttribute(i.getLastAttribute()),this.setSelection(t)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(t){let e=this.currentAttributes[t];return e!=null&&e!==!1}toggleCurrentAttribute(t){let e=!this.currentAttributes[t];return e?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)}canSetCurrentAttribute(t){return Gt(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)}canSetCurrentTextAttribute(t){let e=this.getSelectedDocument();if(e){for(let i of Array.from(e.getAttachments()))if(!i.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(t){let e=this.getBlock();if(e)return!e.isTerminalBlock()}setCurrentAttribute(t,e){return Gt(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(t,e,i){var s;let n=this.document.getBlockAtPosition(t),o=(s=Gt(n.getLastAttribute()))===null||s===void 0?void 0:s.htmlAttributes;if(n&&o!=null&&o.includes(e)){let a=this.document.setHTMLAttributeAtPosition(t,e,i);this.setDocument(a)}}setTextAttribute(t,e){let i=this.getSelectedRange();if(!i)return;let[s,n]=Array.from(i);if(s!==n)return this.setDocument(this.document.addAttributeAtRange(t,e,i));if(t==="href"){let o=ti.textForStringWithAttributes(e,{href:e});return this.insertText(o)}}setBlockAttribute(t,e){let i=this.getSelectedRange();if(this.canSetCurrentAttribute(t))return this.setDocument(this.document.applyBlockAttributeAtRange(t,e,i)),this.setSelection(i)}removeCurrentAttribute(t){return Gt(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(t){let e=this.getSelectedRange();if(e)return this.setDocument(this.document.removeAttributeAtRange(t,e))}removeBlockAttribute(t){let e=this.getSelectedRange();if(e)return this.setDocument(this.document.removeAttributeAtRange(t,e))}canDecreaseNestingLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getNestingLevel())>0}canIncreaseNestingLevel(){var t;let e=this.getBlock();if(e){if((t=Gt(e.getLastNestableAttribute()))===null||t===void 0||!t.listAttribute)return e.getNestingLevel()>0;{let i=this.getPreviousBlock();if(i)return function(){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Js((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).slice(0,s.length),s)}(i.getListItemAttributes(),e.getListItemAttributes())}}}decreaseNestingLevel(){let t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))}increaseNestingLevel(){let t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var t;let e=(t=this.getBlock())===null||t===void 0?void 0:t.getLastAttribute();if(e)return this.removeCurrentAttribute(e)}decreaseListLevel(){let[t]=Array.from(this.getSelectedRange()),{index:e}=this.document.locationFromPosition(t),i=e,s=this.getBlock().getAttributeLevel(),n=this.document.getBlockAtIndex(i+1);for(;n&&n.isListItem()&&!(n.getAttributeLevel()<=s);)i++,n=this.document.getBlockAtIndex(i+1);t=this.document.positionFromLocation({index:e,offset:0});let o=this.document.positionFromLocation({index:i,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([t,o]))}updateCurrentAttributes(){let t=this.getSelectedRange({ignoreLock:!0});if(t){let e=this.document.getCommonAttributesAtRange(t);if(Array.from(Nm()).forEach(i=>{e[i]||this.canSetCurrentAttribute(i)||(e[i]=!1)}),!Co(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return pk.call({},this.currentAttributes)}getCurrentTextAttributes(){let t={};for(let e in this.currentAttributes){let i=this.currentAttributes[e];i!==!1&&Pm(e)&&(t[e]=i)}return t}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(t){var e;let i=this.document.locationRangeFromRange(t);return(e=this.delegate)===null||e===void 0?void 0:e.compositionDidRequestChangingSelectionToLocationRange(i)}getSelectedRange(){let t=this.getLocationRange();if(t)return this.document.rangeFromLocationRange(t)}setSelectedRange(t){let e=this.document.locationRangeFromRange(t);return this.getSelectionManager().setLocationRange(e)}getPosition(){let t=this.getLocationRange();if(t)return this.document.positionFromLocation(t[0])}getLocationRange(t){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(t)||Tt({index:0,offset:0})}withTargetLocationRange(t,e){let i;this.targetLocationRange=t;try{i=e()}finally{this.targetLocationRange=null}return i}withTargetRange(t,e){let i=this.document.locationRangeFromRange(t);return this.withTargetLocationRange(i,e)}withTargetDOMRange(t,e){let i=this.createLocationRangeFromDOMRange(t,{strict:!1});return this.withTargetLocationRange(i,e)}getExpandedRangeInDirection(t){let{length:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[i,s]=Array.from(this.getSelectedRange());return t==="backward"?e?i-=e:i=this.translateUTF16PositionFromOffset(i,-1):e?s+=e:s=this.translateUTF16PositionFromOffset(s,1),Tt([i,s])}shouldManageMovingCursorInDirection(t){if(this.editingAttachment)return!0;let e=this.getExpandedRangeInDirection(t);return this.getAttachmentAtRange(e)!=null}moveCursorInDirection(t){let e,i;if(this.editingAttachment)i=this.document.getRangeOfAttachment(this.editingAttachment);else{let s=this.getSelectedRange();i=this.getExpandedRangeInDirection(t),e=!au(s,i)}if(t==="backward"?this.setSelectedRange(i[0]):this.setSelectedRange(i[1]),e){let s=this.getAttachmentAtRange(i);if(s)return this.editAttachment(s)}}expandSelectionInDirection(t){let{length:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getExpandedRangeInDirection(t,{length:e});return this.setSelectedRange(i)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(t){let e=this.getPosition(),i=this.document.getRangeOfCommonAttributeAtPosition(t,e);return this.setSelectedRange(i)}selectionContainsAttachments(){var t;return((t=this.getSelectedAttachments())===null||t===void 0?void 0:t.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(t){let e=this.document.locationFromPosition(t);if(e)return this.locationIsCursorTarget(e)}positionIsBlockBreak(t){var e;return(e=this.document.getPieceAtPosition(t))===null||e===void 0?void 0:e.isBlockBreak()}getSelectedDocument(){let t=this.getSelectedRange();if(t)return this.document.getDocumentAtRange(t)}getSelectedAttachments(){var t;return(t=this.getSelectedDocument())===null||t===void 0?void 0:t.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){let t=this.document.getAttachments(),{added:e,removed:i}=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],a=[],l=new Set;s.forEach(h=>{l.add(h)});let c=new Set;return n.forEach(h=>{c.add(h),l.has(h)||o.push(h)}),s.forEach(h=>{c.has(h)||a.push(h)}),{added:o,removed:a}}(this.attachments,t);return this.attachments=t,Array.from(i).forEach(s=>{var n,o;s.delegate=null,(n=this.delegate)===null||n===void 0||(o=n.compositionDidRemoveAttachment)===null||o===void 0||o.call(n,s)}),(()=>{let s=[];return Array.from(e).forEach(n=>{var o,a;n.delegate=this,s.push((o=this.delegate)===null||o===void 0||(a=o.compositionDidAddAttachment)===null||a===void 0?void 0:a.call(o,n))}),s})()}attachmentDidChangeAttributes(t){var e,i;return this.revision++,(e=this.delegate)===null||e===void 0||(i=e.compositionDidEditAttachment)===null||i===void 0?void 0:i.call(e,t)}attachmentDidChangePreviewURL(t){var e,i;return this.revision++,(e=this.delegate)===null||e===void 0||(i=e.compositionDidChangeAttachmentPreviewURL)===null||i===void 0?void 0:i.call(e,t)}editAttachment(t,e){var i,s;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,(i=this.delegate)===null||i===void 0||(s=i.compositionDidStartEditingAttachment)===null||s===void 0?void 0:s.call(i,this.editingAttachment,e)}stopEditingAttachment(){var t,e;this.editingAttachment&&((t=this.delegate)===null||t===void 0||(e=t.compositionDidStopEditingAttachment)===null||e===void 0||e.call(t,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))}removeAttributeForAttachment(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))}breakFormattedBlock(t){let{document:e}=t,{block:i}=t,s=t.startPosition,n=[s-1,s];i.getBlockBreakPosition()===t.startLocation.offset?(i.breaksOnReturn()&&t.nextCharacter===`
`?s+=1:e=e.removeTextAtRange(n),n=[s,s]):t.nextCharacter===`
`?t.previousCharacter===`
`?n=[s-1,s+1]:(n=[s,s+1],s+=1):t.startLocation.offset-1!=0&&(s+=1);let o=new Ye([i.removeLastAttribute().copyWithoutText()]);return this.setDocument(e.insertDocumentAtRange(o,n)),this.setSelection(s)}getPreviousBlock(){let t=this.getLocationRange();if(t){let{index:e}=t[0];if(e>0)return this.document.getBlockAtIndex(e-1)}}getBlock(){let t=this.getLocationRange();if(t)return this.document.getBlockAtIndex(t[0].index)}getAttachmentAtRange(t){let e=this.document.getDocumentAtRange(t);if(e.toString()==="".concat("\uFFFC",`
`))return e.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.compositionDidChangeCurrentAttributes)===null||e===void 0?void 0:e.call(t,this.currentAttributes)}notifyDelegateOfInsertionAtRange(t){var e,i;return(e=this.delegate)===null||e===void 0||(i=e.compositionDidPerformInsertionAtRange)===null||i===void 0?void 0:i.call(e,t)}translateUTF16PositionFromOffset(t,e){let i=this.document.toUTF16String(),s=i.offsetFromUCS2Offset(t);return i.offsetToUCS2Offset(s+e)}};_i.proxyMethod("getSelectionManager().getPointRange"),_i.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),_i.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),_i.proxyMethod("getSelectionManager().locationIsCursorTarget"),_i.proxyMethod("getSelectionManager().selectionIsExpanded"),_i.proxyMethod("delegate?.getSelectionManager");var nl=class extends Vt{constructor(t){super(...arguments),this.composition=t,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(t){let{context:e,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.undoEntries.slice(-1)[0];if(!i||!RB(s,t,e)){let n=this.createEntry({description:t,context:e});this.undoEntries.push(n),this.redoEntries=[]}}undo(){let t=this.undoEntries.pop();if(t){let e=this.createEntry(t);return this.redoEntries.push(e),this.composition.loadSnapshot(t.snapshot)}}redo(){let t=this.redoEntries.pop();if(t){let e=this.createEntry(t);return this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:t,context:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:t?.toString(),context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}}},RB=(r,t,e)=>r?.description===t?.toString()&&r?.context===JSON.stringify(e),wm="attachmentGallery",bu=class{constructor(t){this.document=t.document,this.selectedRange=t.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(t=>this.document=this.document.removeAttributeAtRange(wm,t))}applyBlockAttribute(){let t=0;this.findRangesOfPieces().forEach(e=>{e[1]-e[0]>1&&(e[0]+=t,e[1]+=t,this.document.getCharacterAtPosition(e[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(e[1]),e[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),e[1]++,t++),e[0]!==0&&this.document.getCharacterAtPosition(e[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(e[0]),e[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),e[0]++,t++),this.document=this.document.applyBlockAttributeAtRange(wm,!0,e))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(wm)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}},qk=function(r){let t=new bu(r);return t.perform(),t.getSnapshot()},IB=[qk],vu=class{constructor(t,e,i){this.insertFiles=this.insertFiles.bind(this),this.composition=t,this.selectionManager=e,this.element=i,this.undoManager=new nl(this.composition),this.filters=IB.slice(0)}loadDocument(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})}loadHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=tn.parse(t,{referenceElement:this.element}).getDocument();return this.loadDocument(e)}loadJSON(t){let{document:e,selectedRange:i}=t;return e=Ye.fromJSON(e),this.loadSnapshot({document:e,selectedRange:i})}loadSnapshot(t){return this.undoManager=new nl(this.composition),this.composition.loadSnapshot(t)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(t){return this.composition.deleteInDirection(t)}insertAttachment(t){return this.composition.insertAttachment(t)}insertAttachments(t){return this.composition.insertAttachments(t)}insertDocument(t){return this.composition.insertDocument(t)}insertFile(t){return this.composition.insertFile(t)}insertFiles(t){return this.composition.insertFiles(t)}insertHTML(t){return this.composition.insertHTML(t)}insertString(t){return this.composition.insertString(t)}insertText(t){return this.composition.insertText(t)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(t){let e=this.getDocument().locationRangeFromRange([t,t+1]);return this.selectionManager.getClientRectAtLocationRange(e)}expandSelectionInDirection(t){return this.composition.expandSelectionInDirection(t)}moveCursorInDirection(t){return this.composition.moveCursorInDirection(t)}setSelectedRange(t){return this.composition.setSelectedRange(t)}activateAttribute(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this.composition.setCurrentAttribute(t,e)}attributeIsActive(t){return this.composition.hasCurrentAttribute(t)}canActivateAttribute(t){return this.composition.canSetCurrentAttribute(t)}deactivateAttribute(t){return this.composition.removeCurrentAttribute(t)}setHTMLAtributeAtPosition(t,e,i){this.composition.setHTMLAtributeAtPosition(t,e,i)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(t){let{context:e,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(t,{context:e,consolidatable:i})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}},xu=class{constructor(t){this.element=t}findLocationFromContainerAndOffset(t,e){let{strict:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},s=0,n=!1,o={index:0,offset:0},a=this.findAttachmentElementParentForNode(t);a&&(t=a.parentNode,e=om(a));let l=ou(this.element,{usingFilter:Ok});for(;l.nextNode();){let c=l.currentNode;if(c===t&&Qa(t)){bo(c)||(o.offset+=e);break}if(c.parentNode===t){if(s++===e)break}else if(!Ys(t,c)&&s>0)break;OA(c,{strict:i})?(n&&o.index++,o.offset=0,n=!0):o.offset+=Am(c)}return o}findContainerAndOffsetFromLocation(t){let e,i;if(t.index===0&&t.offset===0){for(e=this.element,i=0;e.firstChild;)if(e=e.firstChild,am(e)){i=1;break}return[e,i]}let[s,n]=this.findNodeAndOffsetFromLocation(t);if(s){if(Qa(s))Am(s)===0?(e=s.parentNode.parentNode,i=om(s.parentNode),bo(s,{name:"right"})&&i++):(e=s,i=t.offset-n);else{if(e=s.parentNode,!OA(s.previousSibling)&&!am(e))for(;s===e.lastChild&&(s=e,e=e.parentNode,!am(e)););i=om(s),t.offset!==0&&i++}return[e,i]}}findNodeAndOffsetFromLocation(t){let e,i,s=0;for(let n of this.getSignificantNodesForIndex(t.index)){let o=Am(n);if(t.offset<=s+o)if(Qa(n)){if(e=n,i=s,t.offset===i&&bo(e))break}else e||(e=n,i=s);if(s+=o,s>t.offset)break}return[e,i]}findAttachmentElementParentForNode(t){for(;t&&t!==this.element;){if(Us(t))return t;t=t.parentNode}}getSignificantNodesForIndex(t){let e=[],i=ou(this.element,{usingFilter:qB}),s=!1;for(;i.nextNode();){let o=i.currentNode;var n;if(mo(o)){if(n!=null?n++:n=0,n===t)s=!0;else if(s)break}else s&&e.push(o)}return e}},Am=function(r){return r.nodeType===Node.TEXT_NODE?bo(r)?0:r.textContent.length:qe(r)==="br"||Us(r)?1:0},qB=function(r){return OB(r)===NodeFilter.FILTER_ACCEPT?Ok(r):NodeFilter.FILTER_REJECT},OB=function(r){return mk(r)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},Ok=function(r){return Us(r.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},yu=class{createDOMRangeFromPoint(t){let e,{x:i,y:s}=t;if(document.caretPositionFromPoint){let{offsetNode:n,offset:o}=document.caretPositionFromPoint(i,s);return e=document.createRange(),e.setStart(n,o),e}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(i,s);if(document.body.createTextRange){let n=tl();try{let o=document.body.createTextRange();o.moveToPoint(i,s),o.select()}catch{}return e=tl(),kk(n),e}}getClientRectsForDOMRange(t){let e=Array.from(t.getClientRects());return[e[0],e[e.length-1]]}},xr=class extends Vt{constructor(t){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=t,this.locationMapper=new xu(this.element),this.pointMapper=new yu,this.lockCount=0,Wt("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.strict===!1?this.createLocationRangeFromDOMRange(tl()):t.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(t){if(this.lockedLocationRange)return;t=Tt(t);let e=this.createDOMRangeFromLocationRange(t);e&&(kk(e),this.updateCurrentLocationRange(t))}setLocationRangeFromPointRange(t){t=Tt(t);let e=this.getLocationAtPoint(t[0]),i=this.getLocationAtPoint(t[1]);this.setLocationRange([e,i])}getClientRectAtLocationRange(t){let e=this.createDOMRangeFromLocationRange(t);if(e)return this.getClientRectsForDOMRange(e)[1]}locationIsCursorTarget(t){let e=Array.from(this.findNodeAndOffsetFromLocation(t))[0];return bo(e)}lock(){this.lockCount++==0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount==0){let{lockedLocationRange:t}=this;if(this.lockedLocationRange=null,t!=null)return this.setLocationRange(t)}}clearSelection(){var t;return(t=Ak())===null||t===void 0?void 0:t.removeAllRanges()}selectionIsCollapsed(){var t;return((t=tl())===null||t===void 0?void 0:t.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(t,e){if(t==null||!this.domRangeWithinElement(t))return;let i=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e);if(!i)return;let s=t.collapsed?void 0:this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e);return Tt([i,s])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let t;this.paused=!0;let e=()=>{if(this.paused=!1,clearTimeout(i),Array.from(t).forEach(s=>{s.destroy()}),Ys(document,this.element))return this.selectionDidChange()},i=setTimeout(e,200);t=["mousemove","keydown"].map(s=>Wt(s,{onElement:document,withCallback:e}))}selectionDidChange(){if(!this.paused&&!Zm(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(t){var e,i;if((t??(t=this.createLocationRangeFromDOMRange(tl())))&&!au(t,this.currentLocationRange))return this.currentLocationRange=t,(e=this.delegate)===null||e===void 0||(i=e.locationRangeDidChange)===null||i===void 0?void 0:i.call(e,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(t){let e=this.findContainerAndOffsetFromLocation(t[0]),i=yr(t)?e:this.findContainerAndOffsetFromLocation(t[1])||e;if(e!=null&&i!=null){let s=document.createRange();return s.setStart(...Array.from(e||[])),s.setEnd(...Array.from(i||[])),s}}getLocationAtPoint(t){let e=this.createDOMRangeFromPoint(t);var i;if(e)return(i=this.createLocationRangeFromDOMRange(e))===null||i===void 0?void 0:i[0]}domRangeWithinElement(t){return t.collapsed?Ys(this.element,t.startContainer):Ys(this.element,t.startContainer)&&Ys(this.element,t.endContainer)}};xr.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),xr.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),xr.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),xr.proxyMethod("pointMapper.createDOMRangeFromPoint"),xr.proxyMethod("pointMapper.getClientRectsForDOMRange");var Nk=Object.freeze({__proto__:null,Attachment:wo,AttachmentManager:gu,AttachmentPiece:Ao,Block:as,Composition:_i,Document:Ye,Editor:vu,HTMLParser:tn,HTMLSanitizer:xo,LineBreakInsertion:mu,LocationMapper:xu,ManagedAttachment:Ht,Piece:kr,PointMapper:yu,SelectionManager:xr,SplittableList:ko,StringPiece:sl,Text:ti,UndoManager:nl}),NB=Object.freeze({__proto__:null,ObjectView:Ar,AttachmentView:rl,BlockView:fu,DocumentView:yo,PieceView:uu,PreviewableAttachmentView:hu,TextView:du}),{lang:km,css:js,keyNames:PB}=ll,Sm=function(r){return function(){let t=r.apply(this,arguments);t.do(),this.undos||(this.undos=[]),this.undos.push(t.undo)}},wu=class extends Vt{constructor(t,e,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),Ve(this,"makeElementMutable",Sm(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),Ve(this,"addToolbar",Sm(()=>{let n=pt({tagName:"div",className:js.attachmentToolbar,data:{trixMutable:!0},childNodes:pt({tagName:"div",className:"trix-button-row",childNodes:pt({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:pt({tagName:"button",className:"trix-button trix-button--remove",textContent:km.remove,attributes:{title:km.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&n.appendChild(pt({tagName:"div",className:js.attachmentMetadataContainer,childNodes:pt({tagName:"span",className:js.attachmentMetadata,childNodes:[pt({tagName:"span",className:js.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),pt({tagName:"span",className:js.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),Wt("click",{onElement:n,withCallback:this.didClickToolbar}),Wt("click",{onElement:n,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),Za("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:n,attachment:this.attachment}}),{do:()=>this.element.appendChild(n),undo:()=>cs(n)}})),Ve(this,"installCaptionEditor",Sm(()=>{let n=pt({tagName:"textarea",className:js.attachmentCaptionEditor,attributes:{placeholder:km.captionPlaceholder},data:{trixMutable:!0}});n.value=this.attachmentPiece.getCaption();let o=n.cloneNode();o.classList.add("trix-autoresize-clone"),o.tabIndex=-1;let a=function(){o.value=n.value,n.style.height=o.scrollHeight+"px"};Wt("input",{onElement:n,withCallback:a}),Wt("input",{onElement:n,withCallback:this.didInputCaption}),Wt("keydown",{onElement:n,withCallback:this.didKeyDownCaption}),Wt("change",{onElement:n,withCallback:this.didChangeCaption}),Wt("blur",{onElement:n,withCallback:this.didBlurCaption});let l=this.element.querySelector("figcaption"),c=l.cloneNode();return{do:()=>{if(l.style.display="none",c.appendChild(n),c.appendChild(o),c.classList.add("".concat(js.attachmentCaption,"--editing")),l.parentElement.insertBefore(c,l),a(),this.options.editCaption)return tb(()=>n.focus())},undo(){cs(c),l.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=t,this.element=e,this.container=i,this.options=s,this.attachment=this.attachmentPiece.attachment,qe(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var t;let e=this.undos.pop();for(this.savePendingCaption();e;)e(),e=this.undos.pop();(t=this.delegate)===null||t===void 0||t.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption!=null){let n=this.pendingCaption;var t,e,i,s;this.pendingCaption=null,n?(t=this.delegate)===null||t===void 0||(e=t.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||e===void 0||e.call(t,{caption:n},this.attachment):(i=this.delegate)===null||i===void 0||(s=i.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||s===void 0||s.call(i,"caption",this.attachment)}}didClickToolbar(t){return t.preventDefault(),t.stopPropagation()}didClickActionButton(t){var e;if(t.target.getAttribute("data-trix-action")==="remove")return(e=this.delegate)===null||e===void 0?void 0:e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(t){var e,i;if(PB[t.keyCode]==="return")return t.preventDefault(),this.savePendingCaption(),(e=this.delegate)===null||e===void 0||(i=e.attachmentEditorDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(e,this.attachment)}didInputCaption(t){this.pendingCaption=t.target.value.replace(/\s/g," ").trim()}didChangeCaption(t){return this.savePendingCaption()}didBlurCaption(t){return this.savePendingCaption()}},Au=class extends Vt{constructor(t,e){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=t,this.composition=e,this.documentView=new yo(this.composition.document,{element:this.element}),Wt("focus",{onElement:this.element,withCallback:this.didFocus}),Wt("blur",{onElement:this.element,withCallback:this.didBlur}),Wt("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),Wt("mousedown",{onElement:this.element,matchingSelector:Vs,withCallback:this.didClickAttachment}),Wt("click",{onElement:this.element,matchingSelector:"a".concat(Vs),preventDefault:!0})}didFocus(t){var e;let i=()=>{var s,n;if(!this.focused)return this.focused=!0,(s=this.delegate)===null||s===void 0||(n=s.compositionControllerDidFocus)===null||n===void 0?void 0:n.call(s)};return((e=this.blurPromise)===null||e===void 0?void 0:e.then(i))||i()}didBlur(t){this.blurPromise=new Promise(e=>tb(()=>{var i,s;return Zm(this.element)||(this.focused=null,(i=this.delegate)===null||i===void 0||(s=i.compositionControllerDidBlur)===null||s===void 0||s.call(i)),this.blurPromise=null,e()}))}didClickAttachment(t,e){var i,s;let n=this.findAttachmentForElement(e),o=!!ls(t.target,{matchingSelector:"figcaption"});return(i=this.delegate)===null||i===void 0||(s=i.compositionControllerDidSelectAttachment)===null||s===void 0?void 0:s.call(i,n,{editCaption:o})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var t,e,i,s,n,o;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&((i=this.delegate)===null||i===void 0||(s=i.compositionControllerWillSyncDocumentView)===null||s===void 0||s.call(i),this.documentView.sync(),(n=this.delegate)===null||n===void 0||(o=n.compositionControllerDidSyncDocumentView)===null||o===void 0||o.call(n)),(t=this.delegate)===null||t===void 0||(e=t.compositionControllerDidRender)===null||e===void 0?void 0:e.call(t)}rerenderViewForObject(t){return this.invalidateViewForObject(t),this.render()}invalidateViewForObject(t){return this.documentView.invalidateViewForObject(t)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(t,e){var i;if(((i=this.attachmentEditor)===null||i===void 0?void 0:i.attachment)===t)return;let s=this.documentView.findElementForObject(t);if(!s)return;this.uninstallAttachmentEditor();let n=this.composition.document.getAttachmentPieceForAttachment(t);this.attachmentEditor=new wu(n,s,this.element,e),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var t;return(t=this.attachmentEditor)===null||t===void 0?void 0:t.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(t,e){var i,s;return(i=this.delegate)===null||i===void 0||(s=i.compositionControllerWillUpdateAttachment)===null||s===void 0||s.call(i,e),this.composition.updateAttributesForAttachment(t,e)}attachmentEditorDidRequestRemovingAttributeForAttachment(t,e){var i,s;return(i=this.delegate)===null||i===void 0||(s=i.compositionControllerWillUpdateAttachment)===null||s===void 0||s.call(i,e),this.composition.removeAttributeForAttachment(t,e)}attachmentEditorDidRequestRemovalOfAttachment(t){var e,i;return(e=this.delegate)===null||e===void 0||(i=e.compositionControllerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(e,t)}attachmentEditorDidRequestDeselectingAttachment(t){var e,i;return(e=this.delegate)===null||e===void 0||(i=e.compositionControllerDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(e,t)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))}},ku=class extends Vt{},Pk="data-trix-mutable",DB="[".concat(Pk,"]"),FB={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},Su=class extends Vt{constructor(t){super(t),this.didMutate=this.didMutate.bind(this),this.element=t,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,FB)}stop(){return this.observer.disconnect()}didMutate(t){var e,i;if(this.mutations.push(...Array.from(this.findSignificantMutations(t)||[])),this.mutations.length)return(e=this.delegate)===null||e===void 0||(i=e.elementDidMutate)===null||i===void 0||i.call(e,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(t){return t.filter(e=>this.mutationIsSignificant(e))}mutationIsSignificant(t){if(this.nodeIsMutable(t.target))return!1;for(let e of Array.from(this.nodesModifiedByMutation(t)))if(this.nodeIsSignificant(e))return!0;return!1}nodeIsSignificant(t){return t!==this.element&&!this.nodeIsMutable(t)&&!mk(t)}nodeIsMutable(t){return ls(t,{matchingSelector:DB})}nodesModifiedByMutation(t){let e=[];switch(t.type){case"attributes":t.attributeName!==Pk&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push(...Array.from(t.addedNodes||[])),e.push(...Array.from(t.removedNodes||[]))}return e}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){let{additions:t,deletions:e}=this.getTextChangesFromCharacterData(),i=this.getTextChangesFromChildList();Array.from(i.additions).forEach(a=>{Array.from(t).includes(a)||t.push(a)}),e.push(...Array.from(i.deletions||[]));let s={},n=t.join("");n&&(s.textAdded=n);let o=e.join("");return o&&(s.textDeleted=o),s}getMutationsByType(t){return Array.from(this.mutations).filter(e=>e.type===t)}getTextChangesFromChildList(){let t,e,i=[],s=[];Array.from(this.getMutationsByType("childList")).forEach(a=>{i.push(...Array.from(a.addedNodes||[])),s.push(...Array.from(a.removedNodes||[]))}),i.length===0&&s.length===1&&mo(s[0])?(t=[],e=[`
`]):(t=jm(i),e=jm(s));let n=t.filter((a,l)=>a!==e[l]).map(Ka),o=e.filter((a,l)=>a!==t[l]).map(Ka);return{additions:n,deletions:o}}getTextChangesFromCharacterData(){let t,e,i=this.getMutationsByType("characterData");if(i.length){let s=i[0],n=i[i.length-1],o=function(a,l){let c,h;return a=Zs.box(a),(l=Zs.box(l)).length<a.length?[h,c]=_A(a,l):[c,h]=_A(l,a),{added:c,removed:h}}(Ka(s.oldValue),Ka(n.target.data));t=o.added,e=o.removed}return{additions:t?[t]:[],deletions:e?[e]:[]}}},jm=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];for(let e of Array.from(r))switch(e.nodeType){case Node.TEXT_NODE:t.push(e.data);break;case Node.ELEMENT_NODE:qe(e)==="br"?t.push(`
`):t.push(...Array.from(jm(e.childNodes)||[]))}return t},Cu=class extends vo{constructor(t){super(...arguments),this.file=t}perform(t){let e=new FileReader;return e.onerror=()=>t(!1),e.onload=()=>{e.onerror=null;try{e.abort()}catch{}return t(!0,this.file)},e.readAsArrayBuffer(this.file)}},Xm=class{constructor(t){this.element=t}shouldIgnore(t){return!!al.samsungAndroid&&(this.previousEvent=this.event,this.event=t,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&BB(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&this.event.inputType!=="insertText"&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var t;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&((t=this.event.data)===null||t===void 0?void 0:t.length)>50}isBeforeInputInsertText(){return this.event.type==="beforeinput"&&this.event.inputType==="insertText"}previousEventWasUnidentifiedKeydown(){var t,e;return((t=this.previousEvent)===null||t===void 0?void 0:t.type)==="keydown"&&((e=this.previousEvent)===null||e===void 0?void 0:e.key)==="Unidentified"}},BB=(r,t)=>ak(r)===ak(t),_B=new RegExp("(".concat("\uFFFC","|").concat(Lu,"|").concat(os,"|\\s)+"),"g"),ak=r=>r.replace(_B," ").trim(),So=class extends Vt{constructor(t){super(...arguments),this.element=t,this.mutationObserver=new Su(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new Xm(this.element);for(let e in this.constructor.events)Wt(e,{onElement:this.element,withCallback:this.handlerFor(e)})}elementDidMutate(t){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidRequestRender)===null||e===void 0?void 0:e.call(t)}requestReparse(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidRequestReparse)===null||e===void 0||e.call(t),this.requestRender()}attachFiles(t){let e=Array.from(t).map(i=>new Cu(i));return Promise.all(e).then(i=>{this.handleInput(function(){var s,n;return(s=this.delegate)===null||s===void 0||s.inputControllerWillAttachFiles(),(n=this.responder)===null||n===void 0||n.insertFiles(i),this.requestRender()})})}handlerFor(t){return e=>{e.defaultPrevented||this.handleInput(()=>{if(!Zm(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(e))return;this.eventName=t,this.constructor.events[t].call(this,e)}})}}handleInput(t){try{var e;(e=this.delegate)===null||e===void 0||e.inputControllerWillHandleInput(),t.call(this)}finally{var i;(i=this.delegate)===null||i===void 0||i.inputControllerDidHandleInput()}}createLinkHTML(t,e){let i=document.createElement("a");return i.href=t,i.textContent=e||t,i.outerHTML}},Cm;Ve(So,"events",{});var{browser:zB,keyNames:Dk}=ll,HB=0,ki=class extends So{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(let e in t){let i=t[e];this.inputSummary[e]=i}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),Qs.reset()}elementDidMutate(t){var e,i;return this.isComposing()?(e=this.delegate)===null||e===void 0||(i=e.inputControllerDidAllowUnhandledInput)===null||i===void 0?void 0:i.call(e):this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(t){let{textAdded:e,textDeleted:i}=t;if(this.inputSummary.preferDocument)return!0;let s=e!=null?e===this.inputSummary.textAdded:!this.inputSummary.textAdded,n=i!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,o=[`
`,` 
`].includes(e)&&!s,a=i===`
`&&!n;if(o&&!a||a&&!o){let c=this.getSelectedRange();if(c){var l;let h=o?e.replace(/\n$/,"").length||-1:e?.length||1;if((l=this.responder)!==null&&l!==void 0&&l.positionIsBlockBreak(c[1]+h))return!0}}return s&&n}mutationIsSignificant(t){var e;let i=Object.keys(t).length>0,s=((e=this.compositionInput)===null||e===void 0?void 0:e.getEndData())==="";return i||!s}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new Bi(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(t,e){var i;return((i=this.responder)===null||i===void 0?void 0:i.deleteInDirection(t))!==!1?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(t){var e;if(!function(s){if(s==null||!s.setData)return!1;for(let n in DA){let o=DA[n];try{if(s.setData(n,o),!s.getData(n)===o)return!1}catch{return!1}}return!0}(t))return;let i=(e=this.responder)===null||e===void 0?void 0:e.getSelectedDocument().toSerializableDocument();return t.setData("application/x-trix-document",JSON.stringify(i)),t.setData("text/html",yo.render(i).innerHTML),t.setData("text/plain",i.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(t){let e={};return Array.from(t?.types||[]).forEach(i=>{e[i]=!0}),e.Files||e["application/x-trix-document"]||e["text/html"]||e["text/plain"]}getPastedHTMLUsingHiddenElement(t){let e=this.getSelectedRange(),i={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},s=pt({style:i,tagName:"div",editable:!0});return document.body.appendChild(s),s.focus(),requestAnimationFrame(()=>{let n=s.innerHTML;return cs(s),this.setSelectedRange(e),t(n)})}};Ve(ki,"events",{keydown(r){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;let t=Dk[r.keyCode];if(t){var e;let s=this.keys;["ctrl","alt","shift","meta"].forEach(n=>{var o;r["".concat(n,"Key")]&&(n==="ctrl"&&(n="control"),s=(o=s)===null||o===void 0?void 0:o[n])}),((e=s)===null||e===void 0?void 0:e[t])!=null&&(this.setInputSummary({keyName:t}),Qs.reset(),s[t].call(this,r))}if(yk(r)){let s=String.fromCharCode(r.keyCode).toLowerCase();if(s){var i;let n=["alt","shift"].map(o=>{if(r["".concat(o,"Key")])return o}).filter(o=>o);n.push(s),(i=this.delegate)!==null&&i!==void 0&&i.inputControllerDidReceiveKeyboardCommand(n)&&r.preventDefault()}}},keypress(r){if(this.inputSummary.eventName!=null||r.metaKey||r.ctrlKey&&!r.altKey)return;let t=XB(r);var e,i;return t?((e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.insertString(t),this.setInputSummary({textAdded:t,didDelete:this.selectionIsExpanded()})):void 0},textInput(r){let{data:t}=r,{textAdded:e}=this.inputSummary;if(e&&e!==t&&e.toUpperCase()===t){var i;let s=this.getSelectedRange();return this.setSelectedRange([s[0],s[1]+e.length]),(i=this.responder)===null||i===void 0||i.insertString(t),this.setInputSummary({textAdded:t}),this.setSelectedRange(s)}},dragenter(r){r.preventDefault()},dragstart(r){var t,e;return this.serializeSelectionToDataTransfer(r.dataTransfer),this.draggedRange=this.getSelectedRange(),(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidStartDrag)===null||e===void 0?void 0:e.call(t)},dragover(r){if(this.draggedRange||this.canAcceptDataTransfer(r.dataTransfer)){r.preventDefault();let i={x:r.clientX,y:r.clientY};var t,e;if(!Co(i,this.draggingPoint))return this.draggingPoint=i,(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidReceiveDragOverPoint)===null||e===void 0?void 0:e.call(t,this.draggingPoint)}},dragend(r){var t,e;(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidCancelDrag)===null||e===void 0||e.call(t),this.draggedRange=null,this.draggingPoint=null},drop(r){var t,e;r.preventDefault();let i=(t=r.dataTransfer)===null||t===void 0?void 0:t.files,s=r.dataTransfer.getData("application/x-trix-document"),n={x:r.clientX,y:r.clientY};if((e=this.responder)===null||e===void 0||e.setLocationRangeFromPointRange(n),i!=null&&i.length)this.attachFiles(i);else if(this.draggedRange){var o,a;(o=this.delegate)===null||o===void 0||o.inputControllerWillMoveText(),(a=this.responder)===null||a===void 0||a.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(s){var l;let c=Ye.fromJSONString(s);(l=this.responder)===null||l===void 0||l.insertDocument(c),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(r){var t,e;if((t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(r.clipboardData)&&r.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillCutText(),this.deleteInDirection("backward"),r.defaultPrevented))return this.requestRender()},copy(r){var t;(t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(r.clipboardData)&&r.preventDefault()},paste(r){let t=r.clipboardData||r.testClipboardData,e={clipboard:t};if(!t||YB(r))return void this.getPastedHTMLUsingHiddenElement(w=>{var y,A,C;return e.type="text/html",e.html=w,(y=this.delegate)===null||y===void 0||y.inputControllerWillPaste(e),(A=this.responder)===null||A===void 0||A.insertHTML(e.html),this.requestRender(),(C=this.delegate)===null||C===void 0?void 0:C.inputControllerDidPaste(e)});let i=t.getData("URL"),s=t.getData("text/html"),n=t.getData("public.url-name");if(i){var o,a,l;let w;e.type="text/html",w=n?ib(n).trim():i,e.html=this.createLinkHTML(i,w),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(e),this.setInputSummary({textAdded:w,didDelete:this.selectionIsExpanded()}),(a=this.responder)===null||a===void 0||a.insertHTML(e.html),this.requestRender(),(l=this.delegate)===null||l===void 0||l.inputControllerDidPaste(e)}else if(xk(t)){var c,h,u;e.type="text/plain",e.string=t.getData("text/plain"),(c=this.delegate)===null||c===void 0||c.inputControllerWillPaste(e),this.setInputSummary({textAdded:e.string,didDelete:this.selectionIsExpanded()}),(h=this.responder)===null||h===void 0||h.insertString(e.string),this.requestRender(),(u=this.delegate)===null||u===void 0||u.inputControllerDidPaste(e)}else if(s){var d,f,g;e.type="text/html",e.html=s,(d=this.delegate)===null||d===void 0||d.inputControllerWillPaste(e),(f=this.responder)===null||f===void 0||f.insertHTML(e.html),this.requestRender(),(g=this.delegate)===null||g===void 0||g.inputControllerDidPaste(e)}else if(Array.from(t.types).includes("Files")){var p,b;let w=(p=t.items)===null||p===void 0||(p=p[0])===null||p===void 0||(b=p.getAsFile)===null||b===void 0?void 0:b.call(p);if(w){var m,x,v;let y=WB(w);!w.name&&y&&(w.name="pasted-file-".concat(++HB,".").concat(y)),e.type="File",e.file=w,(m=this.delegate)===null||m===void 0||m.inputControllerWillAttachFiles(),(x=this.responder)===null||x===void 0||x.insertFile(e.file),this.requestRender(),(v=this.delegate)===null||v===void 0||v.inputControllerDidPaste(e)}}r.preventDefault()},compositionstart(r){return this.getCompositionInput().start(r.data)},compositionupdate(r){return this.getCompositionInput().update(r.data)},compositionend(r){return this.getCompositionInput().end(r.data)},beforeinput(r){this.inputSummary.didInput=!0},input(r){return this.inputSummary.didInput=!0,r.stopPropagation()}}),Ve(ki,"keys",{backspace(r){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",r)},delete(r){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",r)},return(r){var t,e;return this.setInputSummary({preferDocument:!0}),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0?void 0:e.insertLineBreak()},tab(r){var t,e;(t=this.responder)!==null&&t!==void 0&&t.canIncreaseNestingLevel()&&((e=this.responder)===null||e===void 0||e.increaseNestingLevel(),this.requestRender(),r.preventDefault())},left(r){var t;if(this.selectionIsInCursorTarget())return r.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")},right(r){var t;if(this.selectionIsInCursorTarget())return r.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")},control:{d(r){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",r)},h(r){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",r)},o(r){var t,e;return r.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(r){var t,e;(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.insertString(`
`),this.requestRender(),r.preventDefault()},tab(r){var t,e;(t=this.responder)!==null&&t!==void 0&&t.canDecreaseNestingLevel()&&((e=this.responder)===null||e===void 0||e.decreaseNestingLevel(),this.requestRender(),r.preventDefault())},left(r){if(this.selectionIsInCursorTarget())return r.preventDefault(),this.expandSelectionInDirection("backward")},right(r){if(this.selectionIsInCursorTarget())return r.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(r){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}},meta:{backspace(r){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}}}),ki.proxyMethod("responder?.getSelectedRange"),ki.proxyMethod("responder?.setSelectedRange"),ki.proxyMethod("responder?.expandSelectionInDirection"),ki.proxyMethod("responder?.selectionIsInCursorTarget"),ki.proxyMethod("responder?.selectionIsExpanded");var WB=r=>{var t;return(t=r.type)===null||t===void 0||(t=t.match(/\/(\w+)$/))===null||t===void 0?void 0:t[1]},jB=!((Cm=" ".codePointAt)===null||Cm===void 0||!Cm.call(" ",0)),XB=function(r){if(r.key&&jB&&r.key.codePointAt(0)===r.keyCode)return r.key;{let t;if(r.which===null?t=r.keyCode:r.which!==0&&r.charCode!==0&&(t=r.charCode),t!=null&&Dk[t]!=="escape")return Zs.fromCodepoints([t]).toString()}},YB=function(r){let t=r.clipboardData;if(t){if(t.types.includes("text/html")){for(let e of t.types){let i=/^CorePasteboardFlavorType/.test(e),s=/^dyn\./.test(e)&&t.getData(e);if(i||s)return!0}return!1}{let e=t.types.includes("com.apple.webarchive"),i=t.types.includes("com.apple.flat-rtfd");return e||i}}},Bi=class extends Vt{constructor(t){super(...arguments),this.inputController=t,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(t){if(this.data.start=t,this.isSignificant()){var e,i;this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded&&((i=this.responder)===null||i===void 0||i.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(e=this.responder)===null||e===void 0?void 0:e.getSelectedRange()}}update(t){if(this.data.update=t,this.isSignificant()){let e=this.selectPlaceholder();e&&(this.forgetPlaceholder(),this.range=e)}}end(t){return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.setSelectedRange(this.range),(s=this.responder)===null||s===void 0||s.insertString(this.data.end),(n=this.responder)===null||n===void 0?void 0:n.setSelectedRange(this.range[0]+this.data.end.length)):this.data.start!=null||this.data.update!=null?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var e,i,s,n}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return!zB.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var t,e;return((t=this.data.start)===null||t===void 0?void 0:t.length)===0&&((e=this.data.end)===null||e===void 0?void 0:e.length)>0&&this.range}};Bi.proxyMethod("inputController.setInputSummary"),Bi.proxyMethod("inputController.requestRender"),Bi.proxyMethod("inputController.requestReparse"),Bi.proxyMethod("responder?.selectionIsExpanded"),Bi.proxyMethod("responder?.insertPlaceholder"),Bi.proxyMethod("responder?.selectPlaceholder"),Bi.proxyMethod("responder?.forgetPlaceholder");var Gs=class extends So{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidAllowUnhandledInput)===null||e===void 0?void 0:e.call(t):void 0:this.reparse();var t,e}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var t,e;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||(e=this.delegate)===null||e===void 0||e.render(),(t=this.afterRender)===null||t===void 0||t.call(this),this.afterRender=null}reparse(){var t;return(t=this.delegate)===null||t===void 0?void 0:t.reparse()}insertString(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var s;return(s=this.responder)===null||s===void 0?void 0:s.insertString(e,i)})}toggleAttributeIfSupported(t){var e;if(Nm().includes(t))return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var i;return(i=this.responder)===null||i===void 0?void 0:i.toggleCurrentAttribute(t)})}activateAttributeIfSupported(t,e){var i;if(Nm().includes(t))return(i=this.delegate)===null||i===void 0||i.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var s;return(s=this.responder)===null||s===void 0?void 0:s.setCurrentAttribute(t,e)})}deleteInDirection(t){let{recordUndoEntry:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};var i;e&&((i=this.delegate)===null||i===void 0||i.inputControllerWillPerformTyping());let s=()=>{var o;return(o=this.responder)===null||o===void 0?void 0:o.deleteInDirection(t)},n=this.getTargetDOMRange({minLength:this.composing?1:2});return n?this.withTargetDOMRange(n,s):s()}withTargetDOMRange(t,e){var i;return typeof t=="function"&&(e=t,t=this.getTargetDOMRange()),t?(i=this.responder)===null||i===void 0?void 0:i.withTargetDOMRange(t,e.bind(this)):(Qs.reset(),e.call(this))}getTargetDOMRange(){var t,e;let{minLength:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0},s=(t=(e=this.event).getTargetRanges)===null||t===void 0?void 0:t.call(e);if(s&&s.length){let n=VB(s[0]);if(i===0||n.toString().length>=i)return n}}withEvent(t,e){let i;this.event=t;try{i=e.call(this)}finally{this.event=null}return i}};Ve(Gs,"events",{keydown(r){if(yk(r)){var t;let e=$B(r);(t=this.delegate)!==null&&t!==void 0&&t.inputControllerDidReceiveKeyboardCommand(e)&&r.preventDefault()}else{let e=r.key;r.altKey&&(e+="+Alt"),r.shiftKey&&(e+="+Shift");let i=this.constructor.keys[e];if(i)return this.withEvent(r,i)}},paste(r){var t;let e,i=(t=r.clipboardData)===null||t===void 0?void 0:t.getData("URL");return Fk(r)?(r.preventDefault(),this.attachFiles(r.clipboardData.files)):GB(r)?(r.preventDefault(),e={type:"text/plain",string:r.clipboardData.getData("text/plain")},(s=this.delegate)===null||s===void 0||s.inputControllerWillPaste(e),(n=this.responder)===null||n===void 0||n.insertString(e.string),this.render(),(o=this.delegate)===null||o===void 0?void 0:o.inputControllerDidPaste(e)):i?(r.preventDefault(),e={type:"text/html",html:this.createLinkHTML(i)},(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(e),(l=this.responder)===null||l===void 0||l.insertHTML(e.html),this.render(),(c=this.delegate)===null||c===void 0?void 0:c.inputControllerDidPaste(e)):void 0;var s,n,o,a,l,c},beforeinput(r){let t=this.constructor.inputTypes[r.inputType],e=(i=r,!(!/iPhone|iPad/.test(navigator.userAgent)||i.inputType&&i.inputType!=="insertParagraph"));var i;t&&(this.withEvent(r,t),e||this.scheduleRender()),e&&this.render()},input(r){Qs.reset()},dragstart(r){var t,e;(t=this.responder)!==null&&t!==void 0&&t.selectionContainsAttachments()&&(r.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(e=this.responder)===null||e===void 0?void 0:e.getSelectedRange(),point:Tm(r)})},dragenter(r){Em(r)&&r.preventDefault()},dragover(r){if(this.dragging){r.preventDefault();let e=Tm(r);var t;if(!Co(e,this.dragging.point))return this.dragging.point=e,(t=this.responder)===null||t===void 0?void 0:t.setLocationRangeFromPointRange(e)}else Em(r)&&r.preventDefault()},drop(r){var t,e;if(this.dragging)return r.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),(e=this.responder)===null||e===void 0||e.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(Em(r)){var i;r.preventDefault();let s=Tm(r);return(i=this.responder)===null||i===void 0||i.setLocationRangeFromPointRange(s),this.attachFiles(r.dataTransfer.files)}},dragend(){var r;this.dragging&&((r=this.responder)===null||r===void 0||r.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(r){this.composing&&(this.composing=!1,al.recentAndroid||this.scheduleRender())}}),Ve(Gs,"keys",{ArrowLeft(){var r,t;if((r=this.responder)!==null&&r!==void 0&&r.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")},ArrowRight(){var r,t;if((r=this.responder)!==null&&r!==void 0&&r.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")},Backspace(){var r,t,e;if((r=this.responder)!==null&&r!==void 0&&r.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.deleteInDirection("backward"),this.render()},Tab(){var r,t;if((r=this.responder)!==null&&r!==void 0&&r.canIncreaseNestingLevel())return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.increaseNestingLevel(),this.render()},"Tab+Shift"(){var r,t;if((r=this.responder)!==null&&r!==void 0&&r.canDecreaseNestingLevel())return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.decreaseNestingLevel(),this.render()}}),Ve(Gs,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var r;this.deleteByDragRange=(r=this.responder)===null||r===void 0?void 0:r.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var r;if((r=this.responder)!==null&&r!==void 0&&r.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var r;if((r=this.responder)!==null&&r!==void 0&&r.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(let e in(r=this.responder)===null||r===void 0?void 0:r.getCurrentAttributes()){var r,t;(t=this.responder)===null||t===void 0||t.removeCurrentAttribute(e)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var r;return(r=this.delegate)===null||r===void 0?void 0:r.inputControllerWillPerformRedo()},historyUndo(){var r;return(r=this.delegate)===null||r===void 0?void 0:r.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){let r=this.deleteByDragRange;var t;if(r)return this.deleteByDragRange=null,(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.moveTextFromRange(r)})},insertFromPaste(){let{dataTransfer:r}=this.event,t={dataTransfer:r},e=r.getData("URL"),i=r.getData("text/html");if(e){var s;let l;this.event.preventDefault(),t.type="text/html";let c=r.getData("public.url-name");l=c?ib(c).trim():e,t.html=this.createLinkHTML(e,l),(s=this.delegate)===null||s===void 0||s.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var h;return(h=this.responder)===null||h===void 0?void 0:h.insertHTML(t.html)}),this.afterRender=()=>{var h;return(h=this.delegate)===null||h===void 0?void 0:h.inputControllerDidPaste(t)}}else if(xk(r)){var n;t.type="text/plain",t.string=r.getData("text/plain"),(n=this.delegate)===null||n===void 0||n.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertString(t.string)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}else if(UB(this.event)){var o;t.type="File",t.file=r.files[0],(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertFile(t.file)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}else if(i){var a;this.event.preventDefault(),t.type="text/html",t.html=i,(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertHTML(t.html)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var r;return(r=this.delegate)===null||r===void 0||r.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.insertLineBreak()})},insertReplacementText(){let r=this.event.dataTransfer.getData("text/plain"),t=this.event.getTargetRanges()[0];this.withTargetDOMRange(t,()=>{this.insertString(r,{updatePosition:!1})})},insertText(){var r;return this.insertString(this.event.data||((r=this.event.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});var VB=function(r){let t=document.createRange();return t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset),t},Em=r=>{var t;return Array.from(((t=r.dataTransfer)===null||t===void 0?void 0:t.types)||[]).includes("Files")},UB=r=>{var t;return((t=r.dataTransfer.files)===null||t===void 0?void 0:t[0])&&!Fk(r)&&!(e=>{let{dataTransfer:i}=e;return i.types.includes("Files")&&i.types.includes("text/html")&&i.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(r)},Fk=function(r){let t=r.clipboardData;if(t)return Array.from(t.types).filter(e=>e.match(/file/i)).length===t.types.length&&t.files.length>=1},GB=function(r){let t=r.clipboardData;if(t)return t.types.includes("text/plain")&&t.types.length===1},$B=function(r){let t=[];return r.altKey&&t.push("alt"),r.shiftKey&&t.push("shift"),t.push(r.key),t},Tm=r=>({x:r.clientX,y:r.clientY}),Ym="[data-trix-attribute]",Vm="[data-trix-action]",KB="".concat(Ym,", ").concat(Vm),Mu="[data-trix-dialog]",ZB="".concat(Mu,"[data-trix-active]"),JB="".concat(Mu," [data-trix-method]"),lk="".concat(Mu," [data-trix-input]"),ck=(r,t)=>(t||(t=go(r)),r.querySelector("[data-trix-input][name='".concat(t,"']"))),hk=r=>r.getAttribute("data-trix-action"),go=r=>r.getAttribute("data-trix-attribute")||r.getAttribute("data-trix-dialog-attribute"),Eu=class extends Vt{constructor(t){super(t),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=t,this.attributes={},this.actions={},this.resetDialogInputs(),Wt("mousedown",{onElement:this.element,matchingSelector:Vm,withCallback:this.didClickActionButton}),Wt("mousedown",{onElement:this.element,matchingSelector:Ym,withCallback:this.didClickAttributeButton}),Wt("click",{onElement:this.element,matchingSelector:KB,preventDefault:!0}),Wt("click",{onElement:this.element,matchingSelector:JB,withCallback:this.didClickDialogButton}),Wt("keydown",{onElement:this.element,matchingSelector:lk,withCallback:this.didKeyDownDialogInput})}didClickActionButton(t,e){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),t.preventDefault();let s=hk(e);return this.getDialog(s)?this.toggleDialog(s):(n=this.delegate)===null||n===void 0?void 0:n.toolbarDidInvokeAction(s,e);var n}didClickAttributeButton(t,e){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),t.preventDefault();let s=go(e);var n;return this.getDialog(s)?this.toggleDialog(s):(n=this.delegate)===null||n===void 0||n.toolbarDidToggleAttribute(s),this.refreshAttributeButtons()}didClickDialogButton(t,e){let i=ls(e,{matchingSelector:Mu});return this[e.getAttribute("data-trix-method")].call(this,i)}didKeyDownDialogInput(t,e){if(t.keyCode===13){t.preventDefault();let i=e.getAttribute("name"),s=this.getDialog(i);this.setAttribute(s)}if(t.keyCode===27)return t.preventDefault(),this.hideDialog()}updateActions(t){return this.actions=t,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((t,e)=>{t.disabled=this.actions[e]===!1})}eachActionButton(t){return Array.from(this.element.querySelectorAll(Vm)).map(e=>t(e,hk(e)))}updateAttributes(t){return this.attributes=t,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((t,e)=>(t.disabled=this.attributes[e]===!1,this.attributes[e]||this.dialogIsVisible(e)?(t.setAttribute("data-trix-active",""),t.classList.add("trix-active")):(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"))))}eachAttributeButton(t){return Array.from(this.element.querySelectorAll(Ym)).map(e=>t(e,go(e)))}applyKeyboardCommand(t){let e=JSON.stringify(t.sort());for(let i of Array.from(this.element.querySelectorAll("[data-trix-key]"))){let s=i.getAttribute("data-trix-key").split("+");if(JSON.stringify(s.sort())===e)return Za("mousedown",{onElement:i}),!0}return!1}dialogIsVisible(t){let e=this.getDialog(t);if(e)return e.hasAttribute("data-trix-active")}toggleDialog(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)}showDialog(t){var e,i;this.hideDialog(),(e=this.delegate)===null||e===void 0||e.toolbarWillShowDialog();let s=this.getDialog(t);s.setAttribute("data-trix-active",""),s.classList.add("trix-active"),Array.from(s.querySelectorAll("input[disabled]")).forEach(o=>{o.removeAttribute("disabled")});let n=go(s);if(n){let o=ck(s,t);o&&(o.value=this.attributes[n]||"",o.select())}return(i=this.delegate)===null||i===void 0?void 0:i.toolbarDidShowDialog(t)}setAttribute(t){var e;let i=go(t),s=ck(t,i);return!s.willValidate||(s.setCustomValidity(""),s.checkValidity()&&this.isSafeAttribute(s))?((e=this.delegate)===null||e===void 0||e.toolbarDidUpdateAttribute(i,s.value),this.hideDialog()):(s.setCustomValidity("Invalid value"),s.setAttribute("data-trix-validate",""),s.classList.add("trix-validate"),s.focus())}isSafeAttribute(t){return!t.hasAttribute("data-trix-validate-href")||cu.isValidAttribute("a","href",t.value)}removeAttribute(t){var e;let i=go(t);return(e=this.delegate)===null||e===void 0||e.toolbarDidRemoveAttribute(i),this.hideDialog()}hideDialog(){let t=this.element.querySelector(ZB);var e;if(t)return t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),(e=this.delegate)===null||e===void 0?void 0:e.toolbarDidHideDialog((i=>i.getAttribute("data-trix-dialog"))(t))}resetDialogInputs(){Array.from(this.element.querySelectorAll(lk)).forEach(t=>{t.setAttribute("disabled","disabled"),t.removeAttribute("data-trix-validate"),t.classList.remove("trix-validate")})}getDialog(t){return this.element.querySelector("[data-trix-dialog=".concat(t,"]"))}},$s=class extends ku{constructor(t){let{editorElement:e,document:i,html:s}=t;super(...arguments),this.editorElement=e,this.selectionManager=new xr(this.editorElement),this.selectionManager.delegate=this,this.composition=new _i,this.composition.delegate=this,this.attachmentManager=new gu(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=Jm.getLevel()===2?new Gs(this.editorElement):new ki(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new Au(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new Eu(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new vu(this.composition,this.selectionManager,this.editorElement),i?this.editor.loadDocument(i):this.editor.loadHTML(s)}registerSelectionManager(){return Qs.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return Qs.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(t){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(t){this.pasting&&(this.pastedRange=t)}compositionShouldAcceptFile(t){return this.notifyEditorElement("file-accept",{file:t})}compositionDidAddAttachment(t){let e=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-add",{attachment:e})}compositionDidEditAttachment(t){this.compositionController.rerenderViewForObject(t);let e=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")}compositionDidRemoveAttachment(t){let e=this.attachmentManager.unmanageAttachment(t);return this.notifyEditorElement("attachment-remove",{attachment:e})}compositionDidStartEditingAttachment(t,e){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,e),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(t){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(t){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(t,e){return this.toolbarController.hideDialog(),this.composition.editAttachment(t,e)}compositionControllerDidRequestDeselectingAttachment(t){let e=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(t);return this.selectionManager.setLocationRange(e[1])}compositionControllerWillUpdateAttachment(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(t){return this.recordFormattingUndoEntry(t)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})}inputControllerDidPaste(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(t){return this.toolbarController.applyKeyboardCommand(t)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(t){return this.selectionManager.setLocationRangeFromPointRange(t)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!au(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(t,e){return this.invokeAction(t,e)}toolbarDidToggleAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.toggleCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(t,e){if(this.recordFormattingUndoEntry(t),this.composition.setCurrentAttribute(t,e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.removeCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(t){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})}toolbarDidHideDialog(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(t){return!!this.actionIsExternal(t)||!((e=this.actions[t])===null||e===void 0||(e=e.test)===null||e===void 0||!e.call(this));var e}invokeAction(t,e){return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t,invokingElement:e}):(i=this.actions[t])===null||i===void 0||(i=i.perform)===null||i===void 0?void 0:i.call(this);var i}actionIsExternal(t){return/^x-./.test(t)}getCurrentActions(){let t={};for(let e in this.actions)t[e]=this.canInvokeAction(e);return t}updateCurrentActions(){let t=this.getCurrentActions();if(!Co(t,this.currentActions))return this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let t=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(s=>{let{document:n,selectedRange:o}=t;t=s.call(this.editor,t)||{},t.document||(t.document=n),t.selectedRange||(t.selectedRange=o)}),e=t,i=this.composition.getSnapshot(),!au(e.selectedRange,i.selectedRange)||!e.document.isEqualTo(i.document))return this.composition.loadSnapshot(t);var e,i}updateInputElement(){let t=function(e,i){let s=LB[i];if(s)return s(e);throw new Error("unknown content type: ".concat(i))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setFormValue(t)}notifyEditorElement(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)}removeAttachment(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()}recordFormattingUndoEntry(t){let e=Gt(t),i=this.selectionManager.getLocationRange();if(e||!yr(i))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return[this.getLocationContext(),this.getTimeContext(),...Array.from(e)]}getLocationContext(){let t=this.selectionManager.getLocationRange();return yr(t)?t[0].index:t}getTimeContext(){return Im.interval>0?Math.floor(new Date().getTime()/Im.interval):0}isFocused(){var t;return this.editorElement===((t=this.editorElement.ownerDocument)===null||t===void 0?void 0:t.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}};Ve($s,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return Jm.pickFiles(this.editor.insertFiles)}}}),$s.proxyMethod("getSelectionManager().setLocationRange"),$s.proxyMethod("getSelectionManager().getLocationRange");var QB=Object.freeze({__proto__:null,AttachmentEditorController:wu,CompositionController:Au,Controller:ku,EditorController:$s,InputController:So,Level0InputController:ki,Level2InputController:Gs,ToolbarController:Eu}),t_=Object.freeze({__proto__:null,MutationObserver:Su,SelectionChangeObserver:lu}),e_=Object.freeze({__proto__:null,FileVerificationOperation:Cu,ImagePreloadOperation:pu});vk("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);var Tu=class extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=bk.getDefaultHTML())}},i_=0,r_=function(r){if(!r.hasAttribute("contenteditable"))return r.setAttribute("contenteditable",""),function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.times=1,Wt(t,e)}("focus",{onElement:r,withCallback:()=>s_(r)})},s_=function(r){return n_(r),o_(r)},n_=function(r){var t,e;if((t=(e=document).queryCommandSupported)!==null&&t!==void 0&&t.call(e,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),Wt("mscontrolselect",{onElement:r,preventDefault:!0})},o_=function(r){var t,e;if((t=(e=document).queryCommandSupported)!==null&&t!==void 0&&t.call(e,"DefaultParagraphSeparator")){let{tagName:i}=Oe.default;if(["div","p"].includes(i))return document.execCommand("DefaultParagraphSeparator",!1,i)}},uk=al.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};vk("trix-editor",`%t {
    display: block;
}

%t:empty::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(Vs,` figcaption textarea {
    resize: none;
}

%t `).concat(Vs,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(Vs,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(uk.display,` !important;
    width: `).concat(uk.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));var vr=new WeakMap,$a=new WeakSet,Um=class{constructor(t){var e,i;Mk(e=this,i=$a),i.add(e),el(this,vr,{writable:!0,value:void 0}),this.element=t,rb(this,vr,t.attachInternals())}connectedCallback(){eu(this,$a,iu).call(this)}disconnectedCallback(){}get labels(){return Pt(this,vr).labels}get disabled(){var t;return(t=this.element.inputElement)===null||t===void 0?void 0:t.disabled}set disabled(t){this.element.toggleAttribute("disabled",t)}get required(){return this.element.hasAttribute("required")}set required(t){this.element.toggleAttribute("required",t),eu(this,$a,iu).call(this)}get validity(){return Pt(this,vr).validity}get validationMessage(){return Pt(this,vr).validationMessage}get willValidate(){return Pt(this,vr).willValidate}setFormValue(t){eu(this,$a,iu).call(this)}checkValidity(){return Pt(this,vr).checkValidity()}reportValidity(){return Pt(this,vr).reportValidity()}setCustomValidity(t){eu(this,$a,iu).call(this,t)}};function iu(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",{required:t,value:e}=this.element,i=t&&!e,s=!!r,n=pt("input",{required:t}),o=r||n.validationMessage;Pt(this,vr).setValidity({valueMissing:i,customError:s},o)}var Lm=new WeakMap,Mm=new WeakMap,Rm=new WeakMap,Gm=class{constructor(t){el(this,Lm,{writable:!0,value:void 0}),el(this,Mm,{writable:!0,value:e=>{e.defaultPrevented||e.target===this.element.form&&this.element.reset()}}),el(this,Rm,{writable:!0,value:e=>{if(e.defaultPrevented||this.element.contains(e.target))return;let i=ls(e.target,{matchingSelector:"label"});i&&Array.from(this.labels).includes(i)&&this.element.focus()}}),this.element=t}connectedCallback(){rb(this,Lm,function(t){if(t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby"))return;let e=function(){let i=Array.from(t.labels).map(n=>{if(!n.contains(t))return n.textContent}).filter(n=>n),s=i.join(" ");return s?t.setAttribute("aria-label",s):t.removeAttribute("aria-label")};return e(),Wt("focus",{onElement:t,withCallback:e})}(this.element)),window.addEventListener("reset",Pt(this,Mm),!1),window.addEventListener("click",Pt(this,Rm),!1)}disconnectedCallback(){var t;(t=Pt(this,Lm))===null||t===void 0||t.destroy(),window.removeEventListener("reset",Pt(this,Mm),!1),window.removeEventListener("click",Pt(this,Rm),!1)}get labels(){let t=[];this.element.id&&this.element.ownerDocument&&t.push(...Array.from(this.element.ownerDocument.querySelectorAll("label[for='".concat(this.element.id,"']"))||[]));let e=ls(this.element,{matchingSelector:"label"});return e&&[this.element,null].includes(e.control)&&t.push(e),t}get disabled(){return console.warn("This browser does not support the [disabled] attribute for trix-editor elements."),!1}set disabled(t){console.warn("This browser does not support the [disabled] attribute for trix-editor elements.")}get required(){return console.warn("This browser does not support the [required] attribute for trix-editor elements."),!1}set required(t){console.warn("This browser does not support the [required] attribute for trix-editor elements.")}get validity(){return console.warn("This browser does not support the validity property for trix-editor elements."),null}get validationMessage(){return console.warn("This browser does not support the validationMessage property for trix-editor elements."),""}get willValidate(){return console.warn("This browser does not support the willValidate property for trix-editor elements."),!1}setFormValue(t){}checkValidity(){return console.warn("This browser does not support checkValidity() for trix-editor elements."),!0}reportValidity(){return console.warn("This browser does not support reportValidity() for trix-editor elements."),!0}setCustomValidity(t){console.warn("This browser does not support setCustomValidity(validationMessage) for trix-editor elements.")}},we=new WeakMap,ol=class extends HTMLElement{constructor(){super(),el(this,we,{writable:!0,value:void 0}),rb(this,we,this.constructor.formAssociated?new Um(this):new Gm(this))}get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++i_),this.trixId)}get labels(){return Pt(this,we).labels}get disabled(){return Pt(this,we).disabled}set disabled(t){Pt(this,we).disabled=t}get required(){return Pt(this,we).required}set required(t){Pt(this,we).required=t}get validity(){return Pt(this,we).validity}get validationMessage(){return Pt(this,we).validationMessage}get willValidate(){return Pt(this,we).willValidate}get type(){return this.localName}get toolbarElement(){var t;if(this.hasAttribute("toolbar"))return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("toolbar"));if(this.parentNode){let e="trix-toolbar-".concat(this.trixId);this.setAttribute("toolbar",e);let i=pt("trix-toolbar",{id:e});return this.parentNode.insertBefore(i,this),i}}get form(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.form}get inputElement(){var t;if(this.hasAttribute("input"))return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("input"));if(this.parentNode){let e="trix-input-".concat(this.trixId);this.setAttribute("input",e);let i=pt("input",{type:"hidden",id:e});return this.parentNode.insertBefore(i,this.nextElementSibling),i}}get editor(){var t;return(t=this.editorController)===null||t===void 0?void 0:t.editor}get name(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.name}get value(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.value}set value(t){var e;this.defaultValue=t,(e=this.editor)===null||e===void 0||e.loadHTML(this.defaultValue)}notify(t,e){if(this.editorController)return Za("trix-".concat(t),{onElement:this,attributes:e})}setFormValue(t){this.inputElement&&(this.inputElement.value=t,Pt(this,we).setFormValue(t))}connectedCallback(){this.hasAttribute("data-trix-internal")||(r_(this),function(t){t.hasAttribute("role")||t.setAttribute("role","textbox")}(this),this.editorController||(Za("trix-before-initialize",{onElement:this}),this.editorController=new $s({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>Za("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),Pt(this,we).connectedCallback(),function(t){!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t&&t.focus()}(this))}disconnectedCallback(){var t;(t=this.editorController)===null||t===void 0||t.unregisterSelectionManager(),Pt(this,we).disconnectedCallback()}checkValidity(){return Pt(this,we).checkValidity()}reportValidity(){return Pt(this,we).reportValidity()}setCustomValidity(t){Pt(this,we).setCustomValidity(t)}formDisabledCallback(t){this.inputElement&&(this.inputElement.disabled=t),this.toggleAttribute("contenteditable",!t)}formResetCallback(){this.reset()}reset(){this.value=this.defaultValue}};Ve(ol,"formAssociated","ElementInternals"in window);var Sr={VERSION:pF,config:ll,core:MB,models:Nk,views:NB,controllers:QB,observers:t_,operations:e_,elements:Object.freeze({__proto__:null,TrixEditorElement:ol,TrixToolbarElement:Tu}),filters:Object.freeze({__proto__:null,Filter:bu,attachmentGalleryFilter:qk})};Object.assign(Sr,Nk),window.Trix=Sr,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",Tu),customElements.get("trix-editor")||customElements.define("trix-editor",ol)},0);var{lang:At}=Sr.config,Ru=class extends J{static targets=["editor","foregroundColorPicker","backgroundColorPicker"];connect(){document.addEventListener("trix-before-initialize",()=>{this.initTrix()})}initTrix(){Sr.config.blockAttributes.heading1.tagName="h3",Sr.config.toolbar.getDefaultHTML=this.getDefaultHTML.bind(this),this.addForegroundButtonConfig(),this.addBackgroundButtonConfig(),this.addTextAlignCenterButtonConfig()}openForegroundColorPicker(){this.element.classList.add("picking-color"),this.foregroundColorPickerTarget.click()}openBackgroundColorPicker(){this.element.classList.add("picking-color"),this.backgroundColorPickerTarget.click()}foregroundColorChanged(){this.editorTarget.editor.activateAttribute("foregroundColor",this.foregroundColorPickerTarget.value),this.element.dispatchEvent(new CustomEvent("trix-change",{bubbles:!0}))}backgroundColorChanged(){this.editorTarget.editor.activateAttribute("backgroundColor",this.backgroundColorPickerTarget.value),this.element.dispatchEvent(new CustomEvent("trix-change",{bubbles:!0}))}addForegroundButtonConfig(){Sr.config.textAttributes.foregroundColor={styleProperty:"color",inheritable:!0}}addBackgroundButtonConfig(){Sr.config.textAttributes.backgroundColor={styleProperty:"backgroundColor",inheritable:!0}}addTextAlignCenterButtonConfig(){Sr.config.blockAttributes.textAlignCenter={tagName:"centered-div"}}getDefaultHTML(){return`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="${At.bold}" tabindex="-1">${At.bold}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="${At.italic}" tabindex="-1">${At.italic}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="${At.strike}" tabindex="-1">${At.strike}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="${At.link}" tabindex="-1">${At.link}</button>
        ${this.foregroundColorButtons}
        ${this.backgroundColorButtons}
      </span>
      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="${At.heading1}" tabindex="-1">${At.heading1}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="${At.quote}" tabindex="-1">${At.quote}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="${At.code}" tabindex="-1">${At.code}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="${At.bullets}" tabindex="-1">${At.bullets}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="${At.numbers}" tabindex="-1">${At.numbers}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="${At.outdent}" tabindex="-1">${At.outdent}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="${At.indent}" tabindex="-1">${At.indent}</button>
        ${this.textAlignButtons}
      </span>
      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="${At.attachFiles}" tabindex="-1">${At.attachFiles}</button>
      </span>
      <span class="trix-button-group-spacer"></span>
      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="${At.undo}" tabindex="-1">${At.undo}</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="${At.redo}" tabindex="-1">${At.redo}</button>
      </span>
    </div>
    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="${At.urlPlaceholder}" aria-label="${At.url}" required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="${At.link}" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="${At.unlink}" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`}get foregroundColorButtons(){return`<input type="color" style="width:0;height:0;padding:0;margin-top:20px;visibility:hidden"
                   data-trix-target="foregroundColorPicker" data-action="trix#foregroundColorChanged">
            <button type="button" class="trix-button" data-action="click->trix#openForegroundColorPicker" title="Text color">
              <span class="icon"><i class="fas fa-palette fa-lg"></i></span>
            </button>`}get backgroundColorButtons(){return`<input type="color" style="width:0;height:0;padding:0;margin-top:20px;visibility:hidden"
                   data-trix-target="backgroundColorPicker" data-action="trix#backgroundColorChanged">
            <button type="button" class="trix-button" data-action="click->trix#openBackgroundColorPicker" title="Text background color">
              <span class="icon"><i class="fas fa-fill-drip fa-lg"></i></span>
            </button>`}get textAlignButtons(){return`<button type="button" class="trix-button" data-trix-attribute="textAlignCenter">
              <span class="icon"><i class="fas fa-align-center fa-lg"></i></span>
            </button>`}};var Iu=class extends J{submit(r){r.target.form?r.target.form.requestSubmit():this.element.requestSubmit()}};mt.register("accordion",zl);mt.register("auto-submit",Hl);mt.register("button-editor",Wl);mt.register("button-preview",jl);mt.register("color-picker",Yl);mt.register("confetti",Vl);mt.register("countdown",Ul);mt.register("drag",Gl);mt.register("emoji-picker",$l);mt.register("form-fields",Kl);mt.register("form-submission",Zl);mt.register("hello",Jl);mt.register("image-upload",Ql);mt.register("module",tc);mt.register("modules-sortable",ec);mt.register("navbar",ic);mt.register("option-images",rc);mt.register("page-overlay",sc);mt.register("preview",nc);mt.register("pricing-toggle",oc);mt.register("progress-bar",ac);mt.register("progress-editor",lc);mt.register("quill-form",Eh);mt.register("quiz-builder",Th);mt.register("quiz-form",Lh);mt.register("select-options",Mh);mt.register("slug-checker",Rh);mt.register("sortable",Ih);mt.register("step-chart",Uh);mt.register("steps",Gh);mt.register("toast",$h);mt.register("tracking",Kh);mt.register("trix",Ru);mt.register("user-profile",Iu);
/*! Bundled license information:

@simonwep/pickr/dist/pickr.min.js:
  (*! Pickr 1.9.0 MIT | https://github.com/Simonwep/pickr *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.12
  Copyright © 2024 37signals LLC
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

apexcharts/dist/apexcharts.esm.js:
  (*!
   * ApexCharts v4.4.0
   * (c) 2018-2025 ApexCharts
   * Released under the MIT License.
   *)
  (*!
  * @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
  * @version 4.0.1
  * https://github.com/svgdotjs/svg.select.js
  *
  * @copyright Ulrich-Matthias Schäfer
  * @license MIT
  *
  * BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
  *)
  (*!
  * @svgdotjs/svg.resize.js - An extension for svg.js which allows to resize elements which are selected
  * @version 2.0.4
  * https://github.com/svgdotjs/svg.resize.js
  *
  * @copyright [object Object]
  * @license MIT
  *
  * BUILT: Fri Sep 13 2024 12:43:14 GMT+0200 (Central European Summer Time)
  *)

trix/dist/trix.esm.min.js:
  (*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE *)
*/
